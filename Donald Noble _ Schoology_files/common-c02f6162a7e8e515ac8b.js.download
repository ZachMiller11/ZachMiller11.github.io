!function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={exports:{},id:r,loaded:!1};return e[r].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var n={};return t.m=e,t.c=n,t.p="/assets/bundles/js/common/",t(0)}([function(e,t,n){e.exports=n(1)},function(e,t,n){"use strict";n(2),n(5),n(7),n(9),n(11),n(13),n(15),n(17),n(19),n(21),n(23),n(25),n(27),n(29),n(31),n(33),n(35),n(37),n(39),n(41),n(43),n(45),n(47),n(49),n(51),n(53),n(55),n(57),n(59),n(61),n(63),n(65),n(67),n(69),n(71),n(73),n(75),n(77),n(79),n(81),n(83),n(85),n(87),n(88),n(89),n(90),n(91),n(92),n(93)},function(e,t,n){n(3)(n(4))},function(e,t){e.exports=function(e){"function"==typeof execScript?execScript(e):eval.call(null,e)}},function(e,t){e.exports='/*! jQuery v1.10.2 | (c) 2005, 2013 jQuery Foundation, Inc. | jquery.org/license\n//@ sourceMappingURL=jquery-1.10.2.min.map\n*/\n(function(e,t){var n,r,i=typeof t,o=e.location,a=e.document,s=a.documentElement,l=e.jQuery,u=e.$,c={},p=[],f="1.10.2",d=p.concat,h=p.push,g=p.slice,m=p.indexOf,y=c.toString,v=c.hasOwnProperty,b=f.trim,x=function(e,t){return new x.fn.init(e,t,r)},w=/[+-]?(?:\\d*\\.|)\\d+(?:[eE][+-]?\\d+|)/.source,T=/\\S+/g,C=/^[\\s\\uFEFF\\xA0]+|[\\s\\uFEFF\\xA0]+$/g,N=/^(?:\\s*(<[\\w\\W]+>)[^>]*|#([\\w-]*))$/,k=/^<(\\w+)\\s*\\/?>(?:<\\/\\1>|)$/,E=/^[\\],:{}\\s]*$/,S=/(?:^|:|,)(?:\\s*\\[)+/g,A=/\\\\(?:["\\\\\\/bfnrt]|u[\\da-fA-F]{4})/g,j=/"[^"\\\\\\r\\n]*"|true|false|null|-?(?:\\d+\\.|)\\d+(?:[eE][+-]?\\d+|)/g,D=/^-ms-/,L=/-([\\da-z])/gi,H=function(e,t){return t.toUpperCase()},q=function(e){(a.addEventListener||"load"===e.type||"complete"===a.readyState)&&(_(),x.ready())},_=function(){a.addEventListener?(a.removeEventListener("DOMContentLoaded",q,!1),e.removeEventListener("load",q,!1)):(a.detachEvent("onreadystatechange",q),e.detachEvent("onload",q))};x.fn=x.prototype={jquery:f,constructor:x,init:function(e,n,r){var i,o;if(!e)return this;if("string"==typeof e){if(i="<"===e.charAt(0)&&">"===e.charAt(e.length-1)&&e.length>=3?[null,e,null]:N.exec(e),!i||!i[1]&&n)return!n||n.jquery?(n||r).find(e):this.constructor(n).find(e);if(i[1]){if(n=n instanceof x?n[0]:n,x.merge(this,x.parseHTML(i[1],n&&n.nodeType?n.ownerDocument||n:a,!0)),k.test(i[1])&&x.isPlainObject(n))for(i in n)x.isFunction(this[i])?this[i](n[i]):this.attr(i,n[i]);return this}if(o=a.getElementById(i[2]),o&&o.parentNode){if(o.id!==i[2])return r.find(e);this.length=1,this[0]=o}return this.context=a,this.selector=e,this}return e.nodeType?(this.context=this[0]=e,this.length=1,this):x.isFunction(e)?r.ready(e):(e.selector!==t&&(this.selector=e.selector,this.context=e.context),x.makeArray(e,this))},selector:"",length:0,toArray:function(){return g.call(this)},get:function(e){return null==e?this.toArray():0>e?this[this.length+e]:this[e]},pushStack:function(e){var t=x.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e,t){return x.each(this,e,t)},ready:function(e){return x.ready.promise().done(e),this},slice:function(){return this.pushStack(g.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(0>e?t:0);return this.pushStack(n>=0&&t>n?[this[n]]:[])},map:function(e){return this.pushStack(x.map(this,function(t,n){return e.call(t,n,t)}))},end:function(){return this.prevObject||this.constructor(null)},push:h,sort:[].sort,splice:[].splice},x.fn.init.prototype=x.fn,x.extend=x.fn.extend=function(){var e,n,r,i,o,a,s=arguments[0]||{},l=1,u=arguments.length,c=!1;for("boolean"==typeof s&&(c=s,s=arguments[1]||{},l=2),"object"==typeof s||x.isFunction(s)||(s={}),u===l&&(s=this,--l);u>l;l++)if(null!=(o=arguments[l]))for(i in o)e=s[i],r=o[i],s!==r&&(c&&r&&(x.isPlainObject(r)||(n=x.isArray(r)))?(n?(n=!1,a=e&&x.isArray(e)?e:[]):a=e&&x.isPlainObject(e)?e:{},s[i]=x.extend(c,a,r)):r!==t&&(s[i]=r));return s},x.extend({expando:"jQuery"+(f+Math.random()).replace(/\\D/g,""),noConflict:function(t){return e.$===x&&(e.$=u),t&&e.jQuery===x&&(e.jQuery=l),x},isReady:!1,readyWait:1,holdReady:function(e){e?x.readyWait++:x.ready(!0)},ready:function(e){if(e===!0?!--x.readyWait:!x.isReady){if(!a.body)return setTimeout(x.ready);x.isReady=!0,e!==!0&&--x.readyWait>0||(n.resolveWith(a,[x]),x.fn.trigger&&x(a).trigger("ready").off("ready"))}},isFunction:function(e){return"function"===x.type(e)},isArray:Array.isArray||function(e){return"array"===x.type(e)},isWindow:function(e){return null!=e&&e==e.window},isNumeric:function(e){return!isNaN(parseFloat(e))&&isFinite(e)},type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?c[y.call(e)]||"object":typeof e},isPlainObject:function(e){var n;if(!e||"object"!==x.type(e)||e.nodeType||x.isWindow(e))return!1;try{if(e.constructor&&!v.call(e,"constructor")&&!v.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(r){return!1}if(x.support.ownLast)for(n in e)return v.call(e,n);for(n in e);return n===t||v.call(e,n)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},error:function(e){throw Error(e)},parseHTML:function(e,t,n){if(!e||"string"!=typeof e)return null;"boolean"==typeof t&&(n=t,t=!1),t=t||a;var r=k.exec(e),i=!n&&[];return r?[t.createElement(r[1])]:(r=x.buildFragment([e],t,i),i&&x(i).remove(),x.merge([],r.childNodes))},parseJSON:function(n){return e.JSON&&e.JSON.parse?e.JSON.parse(n):null===n?n:"string"==typeof n&&(n=x.trim(n),n&&E.test(n.replace(A,"@").replace(j,"]").replace(S,"")))?Function("return "+n)():(x.error("Invalid JSON: "+n),t)},parseXML:function(n){var r,i;if(!n||"string"!=typeof n)return null;try{e.DOMParser?(i=new DOMParser,r=i.parseFromString(n,"text/xml")):(r=new ActiveXObject("Microsoft.XMLDOM"),r.async="false",r.loadXML(n))}catch(o){r=t}return r&&r.documentElement&&!r.getElementsByTagName("parsererror").length||x.error("Invalid XML: "+n),r},noop:function(){},globalEval:function(t){t&&x.trim(t)&&(e.execScript||function(t){e.eval.call(e,t)})(t)},camelCase:function(e){return e.replace(D,"ms-").replace(L,H)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t,n){var r,i=0,o=e.length,a=M(e);if(n){if(a){for(;o>i;i++)if(r=t.apply(e[i],n),r===!1)break}else for(i in e)if(r=t.apply(e[i],n),r===!1)break}else if(a){for(;o>i;i++)if(r=t.call(e[i],i,e[i]),r===!1)break}else for(i in e)if(r=t.call(e[i],i,e[i]),r===!1)break;return e},trim:b&&!b.call("\\ufeff\\u00a0")?function(e){return null==e?"":b.call(e)}:function(e){return null==e?"":(e+"").replace(C,"")},makeArray:function(e,t){var n=t||[];return null!=e&&(M(Object(e))?x.merge(n,"string"==typeof e?[e]:e):h.call(n,e)),n},inArray:function(e,t,n){var r;if(t){if(m)return m.call(t,e,n);for(r=t.length,n=n?0>n?Math.max(0,r+n):n:0;r>n;n++)if(n in t&&t[n]===e)return n}return-1},merge:function(e,n){var r=n.length,i=e.length,o=0;if("number"==typeof r)for(;r>o;o++)e[i++]=n[o];else while(n[o]!==t)e[i++]=n[o++];return e.length=i,e},grep:function(e,t,n){var r,i=[],o=0,a=e.length;for(n=!!n;a>o;o++)r=!!t(e[o],o),n!==r&&i.push(e[o]);return i},map:function(e,t,n){var r,i=0,o=e.length,a=M(e),s=[];if(a)for(;o>i;i++)r=t(e[i],i,n),null!=r&&(s[s.length]=r);else for(i in e)r=t(e[i],i,n),null!=r&&(s[s.length]=r);return d.apply([],s)},guid:1,proxy:function(e,n){var r,i,o;return"string"==typeof n&&(o=e[n],n=e,e=o),x.isFunction(e)?(r=g.call(arguments,2),i=function(){return e.apply(n||this,r.concat(g.call(arguments)))},i.guid=e.guid=e.guid||x.guid++,i):t},access:function(e,n,r,i,o,a,s){var l=0,u=e.length,c=null==r;if("object"===x.type(r)){o=!0;for(l in r)x.access(e,n,l,r[l],!0,a,s)}else if(i!==t&&(o=!0,x.isFunction(i)||(s=!0),c&&(s?(n.call(e,i),n=null):(c=n,n=function(e,t,n){return c.call(x(e),n)})),n))for(;u>l;l++)n(e[l],r,s?i:i.call(e[l],l,n(e[l],r)));return o?e:c?n.call(e):u?n(e[0],r):a},now:function(){return(new Date).getTime()},swap:function(e,t,n,r){var i,o,a={};for(o in t)a[o]=e.style[o],e.style[o]=t[o];i=n.apply(e,r||[]);for(o in t)e.style[o]=a[o];return i}}),x.ready.promise=function(t){if(!n)if(n=x.Deferred(),"complete"===a.readyState)setTimeout(x.ready);else if(a.addEventListener)a.addEventListener("DOMContentLoaded",q,!1),e.addEventListener("load",q,!1);else{a.attachEvent("onreadystatechange",q),e.attachEvent("onload",q);var r=!1;try{r=null==e.frameElement&&a.documentElement}catch(i){}r&&r.doScroll&&function o(){if(!x.isReady){try{r.doScroll("left")}catch(e){return setTimeout(o,50)}_(),x.ready()}}()}return n.promise(t)},x.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){c["[object "+t+"]"]=t.toLowerCase()});function M(e){var t=e.length,n=x.type(e);return x.isWindow(e)?!1:1===e.nodeType&&t?!0:"array"===n||"function"!==n&&(0===t||"number"==typeof t&&t>0&&t-1 in e)}r=x(a),function(e,t){var n,r,i,o,a,s,l,u,c,p,f,d,h,g,m,y,v,b="sizzle"+-new Date,w=e.document,T=0,C=0,N=st(),k=st(),E=st(),S=!1,A=function(e,t){return e===t?(S=!0,0):0},j=typeof t,D=1<<31,L={}.hasOwnProperty,H=[],q=H.pop,_=H.push,M=H.push,O=H.slice,F=H.indexOf||function(e){var t=0,n=this.length;for(;n>t;t++)if(this[t]===e)return t;return-1},B="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",P="[\\\\x20\\\\t\\\\r\\\\n\\\\f]",R="(?:\\\\\\\\.|[\\\\w-]|[^\\\\x00-\\\\xa0])+",W=R.replace("w","w#"),$="\\\\["+P+"*("+R+")"+P+"*(?:([*^$|!~]?=)"+P+"*(?:([\'\\"])((?:\\\\\\\\.|[^\\\\\\\\])*?)\\\\3|("+W+")|)|)"+P+"*\\\\]",I=":("+R+")(?:\\\\((([\'\\"])((?:\\\\\\\\.|[^\\\\\\\\])*?)\\\\3|((?:\\\\\\\\.|[^\\\\\\\\()[\\\\]]|"+$.replace(3,8)+")*)|.*)\\\\)|)",z=RegExp("^"+P+"+|((?:^|[^\\\\\\\\])(?:\\\\\\\\.)*)"+P+"+$","g"),X=RegExp("^"+P+"*,"+P+"*"),U=RegExp("^"+P+"*([>+~]|"+P+")"+P+"*"),V=RegExp(P+"*[+~]"),Y=RegExp("="+P+"*([^\\\\]\'\\"]*)"+P+"*\\\\]","g"),J=RegExp(I),G=RegExp("^"+W+"$"),Q={ID:RegExp("^#("+R+")"),CLASS:RegExp("^\\\\.("+R+")"),TAG:RegExp("^("+R.replace("w","w*")+")"),ATTR:RegExp("^"+$),PSEUDO:RegExp("^"+I),CHILD:RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\\\("+P+"*(even|odd|(([+-]|)(\\\\d*)n|)"+P+"*(?:([+-]|)"+P+"*(\\\\d+)|))"+P+"*\\\\)|)","i"),bool:RegExp("^(?:"+B+")$","i"),needsContext:RegExp("^"+P+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\\\("+P+"*((?:-\\\\d)?\\\\d*)"+P+"*\\\\)|)(?=[^-]|$)","i")},K=/^[^{]+\\{\\s*\\[native \\w/,Z=/^(?:#([\\w-]+)|(\\w+)|\\.([\\w-]+))$/,et=/^(?:input|select|textarea|button)$/i,tt=/^h\\d$/i,nt=/\'|\\\\/g,rt=RegExp("\\\\\\\\([\\\\da-f]{1,6}"+P+"?|("+P+")|.)","ig"),it=function(e,t,n){var r="0x"+t-65536;return r!==r||n?t:0>r?String.fromCharCode(r+65536):String.fromCharCode(55296|r>>10,56320|1023&r)};try{M.apply(H=O.call(w.childNodes),w.childNodes),H[w.childNodes.length].nodeType}catch(ot){M={apply:H.length?function(e,t){_.apply(e,O.call(t))}:function(e,t){var n=e.length,r=0;while(e[n++]=t[r++]);e.length=n-1}}}function at(e,t,n,i){var o,a,s,l,u,c,d,m,y,x;if((t?t.ownerDocument||t:w)!==f&&p(t),t=t||f,n=n||[],!e||"string"!=typeof e)return n;if(1!==(l=t.nodeType)&&9!==l)return[];if(h&&!i){if(o=Z.exec(e))if(s=o[1]){if(9===l){if(a=t.getElementById(s),!a||!a.parentNode)return n;if(a.id===s)return n.push(a),n}else if(t.ownerDocument&&(a=t.ownerDocument.getElementById(s))&&v(t,a)&&a.id===s)return n.push(a),n}else{if(o[2])return M.apply(n,t.getElementsByTagName(e)),n;if((s=o[3])&&r.getElementsByClassName&&t.getElementsByClassName)return M.apply(n,t.getElementsByClassName(s)),n}if(r.qsa&&(!g||!g.test(e))){if(m=d=b,y=t,x=9===l&&e,1===l&&"object"!==t.nodeName.toLowerCase()){c=mt(e),(d=t.getAttribute("id"))?m=d.replace(nt,"\\\\$&"):t.setAttribute("id",m),m="[id=\'"+m+"\'] ",u=c.length;while(u--)c[u]=m+yt(c[u]);y=V.test(e)&&t.parentNode||t,x=c.join(",")}if(x)try{return M.apply(n,y.querySelectorAll(x)),n}catch(T){}finally{d||t.removeAttribute("id")}}}return kt(e.replace(z,"$1"),t,n,i)}function st(){var e=[];function t(n,r){return e.push(n+=" ")>o.cacheLength&&delete t[e.shift()],t[n]=r}return t}function lt(e){return e[b]=!0,e}function ut(e){var t=f.createElement("div");try{return!!e(t)}catch(n){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function ct(e,t){var n=e.split("|"),r=e.length;while(r--)o.attrHandle[n[r]]=t}function pt(e,t){var n=t&&e,r=n&&1===e.nodeType&&1===t.nodeType&&(~t.sourceIndex||D)-(~e.sourceIndex||D);if(r)return r;if(n)while(n=n.nextSibling)if(n===t)return-1;return e?1:-1}function ft(e){return function(t){var n=t.nodeName.toLowerCase();return"input"===n&&t.type===e}}function dt(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function ht(e){return lt(function(t){return t=+t,lt(function(n,r){var i,o=e([],n.length,t),a=o.length;while(a--)n[i=o[a]]&&(n[i]=!(r[i]=n[i]))})})}s=at.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return t?"HTML"!==t.nodeName:!1},r=at.support={},p=at.setDocument=function(e){var n=e?e.ownerDocument||e:w,i=n.defaultView;return n!==f&&9===n.nodeType&&n.documentElement?(f=n,d=n.documentElement,h=!s(n),i&&i.attachEvent&&i!==i.top&&i.attachEvent("onbeforeunload",function(){p()}),r.attributes=ut(function(e){return e.className="i",!e.getAttribute("className")}),r.getElementsByTagName=ut(function(e){return e.appendChild(n.createComment("")),!e.getElementsByTagName("*").length}),r.getElementsByClassName=ut(function(e){return e.innerHTML="<div class=\'a\'></div><div class=\'a i\'></div>",e.firstChild.className="i",2===e.getElementsByClassName("i").length}),r.getById=ut(function(e){return d.appendChild(e).id=b,!n.getElementsByName||!n.getElementsByName(b).length}),r.getById?(o.find.ID=function(e,t){if(typeof t.getElementById!==j&&h){var n=t.getElementById(e);return n&&n.parentNode?[n]:[]}},o.filter.ID=function(e){var t=e.replace(rt,it);return function(e){return e.getAttribute("id")===t}}):(delete o.find.ID,o.filter.ID=function(e){var t=e.replace(rt,it);return function(e){var n=typeof e.getAttributeNode!==j&&e.getAttributeNode("id");return n&&n.value===t}}),o.find.TAG=r.getElementsByTagName?function(e,n){return typeof n.getElementsByTagName!==j?n.getElementsByTagName(e):t}:function(e,t){var n,r=[],i=0,o=t.getElementsByTagName(e);if("*"===e){while(n=o[i++])1===n.nodeType&&r.push(n);return r}return o},o.find.CLASS=r.getElementsByClassName&&function(e,n){return typeof n.getElementsByClassName!==j&&h?n.getElementsByClassName(e):t},m=[],g=[],(r.qsa=K.test(n.querySelectorAll))&&(ut(function(e){e.innerHTML="<select><option selected=\'\'></option></select>",e.querySelectorAll("[selected]").length||g.push("\\\\["+P+"*(?:value|"+B+")"),e.querySelectorAll(":checked").length||g.push(":checked")}),ut(function(e){var t=n.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("t",""),e.querySelectorAll("[t^=\'\']").length&&g.push("[*^$]="+P+"*(?:\'\'|\\"\\")"),e.querySelectorAll(":enabled").length||g.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),g.push(",.*:")})),(r.matchesSelector=K.test(y=d.webkitMatchesSelector||d.mozMatchesSelector||d.oMatchesSelector||d.msMatchesSelector))&&ut(function(e){r.disconnectedMatch=y.call(e,"div"),y.call(e,"[s!=\'\']:x"),m.push("!=",I)}),g=g.length&&RegExp(g.join("|")),m=m.length&&RegExp(m.join("|")),v=K.test(d.contains)||d.compareDocumentPosition?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r)))}:function(e,t){if(t)while(t=t.parentNode)if(t===e)return!0;return!1},A=d.compareDocumentPosition?function(e,t){if(e===t)return S=!0,0;var i=t.compareDocumentPosition&&e.compareDocumentPosition&&e.compareDocumentPosition(t);return i?1&i||!r.sortDetached&&t.compareDocumentPosition(e)===i?e===n||v(w,e)?-1:t===n||v(w,t)?1:c?F.call(c,e)-F.call(c,t):0:4&i?-1:1:e.compareDocumentPosition?-1:1}:function(e,t){var r,i=0,o=e.parentNode,a=t.parentNode,s=[e],l=[t];if(e===t)return S=!0,0;if(!o||!a)return e===n?-1:t===n?1:o?-1:a?1:c?F.call(c,e)-F.call(c,t):0;if(o===a)return pt(e,t);r=e;while(r=r.parentNode)s.unshift(r);r=t;while(r=r.parentNode)l.unshift(r);while(s[i]===l[i])i++;return i?pt(s[i],l[i]):s[i]===w?-1:l[i]===w?1:0},n):f},at.matches=function(e,t){return at(e,null,null,t)},at.matchesSelector=function(e,t){if((e.ownerDocument||e)!==f&&p(e),t=t.replace(Y,"=\'$1\']"),!(!r.matchesSelector||!h||m&&m.test(t)||g&&g.test(t)))try{var n=y.call(e,t);if(n||r.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(i){}return at(t,f,null,[e]).length>0},at.contains=function(e,t){return(e.ownerDocument||e)!==f&&p(e),v(e,t)},at.attr=function(e,n){(e.ownerDocument||e)!==f&&p(e);var i=o.attrHandle[n.toLowerCase()],a=i&&L.call(o.attrHandle,n.toLowerCase())?i(e,n,!h):t;return a===t?r.attributes||!h?e.getAttribute(n):(a=e.getAttributeNode(n))&&a.specified?a.value:null:a},at.error=function(e){throw Error("Syntax error, unrecognized expression: "+e)},at.uniqueSort=function(e){var t,n=[],i=0,o=0;if(S=!r.detectDuplicates,c=!r.sortStable&&e.slice(0),e.sort(A),S){while(t=e[o++])t===e[o]&&(i=n.push(o));while(i--)e.splice(n[i],1)}return e},a=at.getText=function(e){var t,n="",r=0,i=e.nodeType;if(i){if(1===i||9===i||11===i){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=a(e)}else if(3===i||4===i)return e.nodeValue}else for(;t=e[r];r++)n+=a(t);return n},o=at.selectors={cacheLength:50,createPseudo:lt,match:Q,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(rt,it),e[3]=(e[4]||e[5]||"").replace(rt,it),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||at.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&at.error(e[0]),e},PSEUDO:function(e){var n,r=!e[5]&&e[2];return Q.CHILD.test(e[0])?null:(e[3]&&e[4]!==t?e[2]=e[4]:r&&J.test(r)&&(n=mt(r,!0))&&(n=r.indexOf(")",r.length-n)-r.length)&&(e[0]=e[0].slice(0,n),e[2]=r.slice(0,n)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(rt,it).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=N[e+" "];return t||(t=RegExp("(^|"+P+")"+e+"("+P+"|$)"))&&N(e,function(e){return t.test("string"==typeof e.className&&e.className||typeof e.getAttribute!==j&&e.getAttribute("class")||"")})},ATTR:function(e,t,n){return function(r){var i=at.attr(r,e);return null==i?"!="===t:t?(i+="","="===t?i===n:"!="===t?i!==n:"^="===t?n&&0===i.indexOf(n):"*="===t?n&&i.indexOf(n)>-1:"$="===t?n&&i.slice(-n.length)===n:"~="===t?(" "+i+" ").indexOf(n)>-1:"|="===t?i===n||i.slice(0,n.length+1)===n+"-":!1):!0}},CHILD:function(e,t,n,r,i){var o="nth"!==e.slice(0,3),a="last"!==e.slice(-4),s="of-type"===t;return 1===r&&0===i?function(e){return!!e.parentNode}:function(t,n,l){var u,c,p,f,d,h,g=o!==a?"nextSibling":"previousSibling",m=t.parentNode,y=s&&t.nodeName.toLowerCase(),v=!l&&!s;if(m){if(o){while(g){p=t;while(p=p[g])if(s?p.nodeName.toLowerCase()===y:1===p.nodeType)return!1;h=g="only"===e&&!h&&"nextSibling"}return!0}if(h=[a?m.firstChild:m.lastChild],a&&v){c=m[b]||(m[b]={}),u=c[e]||[],d=u[0]===T&&u[1],f=u[0]===T&&u[2],p=d&&m.childNodes[d];while(p=++d&&p&&p[g]||(f=d=0)||h.pop())if(1===p.nodeType&&++f&&p===t){c[e]=[T,d,f];break}}else if(v&&(u=(t[b]||(t[b]={}))[e])&&u[0]===T)f=u[1];else while(p=++d&&p&&p[g]||(f=d=0)||h.pop())if((s?p.nodeName.toLowerCase()===y:1===p.nodeType)&&++f&&(v&&((p[b]||(p[b]={}))[e]=[T,f]),p===t))break;return f-=i,f===r||0===f%r&&f/r>=0}}},PSEUDO:function(e,t){var n,r=o.pseudos[e]||o.setFilters[e.toLowerCase()]||at.error("unsupported pseudo: "+e);return r[b]?r(t):r.length>1?(n=[e,e,"",t],o.setFilters.hasOwnProperty(e.toLowerCase())?lt(function(e,n){var i,o=r(e,t),a=o.length;while(a--)i=F.call(e,o[a]),e[i]=!(n[i]=o[a])}):function(e){return r(e,0,n)}):r}},pseudos:{not:lt(function(e){var t=[],n=[],r=l(e.replace(z,"$1"));return r[b]?lt(function(e,t,n,i){var o,a=r(e,null,i,[]),s=e.length;while(s--)(o=a[s])&&(e[s]=!(t[s]=o))}):function(e,i,o){return t[0]=e,r(t,null,o,n),!n.pop()}}),has:lt(function(e){return function(t){return at(e,t).length>0}}),contains:lt(function(e){return function(t){return(t.textContent||t.innerText||a(t)).indexOf(e)>-1}}),lang:lt(function(e){return G.test(e||"")||at.error("unsupported lang: "+e),e=e.replace(rt,it).toLowerCase(),function(t){var n;do if(n=h?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return n=n.toLowerCase(),n===e||0===n.indexOf(e+"-");while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===d},focus:function(e){return e===f.activeElement&&(!f.hasFocus||f.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeName>"@"||3===e.nodeType||4===e.nodeType)return!1;return!0},parent:function(e){return!o.pseudos.empty(e)},header:function(e){return tt.test(e.nodeName)},input:function(e){return et.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||t.toLowerCase()===e.type)},first:ht(function(){return[0]}),last:ht(function(e,t){return[t-1]}),eq:ht(function(e,t,n){return[0>n?n+t:n]}),even:ht(function(e,t){var n=0;for(;t>n;n+=2)e.push(n);return e}),odd:ht(function(e,t){var n=1;for(;t>n;n+=2)e.push(n);return e}),lt:ht(function(e,t,n){var r=0>n?n+t:n;for(;--r>=0;)e.push(r);return e}),gt:ht(function(e,t,n){var r=0>n?n+t:n;for(;t>++r;)e.push(r);return e})}},o.pseudos.nth=o.pseudos.eq;for(n in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})o.pseudos[n]=ft(n);for(n in{submit:!0,reset:!0})o.pseudos[n]=dt(n);function gt(){}gt.prototype=o.filters=o.pseudos,o.setFilters=new gt;function mt(e,t){var n,r,i,a,s,l,u,c=k[e+" "];if(c)return t?0:c.slice(0);s=e,l=[],u=o.preFilter;while(s){(!n||(r=X.exec(s)))&&(r&&(s=s.slice(r[0].length)||s),l.push(i=[])),n=!1,(r=U.exec(s))&&(n=r.shift(),i.push({value:n,type:r[0].replace(z," ")}),s=s.slice(n.length));for(a in o.filter)!(r=Q[a].exec(s))||u[a]&&!(r=u[a](r))||(n=r.shift(),i.push({value:n,type:a,matches:r}),s=s.slice(n.length));if(!n)break}return t?s.length:s?at.error(e):k(e,l).slice(0)}function yt(e){var t=0,n=e.length,r="";for(;n>t;t++)r+=e[t].value;return r}function vt(e,t,n){var r=t.dir,o=n&&"parentNode"===r,a=C++;return t.first?function(t,n,i){while(t=t[r])if(1===t.nodeType||o)return e(t,n,i)}:function(t,n,s){var l,u,c,p=T+" "+a;if(s){while(t=t[r])if((1===t.nodeType||o)&&e(t,n,s))return!0}else while(t=t[r])if(1===t.nodeType||o)if(c=t[b]||(t[b]={}),(u=c[r])&&u[0]===p){if((l=u[1])===!0||l===i)return l===!0}else if(u=c[r]=[p],u[1]=e(t,n,s)||i,u[1]===!0)return!0}}function bt(e){return e.length>1?function(t,n,r){var i=e.length;while(i--)if(!e[i](t,n,r))return!1;return!0}:e[0]}function xt(e,t,n,r,i){var o,a=[],s=0,l=e.length,u=null!=t;for(;l>s;s++)(o=e[s])&&(!n||n(o,r,i))&&(a.push(o),u&&t.push(s));return a}function wt(e,t,n,r,i,o){return r&&!r[b]&&(r=wt(r)),i&&!i[b]&&(i=wt(i,o)),lt(function(o,a,s,l){var u,c,p,f=[],d=[],h=a.length,g=o||Nt(t||"*",s.nodeType?[s]:s,[]),m=!e||!o&&t?g:xt(g,f,e,s,l),y=n?i||(o?e:h||r)?[]:a:m;if(n&&n(m,y,s,l),r){u=xt(y,d),r(u,[],s,l),c=u.length;while(c--)(p=u[c])&&(y[d[c]]=!(m[d[c]]=p))}if(o){if(i||e){if(i){u=[],c=y.length;while(c--)(p=y[c])&&u.push(m[c]=p);i(null,y=[],u,l)}c=y.length;while(c--)(p=y[c])&&(u=i?F.call(o,p):f[c])>-1&&(o[u]=!(a[u]=p))}}else y=xt(y===a?y.splice(h,y.length):y),i?i(null,a,y,l):M.apply(a,y)})}function Tt(e){var t,n,r,i=e.length,a=o.relative[e[0].type],s=a||o.relative[" "],l=a?1:0,c=vt(function(e){return e===t},s,!0),p=vt(function(e){return F.call(t,e)>-1},s,!0),f=[function(e,n,r){return!a&&(r||n!==u)||((t=n).nodeType?c(e,n,r):p(e,n,r))}];for(;i>l;l++)if(n=o.relative[e[l].type])f=[vt(bt(f),n)];else{if(n=o.filter[e[l].type].apply(null,e[l].matches),n[b]){for(r=++l;i>r;r++)if(o.relative[e[r].type])break;return wt(l>1&&bt(f),l>1&&yt(e.slice(0,l-1).concat({value:" "===e[l-2].type?"*":""})).replace(z,"$1"),n,r>l&&Tt(e.slice(l,r)),i>r&&Tt(e=e.slice(r)),i>r&&yt(e))}f.push(n)}return bt(f)}function Ct(e,t){var n=0,r=t.length>0,a=e.length>0,s=function(s,l,c,p,d){var h,g,m,y=[],v=0,b="0",x=s&&[],w=null!=d,C=u,N=s||a&&o.find.TAG("*",d&&l.parentNode||l),k=T+=null==C?1:Math.random()||.1;for(w&&(u=l!==f&&l,i=n);null!=(h=N[b]);b++){if(a&&h){g=0;while(m=e[g++])if(m(h,l,c)){p.push(h);break}w&&(T=k,i=++n)}r&&((h=!m&&h)&&v--,s&&x.push(h))}if(v+=b,r&&b!==v){g=0;while(m=t[g++])m(x,y,l,c);if(s){if(v>0)while(b--)x[b]||y[b]||(y[b]=q.call(p));y=xt(y)}M.apply(p,y),w&&!s&&y.length>0&&v+t.length>1&&at.uniqueSort(p)}return w&&(T=k,u=C),x};return r?lt(s):s}l=at.compile=function(e,t){var n,r=[],i=[],o=E[e+" "];if(!o){t||(t=mt(e)),n=t.length;while(n--)o=Tt(t[n]),o[b]?r.push(o):i.push(o);o=E(e,Ct(i,r))}return o};function Nt(e,t,n){var r=0,i=t.length;for(;i>r;r++)at(e,t[r],n);return n}function kt(e,t,n,i){var a,s,u,c,p,f=mt(e);if(!i&&1===f.length){if(s=f[0]=f[0].slice(0),s.length>2&&"ID"===(u=s[0]).type&&r.getById&&9===t.nodeType&&h&&o.relative[s[1].type]){if(t=(o.find.ID(u.matches[0].replace(rt,it),t)||[])[0],!t)return n;e=e.slice(s.shift().value.length)}a=Q.needsContext.test(e)?0:s.length;while(a--){if(u=s[a],o.relative[c=u.type])break;if((p=o.find[c])&&(i=p(u.matches[0].replace(rt,it),V.test(s[0].type)&&t.parentNode||t))){if(s.splice(a,1),e=i.length&&yt(s),!e)return M.apply(n,i),n;break}}}return l(e,f)(i,t,!h,n,V.test(e)),n}r.sortStable=b.split("").sort(A).join("")===b,r.detectDuplicates=S,p(),r.sortDetached=ut(function(e){return 1&e.compareDocumentPosition(f.createElement("div"))}),ut(function(e){return e.innerHTML="<a href=\'#\'></a>","#"===e.firstChild.getAttribute("href")})||ct("type|href|height|width",function(e,n,r){return r?t:e.getAttribute(n,"type"===n.toLowerCase()?1:2)}),r.attributes&&ut(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||ct("value",function(e,n,r){return r||"input"!==e.nodeName.toLowerCase()?t:e.defaultValue}),ut(function(e){return null==e.getAttribute("disabled")})||ct(B,function(e,n,r){var i;return r?t:(i=e.getAttributeNode(n))&&i.specified?i.value:e[n]===!0?n.toLowerCase():null}),x.find=at,x.expr=at.selectors,x.expr[":"]=x.expr.pseudos,x.unique=at.uniqueSort,x.text=at.getText,x.isXMLDoc=at.isXML,x.contains=at.contains}(e);var O={};function F(e){var t=O[e]={};return x.each(e.match(T)||[],function(e,n){t[n]=!0}),t}x.Callbacks=function(e){e="string"==typeof e?O[e]||F(e):x.extend({},e);var n,r,i,o,a,s,l=[],u=!e.once&&[],c=function(t){for(r=e.memory&&t,i=!0,a=s||0,s=0,o=l.length,n=!0;l&&o>a;a++)if(l[a].apply(t[0],t[1])===!1&&e.stopOnFalse){r=!1;break}n=!1,l&&(u?u.length&&c(u.shift()):r?l=[]:p.disable())},p={add:function(){if(l){var t=l.length;(function i(t){x.each(t,function(t,n){var r=x.type(n);"function"===r?e.unique&&p.has(n)||l.push(n):n&&n.length&&"string"!==r&&i(n)})})(arguments),n?o=l.length:r&&(s=t,c(r))}return this},remove:function(){return l&&x.each(arguments,function(e,t){var r;while((r=x.inArray(t,l,r))>-1)l.splice(r,1),n&&(o>=r&&o--,a>=r&&a--)}),this},has:function(e){return e?x.inArray(e,l)>-1:!(!l||!l.length)},empty:function(){return l=[],o=0,this},disable:function(){return l=u=r=t,this},disabled:function(){return!l},lock:function(){return u=t,r||p.disable(),this},locked:function(){return!u},fireWith:function(e,t){return!l||i&&!u||(t=t||[],t=[e,t.slice?t.slice():t],n?u.push(t):c(t)),this},fire:function(){return p.fireWith(this,arguments),this},fired:function(){return!!i}};return p},x.extend({Deferred:function(e){var t=[["resolve","done",x.Callbacks("once memory"),"resolved"],["reject","fail",x.Callbacks("once memory"),"rejected"],["notify","progress",x.Callbacks("memory")]],n="pending",r={state:function(){return n},always:function(){return i.done(arguments).fail(arguments),this},then:function(){var e=arguments;return x.Deferred(function(n){x.each(t,function(t,o){var a=o[0],s=x.isFunction(e[t])&&e[t];i[o[1]](function(){var e=s&&s.apply(this,arguments);e&&x.isFunction(e.promise)?e.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[a+"With"](this===r?n.promise():this,s?[e]:arguments)})}),e=null}).promise()},promise:function(e){return null!=e?x.extend(e,r):r}},i={};return r.pipe=r.then,x.each(t,function(e,o){var a=o[2],s=o[3];r[o[1]]=a.add,s&&a.add(function(){n=s},t[1^e][2].disable,t[2][2].lock),i[o[0]]=function(){return i[o[0]+"With"](this===i?r:this,arguments),this},i[o[0]+"With"]=a.fireWith}),r.promise(i),e&&e.call(i,i),i},when:function(e){var t=0,n=g.call(arguments),r=n.length,i=1!==r||e&&x.isFunction(e.promise)?r:0,o=1===i?e:x.Deferred(),a=function(e,t,n){return function(r){t[e]=this,n[e]=arguments.length>1?g.call(arguments):r,n===s?o.notifyWith(t,n):--i||o.resolveWith(t,n)}},s,l,u;if(r>1)for(s=Array(r),l=Array(r),u=Array(r);r>t;t++)n[t]&&x.isFunction(n[t].promise)?n[t].promise().done(a(t,u,n)).fail(o.reject).progress(a(t,l,s)):--i;return i||o.resolveWith(u,n),o.promise()}}),x.support=function(t){var n,r,o,s,l,u,c,p,f,d=a.createElement("div");if(d.setAttribute("className","t"),d.innerHTML="  <link/><table></table><a href=\'/a\'>a</a><input type=\'checkbox\'/>",n=d.getElementsByTagName("*")||[],r=d.getElementsByTagName("a")[0],!r||!r.style||!n.length)return t;s=a.createElement("select"),u=s.appendChild(a.createElement("option")),o=d.getElementsByTagName("input")[0],r.style.cssText="top:1px;float:left;opacity:.5",t.getSetAttribute="t"!==d.className,t.leadingWhitespace=3===d.firstChild.nodeType,t.tbody=!d.getElementsByTagName("tbody").length,t.htmlSerialize=!!d.getElementsByTagName("link").length,t.style=/top/.test(r.getAttribute("style")),t.hrefNormalized="/a"===r.getAttribute("href"),t.opacity=/^0.5/.test(r.style.opacity),t.cssFloat=!!r.style.cssFloat,t.checkOn=!!o.value,t.optSelected=u.selected,t.enctype=!!a.createElement("form").enctype,t.html5Clone="<:nav></:nav>"!==a.createElement("nav").cloneNode(!0).outerHTML,t.inlineBlockNeedsLayout=!1,t.shrinkWrapBlocks=!1,t.pixelPosition=!1,t.deleteExpando=!0,t.noCloneEvent=!0,t.reliableMarginRight=!0,t.boxSizingReliable=!0,o.checked=!0,t.noCloneChecked=o.cloneNode(!0).checked,s.disabled=!0,t.optDisabled=!u.disabled;try{delete d.test}catch(h){t.deleteExpando=!1}o=a.createElement("input"),o.setAttribute("value",""),t.input=""===o.getAttribute("value"),o.value="t",o.setAttribute("type","radio"),t.radioValue="t"===o.value,o.setAttribute("checked","t"),o.setAttribute("name","t"),l=a.createDocumentFragment(),l.appendChild(o),t.appendChecked=o.checked,t.checkClone=l.cloneNode(!0).cloneNode(!0).lastChild.checked,d.attachEvent&&(d.attachEvent("onclick",function(){t.noCloneEvent=!1}),d.cloneNode(!0).click());for(f in{submit:!0,change:!0,focusin:!0})d.setAttribute(c="on"+f,"t"),t[f+"Bubbles"]=c in e||d.attributes[c].expando===!1;d.style.backgroundClip="content-box",d.cloneNode(!0).style.backgroundClip="",t.clearCloneStyle="content-box"===d.style.backgroundClip;for(f in x(t))break;return t.ownLast="0"!==f,x(function(){var n,r,o,s="padding:0;margin:0;border:0;display:block;box-sizing:content-box;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;",l=a.getElementsByTagName("body")[0];l&&(n=a.createElement("div"),n.style.cssText="border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px",l.appendChild(n).appendChild(d),d.innerHTML="<table><tr><td></td><td>t</td></tr></table>",o=d.getElementsByTagName("td"),o[0].style.cssText="padding:0;margin:0;border:0;display:none",p=0===o[0].offsetHeight,o[0].style.display="",o[1].style.display="none",t.reliableHiddenOffsets=p&&0===o[0].offsetHeight,d.innerHTML="",d.style.cssText="box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;",x.swap(l,null!=l.style.zoom?{zoom:1}:{},function(){t.boxSizing=4===d.offsetWidth}),e.getComputedStyle&&(t.pixelPosition="1%"!==(e.getComputedStyle(d,null)||{}).top,t.boxSizingReliable="4px"===(e.getComputedStyle(d,null)||{width:"4px"}).width,r=d.appendChild(a.createElement("div")),r.style.cssText=d.style.cssText=s,r.style.marginRight=r.style.width="0",d.style.width="1px",t.reliableMarginRight=!parseFloat((e.getComputedStyle(r,null)||{}).marginRight)),typeof d.style.zoom!==i&&(d.innerHTML="",d.style.cssText=s+"width:1px;padding:1px;display:inline;zoom:1",t.inlineBlockNeedsLayout=3===d.offsetWidth,d.style.display="block",d.innerHTML="<div></div>",d.firstChild.style.width="5px",t.shrinkWrapBlocks=3!==d.offsetWidth,t.inlineBlockNeedsLayout&&(l.style.zoom=1)),l.removeChild(n),n=d=o=r=null)}),n=s=l=u=r=o=null,t\n}({});var B=/(?:\\{[\\s\\S]*\\}|\\[[\\s\\S]*\\])$/,P=/([A-Z])/g;function R(e,n,r,i){if(x.acceptData(e)){var o,a,s=x.expando,l=e.nodeType,u=l?x.cache:e,c=l?e[s]:e[s]&&s;if(c&&u[c]&&(i||u[c].data)||r!==t||"string"!=typeof n)return c||(c=l?e[s]=p.pop()||x.guid++:s),u[c]||(u[c]=l?{}:{toJSON:x.noop}),("object"==typeof n||"function"==typeof n)&&(i?u[c]=x.extend(u[c],n):u[c].data=x.extend(u[c].data,n)),a=u[c],i||(a.data||(a.data={}),a=a.data),r!==t&&(a[x.camelCase(n)]=r),"string"==typeof n?(o=a[n],null==o&&(o=a[x.camelCase(n)])):o=a,o}}function W(e,t,n){if(x.acceptData(e)){var r,i,o=e.nodeType,a=o?x.cache:e,s=o?e[x.expando]:x.expando;if(a[s]){if(t&&(r=n?a[s]:a[s].data)){x.isArray(t)?t=t.concat(x.map(t,x.camelCase)):t in r?t=[t]:(t=x.camelCase(t),t=t in r?[t]:t.split(" ")),i=t.length;while(i--)delete r[t[i]];if(n?!I(r):!x.isEmptyObject(r))return}(n||(delete a[s].data,I(a[s])))&&(o?x.cleanData([e],!0):x.support.deleteExpando||a!=a.window?delete a[s]:a[s]=null)}}}x.extend({cache:{},noData:{applet:!0,embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},hasData:function(e){return e=e.nodeType?x.cache[e[x.expando]]:e[x.expando],!!e&&!I(e)},data:function(e,t,n){return R(e,t,n)},removeData:function(e,t){return W(e,t)},_data:function(e,t,n){return R(e,t,n,!0)},_removeData:function(e,t){return W(e,t,!0)},acceptData:function(e){if(e.nodeType&&1!==e.nodeType&&9!==e.nodeType)return!1;var t=e.nodeName&&x.noData[e.nodeName.toLowerCase()];return!t||t!==!0&&e.getAttribute("classid")===t}}),x.fn.extend({data:function(e,n){var r,i,o=null,a=0,s=this[0];if(e===t){if(this.length&&(o=x.data(s),1===s.nodeType&&!x._data(s,"parsedAttrs"))){for(r=s.attributes;r.length>a;a++)i=r[a].name,0===i.indexOf("data-")&&(i=x.camelCase(i.slice(5)),$(s,i,o[i]));x._data(s,"parsedAttrs",!0)}return o}return"object"==typeof e?this.each(function(){x.data(this,e)}):arguments.length>1?this.each(function(){x.data(this,e,n)}):s?$(s,e,x.data(s,e)):null},removeData:function(e){return this.each(function(){x.removeData(this,e)})}});function $(e,n,r){if(r===t&&1===e.nodeType){var i="data-"+n.replace(P,"-$1").toLowerCase();if(r=e.getAttribute(i),"string"==typeof r){try{r="true"===r?!0:"false"===r?!1:"null"===r?null:+r+""===r?+r:B.test(r)?x.parseJSON(r):r}catch(o){}x.data(e,n,r)}else r=t}return r}function I(e){var t;for(t in e)if(("data"!==t||!x.isEmptyObject(e[t]))&&"toJSON"!==t)return!1;return!0}x.extend({queue:function(e,n,r){var i;return e?(n=(n||"fx")+"queue",i=x._data(e,n),r&&(!i||x.isArray(r)?i=x._data(e,n,x.makeArray(r)):i.push(r)),i||[]):t},dequeue:function(e,t){t=t||"fx";var n=x.queue(e,t),r=n.length,i=n.shift(),o=x._queueHooks(e,t),a=function(){x.dequeue(e,t)};"inprogress"===i&&(i=n.shift(),r--),i&&("fx"===t&&n.unshift("inprogress"),delete o.stop,i.call(e,a,o)),!r&&o&&o.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return x._data(e,n)||x._data(e,n,{empty:x.Callbacks("once memory").add(function(){x._removeData(e,t+"queue"),x._removeData(e,n)})})}}),x.fn.extend({queue:function(e,n){var r=2;return"string"!=typeof e&&(n=e,e="fx",r--),r>arguments.length?x.queue(this[0],e):n===t?this:this.each(function(){var t=x.queue(this,e,n);x._queueHooks(this,e),"fx"===e&&"inprogress"!==t[0]&&x.dequeue(this,e)})},dequeue:function(e){return this.each(function(){x.dequeue(this,e)})},delay:function(e,t){return e=x.fx?x.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,n){var r=setTimeout(t,e);n.stop=function(){clearTimeout(r)}})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,n){var r,i=1,o=x.Deferred(),a=this,s=this.length,l=function(){--i||o.resolveWith(a,[a])};"string"!=typeof e&&(n=e,e=t),e=e||"fx";while(s--)r=x._data(a[s],e+"queueHooks"),r&&r.empty&&(i++,r.empty.add(l));return l(),o.promise(n)}});var z,X,U=/[\\t\\r\\n\\f]/g,V=/\\r/g,Y=/^(?:input|select|textarea|button|object)$/i,J=/^(?:a|area)$/i,G=/^(?:checked|selected)$/i,Q=x.support.getSetAttribute,K=x.support.input;x.fn.extend({attr:function(e,t){return x.access(this,x.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){x.removeAttr(this,e)})},prop:function(e,t){return x.access(this,x.prop,e,t,arguments.length>1)},removeProp:function(e){return e=x.propFix[e]||e,this.each(function(){try{this[e]=t,delete this[e]}catch(n){}})},addClass:function(e){var t,n,r,i,o,a=0,s=this.length,l="string"==typeof e&&e;if(x.isFunction(e))return this.each(function(t){x(this).addClass(e.call(this,t,this.className))});if(l)for(t=(e||"").match(T)||[];s>a;a++)if(n=this[a],r=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(U," "):" ")){o=0;while(i=t[o++])0>r.indexOf(" "+i+" ")&&(r+=i+" ");n.className=x.trim(r)}return this},removeClass:function(e){var t,n,r,i,o,a=0,s=this.length,l=0===arguments.length||"string"==typeof e&&e;if(x.isFunction(e))return this.each(function(t){x(this).removeClass(e.call(this,t,this.className))});if(l)for(t=(e||"").match(T)||[];s>a;a++)if(n=this[a],r=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(U," "):"")){o=0;while(i=t[o++])while(r.indexOf(" "+i+" ")>=0)r=r.replace(" "+i+" "," ");n.className=e?x.trim(r):""}return this},toggleClass:function(e,t){var n=typeof e;return"boolean"==typeof t&&"string"===n?t?this.addClass(e):this.removeClass(e):x.isFunction(e)?this.each(function(n){x(this).toggleClass(e.call(this,n,this.className,t),t)}):this.each(function(){if("string"===n){var t,r=0,o=x(this),a=e.match(T)||[];while(t=a[r++])o.hasClass(t)?o.removeClass(t):o.addClass(t)}else(n===i||"boolean"===n)&&(this.className&&x._data(this,"__className__",this.className),this.className=this.className||e===!1?"":x._data(this,"__className__")||"")})},hasClass:function(e){var t=" "+e+" ",n=0,r=this.length;for(;r>n;n++)if(1===this[n].nodeType&&(" "+this[n].className+" ").replace(U," ").indexOf(t)>=0)return!0;return!1},val:function(e){var n,r,i,o=this[0];{if(arguments.length)return i=x.isFunction(e),this.each(function(n){var o;1===this.nodeType&&(o=i?e.call(this,n,x(this).val()):e,null==o?o="":"number"==typeof o?o+="":x.isArray(o)&&(o=x.map(o,function(e){return null==e?"":e+""})),r=x.valHooks[this.type]||x.valHooks[this.nodeName.toLowerCase()],r&&"set"in r&&r.set(this,o,"value")!==t||(this.value=o))});if(o)return r=x.valHooks[o.type]||x.valHooks[o.nodeName.toLowerCase()],r&&"get"in r&&(n=r.get(o,"value"))!==t?n:(n=o.value,"string"==typeof n?n.replace(V,""):null==n?"":n)}}}),x.extend({valHooks:{option:{get:function(e){var t=x.find.attr(e,"value");return null!=t?t:e.text}},select:{get:function(e){var t,n,r=e.options,i=e.selectedIndex,o="select-one"===e.type||0>i,a=o?null:[],s=o?i+1:r.length,l=0>i?s:o?i:0;for(;s>l;l++)if(n=r[l],!(!n.selected&&l!==i||(x.support.optDisabled?n.disabled:null!==n.getAttribute("disabled"))||n.parentNode.disabled&&x.nodeName(n.parentNode,"optgroup"))){if(t=x(n).val(),o)return t;a.push(t)}return a},set:function(e,t){var n,r,i=e.options,o=x.makeArray(t),a=i.length;while(a--)r=i[a],(r.selected=x.inArray(x(r).val(),o)>=0)&&(n=!0);return n||(e.selectedIndex=-1),o}}},attr:function(e,n,r){var o,a,s=e.nodeType;if(e&&3!==s&&8!==s&&2!==s)return typeof e.getAttribute===i?x.prop(e,n,r):(1===s&&x.isXMLDoc(e)||(n=n.toLowerCase(),o=x.attrHooks[n]||(x.expr.match.bool.test(n)?X:z)),r===t?o&&"get"in o&&null!==(a=o.get(e,n))?a:(a=x.find.attr(e,n),null==a?t:a):null!==r?o&&"set"in o&&(a=o.set(e,r,n))!==t?a:(e.setAttribute(n,r+""),r):(x.removeAttr(e,n),t))},removeAttr:function(e,t){var n,r,i=0,o=t&&t.match(T);if(o&&1===e.nodeType)while(n=o[i++])r=x.propFix[n]||n,x.expr.match.bool.test(n)?K&&Q||!G.test(n)?e[r]=!1:e[x.camelCase("default-"+n)]=e[r]=!1:x.attr(e,n,""),e.removeAttribute(Q?n:r)},attrHooks:{type:{set:function(e,t){if(!x.support.radioValue&&"radio"===t&&x.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},propFix:{"for":"htmlFor","class":"className"},prop:function(e,n,r){var i,o,a,s=e.nodeType;if(e&&3!==s&&8!==s&&2!==s)return a=1!==s||!x.isXMLDoc(e),a&&(n=x.propFix[n]||n,o=x.propHooks[n]),r!==t?o&&"set"in o&&(i=o.set(e,r,n))!==t?i:e[n]=r:o&&"get"in o&&null!==(i=o.get(e,n))?i:e[n]},propHooks:{tabIndex:{get:function(e){var t=x.find.attr(e,"tabindex");return t?parseInt(t,10):Y.test(e.nodeName)||J.test(e.nodeName)&&e.href?0:-1}}}}),X={set:function(e,t,n){return t===!1?x.removeAttr(e,n):K&&Q||!G.test(n)?e.setAttribute(!Q&&x.propFix[n]||n,n):e[x.camelCase("default-"+n)]=e[n]=!0,n}},x.each(x.expr.match.bool.source.match(/\\w+/g),function(e,n){var r=x.expr.attrHandle[n]||x.find.attr;x.expr.attrHandle[n]=K&&Q||!G.test(n)?function(e,n,i){var o=x.expr.attrHandle[n],a=i?t:(x.expr.attrHandle[n]=t)!=r(e,n,i)?n.toLowerCase():null;return x.expr.attrHandle[n]=o,a}:function(e,n,r){return r?t:e[x.camelCase("default-"+n)]?n.toLowerCase():null}}),K&&Q||(x.attrHooks.value={set:function(e,n,r){return x.nodeName(e,"input")?(e.defaultValue=n,t):z&&z.set(e,n,r)}}),Q||(z={set:function(e,n,r){var i=e.getAttributeNode(r);return i||e.setAttributeNode(i=e.ownerDocument.createAttribute(r)),i.value=n+="","value"===r||n===e.getAttribute(r)?n:t}},x.expr.attrHandle.id=x.expr.attrHandle.name=x.expr.attrHandle.coords=function(e,n,r){var i;return r?t:(i=e.getAttributeNode(n))&&""!==i.value?i.value:null},x.valHooks.button={get:function(e,n){var r=e.getAttributeNode(n);return r&&r.specified?r.value:t},set:z.set},x.attrHooks.contenteditable={set:function(e,t,n){z.set(e,""===t?!1:t,n)}},x.each(["width","height"],function(e,n){x.attrHooks[n]={set:function(e,r){return""===r?(e.setAttribute(n,"auto"),r):t}}})),x.support.hrefNormalized||x.each(["href","src"],function(e,t){x.propHooks[t]={get:function(e){return e.getAttribute(t,4)}}}),x.support.style||(x.attrHooks.style={get:function(e){return e.style.cssText||t},set:function(e,t){return e.style.cssText=t+""}}),x.support.optSelected||(x.propHooks.selected={get:function(e){var t=e.parentNode;return t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex),null}}),x.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){x.propFix[this.toLowerCase()]=this}),x.support.enctype||(x.propFix.enctype="encoding"),x.each(["radio","checkbox"],function(){x.valHooks[this]={set:function(e,n){return x.isArray(n)?e.checked=x.inArray(x(e).val(),n)>=0:t}},x.support.checkOn||(x.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})});var Z=/^(?:input|select|textarea)$/i,et=/^key/,tt=/^(?:mouse|contextmenu)|click/,nt=/^(?:focusinfocus|focusoutblur)$/,rt=/^([^.]*)(?:\\.(.+)|)$/;function it(){return!0}function ot(){return!1}function at(){try{return a.activeElement}catch(e){}}x.event={global:{},add:function(e,n,r,o,a){var s,l,u,c,p,f,d,h,g,m,y,v=x._data(e);if(v){r.handler&&(c=r,r=c.handler,a=c.selector),r.guid||(r.guid=x.guid++),(l=v.events)||(l=v.events={}),(f=v.handle)||(f=v.handle=function(e){return typeof x===i||e&&x.event.triggered===e.type?t:x.event.dispatch.apply(f.elem,arguments)},f.elem=e),n=(n||"").match(T)||[""],u=n.length;while(u--)s=rt.exec(n[u])||[],g=y=s[1],m=(s[2]||"").split(".").sort(),g&&(p=x.event.special[g]||{},g=(a?p.delegateType:p.bindType)||g,p=x.event.special[g]||{},d=x.extend({type:g,origType:y,data:o,handler:r,guid:r.guid,selector:a,needsContext:a&&x.expr.match.needsContext.test(a),namespace:m.join(".")},c),(h=l[g])||(h=l[g]=[],h.delegateCount=0,p.setup&&p.setup.call(e,o,m,f)!==!1||(e.addEventListener?e.addEventListener(g,f,!1):e.attachEvent&&e.attachEvent("on"+g,f))),p.add&&(p.add.call(e,d),d.handler.guid||(d.handler.guid=r.guid)),a?h.splice(h.delegateCount++,0,d):h.push(d),x.event.global[g]=!0);e=null}},remove:function(e,t,n,r,i){var o,a,s,l,u,c,p,f,d,h,g,m=x.hasData(e)&&x._data(e);if(m&&(c=m.events)){t=(t||"").match(T)||[""],u=t.length;while(u--)if(s=rt.exec(t[u])||[],d=g=s[1],h=(s[2]||"").split(".").sort(),d){p=x.event.special[d]||{},d=(r?p.delegateType:p.bindType)||d,f=c[d]||[],s=s[2]&&RegExp("(^|\\\\.)"+h.join("\\\\.(?:.*\\\\.|)")+"(\\\\.|$)"),l=o=f.length;while(o--)a=f[o],!i&&g!==a.origType||n&&n.guid!==a.guid||s&&!s.test(a.namespace)||r&&r!==a.selector&&("**"!==r||!a.selector)||(f.splice(o,1),a.selector&&f.delegateCount--,p.remove&&p.remove.call(e,a));l&&!f.length&&(p.teardown&&p.teardown.call(e,h,m.handle)!==!1||x.removeEvent(e,d,m.handle),delete c[d])}else for(d in c)x.event.remove(e,d+t[u],n,r,!0);x.isEmptyObject(c)&&(delete m.handle,x._removeData(e,"events"))}},trigger:function(n,r,i,o){var s,l,u,c,p,f,d,h=[i||a],g=v.call(n,"type")?n.type:n,m=v.call(n,"namespace")?n.namespace.split("."):[];if(u=f=i=i||a,3!==i.nodeType&&8!==i.nodeType&&!nt.test(g+x.event.triggered)&&(g.indexOf(".")>=0&&(m=g.split("."),g=m.shift(),m.sort()),l=0>g.indexOf(":")&&"on"+g,n=n[x.expando]?n:new x.Event(g,"object"==typeof n&&n),n.isTrigger=o?2:3,n.namespace=m.join("."),n.namespace_re=n.namespace?RegExp("(^|\\\\.)"+m.join("\\\\.(?:.*\\\\.|)")+"(\\\\.|$)"):null,n.result=t,n.target||(n.target=i),r=null==r?[n]:x.makeArray(r,[n]),p=x.event.special[g]||{},o||!p.trigger||p.trigger.apply(i,r)!==!1)){if(!o&&!p.noBubble&&!x.isWindow(i)){for(c=p.delegateType||g,nt.test(c+g)||(u=u.parentNode);u;u=u.parentNode)h.push(u),f=u;f===(i.ownerDocument||a)&&h.push(f.defaultView||f.parentWindow||e)}d=0;while((u=h[d++])&&!n.isPropagationStopped())n.type=d>1?c:p.bindType||g,s=(x._data(u,"events")||{})[n.type]&&x._data(u,"handle"),s&&s.apply(u,r),s=l&&u[l],s&&x.acceptData(u)&&s.apply&&s.apply(u,r)===!1&&n.preventDefault();if(n.type=g,!o&&!n.isDefaultPrevented()&&(!p._default||p._default.apply(h.pop(),r)===!1)&&x.acceptData(i)&&l&&i[g]&&!x.isWindow(i)){f=i[l],f&&(i[l]=null),x.event.triggered=g;try{i[g]()}catch(y){}x.event.triggered=t,f&&(i[l]=f)}return n.result}},dispatch:function(e){e=x.event.fix(e);var n,r,i,o,a,s=[],l=g.call(arguments),u=(x._data(this,"events")||{})[e.type]||[],c=x.event.special[e.type]||{};if(l[0]=e,e.delegateTarget=this,!c.preDispatch||c.preDispatch.call(this,e)!==!1){s=x.event.handlers.call(this,e,u),n=0;while((o=s[n++])&&!e.isPropagationStopped()){e.currentTarget=o.elem,a=0;while((i=o.handlers[a++])&&!e.isImmediatePropagationStopped())(!e.namespace_re||e.namespace_re.test(i.namespace))&&(e.handleObj=i,e.data=i.data,r=((x.event.special[i.origType]||{}).handle||i.handler).apply(o.elem,l),r!==t&&(e.result=r)===!1&&(e.preventDefault(),e.stopPropagation()))}return c.postDispatch&&c.postDispatch.call(this,e),e.result}},handlers:function(e,n){var r,i,o,a,s=[],l=n.delegateCount,u=e.target;if(l&&u.nodeType&&(!e.button||"click"!==e.type))for(;u!=this;u=u.parentNode||this)if(1===u.nodeType&&(u.disabled!==!0||"click"!==e.type)){for(o=[],a=0;l>a;a++)i=n[a],r=i.selector+" ",o[r]===t&&(o[r]=i.needsContext?x(r,this).index(u)>=0:x.find(r,this,null,[u]).length),o[r]&&o.push(i);o.length&&s.push({elem:u,handlers:o})}return n.length>l&&s.push({elem:this,handlers:n.slice(l)}),s},fix:function(e){if(e[x.expando])return e;var t,n,r,i=e.type,o=e,s=this.fixHooks[i];s||(this.fixHooks[i]=s=tt.test(i)?this.mouseHooks:et.test(i)?this.keyHooks:{}),r=s.props?this.props.concat(s.props):this.props,e=new x.Event(o),t=r.length;while(t--)n=r[t],e[n]=o[n];return e.target||(e.target=o.srcElement||a),3===e.target.nodeType&&(e.target=e.target.parentNode),e.metaKey=!!e.metaKey,s.filter?s.filter(e,o):e},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,n){var r,i,o,s=n.button,l=n.fromElement;return null==e.pageX&&null!=n.clientX&&(i=e.target.ownerDocument||a,o=i.documentElement,r=i.body,e.pageX=n.clientX+(o&&o.scrollLeft||r&&r.scrollLeft||0)-(o&&o.clientLeft||r&&r.clientLeft||0),e.pageY=n.clientY+(o&&o.scrollTop||r&&r.scrollTop||0)-(o&&o.clientTop||r&&r.clientTop||0)),!e.relatedTarget&&l&&(e.relatedTarget=l===e.target?n.toElement:l),e.which||s===t||(e.which=1&s?1:2&s?3:4&s?2:0),e}},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==at()&&this.focus)try{return this.focus(),!1}catch(e){}},delegateType:"focusin"},blur:{trigger:function(){return this===at()&&this.blur?(this.blur(),!1):t},delegateType:"focusout"},click:{trigger:function(){return x.nodeName(this,"input")&&"checkbox"===this.type&&this.click?(this.click(),!1):t},_default:function(e){return x.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){e.result!==t&&(e.originalEvent.returnValue=e.result)}}},simulate:function(e,t,n,r){var i=x.extend(new x.Event,n,{type:e,isSimulated:!0,originalEvent:{}});r?x.event.trigger(i,null,t):x.event.dispatch.call(t,i),i.isDefaultPrevented()&&n.preventDefault()}},x.removeEvent=a.removeEventListener?function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n,!1)}:function(e,t,n){var r="on"+t;e.detachEvent&&(typeof e[r]===i&&(e[r]=null),e.detachEvent(r,n))},x.Event=function(e,n){return this instanceof x.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||e.returnValue===!1||e.getPreventDefault&&e.getPreventDefault()?it:ot):this.type=e,n&&x.extend(this,n),this.timeStamp=e&&e.timeStamp||x.now(),this[x.expando]=!0,t):new x.Event(e,n)},x.Event.prototype={isDefaultPrevented:ot,isPropagationStopped:ot,isImmediatePropagationStopped:ot,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=it,e&&(e.preventDefault?e.preventDefault():e.returnValue=!1)},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=it,e&&(e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=it,this.stopPropagation()}},x.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(e,t){x.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,r=this,i=e.relatedTarget,o=e.handleObj;return(!i||i!==r&&!x.contains(r,i))&&(e.type=o.origType,n=o.handler.apply(this,arguments),e.type=t),n}}}),x.support.submitBubbles||(x.event.special.submit={setup:function(){return x.nodeName(this,"form")?!1:(x.event.add(this,"click._submit keypress._submit",function(e){var n=e.target,r=x.nodeName(n,"input")||x.nodeName(n,"button")?n.form:t;r&&!x._data(r,"submitBubbles")&&(x.event.add(r,"submit._submit",function(e){e._submit_bubble=!0}),x._data(r,"submitBubbles",!0))}),t)},postDispatch:function(e){e._submit_bubble&&(delete e._submit_bubble,this.parentNode&&!e.isTrigger&&x.event.simulate("submit",this.parentNode,e,!0))},teardown:function(){return x.nodeName(this,"form")?!1:(x.event.remove(this,"._submit"),t)}}),x.support.changeBubbles||(x.event.special.change={setup:function(){return Z.test(this.nodeName)?(("checkbox"===this.type||"radio"===this.type)&&(x.event.add(this,"propertychange._change",function(e){"checked"===e.originalEvent.propertyName&&(this._just_changed=!0)}),x.event.add(this,"click._change",function(e){this._just_changed&&!e.isTrigger&&(this._just_changed=!1),x.event.simulate("change",this,e,!0)})),!1):(x.event.add(this,"beforeactivate._change",function(e){var t=e.target;Z.test(t.nodeName)&&!x._data(t,"changeBubbles")&&(x.event.add(t,"change._change",function(e){!this.parentNode||e.isSimulated||e.isTrigger||x.event.simulate("change",this.parentNode,e,!0)}),x._data(t,"changeBubbles",!0))}),t)},handle:function(e){var n=e.target;return this!==n||e.isSimulated||e.isTrigger||"radio"!==n.type&&"checkbox"!==n.type?e.handleObj.handler.apply(this,arguments):t},teardown:function(){return x.event.remove(this,"._change"),!Z.test(this.nodeName)}}),x.support.focusinBubbles||x.each({focus:"focusin",blur:"focusout"},function(e,t){var n=0,r=function(e){x.event.simulate(t,e.target,x.event.fix(e),!0)};x.event.special[t]={setup:function(){0===n++&&a.addEventListener(e,r,!0)},teardown:function(){0===--n&&a.removeEventListener(e,r,!0)}}}),x.fn.extend({on:function(e,n,r,i,o){var a,s;if("object"==typeof e){"string"!=typeof n&&(r=r||n,n=t);for(a in e)this.on(a,n,r,e[a],o);return this}if(null==r&&null==i?(i=n,r=n=t):null==i&&("string"==typeof n?(i=r,r=t):(i=r,r=n,n=t)),i===!1)i=ot;else if(!i)return this;return 1===o&&(s=i,i=function(e){return x().off(e),s.apply(this,arguments)},i.guid=s.guid||(s.guid=x.guid++)),this.each(function(){x.event.add(this,e,i,r,n)})},one:function(e,t,n,r){return this.on(e,t,n,r,1)},off:function(e,n,r){var i,o;if(e&&e.preventDefault&&e.handleObj)return i=e.handleObj,x(e.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if("object"==typeof e){for(o in e)this.off(o,n,e[o]);return this}return(n===!1||"function"==typeof n)&&(r=n,n=t),r===!1&&(r=ot),this.each(function(){x.event.remove(this,e,r,n)})},trigger:function(e,t){return this.each(function(){x.event.trigger(e,t,this)})},triggerHandler:function(e,n){var r=this[0];return r?x.event.trigger(e,n,r,!0):t}});var st=/^.[^:#\\[\\.,]*$/,lt=/^(?:parents|prev(?:Until|All))/,ut=x.expr.match.needsContext,ct={children:!0,contents:!0,next:!0,prev:!0};x.fn.extend({find:function(e){var t,n=[],r=this,i=r.length;if("string"!=typeof e)return this.pushStack(x(e).filter(function(){for(t=0;i>t;t++)if(x.contains(r[t],this))return!0}));for(t=0;i>t;t++)x.find(e,r[t],n);return n=this.pushStack(i>1?x.unique(n):n),n.selector=this.selector?this.selector+" "+e:e,n},has:function(e){var t,n=x(e,this),r=n.length;return this.filter(function(){for(t=0;r>t;t++)if(x.contains(this,n[t]))return!0})},not:function(e){return this.pushStack(ft(this,e||[],!0))},filter:function(e){return this.pushStack(ft(this,e||[],!1))},is:function(e){return!!ft(this,"string"==typeof e&&ut.test(e)?x(e):e||[],!1).length},closest:function(e,t){var n,r=0,i=this.length,o=[],a=ut.test(e)||"string"!=typeof e?x(e,t||this.context):0;for(;i>r;r++)for(n=this[r];n&&n!==t;n=n.parentNode)if(11>n.nodeType&&(a?a.index(n)>-1:1===n.nodeType&&x.find.matchesSelector(n,e))){n=o.push(n);break}return this.pushStack(o.length>1?x.unique(o):o)},index:function(e){return e?"string"==typeof e?x.inArray(this[0],x(e)):x.inArray(e.jquery?e[0]:e,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){var n="string"==typeof e?x(e,t):x.makeArray(e&&e.nodeType?[e]:e),r=x.merge(this.get(),n);return this.pushStack(x.unique(r))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}});function pt(e,t){do e=e[t];while(e&&1!==e.nodeType);return e}x.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return x.dir(e,"parentNode")},parentsUntil:function(e,t,n){return x.dir(e,"parentNode",n)},next:function(e){return pt(e,"nextSibling")},prev:function(e){return pt(e,"previousSibling")},nextAll:function(e){return x.dir(e,"nextSibling")},prevAll:function(e){return x.dir(e,"previousSibling")},nextUntil:function(e,t,n){return x.dir(e,"nextSibling",n)},prevUntil:function(e,t,n){return x.dir(e,"previousSibling",n)},siblings:function(e){return x.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return x.sibling(e.firstChild)},contents:function(e){return x.nodeName(e,"iframe")?e.contentDocument||e.contentWindow.document:x.merge([],e.childNodes)}},function(e,t){x.fn[e]=function(n,r){var i=x.map(this,t,n);return"Until"!==e.slice(-5)&&(r=n),r&&"string"==typeof r&&(i=x.filter(r,i)),this.length>1&&(ct[e]||(i=x.unique(i)),lt.test(e)&&(i=i.reverse())),this.pushStack(i)}}),x.extend({filter:function(e,t,n){var r=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===r.nodeType?x.find.matchesSelector(r,e)?[r]:[]:x.find.matches(e,x.grep(t,function(e){return 1===e.nodeType}))},dir:function(e,n,r){var i=[],o=e[n];while(o&&9!==o.nodeType&&(r===t||1!==o.nodeType||!x(o).is(r)))1===o.nodeType&&i.push(o),o=o[n];return i},sibling:function(e,t){var n=[];for(;e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n}});function ft(e,t,n){if(x.isFunction(t))return x.grep(e,function(e,r){return!!t.call(e,r,e)!==n});if(t.nodeType)return x.grep(e,function(e){return e===t!==n});if("string"==typeof t){if(st.test(t))return x.filter(t,e,n);t=x.filter(t,e)}return x.grep(e,function(e){return x.inArray(e,t)>=0!==n})}function dt(e){var t=ht.split("|"),n=e.createDocumentFragment();if(n.createElement)while(t.length)n.createElement(t.pop());return n}var ht="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",gt=/ jQuery\\d+="(?:null|\\d+)"/g,mt=RegExp("<(?:"+ht+")[\\\\s/>]","i"),yt=/^\\s+/,vt=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\\w:]+)[^>]*)\\/>/gi,bt=/<([\\w:]+)/,xt=/<tbody/i,wt=/<|&#?\\w+;/,Tt=/<(?:script|style|link)/i,Ct=/^(?:checkbox|radio)$/i,Nt=/checked\\s*(?:[^=]|=\\s*.checked.)/i,kt=/^$|\\/(?:java|ecma)script/i,Et=/^true\\/(.*)/,St=/^\\s*<!(?:\\[CDATA\\[|--)|(?:\\]\\]|--)>\\s*$/g,At={option:[1,"<select multiple=\'multiple\'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:x.support.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},jt=dt(a),Dt=jt.appendChild(a.createElement("div"));At.optgroup=At.option,At.tbody=At.tfoot=At.colgroup=At.caption=At.thead,At.th=At.td,x.fn.extend({text:function(e){return x.access(this,function(e){return e===t?x.text(this):this.empty().append((this[0]&&this[0].ownerDocument||a).createTextNode(e))},null,e,arguments.length)},append:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=Lt(this,e);t.appendChild(e)}})},prepend:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=Lt(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},remove:function(e,t){var n,r=e?x.filter(e,this):this,i=0;for(;null!=(n=r[i]);i++)t||1!==n.nodeType||x.cleanData(Ft(n)),n.parentNode&&(t&&x.contains(n.ownerDocument,n)&&_t(Ft(n,"script")),n.parentNode.removeChild(n));return this},empty:function(){var e,t=0;for(;null!=(e=this[t]);t++){1===e.nodeType&&x.cleanData(Ft(e,!1));while(e.firstChild)e.removeChild(e.firstChild);e.options&&x.nodeName(e,"select")&&(e.options.length=0)}return this},clone:function(e,t){return e=null==e?!1:e,t=null==t?e:t,this.map(function(){return x.clone(this,e,t)})},html:function(e){return x.access(this,function(e){var n=this[0]||{},r=0,i=this.length;if(e===t)return 1===n.nodeType?n.innerHTML.replace(gt,""):t;if(!("string"!=typeof e||Tt.test(e)||!x.support.htmlSerialize&&mt.test(e)||!x.support.leadingWhitespace&&yt.test(e)||At[(bt.exec(e)||["",""])[1].toLowerCase()])){e=e.replace(vt,"<$1></$2>");try{for(;i>r;r++)n=this[r]||{},1===n.nodeType&&(x.cleanData(Ft(n,!1)),n.innerHTML=e);n=0}catch(o){}}n&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=x.map(this,function(e){return[e.nextSibling,e.parentNode]}),t=0;return this.domManip(arguments,function(n){var r=e[t++],i=e[t++];i&&(r&&r.parentNode!==i&&(r=this.nextSibling),x(this).remove(),i.insertBefore(n,r))},!0),t?this:this.remove()},detach:function(e){return this.remove(e,!0)},domManip:function(e,t,n){e=d.apply([],e);var r,i,o,a,s,l,u=0,c=this.length,p=this,f=c-1,h=e[0],g=x.isFunction(h);if(g||!(1>=c||"string"!=typeof h||x.support.checkClone)&&Nt.test(h))return this.each(function(r){var i=p.eq(r);g&&(e[0]=h.call(this,r,i.html())),i.domManip(e,t,n)});if(c&&(l=x.buildFragment(e,this[0].ownerDocument,!1,!n&&this),r=l.firstChild,1===l.childNodes.length&&(l=r),r)){for(a=x.map(Ft(l,"script"),Ht),o=a.length;c>u;u++)i=l,u!==f&&(i=x.clone(i,!0,!0),o&&x.merge(a,Ft(i,"script"))),t.call(this[u],i,u);if(o)for(s=a[a.length-1].ownerDocument,x.map(a,qt),u=0;o>u;u++)i=a[u],kt.test(i.type||"")&&!x._data(i,"globalEval")&&x.contains(s,i)&&(i.src?x._evalUrl(i.src):x.globalEval((i.text||i.textContent||i.innerHTML||"").replace(St,"")));l=r=null}return this}});function Lt(e,t){return x.nodeName(e,"table")&&x.nodeName(1===t.nodeType?t:t.firstChild,"tr")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function Ht(e){return e.type=(null!==x.find.attr(e,"type"))+"/"+e.type,e}function qt(e){var t=Et.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function _t(e,t){var n,r=0;for(;null!=(n=e[r]);r++)x._data(n,"globalEval",!t||x._data(t[r],"globalEval"))}function Mt(e,t){if(1===t.nodeType&&x.hasData(e)){var n,r,i,o=x._data(e),a=x._data(t,o),s=o.events;if(s){delete a.handle,a.events={};for(n in s)for(r=0,i=s[n].length;i>r;r++)x.event.add(t,n,s[n][r])}a.data&&(a.data=x.extend({},a.data))}}function Ot(e,t){var n,r,i;if(1===t.nodeType){if(n=t.nodeName.toLowerCase(),!x.support.noCloneEvent&&t[x.expando]){i=x._data(t);for(r in i.events)x.removeEvent(t,r,i.handle);t.removeAttribute(x.expando)}"script"===n&&t.text!==e.text?(Ht(t).text=e.text,qt(t)):"object"===n?(t.parentNode&&(t.outerHTML=e.outerHTML),x.support.html5Clone&&e.innerHTML&&!x.trim(t.innerHTML)&&(t.innerHTML=e.innerHTML)):"input"===n&&Ct.test(e.type)?(t.defaultChecked=t.checked=e.checked,t.value!==e.value&&(t.value=e.value)):"option"===n?t.defaultSelected=t.selected=e.defaultSelected:("input"===n||"textarea"===n)&&(t.defaultValue=e.defaultValue)}}x.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){x.fn[e]=function(e){var n,r=0,i=[],o=x(e),a=o.length-1;for(;a>=r;r++)n=r===a?this:this.clone(!0),x(o[r])[t](n),h.apply(i,n.get());return this.pushStack(i)}});function Ft(e,n){var r,o,a=0,s=typeof e.getElementsByTagName!==i?e.getElementsByTagName(n||"*"):typeof e.querySelectorAll!==i?e.querySelectorAll(n||"*"):t;if(!s)for(s=[],r=e.childNodes||e;null!=(o=r[a]);a++)!n||x.nodeName(o,n)?s.push(o):x.merge(s,Ft(o,n));return n===t||n&&x.nodeName(e,n)?x.merge([e],s):s}function Bt(e){Ct.test(e.type)&&(e.defaultChecked=e.checked)}x.extend({clone:function(e,t,n){var r,i,o,a,s,l=x.contains(e.ownerDocument,e);if(x.support.html5Clone||x.isXMLDoc(e)||!mt.test("<"+e.nodeName+">")?o=e.cloneNode(!0):(Dt.innerHTML=e.outerHTML,Dt.removeChild(o=Dt.firstChild)),!(x.support.noCloneEvent&&x.support.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||x.isXMLDoc(e)))for(r=Ft(o),s=Ft(e),a=0;null!=(i=s[a]);++a)r[a]&&Ot(i,r[a]);if(t)if(n)for(s=s||Ft(e),r=r||Ft(o),a=0;null!=(i=s[a]);a++)Mt(i,r[a]);else Mt(e,o);return r=Ft(o,"script"),r.length>0&&_t(r,!l&&Ft(e,"script")),r=s=i=null,o},buildFragment:function(e,t,n,r){var i,o,a,s,l,u,c,p=e.length,f=dt(t),d=[],h=0;for(;p>h;h++)if(o=e[h],o||0===o)if("object"===x.type(o))x.merge(d,o.nodeType?[o]:o);else if(wt.test(o)){s=s||f.appendChild(t.createElement("div")),l=(bt.exec(o)||["",""])[1].toLowerCase(),c=At[l]||At._default,s.innerHTML=c[1]+o.replace(vt,"<$1></$2>")+c[2],i=c[0];while(i--)s=s.lastChild;if(!x.support.leadingWhitespace&&yt.test(o)&&d.push(t.createTextNode(yt.exec(o)[0])),!x.support.tbody){o="table"!==l||xt.test(o)?"<table>"!==c[1]||xt.test(o)?0:s:s.firstChild,i=o&&o.childNodes.length;while(i--)x.nodeName(u=o.childNodes[i],"tbody")&&!u.childNodes.length&&o.removeChild(u)}x.merge(d,s.childNodes),s.textContent="";while(s.firstChild)s.removeChild(s.firstChild);s=f.lastChild}else d.push(t.createTextNode(o));s&&f.removeChild(s),x.support.appendChecked||x.grep(Ft(d,"input"),Bt),h=0;while(o=d[h++])if((!r||-1===x.inArray(o,r))&&(a=x.contains(o.ownerDocument,o),s=Ft(f.appendChild(o),"script"),a&&_t(s),n)){i=0;while(o=s[i++])kt.test(o.type||"")&&n.push(o)}return s=null,f},cleanData:function(e,t){var n,r,o,a,s=0,l=x.expando,u=x.cache,c=x.support.deleteExpando,f=x.event.special;for(;null!=(n=e[s]);s++)if((t||x.acceptData(n))&&(o=n[l],a=o&&u[o])){if(a.events)for(r in a.events)f[r]?x.event.remove(n,r):x.removeEvent(n,r,a.handle);\nu[o]&&(delete u[o],c?delete n[l]:typeof n.removeAttribute!==i?n.removeAttribute(l):n[l]=null,p.push(o))}},_evalUrl:function(e){return x.ajax({url:e,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})}}),x.fn.extend({wrapAll:function(e){if(x.isFunction(e))return this.each(function(t){x(this).wrapAll(e.call(this,t))});if(this[0]){var t=x(e,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){var e=this;while(e.firstChild&&1===e.firstChild.nodeType)e=e.firstChild;return e}).append(this)}return this},wrapInner:function(e){return x.isFunction(e)?this.each(function(t){x(this).wrapInner(e.call(this,t))}):this.each(function(){var t=x(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=x.isFunction(e);return this.each(function(n){x(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(){return this.parent().each(function(){x.nodeName(this,"body")||x(this).replaceWith(this.childNodes)}).end()}});var Pt,Rt,Wt,$t=/alpha\\([^)]*\\)/i,It=/opacity\\s*=\\s*([^)]*)/,zt=/^(top|right|bottom|left)$/,Xt=/^(none|table(?!-c[ea]).+)/,Ut=/^margin/,Vt=RegExp("^("+w+")(.*)$","i"),Yt=RegExp("^("+w+")(?!px)[a-z%]+$","i"),Jt=RegExp("^([+-])=("+w+")","i"),Gt={BODY:"block"},Qt={position:"absolute",visibility:"hidden",display:"block"},Kt={letterSpacing:0,fontWeight:400},Zt=["Top","Right","Bottom","Left"],en=["Webkit","O","Moz","ms"];function tn(e,t){if(t in e)return t;var n=t.charAt(0).toUpperCase()+t.slice(1),r=t,i=en.length;while(i--)if(t=en[i]+n,t in e)return t;return r}function nn(e,t){return e=t||e,"none"===x.css(e,"display")||!x.contains(e.ownerDocument,e)}function rn(e,t){var n,r,i,o=[],a=0,s=e.length;for(;s>a;a++)r=e[a],r.style&&(o[a]=x._data(r,"olddisplay"),n=r.style.display,t?(o[a]||"none"!==n||(r.style.display=""),""===r.style.display&&nn(r)&&(o[a]=x._data(r,"olddisplay",ln(r.nodeName)))):o[a]||(i=nn(r),(n&&"none"!==n||!i)&&x._data(r,"olddisplay",i?n:x.css(r,"display"))));for(a=0;s>a;a++)r=e[a],r.style&&(t&&"none"!==r.style.display&&""!==r.style.display||(r.style.display=t?o[a]||"":"none"));return e}x.fn.extend({css:function(e,n){return x.access(this,function(e,n,r){var i,o,a={},s=0;if(x.isArray(n)){for(o=Rt(e),i=n.length;i>s;s++)a[n[s]]=x.css(e,n[s],!1,o);return a}return r!==t?x.style(e,n,r):x.css(e,n)},e,n,arguments.length>1)},show:function(){return rn(this,!0)},hide:function(){return rn(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){nn(this)?x(this).show():x(this).hide()})}}),x.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=Wt(e,"opacity");return""===n?"1":n}}}},cssNumber:{columnCount:!0,fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":x.support.cssFloat?"cssFloat":"styleFloat"},style:function(e,n,r,i){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var o,a,s,l=x.camelCase(n),u=e.style;if(n=x.cssProps[l]||(x.cssProps[l]=tn(u,l)),s=x.cssHooks[n]||x.cssHooks[l],r===t)return s&&"get"in s&&(o=s.get(e,!1,i))!==t?o:u[n];if(a=typeof r,"string"===a&&(o=Jt.exec(r))&&(r=(o[1]+1)*o[2]+parseFloat(x.css(e,n)),a="number"),!(null==r||"number"===a&&isNaN(r)||("number"!==a||x.cssNumber[l]||(r+="px"),x.support.clearCloneStyle||""!==r||0!==n.indexOf("background")||(u[n]="inherit"),s&&"set"in s&&(r=s.set(e,r,i))===t)))try{u[n]=r}catch(c){}}},css:function(e,n,r,i){var o,a,s,l=x.camelCase(n);return n=x.cssProps[l]||(x.cssProps[l]=tn(e.style,l)),s=x.cssHooks[n]||x.cssHooks[l],s&&"get"in s&&(a=s.get(e,!0,r)),a===t&&(a=Wt(e,n,i)),"normal"===a&&n in Kt&&(a=Kt[n]),""===r||r?(o=parseFloat(a),r===!0||x.isNumeric(o)?o||0:a):a}}),e.getComputedStyle?(Rt=function(t){return e.getComputedStyle(t,null)},Wt=function(e,n,r){var i,o,a,s=r||Rt(e),l=s?s.getPropertyValue(n)||s[n]:t,u=e.style;return s&&(""!==l||x.contains(e.ownerDocument,e)||(l=x.style(e,n)),Yt.test(l)&&Ut.test(n)&&(i=u.width,o=u.minWidth,a=u.maxWidth,u.minWidth=u.maxWidth=u.width=l,l=s.width,u.width=i,u.minWidth=o,u.maxWidth=a)),l}):a.documentElement.currentStyle&&(Rt=function(e){return e.currentStyle},Wt=function(e,n,r){var i,o,a,s=r||Rt(e),l=s?s[n]:t,u=e.style;return null==l&&u&&u[n]&&(l=u[n]),Yt.test(l)&&!zt.test(n)&&(i=u.left,o=e.runtimeStyle,a=o&&o.left,a&&(o.left=e.currentStyle.left),u.left="fontSize"===n?"1em":l,l=u.pixelLeft+"px",u.left=i,a&&(o.left=a)),""===l?"auto":l});function on(e,t,n){var r=Vt.exec(t);return r?Math.max(0,r[1]-(n||0))+(r[2]||"px"):t}function an(e,t,n,r,i){var o=n===(r?"border":"content")?4:"width"===t?1:0,a=0;for(;4>o;o+=2)"margin"===n&&(a+=x.css(e,n+Zt[o],!0,i)),r?("content"===n&&(a-=x.css(e,"padding"+Zt[o],!0,i)),"margin"!==n&&(a-=x.css(e,"border"+Zt[o]+"Width",!0,i))):(a+=x.css(e,"padding"+Zt[o],!0,i),"padding"!==n&&(a+=x.css(e,"border"+Zt[o]+"Width",!0,i)));return a}function sn(e,t,n){var r=!0,i="width"===t?e.offsetWidth:e.offsetHeight,o=Rt(e),a=x.support.boxSizing&&"border-box"===x.css(e,"boxSizing",!1,o);if(0>=i||null==i){if(i=Wt(e,t,o),(0>i||null==i)&&(i=e.style[t]),Yt.test(i))return i;r=a&&(x.support.boxSizingReliable||i===e.style[t]),i=parseFloat(i)||0}return i+an(e,t,n||(a?"border":"content"),r,o)+"px"}function ln(e){var t=a,n=Gt[e];return n||(n=un(e,t),"none"!==n&&n||(Pt=(Pt||x("<iframe frameborder=\'0\' width=\'0\' height=\'0\'/>").css("cssText","display:block !important")).appendTo(t.documentElement),t=(Pt[0].contentWindow||Pt[0].contentDocument).document,t.write("<!doctype html><html><body>"),t.close(),n=un(e,t),Pt.detach()),Gt[e]=n),n}function un(e,t){var n=x(t.createElement(e)).appendTo(t.body),r=x.css(n[0],"display");return n.remove(),r}x.each(["height","width"],function(e,n){x.cssHooks[n]={get:function(e,r,i){return r?0===e.offsetWidth&&Xt.test(x.css(e,"display"))?x.swap(e,Qt,function(){return sn(e,n,i)}):sn(e,n,i):t},set:function(e,t,r){var i=r&&Rt(e);return on(e,t,r?an(e,n,r,x.support.boxSizing&&"border-box"===x.css(e,"boxSizing",!1,i),i):0)}}}),x.support.opacity||(x.cssHooks.opacity={get:function(e,t){return It.test((t&&e.currentStyle?e.currentStyle.filter:e.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":t?"1":""},set:function(e,t){var n=e.style,r=e.currentStyle,i=x.isNumeric(t)?"alpha(opacity="+100*t+")":"",o=r&&r.filter||n.filter||"";n.zoom=1,(t>=1||""===t)&&""===x.trim(o.replace($t,""))&&n.removeAttribute&&(n.removeAttribute("filter"),""===t||r&&!r.filter)||(n.filter=$t.test(o)?o.replace($t,i):o+" "+i)}}),x(function(){x.support.reliableMarginRight||(x.cssHooks.marginRight={get:function(e,n){return n?x.swap(e,{display:"inline-block"},Wt,[e,"marginRight"]):t}}),!x.support.pixelPosition&&x.fn.position&&x.each(["top","left"],function(e,n){x.cssHooks[n]={get:function(e,r){return r?(r=Wt(e,n),Yt.test(r)?x(e).position()[n]+"px":r):t}}})}),x.expr&&x.expr.filters&&(x.expr.filters.hidden=function(e){return 0>=e.offsetWidth&&0>=e.offsetHeight||!x.support.reliableHiddenOffsets&&"none"===(e.style&&e.style.display||x.css(e,"display"))},x.expr.filters.visible=function(e){return!x.expr.filters.hidden(e)}),x.each({margin:"",padding:"",border:"Width"},function(e,t){x.cssHooks[e+t]={expand:function(n){var r=0,i={},o="string"==typeof n?n.split(" "):[n];for(;4>r;r++)i[e+Zt[r]+t]=o[r]||o[r-2]||o[0];return i}},Ut.test(e)||(x.cssHooks[e+t].set=on)});var cn=/%20/g,pn=/\\[\\]$/,fn=/\\r?\\n/g,dn=/^(?:submit|button|image|reset|file)$/i,hn=/^(?:input|select|textarea|keygen)/i;x.fn.extend({serialize:function(){return x.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=x.prop(this,"elements");return e?x.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!x(this).is(":disabled")&&hn.test(this.nodeName)&&!dn.test(e)&&(this.checked||!Ct.test(e))}).map(function(e,t){var n=x(this).val();return null==n?null:x.isArray(n)?x.map(n,function(e){return{name:t.name,value:e.replace(fn,"\\r\\n")}}):{name:t.name,value:n.replace(fn,"\\r\\n")}}).get()}}),x.param=function(e,n){var r,i=[],o=function(e,t){t=x.isFunction(t)?t():null==t?"":t,i[i.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(n===t&&(n=x.ajaxSettings&&x.ajaxSettings.traditional),x.isArray(e)||e.jquery&&!x.isPlainObject(e))x.each(e,function(){o(this.name,this.value)});else for(r in e)gn(r,e[r],n,o);return i.join("&").replace(cn,"+")};function gn(e,t,n,r){var i;if(x.isArray(t))x.each(t,function(t,i){n||pn.test(e)?r(e,i):gn(e+"["+("object"==typeof i?t:"")+"]",i,n,r)});else if(n||"object"!==x.type(t))r(e,t);else for(i in t)gn(e+"["+i+"]",t[i],n,r)}x.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){x.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}),x.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)},bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)}});var mn,yn,vn=x.now(),bn=/\\?/,xn=/#.*$/,wn=/([?&])_=[^&]*/,Tn=/^(.*?):[ \\t]*([^\\r\\n]*)\\r?$/gm,Cn=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Nn=/^(?:GET|HEAD)$/,kn=/^\\/\\//,En=/^([\\w.+-]+:)(?:\\/\\/([^\\/?#:]*)(?::(\\d+)|)|)/,Sn=x.fn.load,An={},jn={},Dn="*/".concat("*");try{yn=o.href}catch(Ln){yn=a.createElement("a"),yn.href="",yn=yn.href}mn=En.exec(yn.toLowerCase())||[];function Hn(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var r,i=0,o=t.toLowerCase().match(T)||[];if(x.isFunction(n))while(r=o[i++])"+"===r[0]?(r=r.slice(1)||"*",(e[r]=e[r]||[]).unshift(n)):(e[r]=e[r]||[]).push(n)}}function qn(e,n,r,i){var o={},a=e===jn;function s(l){var u;return o[l]=!0,x.each(e[l]||[],function(e,l){var c=l(n,r,i);return"string"!=typeof c||a||o[c]?a?!(u=c):t:(n.dataTypes.unshift(c),s(c),!1)}),u}return s(n.dataTypes[0])||!o["*"]&&s("*")}function _n(e,n){var r,i,o=x.ajaxSettings.flatOptions||{};for(i in n)n[i]!==t&&((o[i]?e:r||(r={}))[i]=n[i]);return r&&x.extend(!0,e,r),e}x.fn.load=function(e,n,r){if("string"!=typeof e&&Sn)return Sn.apply(this,arguments);var i,o,a,s=this,l=e.indexOf(" ");return l>=0&&(i=e.slice(l,e.length),e=e.slice(0,l)),x.isFunction(n)?(r=n,n=t):n&&"object"==typeof n&&(a="POST"),s.length>0&&x.ajax({url:e,type:a,dataType:"html",data:n}).done(function(e){o=arguments,s.html(i?x("<div>").append(x.parseHTML(e)).find(i):e)}).complete(r&&function(e,t){s.each(r,o||[e.responseText,t,e])}),this},x.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){x.fn[t]=function(e){return this.on(t,e)}}),x.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:yn,type:"GET",isLocal:Cn.test(mn[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Dn,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":x.parseJSON,"text xml":x.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?_n(_n(e,x.ajaxSettings),t):_n(x.ajaxSettings,e)},ajaxPrefilter:Hn(An),ajaxTransport:Hn(jn),ajax:function(e,n){"object"==typeof e&&(n=e,e=t),n=n||{};var r,i,o,a,s,l,u,c,p=x.ajaxSetup({},n),f=p.context||p,d=p.context&&(f.nodeType||f.jquery)?x(f):x.event,h=x.Deferred(),g=x.Callbacks("once memory"),m=p.statusCode||{},y={},v={},b=0,w="canceled",C={readyState:0,getResponseHeader:function(e){var t;if(2===b){if(!c){c={};while(t=Tn.exec(a))c[t[1].toLowerCase()]=t[2]}t=c[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===b?a:null},setRequestHeader:function(e,t){var n=e.toLowerCase();return b||(e=v[n]=v[n]||e,y[e]=t),this},overrideMimeType:function(e){return b||(p.mimeType=e),this},statusCode:function(e){var t;if(e)if(2>b)for(t in e)m[t]=[m[t],e[t]];else C.always(e[C.status]);return this},abort:function(e){var t=e||w;return u&&u.abort(t),k(0,t),this}};if(h.promise(C).complete=g.add,C.success=C.done,C.error=C.fail,p.url=((e||p.url||yn)+"").replace(xn,"").replace(kn,mn[1]+"//"),p.type=n.method||n.type||p.method||p.type,p.dataTypes=x.trim(p.dataType||"*").toLowerCase().match(T)||[""],null==p.crossDomain&&(r=En.exec(p.url.toLowerCase()),p.crossDomain=!(!r||r[1]===mn[1]&&r[2]===mn[2]&&(r[3]||("http:"===r[1]?"80":"443"))===(mn[3]||("http:"===mn[1]?"80":"443")))),p.data&&p.processData&&"string"!=typeof p.data&&(p.data=x.param(p.data,p.traditional)),qn(An,p,n,C),2===b)return C;l=p.global,l&&0===x.active++&&x.event.trigger("ajaxStart"),p.type=p.type.toUpperCase(),p.hasContent=!Nn.test(p.type),o=p.url,p.hasContent||(p.data&&(o=p.url+=(bn.test(o)?"&":"?")+p.data,delete p.data),p.cache===!1&&(p.url=wn.test(o)?o.replace(wn,"$1_="+vn++):o+(bn.test(o)?"&":"?")+"_="+vn++)),p.ifModified&&(x.lastModified[o]&&C.setRequestHeader("If-Modified-Since",x.lastModified[o]),x.etag[o]&&C.setRequestHeader("If-None-Match",x.etag[o])),(p.data&&p.hasContent&&p.contentType!==!1||n.contentType)&&C.setRequestHeader("Content-Type",p.contentType),C.setRequestHeader("Accept",p.dataTypes[0]&&p.accepts[p.dataTypes[0]]?p.accepts[p.dataTypes[0]]+("*"!==p.dataTypes[0]?", "+Dn+"; q=0.01":""):p.accepts["*"]);for(i in p.headers)C.setRequestHeader(i,p.headers[i]);if(p.beforeSend&&(p.beforeSend.call(f,C,p)===!1||2===b))return C.abort();w="abort";for(i in{success:1,error:1,complete:1})C[i](p[i]);if(u=qn(jn,p,n,C)){C.readyState=1,l&&d.trigger("ajaxSend",[C,p]),p.async&&p.timeout>0&&(s=setTimeout(function(){C.abort("timeout")},p.timeout));try{b=1,u.send(y,k)}catch(N){if(!(2>b))throw N;k(-1,N)}}else k(-1,"No Transport");function k(e,n,r,i){var c,y,v,w,T,N=n;2!==b&&(b=2,s&&clearTimeout(s),u=t,a=i||"",C.readyState=e>0?4:0,c=e>=200&&300>e||304===e,r&&(w=Mn(p,C,r)),w=On(p,w,C,c),c?(p.ifModified&&(T=C.getResponseHeader("Last-Modified"),T&&(x.lastModified[o]=T),T=C.getResponseHeader("etag"),T&&(x.etag[o]=T)),204===e||"HEAD"===p.type?N="nocontent":304===e?N="notmodified":(N=w.state,y=w.data,v=w.error,c=!v)):(v=N,(e||!N)&&(N="error",0>e&&(e=0))),C.status=e,C.statusText=(n||N)+"",c?h.resolveWith(f,[y,N,C]):h.rejectWith(f,[C,N,v]),C.statusCode(m),m=t,l&&d.trigger(c?"ajaxSuccess":"ajaxError",[C,p,c?y:v]),g.fireWith(f,[C,N]),l&&(d.trigger("ajaxComplete",[C,p]),--x.active||x.event.trigger("ajaxStop")))}return C},getJSON:function(e,t,n){return x.get(e,t,n,"json")},getScript:function(e,n){return x.get(e,t,n,"script")}}),x.each(["get","post"],function(e,n){x[n]=function(e,r,i,o){return x.isFunction(r)&&(o=o||i,i=r,r=t),x.ajax({url:e,type:n,dataType:o,data:r,success:i})}});function Mn(e,n,r){var i,o,a,s,l=e.contents,u=e.dataTypes;while("*"===u[0])u.shift(),o===t&&(o=e.mimeType||n.getResponseHeader("Content-Type"));if(o)for(s in l)if(l[s]&&l[s].test(o)){u.unshift(s);break}if(u[0]in r)a=u[0];else{for(s in r){if(!u[0]||e.converters[s+" "+u[0]]){a=s;break}i||(i=s)}a=a||i}return a?(a!==u[0]&&u.unshift(a),r[a]):t}function On(e,t,n,r){var i,o,a,s,l,u={},c=e.dataTypes.slice();if(c[1])for(a in e.converters)u[a.toLowerCase()]=e.converters[a];o=c.shift();while(o)if(e.responseFields[o]&&(n[e.responseFields[o]]=t),!l&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),l=o,o=c.shift())if("*"===o)o=l;else if("*"!==l&&l!==o){if(a=u[l+" "+o]||u["* "+o],!a)for(i in u)if(s=i.split(" "),s[1]===o&&(a=u[l+" "+s[0]]||u["* "+s[0]])){a===!0?a=u[i]:u[i]!==!0&&(o=s[0],c.unshift(s[1]));break}if(a!==!0)if(a&&e["throws"])t=a(t);else try{t=a(t)}catch(p){return{state:"parsererror",error:a?p:"No conversion from "+l+" to "+o}}}return{state:"success",data:t}}x.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(e){return x.globalEval(e),e}}}),x.ajaxPrefilter("script",function(e){e.cache===t&&(e.cache=!1),e.crossDomain&&(e.type="GET",e.global=!1)}),x.ajaxTransport("script",function(e){if(e.crossDomain){var n,r=a.head||x("head")[0]||a.documentElement;return{send:function(t,i){n=a.createElement("script"),n.async=!0,e.scriptCharset&&(n.charset=e.scriptCharset),n.src=e.url,n.onload=n.onreadystatechange=function(e,t){(t||!n.readyState||/loaded|complete/.test(n.readyState))&&(n.onload=n.onreadystatechange=null,n.parentNode&&n.parentNode.removeChild(n),n=null,t||i(200,"success"))},r.insertBefore(n,r.firstChild)},abort:function(){n&&n.onload(t,!0)}}}});var Fn=[],Bn=/(=)\\?(?=&|$)|\\?\\?/;x.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Fn.pop()||x.expando+"_"+vn++;return this[e]=!0,e}}),x.ajaxPrefilter("json jsonp",function(n,r,i){var o,a,s,l=n.jsonp!==!1&&(Bn.test(n.url)?"url":"string"==typeof n.data&&!(n.contentType||"").indexOf("application/x-www-form-urlencoded")&&Bn.test(n.data)&&"data");return l||"jsonp"===n.dataTypes[0]?(o=n.jsonpCallback=x.isFunction(n.jsonpCallback)?n.jsonpCallback():n.jsonpCallback,l?n[l]=n[l].replace(Bn,"$1"+o):n.jsonp!==!1&&(n.url+=(bn.test(n.url)?"&":"?")+n.jsonp+"="+o),n.converters["script json"]=function(){return s||x.error(o+" was not called"),s[0]},n.dataTypes[0]="json",a=e[o],e[o]=function(){s=arguments},i.always(function(){e[o]=a,n[o]&&(n.jsonpCallback=r.jsonpCallback,Fn.push(o)),s&&x.isFunction(a)&&a(s[0]),s=a=t}),"script"):t});var Pn,Rn,Wn=0,$n=e.ActiveXObject&&function(){var e;for(e in Pn)Pn[e](t,!0)};function In(){try{return new e.XMLHttpRequest}catch(t){}}function zn(){try{return new e.ActiveXObject("Microsoft.XMLHTTP")}catch(t){}}x.ajaxSettings.xhr=e.ActiveXObject?function(){return!this.isLocal&&In()||zn()}:In,Rn=x.ajaxSettings.xhr(),x.support.cors=!!Rn&&"withCredentials"in Rn,Rn=x.support.ajax=!!Rn,Rn&&x.ajaxTransport(function(n){if(!n.crossDomain||x.support.cors){var r;return{send:function(i,o){var a,s,l=n.xhr();if(n.username?l.open(n.type,n.url,n.async,n.username,n.password):l.open(n.type,n.url,n.async),n.xhrFields)for(s in n.xhrFields)l[s]=n.xhrFields[s];n.mimeType&&l.overrideMimeType&&l.overrideMimeType(n.mimeType),n.crossDomain||i["X-Requested-With"]||(i["X-Requested-With"]="XMLHttpRequest");try{for(s in i)l.setRequestHeader(s,i[s])}catch(u){}l.send(n.hasContent&&n.data||null),r=function(e,i){var s,u,c,p;try{if(r&&(i||4===l.readyState))if(r=t,a&&(l.onreadystatechange=x.noop,$n&&delete Pn[a]),i)4!==l.readyState&&l.abort();else{p={},s=l.status,u=l.getAllResponseHeaders(),"string"==typeof l.responseText&&(p.text=l.responseText);try{c=l.statusText}catch(f){c=""}s||!n.isLocal||n.crossDomain?1223===s&&(s=204):s=p.text?200:404}}catch(d){i||o(-1,d)}p&&o(s,c,p,u)},n.async?4===l.readyState?setTimeout(r):(a=++Wn,$n&&(Pn||(Pn={},x(e).unload($n)),Pn[a]=r),l.onreadystatechange=r):r()},abort:function(){r&&r(t,!0)}}}});var Xn,Un,Vn=/^(?:toggle|show|hide)$/,Yn=RegExp("^(?:([+-])=|)("+w+")([a-z%]*)$","i"),Jn=/queueHooks$/,Gn=[nr],Qn={"*":[function(e,t){var n=this.createTween(e,t),r=n.cur(),i=Yn.exec(t),o=i&&i[3]||(x.cssNumber[e]?"":"px"),a=(x.cssNumber[e]||"px"!==o&&+r)&&Yn.exec(x.css(n.elem,e)),s=1,l=20;if(a&&a[3]!==o){o=o||a[3],i=i||[],a=+r||1;do s=s||".5",a/=s,x.style(n.elem,e,a+o);while(s!==(s=n.cur()/r)&&1!==s&&--l)}return i&&(a=n.start=+a||+r||0,n.unit=o,n.end=i[1]?a+(i[1]+1)*i[2]:+i[2]),n}]};function Kn(){return setTimeout(function(){Xn=t}),Xn=x.now()}function Zn(e,t,n){var r,i=(Qn[t]||[]).concat(Qn["*"]),o=0,a=i.length;for(;a>o;o++)if(r=i[o].call(n,t,e))return r}function er(e,t,n){var r,i,o=0,a=Gn.length,s=x.Deferred().always(function(){delete l.elem}),l=function(){if(i)return!1;var t=Xn||Kn(),n=Math.max(0,u.startTime+u.duration-t),r=n/u.duration||0,o=1-r,a=0,l=u.tweens.length;for(;l>a;a++)u.tweens[a].run(o);return s.notifyWith(e,[u,o,n]),1>o&&l?n:(s.resolveWith(e,[u]),!1)},u=s.promise({elem:e,props:x.extend({},t),opts:x.extend(!0,{specialEasing:{}},n),originalProperties:t,originalOptions:n,startTime:Xn||Kn(),duration:n.duration,tweens:[],createTween:function(t,n){var r=x.Tween(e,u.opts,t,n,u.opts.specialEasing[t]||u.opts.easing);return u.tweens.push(r),r},stop:function(t){var n=0,r=t?u.tweens.length:0;if(i)return this;for(i=!0;r>n;n++)u.tweens[n].run(1);return t?s.resolveWith(e,[u,t]):s.rejectWith(e,[u,t]),this}}),c=u.props;for(tr(c,u.opts.specialEasing);a>o;o++)if(r=Gn[o].call(u,e,c,u.opts))return r;return x.map(c,Zn,u),x.isFunction(u.opts.start)&&u.opts.start.call(e,u),x.fx.timer(x.extend(l,{elem:e,anim:u,queue:u.opts.queue})),u.progress(u.opts.progress).done(u.opts.done,u.opts.complete).fail(u.opts.fail).always(u.opts.always)}function tr(e,t){var n,r,i,o,a;for(n in e)if(r=x.camelCase(n),i=t[r],o=e[n],x.isArray(o)&&(i=o[1],o=e[n]=o[0]),n!==r&&(e[r]=o,delete e[n]),a=x.cssHooks[r],a&&"expand"in a){o=a.expand(o),delete e[r];for(n in o)n in e||(e[n]=o[n],t[n]=i)}else t[r]=i}x.Animation=x.extend(er,{tweener:function(e,t){x.isFunction(e)?(t=e,e=["*"]):e=e.split(" ");var n,r=0,i=e.length;for(;i>r;r++)n=e[r],Qn[n]=Qn[n]||[],Qn[n].unshift(t)},prefilter:function(e,t){t?Gn.unshift(e):Gn.push(e)}});function nr(e,t,n){var r,i,o,a,s,l,u=this,c={},p=e.style,f=e.nodeType&&nn(e),d=x._data(e,"fxshow");n.queue||(s=x._queueHooks(e,"fx"),null==s.unqueued&&(s.unqueued=0,l=s.empty.fire,s.empty.fire=function(){s.unqueued||l()}),s.unqueued++,u.always(function(){u.always(function(){s.unqueued--,x.queue(e,"fx").length||s.empty.fire()})})),1===e.nodeType&&("height"in t||"width"in t)&&(n.overflow=[p.overflow,p.overflowX,p.overflowY],"inline"===x.css(e,"display")&&"none"===x.css(e,"float")&&(x.support.inlineBlockNeedsLayout&&"inline"!==ln(e.nodeName)?p.zoom=1:p.display="inline-block")),n.overflow&&(p.overflow="hidden",x.support.shrinkWrapBlocks||u.always(function(){p.overflow=n.overflow[0],p.overflowX=n.overflow[1],p.overflowY=n.overflow[2]}));for(r in t)if(i=t[r],Vn.exec(i)){if(delete t[r],o=o||"toggle"===i,i===(f?"hide":"show"))continue;c[r]=d&&d[r]||x.style(e,r)}if(!x.isEmptyObject(c)){d?"hidden"in d&&(f=d.hidden):d=x._data(e,"fxshow",{}),o&&(d.hidden=!f),f?x(e).show():u.done(function(){x(e).hide()}),u.done(function(){var t;x._removeData(e,"fxshow");for(t in c)x.style(e,t,c[t])});for(r in c)a=Zn(f?d[r]:0,r,u),r in d||(d[r]=a.start,f&&(a.end=a.start,a.start="width"===r||"height"===r?1:0))}}function rr(e,t,n,r,i){return new rr.prototype.init(e,t,n,r,i)}x.Tween=rr,rr.prototype={constructor:rr,init:function(e,t,n,r,i,o){this.elem=e,this.prop=n,this.easing=i||"swing",this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=o||(x.cssNumber[n]?"":"px")},cur:function(){var e=rr.propHooks[this.prop];return e&&e.get?e.get(this):rr.propHooks._default.get(this)},run:function(e){var t,n=rr.propHooks[this.prop];return this.pos=t=this.options.duration?x.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):rr.propHooks._default.set(this),this}},rr.prototype.init.prototype=rr.prototype,rr.propHooks={_default:{get:function(e){var t;return null==e.elem[e.prop]||e.elem.style&&null!=e.elem.style[e.prop]?(t=x.css(e.elem,e.prop,""),t&&"auto"!==t?t:0):e.elem[e.prop]},set:function(e){x.fx.step[e.prop]?x.fx.step[e.prop](e):e.elem.style&&(null!=e.elem.style[x.cssProps[e.prop]]||x.cssHooks[e.prop])?x.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},rr.propHooks.scrollTop=rr.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},x.each(["toggle","show","hide"],function(e,t){var n=x.fn[t];x.fn[t]=function(e,r,i){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(ir(t,!0),e,r,i)}}),x.fn.extend({fadeTo:function(e,t,n,r){return this.filter(nn).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,n,r){var i=x.isEmptyObject(e),o=x.speed(t,n,r),a=function(){var t=er(this,x.extend({},e),o);(i||x._data(this,"finish"))&&t.stop(!0)};return a.finish=a,i||o.queue===!1?this.each(a):this.queue(o.queue,a)},stop:function(e,n,r){var i=function(e){var t=e.stop;delete e.stop,t(r)};return"string"!=typeof e&&(r=n,n=e,e=t),n&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){var t=!0,n=null!=e&&e+"queueHooks",o=x.timers,a=x._data(this);if(n)a[n]&&a[n].stop&&i(a[n]);else for(n in a)a[n]&&a[n].stop&&Jn.test(n)&&i(a[n]);for(n=o.length;n--;)o[n].elem!==this||null!=e&&o[n].queue!==e||(o[n].anim.stop(r),t=!1,o.splice(n,1));(t||!r)&&x.dequeue(this,e)})},finish:function(e){return e!==!1&&(e=e||"fx"),this.each(function(){var t,n=x._data(this),r=n[e+"queue"],i=n[e+"queueHooks"],o=x.timers,a=r?r.length:0;for(n.finish=!0,x.queue(this,e,[]),i&&i.stop&&i.stop.call(this,!0),t=o.length;t--;)o[t].elem===this&&o[t].queue===e&&(o[t].anim.stop(!0),o.splice(t,1));for(t=0;a>t;t++)r[t]&&r[t].finish&&r[t].finish.call(this);delete n.finish})}});function ir(e,t){var n,r={height:e},i=0;for(t=t?1:0;4>i;i+=2-t)n=Zt[i],r["margin"+n]=r["padding"+n]=e;return t&&(r.opacity=r.width=e),r}x.each({slideDown:ir("show"),slideUp:ir("hide"),slideToggle:ir("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){x.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}}),x.speed=function(e,t,n){var r=e&&"object"==typeof e?x.extend({},e):{complete:n||!n&&t||x.isFunction(e)&&e,duration:e,easing:n&&t||t&&!x.isFunction(t)&&t};return r.duration=x.fx.off?0:"number"==typeof r.duration?r.duration:r.duration in x.fx.speeds?x.fx.speeds[r.duration]:x.fx.speeds._default,(null==r.queue||r.queue===!0)&&(r.queue="fx"),r.old=r.complete,r.complete=function(){x.isFunction(r.old)&&r.old.call(this),r.queue&&x.dequeue(this,r.queue)},r},x.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2}},x.timers=[],x.fx=rr.prototype.init,x.fx.tick=function(){var e,n=x.timers,r=0;for(Xn=x.now();n.length>r;r++)e=n[r],e()||n[r]!==e||n.splice(r--,1);n.length||x.fx.stop(),Xn=t},x.fx.timer=function(e){e()&&x.timers.push(e)&&x.fx.start()},x.fx.interval=13,x.fx.start=function(){Un||(Un=setInterval(x.fx.tick,x.fx.interval))},x.fx.stop=function(){clearInterval(Un),Un=null},x.fx.speeds={slow:600,fast:200,_default:400},x.fx.step={},x.expr&&x.expr.filters&&(x.expr.filters.animated=function(e){return x.grep(x.timers,function(t){return e===t.elem}).length}),x.fn.offset=function(e){if(arguments.length)return e===t?this:this.each(function(t){x.offset.setOffset(this,e,t)});var n,r,o={top:0,left:0},a=this[0],s=a&&a.ownerDocument;if(s)return n=s.documentElement,x.contains(n,a)?(typeof a.getBoundingClientRect!==i&&(o=a.getBoundingClientRect()),r=or(s),{top:o.top+(r.pageYOffset||n.scrollTop)-(n.clientTop||0),left:o.left+(r.pageXOffset||n.scrollLeft)-(n.clientLeft||0)}):o},x.offset={setOffset:function(e,t,n){var r=x.css(e,"position");"static"===r&&(e.style.position="relative");var i=x(e),o=i.offset(),a=x.css(e,"top"),s=x.css(e,"left"),l=("absolute"===r||"fixed"===r)&&x.inArray("auto",[a,s])>-1,u={},c={},p,f;l?(c=i.position(),p=c.top,f=c.left):(p=parseFloat(a)||0,f=parseFloat(s)||0),x.isFunction(t)&&(t=t.call(e,n,o)),null!=t.top&&(u.top=t.top-o.top+p),null!=t.left&&(u.left=t.left-o.left+f),"using"in t?t.using.call(e,u):i.css(u)}},x.fn.extend({position:function(){if(this[0]){var e,t,n={top:0,left:0},r=this[0];return"fixed"===x.css(r,"position")?t=r.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),x.nodeName(e[0],"html")||(n=e.offset()),n.top+=x.css(e[0],"borderTopWidth",!0),n.left+=x.css(e[0],"borderLeftWidth",!0)),{top:t.top-n.top-x.css(r,"marginTop",!0),left:t.left-n.left-x.css(r,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){var e=this.offsetParent||s;while(e&&!x.nodeName(e,"html")&&"static"===x.css(e,"position"))e=e.offsetParent;return e||s})}}),x.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,n){var r=/Y/.test(n);x.fn[e]=function(i){return x.access(this,function(e,i,o){var a=or(e);return o===t?a?n in a?a[n]:a.document.documentElement[i]:e[i]:(a?a.scrollTo(r?x(a).scrollLeft():o,r?o:x(a).scrollTop()):e[i]=o,t)},e,i,arguments.length,null)}});function or(e){return x.isWindow(e)?e:9===e.nodeType?e.defaultView||e.parentWindow:!1}x.each({Height:"height",Width:"width"},function(e,n){x.each({padding:"inner"+e,content:n,"":"outer"+e},function(r,i){x.fn[i]=function(i,o){var a=arguments.length&&(r||"boolean"!=typeof i),s=r||(i===!0||o===!0?"margin":"border");return x.access(this,function(n,r,i){var o;return x.isWindow(n)?n.document.documentElement["client"+e]:9===n.nodeType?(o=n.documentElement,Math.max(n.body["scroll"+e],o["scroll"+e],n.body["offset"+e],o["offset"+e],o["client"+e])):i===t?x.css(n,r,s):x.style(n,r,i,s)},n,a?i:t,a,null)}})}),x.fn.size=function(){return this.length},x.fn.andSelf=x.fn.addBack,"object"==typeof module&&module&&"object"==typeof module.exports?module.exports=x:(e.jQuery=e.$=x,"function"==typeof define&&define.amd&&define("jquery",[],function(){return x}))})(window);\n\n/*! jQuery Migrate v1.2.1 | (c) 2005, 2013 jQuery Foundation, Inc. and other contributors | jquery.org/license */\njQuery.migrateMute===void 0&&(jQuery.migrateMute=!0),function(e,t,n){function r(n){var r=t.console;i[n]||(i[n]=!0,e.migrateWarnings.push(n),r&&r.warn&&!e.migrateMute&&(r.warn("JQMIGRATE: "+n),e.migrateTrace&&r.trace&&r.trace()))}function a(t,a,i,o){if(Object.defineProperty)try{return Object.defineProperty(t,a,{configurable:!0,enumerable:!0,get:function(){return r(o),i},set:function(e){r(o),i=e}}),n}catch(s){}e._definePropertyBroken=!0,t[a]=i}var i={};e.migrateWarnings=[],!e.migrateMute&&t.console&&t.console.log&&t.console.log("JQMIGRATE: Logging is active"),e.migrateTrace===n&&(e.migrateTrace=!0),e.migrateReset=function(){i={},e.migrateWarnings.length=0},"BackCompat"===document.compatMode&&r("jQuery is not compatible with Quirks Mode");var o=e("<input/>",{size:1}).attr("size")&&e.attrFn,s=e.attr,u=e.attrHooks.value&&e.attrHooks.value.get||function(){return null},c=e.attrHooks.value&&e.attrHooks.value.set||function(){return n},l=/^(?:input|button)$/i,d=/^[238]$/,p=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,f=/^(?:checked|selected)$/i;a(e,"attrFn",o||{},"jQuery.attrFn is deprecated"),e.attr=function(t,a,i,u){var c=a.toLowerCase(),g=t&&t.nodeType;return u&&(4>s.length&&r("jQuery.fn.attr( props, pass ) is deprecated"),t&&!d.test(g)&&(o?a in o:e.isFunction(e.fn[a])))?e(t)[a](i):("type"===a&&i!==n&&l.test(t.nodeName)&&t.parentNode&&r("Can\'t change the \'type\' of an input or button in IE 6/7/8"),!e.attrHooks[c]&&p.test(c)&&(e.attrHooks[c]={get:function(t,r){var a,i=e.prop(t,r);return i===!0||"boolean"!=typeof i&&(a=t.getAttributeNode(r))&&a.nodeValue!==!1?r.toLowerCase():n},set:function(t,n,r){var a;return n===!1?e.removeAttr(t,r):(a=e.propFix[r]||r,a in t&&(t[a]=!0),t.setAttribute(r,r.toLowerCase())),r}},f.test(c)&&r("jQuery.fn.attr(\'"+c+"\') may use property instead of attribute")),s.call(e,t,a,i))},e.attrHooks.value={get:function(e,t){var n=(e.nodeName||"").toLowerCase();return"button"===n?u.apply(this,arguments):("input"!==n&&"option"!==n&&r("jQuery.fn.attr(\'value\') no longer gets properties"),t in e?e.value:null)},set:function(e,t){var a=(e.nodeName||"").toLowerCase();return"button"===a?c.apply(this,arguments):("input"!==a&&"option"!==a&&r("jQuery.fn.attr(\'value\', val) no longer sets properties"),e.value=t,n)}};var g,h,v=e.fn.init,m=e.parseJSON,y=/^([^<]*)(<[\\w\\W]+>)([^>]*)$/;e.fn.init=function(t,n,a){var i;return t&&"string"==typeof t&&!e.isPlainObject(n)&&(i=y.exec(e.trim(t)))&&i[0]&&("<"!==t.charAt(0)&&r("$(html) HTML strings must start with \'<\' character"),i[3]&&r("$(html) HTML text after last tag is ignored"),"#"===i[0].charAt(0)&&(r("HTML string cannot start with a \'#\' character"),e.error("JQMIGRATE: Invalid selector string (XSS)")),n&&n.context&&(n=n.context),e.parseHTML)?v.call(this,e.parseHTML(i[2],n,!0),n,a):v.apply(this,arguments)},e.fn.init.prototype=e.fn,e.parseJSON=function(e){return e||null===e?m.apply(this,arguments):(r("jQuery.parseJSON requires a valid JSON string"),null)},e.uaMatch=function(e){e=e.toLowerCase();var t=/(chrome)[ \\/]([\\w.]+)/.exec(e)||/(webkit)[ \\/]([\\w.]+)/.exec(e)||/(opera)(?:.*version|)[ \\/]([\\w.]+)/.exec(e)||/(msie) ([\\w.]+)/.exec(e)||0>e.indexOf("compatible")&&/(mozilla)(?:.*? rv:([\\w.]+)|)/.exec(e)||[];return{browser:t[1]||"",version:t[2]||"0"}},e.browser||(g=e.uaMatch(navigator.userAgent),h={},g.browser&&(h[g.browser]=!0,h.version=g.version),h.chrome?h.webkit=!0:h.webkit&&(h.safari=!0),e.browser=h),a(e,"browser",e.browser,"jQuery.browser is deprecated"),e.sub=function(){function t(e,n){return new t.fn.init(e,n)}e.extend(!0,t,this),t.superclass=this,t.fn=t.prototype=this(),t.fn.constructor=t,t.sub=this.sub,t.fn.init=function(r,a){return a&&a instanceof e&&!(a instanceof t)&&(a=t(a)),e.fn.init.call(this,r,a,n)},t.fn.init.prototype=t.fn;var n=t(document);return r("jQuery.sub() is deprecated"),t},e.ajaxSetup({converters:{"text json":e.parseJSON}});var b=e.fn.data;e.fn.data=function(t){var a,i,o=this[0];return!o||"events"!==t||1!==arguments.length||(a=e.data(o,t),i=e._data(o,t),a!==n&&a!==i||i===n)?b.apply(this,arguments):(r("Use of jQuery.fn.data(\'events\') is deprecated"),i)};var j=/\\/(java|ecma)script/i,w=e.fn.andSelf||e.fn.addBack;e.fn.andSelf=function(){return r("jQuery.fn.andSelf() replaced by jQuery.fn.addBack()"),w.apply(this,arguments)},e.clean||(e.clean=function(t,a,i,o){a=a||document,a=!a.nodeType&&a[0]||a,a=a.ownerDocument||a,r("jQuery.clean() is deprecated");var s,u,c,l,d=[];if(e.merge(d,e.buildFragment(t,a).childNodes),i)for(c=function(e){return!e.type||j.test(e.type)?o?o.push(e.parentNode?e.parentNode.removeChild(e):e):i.appendChild(e):n},s=0;null!=(u=d[s]);s++)e.nodeName(u,"script")&&c(u)||(i.appendChild(u),u.getElementsByTagName!==n&&(l=e.grep(e.merge([],u.getElementsByTagName("script")),c),d.splice.apply(d,[s+1,0].concat(l)),s+=l.length));return d});var Q=e.event.add,x=e.event.remove,k=e.event.trigger,N=e.fn.toggle,T=e.fn.live,M=e.fn.die,S="ajaxStart|ajaxStop|ajaxSend|ajaxComplete|ajaxError|ajaxSuccess",C=RegExp("\\\\b(?:"+S+")\\\\b"),H=/(?:^|\\s)hover(\\.\\S+|)\\b/,A=function(t){return"string"!=typeof t||e.event.special.hover?t:(H.test(t)&&r("\'hover\' pseudo-event is deprecated, use \'mouseenter mouseleave\'"),t&&t.replace(H,"mouseenter$1 mouseleave$1"))};e.event.props&&"attrChange"!==e.event.props[0]&&e.event.props.unshift("attrChange","attrName","relatedNode","srcElement"),e.event.dispatch&&a(e.event,"handle",e.event.dispatch,"jQuery.event.handle is undocumented and deprecated"),e.event.add=function(e,t,n,a,i){e!==document&&C.test(t)&&r("AJAX events should be attached to document: "+t),Q.call(this,e,A(t||""),n,a,i)},e.event.remove=function(e,t,n,r,a){x.call(this,e,A(t)||"",n,r,a)},e.fn.error=function(){var e=Array.prototype.slice.call(arguments,0);return r("jQuery.fn.error() is deprecated"),e.splice(0,0,"error"),arguments.length?this.bind.apply(this,e):(this.triggerHandler.apply(this,e),this)},e.fn.toggle=function(t,n){if(!e.isFunction(t)||!e.isFunction(n))return N.apply(this,arguments);r("jQuery.fn.toggle(handler, handler...) is deprecated");var a=arguments,i=t.guid||e.guid++,o=0,s=function(n){var r=(e._data(this,"lastToggle"+t.guid)||0)%o;return e._data(this,"lastToggle"+t.guid,r+1),n.preventDefault(),a[r].apply(this,arguments)||!1};for(s.guid=i;a.length>o;)a[o++].guid=i;return this.click(s)},e.fn.live=function(t,n,a){return r("jQuery.fn.live() is deprecated"),T?T.apply(this,arguments):(e(this.context).on(t,this.selector,n,a),this)},e.fn.die=function(t,n){return r("jQuery.fn.die() is deprecated"),M?M.apply(this,arguments):(e(this.context).off(t,this.selector||"**",n),this)},e.event.trigger=function(e,t,n,a){return n||C.test(e)||r("Global events are undocumented and deprecated"),k.call(this,e,t,n||document,a)},e.each(S.split("|"),function(t,n){e.event.special[n]={setup:function(){var t=this;return t!==document&&(e.event.add(document,n+"."+e.guid,function(){e.event.trigger(n,null,t,!0)}),e._data(this,n,e.guid++)),!1},teardown:function(){return this!==document&&e.event.remove(document,n+"."+e._data(this,n)),!1}}})}(jQuery,window);';
},function(e,t,n){n(3)(n(6))},function(e,t){e.exports="\n(function($){var escapeable=/[\"\\\\\\x00-\\x1f\\x7f-\\x9f]/g,meta={'\\b':'\\\\b','\\t':'\\\\t','\\n':'\\\\n','\\f':'\\\\f','\\r':'\\\\r','\"':'\\\\\"','\\\\':'\\\\\\\\'};$.toJSON=typeof JSON==='object'&&JSON.stringify?JSON.stringify:function(o){if(o===null){return'null';}\nvar type=typeof o;if(type==='undefined'){return undefined;}\nif(type==='number'||type==='boolean'){return''+o;}\nif(type==='string'){return $.quoteString(o);}\nif(type==='object'){if(typeof o.toJSON==='function'){return $.toJSON(o.toJSON());}\nif(o.constructor===Date){var month=o.getUTCMonth()+1,day=o.getUTCDate(),year=o.getUTCFullYear(),hours=o.getUTCHours(),minutes=o.getUTCMinutes(),seconds=o.getUTCSeconds(),milli=o.getUTCMilliseconds();if(month<10){month='0'+month;}\nif(day<10){day='0'+day;}\nif(hours<10){hours='0'+hours;}\nif(minutes<10){minutes='0'+minutes;}\nif(seconds<10){seconds='0'+seconds;}\nif(milli<100){milli='0'+milli;}\nif(milli<10){milli='0'+milli;}\nreturn'\"'+year+'-'+month+'-'+day+'T'+\nhours+':'+minutes+':'+seconds+'.'+milli+'Z\"';}\nif(o.constructor===Array){var ret=[];for(var i=0;i<o.length;i++){ret.push($.toJSON(o[i])||'null');}\nreturn'['+ret.join(',')+']';}\nvar name,val,pairs=[];for(var k in o){type=typeof k;if(type==='number'){name='\"'+k+'\"';}else if(type==='string'){name=$.quoteString(k);}else{continue;}\ntype=typeof o[k];if(type==='function'||type==='undefined'){continue;}\nval=$.toJSON(o[k]);pairs.push(name+':'+val);}\nreturn'{'+pairs.join(',')+'}';}};$.evalJSON=typeof JSON==='object'&&JSON.parse?JSON.parse:function(src){return eval('('+src+')');};$.secureEvalJSON=typeof JSON==='object'&&JSON.parse?JSON.parse:function(src){var filtered=src.replace(/\\\\[\"\\\\\\/bfnrtu]/g,'@').replace(/\"[^\"\\\\\\n\\r]*\"|true|false|null|-?\\d+(?:\\.\\d*)?(?:[eE][+\\-]?\\d+)?/g,']').replace(/(?:^|:|,)(?:\\s*\\[)+/g,'');if(/^[\\],:{}\\s]*$/.test(filtered)){return eval('('+src+')');}else{throw new SyntaxError('Error parsing JSON, source is not valid.');}};$.quoteString=function(string){if(string.match(escapeable)){return'\"'+string.replace(escapeable,function(a){var c=meta[a];if(typeof c==='string'){return c;}\nc=a.charCodeAt();return'\\\\u00'+Math.floor(c/16).toString(16)+(c%16).toString(16);})+'\"';}\nreturn'\"'+string+'\"';};})(jQuery);"},function(e,t,n){n(3)(n(8))},function(e,t){e.exports="/*\r\n * Action Links\r\n * A Tool that allows a sec of buttons to be displayed by a gear\r\n * and contain a dropdown of user choices\r\n * Created: by Jeremy Friedman 12/24/2009\r\n * \r\n * Update: the s_actionlinks_hide event has been removed.  It is never listened for and\r\n * was preventing the onbeforeunload event from firing in the gradebook.\r\n *\r\n */\r\nvar sActionLinkBodySet = false;\r\nvar sActionLinkBodySet2 = false;\r\n(function($) {\r\n  $.fn.sActionLinks = function(options) {\r\n    var opts = $.extend( {}, $.fn.sActionLinks.defaults, options);\r\n\r\n    if( opts.hide_all ){\r\n      $(\".action-links-unfold\").removeClass('active').next().hide();\r\n      $(\".sActionLinksVisible\").removeClass('sActionLinksVisible')\r\n      return;\r\n    }\r\n\r\n    // determine if the gears are hidden or shown by default\r\n    var hidden = options.hidden;\r\n\r\n    // determine if there is a custom wrapper element we can use\r\n    var wrapper = options.wrapper;\r\n    var rowClass = options.rowClass;\r\n    var item = $(this);\r\n\r\n    if (hidden && opts.onTargetSelector == '') {\r\n      item.unbind('mouseenter').bind('mouseenter', function(e) {\r\n        var element = $(this);\r\n\r\n        if (wrapper.length > 0) $(wrapper, element).addClass('sActionLinksVisible');\r\n      });\r\n\r\n      item.unbind('mouseleave').bind('mouseleave', function() {\r\n        var element = $(this);\r\n\r\n        if (!$(\".action-links\", element).is(\":visible\")) {\r\n          if (wrapper.length > 0) $(wrapper, element).removeClass('sActionLinksVisible');\r\n          $(\".action-links\", element).hide();\r\n        }\r\n      }).trigger('mouseleave');\r\n    }\r\n\r\n    // save opts\r\n    $(\".action-links-unfold\").data('s_actionlinks_opts', opts);\r\n\r\n    // click actions\r\n    if(opts.onTargetSelector != '') {\r\n      // the item is the container, use delegated events\r\n      $(item).off('click.sactionlinks')\r\n        .on('click.sactionlinks', opts.onTargetSelector + ' .action-links-unfold', clickActionLinksUnfold)\r\n        .on('click.sactionlinks', opts.onTargetSelector + ' .action-links a', clickActionLinks)\r\n    }\r\n    else {\r\n      $(\".action-links-unfold\", item).unbind('click.sactionlinks').bind('click.sactionlinks', clickActionLinksUnfold);\r\n      $(\".action-links a\", item).unbind('click.sactionlinks').bind('click.sactionlinks', clickActionLinks);\r\n    }\r\n\r\n    function clickActionLinksUnfold(e) {\r\n      $('.keep-open').each(function(){\r\n        $(this).trigger('sActionsClicked');\r\n      });\r\n\r\n      e.stopPropagation();\r\n      if(!$(this).hasClass('disabled')){\r\n        $(this).toggleClass('active').next().toggle();\r\n        $(\".action-links-unfold\").not($(this)).removeClass('active').next().hide();\r\n        $(\".sActionLinksVisible\").not($(this).parents(\".sActionLinksVisible\")).removeClass('sActionLinksVisible');\r\n        \r\n        if( $(this).hasClass('active') ) {\r\n          item.trigger('mouseenter');\r\n          $(document).unbind('click.sactionlinks').bind('click.sactionlinks',function(event) {\r\n\r\n            var cur_menu = $(event.target).parents('li');\r\n            var parent_btn = cur_menu.parent('.action-links').siblings('.action-links-unfold');\r\n            var opts = parent_btn.data( 's_actionlinks_opts');\r\n\r\n            if(typeof opts == \"object\" && opts && opts.stay_open)\r\n              return;\r\n\r\n            $(\".action-links-unfold\").not(cur_menu).not('.keep-open').removeClass('active').next().hide();\r\n\r\n            if( $(\".action-links-unfold.active\").size() == 0 ){\r\n              $(document).unbind('click.sactionlinks');\r\n              $(wrapper, item).removeClass('sActionLinksVisible');\r\n            }\r\n          });\r\n        }\r\n        else {\r\n          item.trigger('mouseleave');\r\n          $(document).unbind('click.sactionlinks');\r\n        }\r\n      }\r\n    }\r\n\r\n    function clickActionLinks(event) {\r\n      var parent_ul = $(this).parents('.action-links');\r\n      var parent_btn = parent_ul.siblings('.action-links-unfold');\r\n\r\n      parent_ul.hide();\r\n      parent_btn.removeClass('active');\r\n    }\r\n\r\n  };\r\n\r\n  // plug-in defaults\r\n  $.fn.sActionLinks.defaults = {\r\n    hidden : true,\r\n    hide_all: false,\r\n    stay_open: false, // whether or not to hide the menu when a menu item is clicked\r\n    onTargetSelector: ''\r\n  };\r\n})(jQuery);"},function(e,t,n){n(3)(n(10))},function(e,t){e.exports="/*\n * jQuery Easing v1.3 - http://gsgd.co.uk/sandbox/jquery/easing/\n *\n * Uses the built in easing capabilities added In jQuery 1.1\n * to offer multiple easing options\n *\n * TERMS OF USE - jQuery Easing\n * \n * Open source under the BSD License. \n * \n * Copyright  2008 George McGinley Smith\n * All rights reserved.\n * \n * Redistribution and use in source and binary forms, with or without modification, \n * are permitted provided that the following conditions are met:\n * \n * Redistributions of source code must retain the above copyright notice, this list of \n * conditions and the following disclaimer.\n * Redistributions in binary form must reproduce the above copyright notice, this list \n * of conditions and the following disclaimer in the documentation and/or other materials \n * provided with the distribution.\n * \n * Neither the name of the author nor the names of contributors may be used to endorse \n * or promote products derived from this software without specific prior written permission.\n * \n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND ANY \n * EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF\n * MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE\n *  COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,\n *  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE\n *  GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED \n * AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n *  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED \n * OF THE POSSIBILITY OF SUCH DAMAGE. \n *\n*/\n\n// t: current time, b: begInnIng value, c: change In value, d: duration\njQuery.easing['jswing'] = jQuery.easing['swing'];\n\njQuery.extend( jQuery.easing,\n{\n\tdef: 'easeOutQuad',\n\tswing: function (x, t, b, c, d) {\n\t\t//alert(jQuery.easing.default);\n\t\treturn jQuery.easing[jQuery.easing.def](x, t, b, c, d);\n\t},\n\teaseInQuad: function (x, t, b, c, d) {\n\t\treturn c*(t/=d)*t + b;\n\t},\n\teaseOutQuad: function (x, t, b, c, d) {\n\t\treturn -c *(t/=d)*(t-2) + b;\n\t},\n\teaseInOutQuad: function (x, t, b, c, d) {\n\t\tif ((t/=d/2) < 1) return c/2*t*t + b;\n\t\treturn -c/2 * ((--t)*(t-2) - 1) + b;\n\t},\n\teaseInCubic: function (x, t, b, c, d) {\n\t\treturn c*(t/=d)*t*t + b;\n\t},\n\teaseOutCubic: function (x, t, b, c, d) {\n\t\treturn c*((t=t/d-1)*t*t + 1) + b;\n\t},\n\teaseInOutCubic: function (x, t, b, c, d) {\n\t\tif ((t/=d/2) < 1) return c/2*t*t*t + b;\n\t\treturn c/2*((t-=2)*t*t + 2) + b;\n\t},\n\teaseInQuart: function (x, t, b, c, d) {\n\t\treturn c*(t/=d)*t*t*t + b;\n\t},\n\teaseOutQuart: function (x, t, b, c, d) {\n\t\treturn -c * ((t=t/d-1)*t*t*t - 1) + b;\n\t},\n\teaseInOutQuart: function (x, t, b, c, d) {\n\t\tif ((t/=d/2) < 1) return c/2*t*t*t*t + b;\n\t\treturn -c/2 * ((t-=2)*t*t*t - 2) + b;\n\t},\n\teaseInQuint: function (x, t, b, c, d) {\n\t\treturn c*(t/=d)*t*t*t*t + b;\n\t},\n\teaseOutQuint: function (x, t, b, c, d) {\n\t\treturn c*((t=t/d-1)*t*t*t*t + 1) + b;\n\t},\n\teaseInOutQuint: function (x, t, b, c, d) {\n\t\tif ((t/=d/2) < 1) return c/2*t*t*t*t*t + b;\n\t\treturn c/2*((t-=2)*t*t*t*t + 2) + b;\n\t},\n\teaseInSine: function (x, t, b, c, d) {\n\t\treturn -c * Math.cos(t/d * (Math.PI/2)) + c + b;\n\t},\n\teaseOutSine: function (x, t, b, c, d) {\n\t\treturn c * Math.sin(t/d * (Math.PI/2)) + b;\n\t},\n\teaseInOutSine: function (x, t, b, c, d) {\n\t\treturn -c/2 * (Math.cos(Math.PI*t/d) - 1) + b;\n\t},\n\teaseInExpo: function (x, t, b, c, d) {\n\t\treturn (t==0) ? b : c * Math.pow(2, 10 * (t/d - 1)) + b;\n\t},\n\teaseOutExpo: function (x, t, b, c, d) {\n\t\treturn (t==d) ? b+c : c * (-Math.pow(2, -10 * t/d) + 1) + b;\n\t},\n\teaseInOutExpo: function (x, t, b, c, d) {\n\t\tif (t==0) return b;\n\t\tif (t==d) return b+c;\n\t\tif ((t/=d/2) < 1) return c/2 * Math.pow(2, 10 * (t - 1)) + b;\n\t\treturn c/2 * (-Math.pow(2, -10 * --t) + 2) + b;\n\t},\n\teaseInCirc: function (x, t, b, c, d) {\n\t\treturn -c * (Math.sqrt(1 - (t/=d)*t) - 1) + b;\n\t},\n\teaseOutCirc: function (x, t, b, c, d) {\n\t\treturn c * Math.sqrt(1 - (t=t/d-1)*t) + b;\n\t},\n\teaseInOutCirc: function (x, t, b, c, d) {\n\t\tif ((t/=d/2) < 1) return -c/2 * (Math.sqrt(1 - t*t) - 1) + b;\n\t\treturn c/2 * (Math.sqrt(1 - (t-=2)*t) + 1) + b;\n\t},\n\teaseInElastic: function (x, t, b, c, d) {\n\t\tvar s=1.70158;var p=0;var a=c;\n\t\tif (t==0) return b;  if ((t/=d)==1) return b+c;  if (!p) p=d*.3;\n\t\tif (a < Math.abs(c)) { a=c; var s=p/4; }\n\t\telse var s = p/(2*Math.PI) * Math.asin (c/a);\n\t\treturn -(a*Math.pow(2,10*(t-=1)) * Math.sin( (t*d-s)*(2*Math.PI)/p )) + b;\n\t},\n\teaseOutElastic: function (x, t, b, c, d) {\n\t\tvar s=1.70158;var p=0;var a=c;\n\t\tif (t==0) return b;  if ((t/=d)==1) return b+c;  if (!p) p=d*.3;\n\t\tif (a < Math.abs(c)) { a=c; var s=p/4; }\n\t\telse var s = p/(2*Math.PI) * Math.asin (c/a);\n\t\treturn a*Math.pow(2,-10*t) * Math.sin( (t*d-s)*(2*Math.PI)/p ) + c + b;\n\t},\n\teaseInOutElastic: function (x, t, b, c, d) {\n\t\tvar s=1.70158;var p=0;var a=c;\n\t\tif (t==0) return b;  if ((t/=d/2)==2) return b+c;  if (!p) p=d*(.3*1.5);\n\t\tif (a < Math.abs(c)) { a=c; var s=p/4; }\n\t\telse var s = p/(2*Math.PI) * Math.asin (c/a);\n\t\tif (t < 1) return -.5*(a*Math.pow(2,10*(t-=1)) * Math.sin( (t*d-s)*(2*Math.PI)/p )) + b;\n\t\treturn a*Math.pow(2,-10*(t-=1)) * Math.sin( (t*d-s)*(2*Math.PI)/p )*.5 + c + b;\n\t},\n\teaseInBack: function (x, t, b, c, d, s) {\n\t\tif (s == undefined) s = 1.70158;\n\t\treturn c*(t/=d)*t*((s+1)*t - s) + b;\n\t},\n\teaseOutBack: function (x, t, b, c, d, s) {\n\t\tif (s == undefined) s = 1.70158;\n\t\treturn c*((t=t/d-1)*t*((s+1)*t + s) + 1) + b;\n\t},\n\teaseInOutBack: function (x, t, b, c, d, s) {\n\t\tif (s == undefined) s = 1.70158; \n\t\tif ((t/=d/2) < 1) return c/2*(t*t*(((s*=(1.525))+1)*t - s)) + b;\n\t\treturn c/2*((t-=2)*t*(((s*=(1.525))+1)*t + s) + 2) + b;\n\t},\n\teaseInBounce: function (x, t, b, c, d) {\n\t\treturn c - jQuery.easing.easeOutBounce (x, d-t, 0, c, d) + b;\n\t},\n\teaseOutBounce: function (x, t, b, c, d) {\n\t\tif ((t/=d) < (1/2.75)) {\n\t\t\treturn c*(7.5625*t*t) + b;\n\t\t} else if (t < (2/2.75)) {\n\t\t\treturn c*(7.5625*(t-=(1.5/2.75))*t + .75) + b;\n\t\t} else if (t < (2.5/2.75)) {\n\t\t\treturn c*(7.5625*(t-=(2.25/2.75))*t + .9375) + b;\n\t\t} else {\n\t\t\treturn c*(7.5625*(t-=(2.625/2.75))*t + .984375) + b;\n\t\t}\n\t},\n\teaseInOutBounce: function (x, t, b, c, d) {\n\t\tif (t < d/2) return jQuery.easing.easeInBounce (x, t*2, 0, c, d) * .5 + b;\n\t\treturn jQuery.easing.easeOutBounce (x, t*2-d, 0, c, d) * .5 + c*.5 + b;\n\t}\n});\n\n/*\n *\n * TERMS OF USE - EASING EQUATIONS\n * \n * Open source under the BSD License. \n * \n * Copyright  2001 Robert Penner\n * All rights reserved.\n * \n * Redistribution and use in source and binary forms, with or without modification, \n * are permitted provided that the following conditions are met:\n * \n * Redistributions of source code must retain the above copyright notice, this list of \n * conditions and the following disclaimer.\n * Redistributions in binary form must reproduce the above copyright notice, this list \n * of conditions and the following disclaimer in the documentation and/or other materials \n * provided with the distribution.\n * \n * Neither the name of the author nor the names of contributors may be used to endorse \n * or promote products derived from this software without specific prior written permission.\n * \n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND ANY \n * EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF\n * MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE\n *  COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,\n *  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE\n *  GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED \n * AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n *  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED \n * OF THE POSSIBILITY OF SUCH DAMAGE. \n *\n */"},function(e,t,n){n(3)(n(12))},function(e,t){e.exports="/**\n*\t@name\t\t\t\t\t\t\tElastic\n*\t@descripton\t\t\t\t\t\tElastic is jQuery plugin that grow and shrink your textareas automatically\n*\t@version\t\t\t\t\t\t1.6.11\n*\t@requires\t\t\t\t\t\tjQuery 1.2.6+\n*\n*\t@author\t\t\t\t\t\t\tJan Jarfalk\n*\t@author-email\t\t\t\t\tjan.jarfalk@unwrongest.com\n*\t@author-website\t\t\t\t\thttp://www.unwrongest.com\n*\n*\t@licence\t\t\t\t\t\tMIT License - http://www.opensource.org/licenses/mit-license.php\n*/\n\n(function($){ \n\tjQuery.fn.extend({  \n\t\telastic: function() {\n\t\t\n\t\t\t//\tWe will create a div clone of the textarea\n\t\t\t//\tby copying these attributes from the textarea to the div.\n\t\t\tvar mimics = [\n\t\t\t\t'paddingTop',\n\t\t\t\t'paddingRight',\n\t\t\t\t'paddingBottom',\n\t\t\t\t'paddingLeft',\n\t\t\t\t'fontSize',\n\t\t\t\t'lineHeight',\n\t\t\t\t'fontFamily',\n\t\t\t\t'width',\n\t\t\t\t'fontWeight',\n\t\t\t\t'border-top-width',\n\t\t\t\t'border-right-width',\n\t\t\t\t'border-bottom-width',\n\t\t\t\t'border-left-width',\n\t\t\t\t'borderTopStyle',\n\t\t\t\t'borderTopColor',\n\t\t\t\t'borderRightStyle',\n\t\t\t\t'borderRightColor',\n\t\t\t\t'borderBottomStyle',\n\t\t\t\t'borderBottomColor',\n\t\t\t\t'borderLeftStyle',\n\t\t\t\t'borderLeftColor'\n\t\t\t\t];\n\t\t\t\n\t\t\treturn this.each( function() {\n\n\t\t\t\t// Elastic only works on textareas\n\t\t\t\tif ( this.type !== 'textarea' ) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\t\t\n\t\t\tvar $textarea\t= jQuery(this),\n\t\t\t\t$twin\t\t= jQuery('<div />').css({\n\t\t\t\t\t'position'\t\t: 'absolute',\n\t\t\t\t\t'display'\t\t: 'none',\n\t\t\t\t\t'word-wrap'\t\t: 'break-word',\n\t\t\t\t\t'white-space'\t:'pre-wrap'\n\t\t\t\t}).addClass('s-js-elastic-twin'), // Schoology addition: could be useful...\n\t\t\t\tlineHeight\t= parseInt($textarea.css('line-height'),10) || parseInt($textarea.css('font-size'),'10'),\n\t\t\t\tminheight\t= parseInt($textarea.css('height'),10) || lineHeight*3,\n\t\t\t\tmaxheight\t= parseInt($textarea.css('max-height'),10) || Number.MAX_VALUE,\n\t\t\t\tgoalheight\t= 0;\n\t\t\t\t\n\t\t\t\t// Opera returns max-height of -1 if not set\n\t\t\t\tif (maxheight < 0) { maxheight = Number.MAX_VALUE; }\n\t\t\t\t\t\n\t\t\t\t// Append the twin to the DOM\n\t\t\t\t// We are going to meassure the height of this, not the textarea.\n\t\t\t\t$twin.appendTo($textarea.parent());\n\t\t\t\t\n\t\t\t\t// Copy the essential styles (mimics) from the textarea to the twin\n\t\t\t\tvar i = mimics.length;\n\t\t\t\twhile(i--){\n\t\t\t\t\t$twin.css(mimics[i].toString(),$textarea.css(mimics[i].toString()));\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t// Updates the width of the twin. (solution for textareas with widths in percent)\n\t\t\t\tfunction setTwinWidth(){\n\t\t\t\t\tvar curatedWidth = Math.floor(parseInt($textarea.width(),10));\n\t\t\t\t\tif($twin.width() !== curatedWidth){\n\t\t\t\t\t\t$twin.css({'width': curatedWidth + 'px'});\n\t\t\t\t\t\t\n\t\t\t\t\t\t// Update height of textarea\n\t\t\t\t\t\tupdate(true);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t// Sets a given height and overflow state on the textarea\n\t\t\t\tfunction setHeightAndOverflow(height, overflow){\n\t\t\t\t\n\t\t\t\t\tvar curratedHeight = Math.floor(parseInt(height,10));\n\t\t\t\t\tif($textarea.height() !== curratedHeight){\n\t\t\t\t\t\t$textarea.css({'height': curratedHeight + 'px','overflow':overflow});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t// This function will update the height of the textarea if necessary \n\t\t\t\tfunction update(forced) {\n\t\t\t\t\t\n                                        // Get curated content from the textarea.\n\t\t\t\t\tvar textareaContent = $textarea.val().replace(/&/g,'&amp;').replace(/ {2}/g, '&nbsp;').replace(/<|>/g, '&gt;').replace(/\\n/g, '<br />');\n\t\t\t\t\t\n\t\t\t\t\t// Compare curated content with curated twin.\n\t\t\t\t\tvar twinContent = $twin.html().replace(/<br>/ig,'<br />');\n\t\t\t\t\t\n                                        if(forced || textareaContent+'&nbsp;' !== twinContent){\n\t\t\t\t\t\n\t\t\t\t\t\t// Add an extra white space so new rows are added when you are at the end of a row.\n\t\t\t\t\t\t$twin.html(textareaContent+'&nbsp;');\n\t\t\t\t\t\t\n\t\t\t\t\t\t// Change textarea height if twin plus the height of one line differs more than 3 pixel from textarea height\n\t\t\t\t\t\tif(Math.abs($twin.height() + lineHeight - $textarea.height()) > 3){\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tvar goalheight = $twin.height()+lineHeight;\n\t\t\t\t\t\t\tif(goalheight >= maxheight) {\n\t\t\t\t\t\t\t\tsetHeightAndOverflow(maxheight,'auto');\n\t\t\t\t\t\t\t} else if(goalheight <= minheight) {\n\t\t\t\t\t\t\t\tsetHeightAndOverflow(minheight,'hidden');\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tsetHeightAndOverflow(goalheight,'hidden');\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t}\n                        /*\n                          SGY-8768:\n                            broadcast an event that the update/resize is complete\n                        */\n                        $(document).trigger('jq_elastic_update_done', [$textarea, $twin]);\n\t\t\t\t\t}\n\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t// Hide scrollbars\n\t\t\t\t$textarea.css({'overflow':'hidden'});\n\t\t\t\t\n\t\t\t\t// Update textarea size on keyup, change, cut and paste\n\t\t\t\t$textarea.bind('keyup change cut paste', function(){\n\t\t\t\t\tupdate(); \n\t\t\t\t});\n\t\t\t\t\n\t\t\t\t// Update width of twin if browser or textarea is resized (solution for textareas with widths in percent)\n\t\t\t\t$(window).bind('resize', setTwinWidth);\n\t\t\t\t$textarea.bind('resize', setTwinWidth);\n\t\t\t\t$textarea.bind('update', update);\n\t\t\t\t\n\t\t\t\t// Compact textarea on blur\n\t\t\t\t$textarea.bind('blur',function(){\n\t\t\t\t\tif($twin.height() < maxheight){\n\t\t\t\t\t\tif($twin.height() > minheight) {\n\t\t\t\t\t\t\t$textarea.height($twin.height());\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t$textarea.height(minheight);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\t// And this line is to catch the browser paste event\n\t\t\t\t$textarea.bind('input paste',function(e){ setTimeout( update, 250); });\t\t\t\t\n\t\t\t\t\n\t\t\t\t// Run update once when elastic is initialized\n\t\t\t\tupdate();\n        \n\t\t\t});\n\t\t\t\n        } \n    }); \n})(jQuery);"},function(e,t,n){n(3)(n(14))},function(e,t){e.exports='/*! jQuery UI - v1.9.0 - 2012-10-05\n* http://jqueryui.com\n* Includes: jquery.ui.core.js, jquery.ui.widget.js, jquery.ui.mouse.js, jquery.ui.position.js, jquery.ui.accordion.js, jquery.ui.autocomplete.js, jquery.ui.button.js, jquery.ui.datepicker.js, jquery.ui.dialog.js, jquery.ui.draggable.js, jquery.ui.droppable.js, jquery.ui.effect.js, jquery.ui.effect-blind.js, jquery.ui.effect-bounce.js, jquery.ui.effect-clip.js, jquery.ui.effect-drop.js, jquery.ui.effect-explode.js, jquery.ui.effect-fade.js, jquery.ui.effect-fold.js, jquery.ui.effect-highlight.js, jquery.ui.effect-pulsate.js, jquery.ui.effect-scale.js, jquery.ui.effect-shake.js, jquery.ui.effect-slide.js, jquery.ui.effect-transfer.js, jquery.ui.menu.js, jquery.ui.progressbar.js, jquery.ui.resizable.js, jquery.ui.selectable.js, jquery.ui.slider.js, jquery.ui.sortable.js, jquery.ui.spinner.js, jquery.ui.tabs.js, jquery.ui.tooltip.js\n* Copyright (c) 2012 jQuery Foundation and other contributors Licensed MIT */\n\n(function(e,t){function i(t,n){var r,i,o,u=t.nodeName.toLowerCase();return"area"===u?(r=t.parentNode,i=r.name,!t.href||!i||r.nodeName.toLowerCase()!=="map"?!1:(o=e("img[usemap=#"+i+"]")[0],!!o&&s(o))):(/input|select|textarea|button|object/.test(u)?!t.disabled:"a"===u?t.href||n:n)&&s(t)}function s(t){return!e(t).parents().andSelf().filter(function(){return e.css(this,"visibility")==="hidden"||e.expr.filters.hidden(this)}).length}var n=0,r=/^ui-id-\\d+$/;e.ui=e.ui||{};if(e.ui.version)return;e.extend(e.ui,{version:"1.9.0",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),e.fn.extend({_focus:e.fn.focus,focus:function(t,n){return typeof t=="number"?this.each(function(){var r=this;setTimeout(function(){e(r).focus(),n&&n.call(r)},t)}):this._focus.apply(this,arguments)},scrollParent:function(){var t;return e.browser.msie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?t=this.parents().filter(function(){return/(relative|absolute|fixed)/.test(e.css(this,"position"))&&/(auto|scroll)/.test(e.css(this,"overflow")+e.css(this,"overflow-y")+e.css(this,"overflow-x"))}).eq(0):t=this.parents().filter(function(){return/(auto|scroll)/.test(e.css(this,"overflow")+e.css(this,"overflow-y")+e.css(this,"overflow-x"))}).eq(0),/fixed/.test(this.css("position"))||!t.length?e(document):t},zIndex:function(n){if(n!==t)return this.css("zIndex",n);if(this.length){var r=e(this[0]),i,s;while(r.length&&r[0]!==document){i=r.css("position");if(i==="absolute"||i==="relative"||i==="fixed"){s=parseInt(r.css("zIndex"),10);if(!isNaN(s)&&s!==0)return s}r=r.parent()}}return 0},uniqueId:function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++n)})},removeUniqueId:function(){return this.each(function(){r.test(this.id)&&e(this).removeAttr("id")})}}),e("<a>").outerWidth(1).jquery||e.each(["Width","Height"],function(n,r){function u(t,n,r,s){return e.each(i,function(){n-=parseFloat(e.css(t,"padding"+this))||0,r&&(n-=parseFloat(e.css(t,"border"+this+"Width"))||0),s&&(n-=parseFloat(e.css(t,"margin"+this))||0)}),n}var i=r==="Width"?["Left","Right"]:["Top","Bottom"],s=r.toLowerCase(),o={innerWidth:e.fn.innerWidth,innerHeight:e.fn.innerHeight,outerWidth:e.fn.outerWidth,outerHeight:e.fn.outerHeight};e.fn["inner"+r]=function(n){return n===t?o["inner"+r].call(this):this.each(function(){e(this).css(s,u(this,n)+"px")})},e.fn["outer"+r]=function(t,n){return typeof t!="number"?o["outer"+r].call(this,t):this.each(function(){e(this).css(s,u(this,t,!0,n)+"px")})}}),e.extend(e.expr[":"],{data:e.expr.createPseudo?e.expr.createPseudo(function(t){return function(n){return!!e.data(n,t)}}):function(t,n,r){return!!e.data(t,r[3])},focusable:function(t){return i(t,!isNaN(e.attr(t,"tabindex")))},tabbable:function(t){var n=e.attr(t,"tabindex"),r=isNaN(n);return(r||n>=0)&&i(t,!r)}}),e(function(){var t=document.body,n=t.appendChild(n=document.createElement("div"));n.offsetHeight,e.extend(n.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0}),e.support.minHeight=n.offsetHeight===100,e.support.selectstart="onselectstart"in n,t.removeChild(n).style.display="none"}),e.fn.extend({disableSelection:function(){return this.bind((e.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(e){e.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),e.extend(e.ui,{plugin:{add:function(t,n,r){var i,s=e.ui[t].prototype;for(i in r)s.plugins[i]=s.plugins[i]||[],s.plugins[i].push([n,r[i]])},call:function(e,t,n){var r,i=e.plugins[t];if(!i||!e.element[0].parentNode||e.element[0].parentNode.nodeType===11)return;for(r=0;r<i.length;r++)e.options[i[r][0]]&&i[r][1].apply(e.element,n)}},contains:e.contains,hasScroll:function(t,n){if(e(t).css("overflow")==="hidden")return!1;var r=n&&n==="left"?"scrollLeft":"scrollTop",i=!1;return t[r]>0?!0:(t[r]=1,i=t[r]>0,t[r]=0,i)},isOverAxis:function(e,t,n){return e>t&&e<t+n},isOver:function(t,n,r,i,s,o){return e.ui.isOverAxis(t,r,s)&&e.ui.isOverAxis(n,i,o)}})})(jQuery);(function(e,t){var n=0,r=Array.prototype.slice,i=e.cleanData;e.cleanData=function(t){for(var n=0,r;(r=t[n])!=null;n++)try{e(r).triggerHandler("remove")}catch(s){}i(t)},e.widget=function(t,n,r){var i,s,o,u,a=t.split(".")[0];t=t.split(".")[1],i=a+"-"+t,r||(r=n,n=e.Widget),e.expr[":"][i.toLowerCase()]=function(t){return!!e.data(t,i)},e[a]=e[a]||{},s=e[a][t],o=e[a][t]=function(e,t){if(!this._createWidget)return new o(e,t);arguments.length&&this._createWidget(e,t)},e.extend(o,s,{version:r.version,_proto:e.extend({},r),_childConstructors:[]}),u=new n,u.options=e.widget.extend({},u.options),e.each(r,function(t,i){e.isFunction(i)&&(r[t]=function(){var e=function(){return n.prototype[t].apply(this,arguments)},r=function(e){return n.prototype[t].apply(this,e)};return function(){var t=this._super,n=this._superApply,s;return this._super=e,this._superApply=r,s=i.apply(this,arguments),this._super=t,this._superApply=n,s}}())}),o.prototype=e.widget.extend(u,{widgetEventPrefix:t},r,{constructor:o,namespace:a,widgetName:t,widgetBaseClass:i,widgetFullName:i}),s?(e.each(s._childConstructors,function(t,n){var r=n.prototype;e.widget(r.namespace+"."+r.widgetName,o,n._proto)}),delete s._childConstructors):n._childConstructors.push(o),e.widget.bridge(t,o)},e.widget.extend=function(n){var i=r.call(arguments,1),s=0,o=i.length,u,a;for(;s<o;s++)for(u in i[s])a=i[s][u],i[s].hasOwnProperty(u)&&a!==t&&(n[u]=e.isPlainObject(a)?e.widget.extend({},n[u],a):a);return n},e.widget.bridge=function(n,i){var s=i.prototype.widgetFullName;e.fn[n]=function(o){var u=typeof o=="string",a=r.call(arguments,1),f=this;return o=!u&&a.length?e.widget.extend.apply(null,[o].concat(a)):o,u?this.each(function(){var r,i=e.data(this,s);if(!i)return e.error("cannot call methods on "+n+" prior to initialization; "+"attempted to call method \'"+o+"\'");if(!e.isFunction(i[o])||o.charAt(0)==="_")return e.error("no such method \'"+o+"\' for "+n+" widget instance");r=i[o].apply(i,a);if(r!==i&&r!==t)return f=r&&r.jquery?f.pushStack(r.get()):r,!1}):this.each(function(){var t=e.data(this,s);t?t.option(o||{})._init():new i(o,this)}),f}},e.Widget=function(e,t){},e.Widget._childConstructors=[],e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(t,r){r=e(r||this.defaultElement||this)[0],this.element=e(r),this.uuid=n++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=e.widget.extend({},this.options,this._getCreateOptions(),t),this.bindings=e(),this.hoverable=e(),this.focusable=e(),r!==this&&(e.data(r,this.widgetName,this),e.data(r,this.widgetFullName,this),this._on({remove:"destroy"}),this.document=e(r.style?r.ownerDocument:r.document||r),this.window=e(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:e.noop,_getCreateEventData:e.noop,_create:e.noop,_init:e.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(e.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled "+"ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:e.noop,widget:function(){return this.element},option:function(n,r){var i=n,s,o,u;if(arguments.length===0)return e.widget.extend({},this.options);if(typeof n=="string"){i={},s=n.split("."),n=s.shift();if(s.length){o=i[n]=e.widget.extend({},this.options[n]);for(u=0;u<s.length-1;u++)o[s[u]]=o[s[u]]||{},o=o[s[u]];n=s.pop();if(r===t)return o[n]===t?null:o[n];o[n]=r}else{if(r===t)return this.options[n]===t?null:this.options[n];i[n]=r}}return this._setOptions(i),this},_setOptions:function(e){var t;for(t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return this.options[e]=t,e==="disabled"&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!t).attr("aria-disabled",t),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(t,n){n?(t=e(t),this.bindings=this.bindings.add(t)):(n=t,t=this.element);var r=this;e.each(n,function(n,i){function s(){if(r.options.disabled===!0||e(this).hasClass("ui-state-disabled"))return;return(typeof i=="string"?r[i]:i).apply(r,arguments)}typeof i!="string"&&(s.guid=i.guid=i.guid||s.guid||e.guid++);var o=n.match(/^(\\w+)\\s*(.*)$/),u=o[1]+r.eventNamespace,a=o[2];a?r.widget().delegate(a,u,s):t.bind(u,s)})},_off:function(e,t){t=(t||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,e.unbind(t).undelegate(t)},_delay:function(e,t){function n(){return(typeof e=="string"?r[e]:e).apply(r,arguments)}var r=this;return setTimeout(n,t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){e(t.currentTarget).addClass("ui-state-hover")},mouseleave:function(t){e(t.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){e(t.currentTarget).addClass("ui-state-focus")},focusout:function(t){e(t.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(t,n,r){var i,s,o=this.options[t];r=r||{},n=e.Event(n),n.type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),n.target=this.element[0],s=n.originalEvent;if(s)for(i in s)i in n||(n[i]=s[i]);return this.element.trigger(n,r),!(e.isFunction(o)&&o.apply(this.element[0],[n].concat(r))===!1||n.isDefaultPrevented())}},e.each({show:"fadeIn",hide:"fadeOut"},function(t,n){e.Widget.prototype["_"+t]=function(r,i,s){typeof i=="string"&&(i={effect:i});var o,u=i?i===!0||typeof i=="number"?n:i.effect||n:t;i=i||{},typeof i=="number"&&(i={duration:i}),o=!e.isEmptyObject(i),i.complete=s,i.delay&&r.delay(i.delay),o&&e.effects&&(e.effects.effect[u]||e.uiBackCompat!==!1&&e.effects[u])?r[t](i):u!==t&&r[u]?r[u](i.duration,i.easing,s):r.queue(function(n){e(this)[t](),s&&s.call(r[0]),n()})}}),e.uiBackCompat!==!1&&(e.Widget.prototype._getCreateOptions=function(){return e.metadata&&e.metadata.get(this.element[0])[this.widgetName]})})(jQuery);(function(e,t){var n=!1;e(document).mouseup(function(e){n=!1}),e.widget("ui.mouse",{version:"1.9.0",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var t=this;this.element.bind("mousedown."+this.widgetName,function(e){return t._mouseDown(e)}).bind("click."+this.widgetName,function(n){if(!0===e.data(n.target,t.widgetName+".preventClickEvent"))return e.removeData(n.target,t.widgetName+".preventClickEvent"),n.stopImmediatePropagation(),!1}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(t){if(n)return;this._mouseStarted&&this._mouseUp(t),this._mouseDownEvent=t;var r=this,i=t.which===1,s=typeof this.options.cancel=="string"&&t.target.nodeName?e(t.target).closest(this.options.cancel).length:!1;if(!i||s||!this._mouseCapture(t))return!0;this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){r.mouseDelayMet=!0},this.options.delay));if(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)){this._mouseStarted=this._mouseStart(t)!==!1;if(!this._mouseStarted)return t.preventDefault(),!0}return!0===e.data(t.target,this.widgetName+".preventClickEvent")&&e.removeData(t.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(e){return r._mouseMove(e)},this._mouseUpDelegate=function(e){return r._mouseUp(e)},e(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),t.preventDefault(),n=!0,!0},_mouseMove:function(t){return!e.browser.msie||document.documentMode>=9||!!t.button?this._mouseStarted?(this._mouseDrag(t),t.preventDefault()):(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,t)!==!1,this._mouseStarted?this._mouseDrag(t):this._mouseUp(t)),!this._mouseStarted):this._mouseUp(t)},_mouseUp:function(t){return e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,t.target===this._mouseDownEvent.target&&e.data(t.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(t)),!1},_mouseDistanceMet:function(e){return Math.max(Math.abs(this._mouseDownEvent.pageX-e.pageX),Math.abs(this._mouseDownEvent.pageY-e.pageY))>=this.options.distance},_mouseDelayMet:function(e){return this.mouseDelayMet},_mouseStart:function(e){},_mouseDrag:function(e){},_mouseStop:function(e){},_mouseCapture:function(e){return!0}})})(jQuery);(function(e,t){function h(e,t,n){return[parseInt(e[0],10)*(l.test(e[0])?t/100:1),parseInt(e[1],10)*(l.test(e[1])?n/100:1)]}function p(t,n){return parseInt(e.css(t,n),10)||0}e.ui=e.ui||{};var n,r=Math.max,i=Math.abs,s=Math.round,o=/left|center|right/,u=/top|center|bottom/,a=/[\\+\\-]\\d+%?/,f=/^\\w+/,l=/%$/,c=e.fn.position;e.position={scrollbarWidth:function(){if(n!==t)return n;var r,i,s=e("<div style=\'display:block;width:50px;height:50px;overflow:hidden;\'><div style=\'height:100px;width:auto;\'></div></div>"),o=s.children()[0];return e("body").append(s),r=o.offsetWidth,s.css("overflow","scroll"),i=o.offsetWidth,r===i&&(i=s[0].clientWidth),s.remove(),n=r-i},getScrollInfo:function(t){var n=t.isWindow?"":t.element.css("overflow-x"),r=t.isWindow?"":t.element.css("overflow-y"),i=n==="scroll"||n==="auto"&&t.width<t.element[0].scrollWidth,s=r==="scroll"||r==="auto"&&t.height<t.element[0].scrollHeight;return{width:i?e.position.scrollbarWidth():0,height:s?e.position.scrollbarWidth():0}},getWithinInfo:function(t){var n=e(t||window),r=e.isWindow(n[0]);return{element:n,isWindow:r,offset:n.offset()||{left:0,top:0},scrollLeft:n.scrollLeft(),scrollTop:n.scrollTop(),width:r?n.width():n.outerWidth(),height:r?n.height():n.outerHeight()}}},e.fn.position=function(t){if(!t||!t.of)return c.apply(this,arguments);t=e.extend({},t);var n,l,d,v,m,g=e(t.of),y=e.position.getWithinInfo(t.within),b=e.position.getScrollInfo(y),w=g[0],E=(t.collision||"flip").split(" "),S={};return w.nodeType===9?(l=g.width(),d=g.height(),v={top:0,left:0}):e.isWindow(w)?(l=g.width(),d=g.height(),v={top:g.scrollTop(),left:g.scrollLeft()}):w.preventDefault?(t.at="left top",l=d=0,v={top:w.pageY,left:w.pageX}):(l=g.outerWidth(),d=g.outerHeight(),v=g.offset()),m=e.extend({},v),e.each(["my","at"],function(){var e=(t[this]||"").split(" "),n,r;e.length===1&&(e=o.test(e[0])?e.concat(["center"]):u.test(e[0])?["center"].concat(e):["center","center"]),e[0]=o.test(e[0])?e[0]:"center",e[1]=u.test(e[1])?e[1]:"center",n=a.exec(e[0]),r=a.exec(e[1]),S[this]=[n?n[0]:0,r?r[0]:0],t[this]=[f.exec(e[0])[0],f.exec(e[1])[0]]}),E.length===1&&(E[1]=E[0]),t.at[0]==="right"?m.left+=l:t.at[0]==="center"&&(m.left+=l/2),t.at[1]==="bottom"?m.top+=d:t.at[1]==="center"&&(m.top+=d/2),n=h(S.at,l,d),m.left+=n[0],m.top+=n[1],this.each(function(){var o,u,a=e(this),f=a.outerWidth(),c=a.outerHeight(),w=p(this,"marginLeft"),x=p(this,"marginTop"),T=f+w+p(this,"marginRight")+b.width,N=c+x+p(this,"marginBottom")+b.height,C=e.extend({},m),k=h(S.my,a.outerWidth(),a.outerHeight());t.my[0]==="right"?C.left-=f:t.my[0]==="center"&&(C.left-=f/2),t.my[1]==="bottom"?C.top-=c:t.my[1]==="center"&&(C.top-=c/2),C.left+=k[0],C.top+=k[1],e.support.offsetFractions||(C.left=s(C.left),C.top=s(C.top)),o={marginLeft:w,marginTop:x},e.each(["left","top"],function(r,i){e.ui.position[E[r]]&&e.ui.position[E[r]][i](C,{targetWidth:l,targetHeight:d,elemWidth:f,elemHeight:c,collisionPosition:o,collisionWidth:T,collisionHeight:N,offset:[n[0]+k[0],n[1]+k[1]],my:t.my,at:t.at,within:y,elem:a})}),e.fn.bgiframe&&a.bgiframe(),t.using&&(u=function(e){var n=v.left-C.left,s=n+l-f,o=v.top-C.top,u=o+d-c,h={target:{element:g,left:v.left,top:v.top,width:l,height:d},element:{element:a,left:C.left,top:C.top,width:f,height:c},horizontal:s<0?"left":n>0?"right":"center",vertical:u<0?"top":o>0?"bottom":"middle"};l<f&&i(n+s)<l&&(h.horizontal="center"),d<c&&i(o+u)<d&&(h.vertical="middle"),r(i(n),i(s))>r(i(o),i(u))?h.important="horizontal":h.important="vertical",t.using.call(this,e,h)}),a.offset(e.extend(C,{using:u}))})},e.ui.position={fit:{left:function(e,t){var n=t.within,i=n.isWindow?n.scrollLeft:n.offset.left,s=n.width,o=e.left-t.collisionPosition.marginLeft,u=i-o,a=o+t.collisionWidth-s-i,f;t.collisionWidth>s?u>0&&a<=0?(f=e.left+u+t.collisionWidth-s-i,e.left+=u-f):a>0&&u<=0?e.left=i:u>a?e.left=i+s-t.collisionWidth:e.left=i:u>0?e.left+=u:a>0?e.left-=a:e.left=r(e.left-o,e.left)},top:function(e,t){var n=t.within,i=n.isWindow?n.scrollTop:n.offset.top,s=t.within.height,o=e.top-t.collisionPosition.marginTop,u=i-o,a=o+t.collisionHeight-s-i,f;t.collisionHeight>s?u>0&&a<=0?(f=e.top+u+t.collisionHeight-s-i,e.top+=u-f):a>0&&u<=0?e.top=i:u>a?e.top=i+s-t.collisionHeight:e.top=i:u>0?e.top+=u:a>0?e.top-=a:e.top=r(e.top-o,e.top)}},flip:{left:function(e,t){var n=t.within,r=n.offset.left+n.scrollLeft,s=n.width,o=n.isWindow?n.scrollLeft:n.offset.left,u=e.left-t.collisionPosition.marginLeft,a=u-o,f=u+t.collisionWidth-s-o,l=t.my[0]==="left"?-t.elemWidth:t.my[0]==="right"?t.elemWidth:0,c=t.at[0]==="left"?t.targetWidth:t.at[0]==="right"?-t.targetWidth:0,h=-2*t.offset[0],p,d;if(a<0){p=e.left+l+c+h+t.collisionWidth-s-r;if(p<0||p<i(a))e.left+=l+c+h}else if(f>0){d=e.left-t.collisionPosition.marginLeft+l+c+h-o;if(d>0||i(d)<f)e.left+=l+c+h}},top:function(e,t){var n=t.within,r=n.offset.top+n.scrollTop,s=n.height,o=n.isWindow?n.scrollTop:n.offset.top,u=e.top-t.collisionPosition.marginTop,a=u-o,f=u+t.collisionHeight-s-o,l=t.my[1]==="top",c=l?-t.elemHeight:t.my[1]==="bottom"?t.elemHeight:0,h=t.at[1]==="top"?t.targetHeight:t.at[1]==="bottom"?-t.targetHeight:0,p=-2*t.offset[1],d,v;a<0?(v=e.top+c+h+p+t.collisionHeight-s-r,e.top+c+h+p>a&&(v<0||v<i(a))&&(e.top+=c+h+p)):f>0&&(d=e.top-t.collisionPosition.marginTop+c+h+p-o,e.top+c+h+p>f&&(d>0||i(d)<f)&&(e.top+=c+h+p))}},flipfit:{left:function(){e.ui.position.flip.left.apply(this,arguments),e.ui.position.fit.left.apply(this,arguments)},top:function(){e.ui.position.flip.top.apply(this,arguments),e.ui.position.fit.top.apply(this,arguments)}}},function(){var t,n,r,i,s,o=document.getElementsByTagName("body")[0],u=document.createElement("div");t=document.createElement(o?"div":"body"),r={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},o&&e.extend(r,{position:"absolute",left:"-1000px",top:"-1000px"});for(s in r)t.style[s]=r[s];t.appendChild(u),n=o||document.documentElement,n.insertBefore(t,n.firstChild),u.style.cssText="position: absolute; left: 10.7432222px;",i=e(u).offset().left,e.support.offsetFractions=i>10&&i<11,t.innerHTML="",n.removeChild(t)}(),e.uiBackCompat!==!1&&function(e){var n=e.fn.position;e.fn.position=function(r){if(!r||!r.offset)return n.call(this,r);var i=r.offset.split(" "),s=r.at.split(" ");return i.length===1&&(i[1]=i[0]),/^\\d/.test(i[0])&&(i[0]="+"+i[0]),/^\\d/.test(i[1])&&(i[1]="+"+i[1]),s.length===1&&(/left|center|right/.test(s[0])?s[1]="center":(s[1]=s[0],s[0]="center")),n.call(this,e.extend(r,{at:s[0]+i[0]+" "+s[1]+i[1],offset:t}))}}(jQuery)})(jQuery);(function(e,t){var n=0,r={},i={};r.height=r.paddingTop=r.paddingBottom=r.borderTopWidth=r.borderBottomWidth="hide",i.height=i.paddingTop=i.paddingBottom=i.borderTopWidth=i.borderBottomWidth="show",e.widget("ui.accordion",{version:"1.9.0",options:{active:0,animate:{},collapsible:!1,event:"click",header:"> li > :first-child,> :not(li):even",heightStyle:"auto",icons:{activeHeader:"ui-icon-triangle-1-s",header:"ui-icon-triangle-1-e"},activate:null,beforeActivate:null},_create:function(){var t=this.accordionId="ui-accordion-"+(this.element.attr("id")||++n),r=this.options;this.prevShow=this.prevHide=e(),this.element.addClass("ui-accordion ui-widget ui-helper-reset"),this.headers=this.element.find(r.header).addClass("ui-accordion-header ui-helper-reset ui-state-default ui-corner-all"),this._hoverable(this.headers),this._focusable(this.headers),this.headers.next().addClass("ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom").hide(),!r.collapsible&&r.active===!1&&(r.active=0),r.active<0&&(r.active+=this.headers.length),this.active=this._findActive(r.active).addClass("ui-accordion-header-active ui-state-active").toggleClass("ui-corner-all ui-corner-top"),this.active.next().addClass("ui-accordion-content-active").show(),this._createIcons(),this.originalHeight=this.element[0].style.height,this.refresh(),this.element.attr("role","tablist"),this.headers.attr("role","tab").each(function(n){var r=e(this),i=r.attr("id"),s=r.next(),o=s.attr("id");i||(i=t+"-header-"+n,r.attr("id",i)),o||(o=t+"-panel-"+n,s.attr("id",o)),r.attr("aria-controls",o),s.attr("aria-labelledby",i)}).next().attr("role","tabpanel"),this.headers.not(this.active).attr({"aria-selected":"false",tabIndex:-1}).next().attr({"aria-expanded":"false","aria-hidden":"true"}).hide(),this.active.length?this.active.attr({"aria-selected":"true",tabIndex:0}).next().attr({"aria-expanded":"true","aria-hidden":"false"}):this.headers.eq(0).attr("tabIndex",0),this._on(this.headers,{keydown:"_keydown"}),this._on(this.headers.next(),{keydown:"_panelKeyDown"}),this._setupEvents(r.event)},_getCreateEventData:function(){return{header:this.active,content:this.active.length?this.active.next():e()}},_createIcons:function(){var t=this.options.icons;t&&(e("<span>").addClass("ui-accordion-header-icon ui-icon "+t.header).prependTo(this.headers),this.active.children(".ui-accordion-header-icon").removeClass(t.header).addClass(t.activeHeader),this.headers.addClass("ui-accordion-icons"))},_destroyIcons:function(){this.headers.removeClass("ui-accordion-icons").children(".ui-accordion-header-icon").remove()},_destroy:function(){var e;this.element.removeClass("ui-accordion ui-widget ui-helper-reset").removeAttr("role"),this.headers.removeClass("ui-accordion-header ui-accordion-header-active ui-helper-reset ui-state-default ui-corner-all ui-state-active ui-state-disabled ui-corner-top").removeAttr("role").removeAttr("aria-selected").removeAttr("aria-controls").removeAttr("tabIndex").each(function(){/^ui-accordion/.test(this.id)&&this.removeAttribute("id")}),this._destroyIcons(),e=this.headers.next().css("display","").removeAttr("role").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-labelledby").removeClass("ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content ui-accordion-content-active ui-state-disabled").each(function(){/^ui-accordion/.test(this.id)&&this.removeAttribute("id")}),this.options.heightStyle!=="content"&&(this.element.css("height",this.originalHeight),e.css("height",""))},_setOption:function(e,t){if(e==="active"){this._activate(t);return}e==="event"&&(this.options.event&&this._off(this.headers,this.options.event),this._setupEvents(t)),this._super(e,t),e==="collapsible"&&!t&&this.options.active===!1&&this._activate(0),e==="icons"&&(this._destroyIcons(),t&&this._createIcons()),e==="disabled"&&this.headers.add(this.headers.next()).toggleClass("ui-state-disabled",!!t)},_keydown:function(t){if(t.altKey||t.ctrlKey)return;var n=e.ui.keyCode,r=this.headers.length,i=this.headers.index(t.target),s=!1;switch(t.keyCode){case n.RIGHT:case n.DOWN:s=this.headers[(i+1)%r];break;case n.LEFT:case n.UP:s=this.headers[(i-1+r)%r];break;case n.SPACE:case n.ENTER:this._eventHandler(t);break;case n.HOME:s=this.headers[0];break;case n.END:s=this.headers[r-1]}s&&(e(t.target).attr("tabIndex",-1),e(s).attr("tabIndex",0),s.focus(),t.preventDefault())},_panelKeyDown:function(t){t.keyCode===e.ui.keyCode.UP&&t.ctrlKey&&e(t.currentTarget).prev().focus()},refresh:function(){var t,n,r=this.options.heightStyle,i=this.element.parent();this.element.css("height",this.originalHeight),r==="fill"?(e.support.minHeight||(n=i.css("overflow"),i.css("overflow","hidden")),t=i.height(),this.element.siblings(":visible").each(function(){var n=e(this),r=n.css("position");if(r==="absolute"||r==="fixed")return;t-=n.outerHeight(!0)}),n&&i.css("overflow",n),this.headers.each(function(){t-=e(this).outerHeight(!0)}),this.headers.next().each(function(){e(this).height(Math.max(0,t-e(this).innerHeight()+e(this).height()))}).css("overflow","auto")):r==="auto"&&(t=0,this.headers.next().each(function(){t=Math.max(t,e(this).height("").height())}).height(t)),r!=="content"&&this.element.height(this.element.height())},_activate:function(t){var n=this._findActive(t)[0];if(n===this.active[0])return;n=n||this.active[0],this._eventHandler({target:n,currentTarget:n,preventDefault:e.noop})},_findActive:function(t){return typeof t=="number"?this.headers.eq(t):e()},_setupEvents:function(t){var n={};if(!t)return;e.each(t.split(" "),function(e,t){n[t]="_eventHandler"}),this._on(this.headers,n)},_eventHandler:function(t){var n=this.options,r=this.active,i=e(t.currentTarget),s=i[0]===r[0],o=s&&n.collapsible,u=o?e():i.next(),a=r.next(),f={oldHeader:r,oldPanel:a,newHeader:o?e():i,newPanel:u};t.preventDefault();if(s&&!n.collapsible||this._trigger("beforeActivate",t,f)===!1)return;n.active=o?!1:this.headers.index(i),this.active=s?e():i,this._toggle(f),r.removeClass("ui-accordion-header-active ui-state-active"),n.icons&&r.children(".ui-accordion-header-icon").removeClass(n.icons.activeHeader).addClass(n.icons.header),s||(i.removeClass("ui-corner-all").addClass("ui-accordion-header-active ui-state-active ui-corner-top"),n.icons&&i.children(".ui-accordion-header-icon").removeClass(n.icons.header).addClass(n.icons.activeHeader),i.next().addClass("ui-accordion-content-active"))},_toggle:function(t){var n=t.newPanel,r=this.prevShow.length?this.prevShow:t.oldPanel;this.prevShow.add(this.prevHide).stop(!0,!0),this.prevShow=n,this.prevHide=r,this.options.animate?this._animate(n,r,t):(r.hide(),n.show(),this._toggleComplete(t)),r.attr({"aria-expanded":"false","aria-hidden":"true"}),r.prev().attr("aria-selected","false"),n.length&&r.length?r.prev().attr("tabIndex",-1):n.length&&this.headers.filter(function(){return e(this).attr("tabIndex")===0}).attr("tabIndex",-1),n.attr({"aria-expanded":"true","aria-hidden":"false"}).prev().attr({"aria-selected":"true",tabIndex:0})},_animate:function(e,t,n){var s,o,u,a=this,f=0,l=e.length&&(!t.length||e.index()<t.index()),c=this.options.animate||{},h=l&&c.down||c,p=function(){a._toggleComplete(n)};typeof h=="number"&&(u=h),typeof h=="string"&&(o=h),o=o||h.easing||c.easing,u=u||h.duration||c.duration;if(!t.length)return e.animate(i,u,o,p);if(!e.length)return t.animate(r,u,o,p);s=e.show().outerHeight(),t.animate(r,{duration:u,easing:o,step:function(e,t){t.now=Math.round(e)}}),e.hide().animate(i,{duration:u,easing:o,complete:p,step:function(e,n){n.now=Math.round(e),n.prop!=="height"?f+=n.now:a.options.heightStyle!=="content"&&(n.now=Math.round(s-t.outerHeight()-f),f=0)}})},_toggleComplete:function(e){var t=e.oldPanel;t.removeClass("ui-accordion-content-active").prev().removeClass("ui-corner-top").addClass("ui-corner-all"),t.length&&(t.parent()[0].className=t.parent()[0].className),this._trigger("activate",null,e)}}),e.uiBackCompat!==!1&&(function(e,t){e.extend(t.options,{navigation:!1,navigationFilter:function(){return this.href.toLowerCase()===location.href.toLowerCase()}});var n=t._create;t._create=function(){if(this.options.navigation){var t=this,r=this.element.find(this.options.header),i=r.next(),s=r.add(i).find("a").filter(this.options.navigationFilter)[0];s&&r.add(i).each(function(n){if(e.contains(this,s))return t.options.active=Math.floor(n/2),!1})}n.call(this)}}(jQuery,jQuery.ui.accordion.prototype),function(e,t){e.extend(t.options,{heightStyle:null,autoHeight:!0,clearStyle:!1,fillSpace:!1});var n=t._create,r=t._setOption;e.extend(t,{_create:function(){this.options.heightStyle=this.options.heightStyle||this._mergeHeightStyle(),n.call(this)},_setOption:function(e,t){if(e==="autoHeight"||e==="clearStyle"||e==="fillSpace")this.options.heightStyle=this._mergeHeightStyle();r.apply(this,arguments)},_mergeHeightStyle:function(){var e=this.options;if(e.fillSpace)return"fill";if(e.clearStyle)return"content";if(e.autoHeight)return"auto"}})}(jQuery,jQuery.ui.accordion.prototype),function(e,t){e.extend(t.options.icons,{activeHeader:null,headerSelected:"ui-icon-triangle-1-s"});var n=t._createIcons;t._createIcons=function(){this.options.icons&&(this.options.icons.activeHeader=this.options.icons.activeHeader||this.options.icons.headerSelected),n.call(this)}}(jQuery,jQuery.ui.accordion.prototype),function(e,t){t.activate=t._activate;var n=t._findActive;t._findActive=function(e){return e===-1&&(e=!1),e&&typeof e!="number"&&(e=this.headers.index(this.headers.filter(e)),e===-1&&(e=!1)),n.call(this,e)}}(jQuery,jQuery.ui.accordion.prototype),jQuery.ui.accordion.prototype.resize=jQuery.ui.accordion.prototype.refresh,function(e,t){e.extend(t.options,{change:null,changestart:null});var n=t._trigger;t._trigger=function(e,t,r){var i=n.apply(this,arguments);return i?(e==="beforeActivate"?i=n.call(this,"changestart",t,{oldHeader:r.oldHeader,oldContent:r.oldPanel,newHeader:r.newHeader,newContent:r.newPanel}):e==="activate"&&(i=n.call(this,"change",t,{oldHeader:r.oldHeader,oldContent:r.oldPanel,newHeader:r.newHeader,newContent:r.newPanel})),i):!1}}(jQuery,jQuery.ui.accordion.prototype),function(e,t){e.extend(t.options,{animate:null,animated:"slide"});var n=t._create;t._create=function(){var e=this.options;e.animate===null&&(e.animated?e.animated==="slide"?e.animate=300:e.animated==="bounceslide"?e.animate={duration:200,down:{easing:"easeOutBounce",duration:1e3}}:e.animate=e.animated:e.animate=!1),n.call(this)}}(jQuery,jQuery.ui.accordion.prototype))})(jQuery);(function(e,t){var n=0;e.widget("ui.autocomplete",{version:"1.9.0",defaultElement:"<input>",options:{appendTo:"body",autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},pending:0,_create:function(){var t,n,r;this.isMultiLine=this._isMultiLine(),this.valueMethod=this.element[this.element.is("input,textarea")?"val":"text"],this.isNewMenu=!0,this.element.addClass("ui-autocomplete-input").attr("autocomplete","off"),this._on({keydown:function(i){if(this.element.prop("readOnly")){t=!0,r=!0,n=!0;return}t=!1,r=!1,n=!1;var s=e.ui.keyCode;switch(i.keyCode){case s.PAGE_UP:t=!0,this._move("previousPage",i);break;case s.PAGE_DOWN:t=!0,this._move("nextPage",i);break;case s.UP:t=!0,this._keyEvent("previous",i);break;case s.DOWN:t=!0,this._keyEvent("next",i);break;case s.ENTER:case s.NUMPAD_ENTER:this.menu.active&&(t=!0,i.preventDefault(),this.menu.select(i));break;case s.TAB:this.menu.active&&this.menu.select(i);break;case s.ESCAPE:this.menu.element.is(":visible")&&(this._value(this.term),this.close(i),i.preventDefault());break;default:n=!0,this._searchTimeout(i)}},keypress:function(r){if(t){t=!1,r.preventDefault();return}if(n)return;var i=e.ui.keyCode;switch(r.keyCode){case i.PAGE_UP:this._move("previousPage",r);break;case i.PAGE_DOWN:this._move("nextPage",r);break;case i.UP:this._keyEvent("previous",r);break;case i.DOWN:this._keyEvent("next",r)}},input:function(e){if(r){r=!1,e.preventDefault();return}this._searchTimeout(e)},focus:function(){this.selectedItem=null,this.previous=this._value()},blur:function(e){if(this.cancelBlur){delete this.cancelBlur;return}clearTimeout(this.searching),this.close(e),this._change(e)}}),this._initSource(),this.menu=e("<ul>").addClass("ui-autocomplete").appendTo(this.document.find(this.options.appendTo||"body")[0]).menu({input:e(),role:null}).zIndex(this.element.zIndex()+1).hide().data("menu"),this._on(this.menu.element,{mousedown:function(t){t.preventDefault(),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur});var n=this.menu.element[0];e(t.target).closest(".ui-menu-item").length||this._delay(function(){var t=this;this.document.one("mousedown",function(r){r.target!==t.element[0]&&r.target!==n&&!e.contains(n,r.target)&&t.close()})})},menufocus:function(t,n){if(this.isNewMenu){this.isNewMenu=!1;if(t.originalEvent&&/^mouse/.test(t.originalEvent.type)){this.menu.blur(),this.document.one("mousemove",function(){e(t.target).trigger(t.originalEvent)});return}}var r=n.item.data("ui-autocomplete-item")||n.item.data("item.autocomplete");!1!==this._trigger("focus",t,{item:r})?t.originalEvent&&/^key/.test(t.originalEvent.type)&&this._value(r.value):this.liveRegion.text(r.value)},menuselect:function(e,t){var n=t.item.data("ui-autocomplete-item")||t.item.data("item.autocomplete"),r=this.previous;this.element[0]!==this.document[0].activeElement&&(this.element.focus(),this.previous=r,this._delay(function(){this.previous=r,this.selectedItem=n})),!1!==this._trigger("select",e,{item:n})&&this._value(n.value),this.term=this._value(),this.close(e),this.selectedItem=n}}),this.liveRegion=e("<span>",{role:"status","aria-live":"polite"}).addClass("ui-helper-hidden-accessible").insertAfter(this.element),e.fn.bgiframe&&this.menu.element.bgiframe(),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_destroy:function(){clearTimeout(this.searching),this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete"),this.menu.element.remove(),this.liveRegion.remove()},_setOption:function(e,t){this._super(e,t),e==="source"&&this._initSource(),e==="appendTo"&&this.menu.element.appendTo(this.document.find(t||"body")[0]),e==="disabled"&&t&&this.xhr&&this.xhr.abort()},_isMultiLine:function(){return this.element.is("textarea")?!0:this.element.is("input")?!1:this.element.prop("isContentEditable")},_initSource:function(){var t,n,r=this;e.isArray(this.options.source)?(t=this.options.source,this.source=function(n,r){r(e.ui.autocomplete.filter(t,n.term))}):typeof this.options.source=="string"?(n=this.options.source,this.source=function(t,i){r.xhr&&r.xhr.abort(),r.xhr=e.ajax({url:n,data:t,dataType:"json",success:function(e,t){i(e)},error:function(){i([])}})}):this.source=this.options.source},_searchTimeout:function(e){clearTimeout(this.searching),this.searching=this._delay(function(){this.term!==this._value()&&(this.selectedItem=null,this.search(null,e))},this.options.delay)},search:function(e,t){e=e!=null?e:this._value(),this.term=this._value();if(e.length<this.options.minLength)return this.close(t);if(this._trigger("search",t)===!1)return;return this._search(e)},_search:function(e){this.pending++,this.element.addClass("ui-autocomplete-loading"),this.cancelSearch=!1,this.source({term:e},this._response())},_response:function(){var e=this,t=++n;return function(r){t===n&&e.__response(r),e.pending--,e.pending||e.element.removeClass("ui-autocomplete-loading")}},__response:function(e){e&&(e=this._normalize(e)),this._trigger("response",null,{content:e}),!this.options.disabled&&e&&e.length&&!this.cancelSearch?(this._suggest(e),this._trigger("open")):this._close()},close:function(e){this.cancelSearch=!0,this._close(e)},_close:function(e){this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.blur(),this.isNewMenu=!0,this._trigger("close",e))},_change:function(e){this.previous!==this._value()&&this._trigger("change",e,{item:this.selectedItem})},_normalize:function(t){return t.length&&t[0].label&&t[0].value?t:e.map(t,function(t){return typeof t=="string"?{label:t,value:t}:e.extend({label:t.label||t.value,value:t.value||t.label},t)})},_suggest:function(t){var n=this.menu.element.empty().zIndex(this.element.zIndex()+1);this._renderMenu(n,t),this.menu.refresh(),n.show(),this._resizeMenu(),n.position(e.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next()},_resizeMenu:function(){var e=this.menu.element;e.outerWidth(Math.max(e.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(t,n){var r=this;e.each(n,function(e,n){r._renderItemData(t,n)})},_renderItemData:function(e,t){return this._renderItem(e,t).data("ui-autocomplete-item",t)},_renderItem:function(t,n){return e("<li>").append(e("<a>").text(n.label)).appendTo(t)},_move:function(e,t){if(!this.menu.element.is(":visible")){this.search(null,t);return}if(this.menu.isFirstItem()&&/^previous/.test(e)||this.menu.isLastItem()&&/^next/.test(e)){this._value(this.term),this.menu.blur();return}this.menu[e](t)},widget:function(){return this.menu.element},_value:function(e){return this.valueMethod.apply(this.element,arguments)},_keyEvent:function(e,t){if(!this.isMultiLine||this.menu.element.is(":visible"))this._move(e,t),t.preventDefault()}}),e.extend(e.ui.autocomplete,{escapeRegex:function(e){return e.replace(/[\\-\\[\\]{}()*+?.,\\\\\\^$|#\\s]/g,"\\\\$&")},filter:function(t,n){var r=new RegExp(e.ui.autocomplete.escapeRegex(n),"i");return e.grep(t,function(e){return r.test(e.label||e.value||e)})}}),e.widget("ui.autocomplete",e.ui.autocomplete,{options:{messages:{noResults:"No search results.",results:function(e){return e+(e>1?" results are":" result is")+" available, use up and down arrow keys to navigate."}}},__response:function(e){var t;this._superApply(arguments);if(this.options.disabled||this.cancelSearch)return;e&&e.length?t=this.options.messages.results(e.length):t=this.options.messages.noResults,this.liveRegion.text(t)}})})(jQuery);(function(e,t){var n,r,i,s,o="ui-button ui-widget ui-state-default ui-corner-all",u="ui-state-hover ui-state-active ",a="ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only",f=function(){var t=e(this).find(":ui-button");setTimeout(function(){t.button("refresh")},1)},l=function(t){var n=t.name,r=t.form,i=e([]);return n&&(r?i=e(r).find("[name=\'"+n+"\']"):i=e("[name=\'"+n+"\']",t.ownerDocument).filter(function(){return!this.form})),i};e.widget("ui.button",{version:"1.9.0",defaultElement:"<button>",options:{disabled:null,text:!0,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset"+this.eventNamespace).bind("reset"+this.eventNamespace,f),typeof this.options.disabled!="boolean"?this.options.disabled=!!this.element.prop("disabled"):this.element.prop("disabled",this.options.disabled),this._determineButtonType(),this.hasTitle=!!this.buttonElement.attr("title");var t=this,u=this.options,a=this.type==="checkbox"||this.type==="radio",c="ui-state-hover"+(a?"":" ui-state-active"),h="ui-state-focus";u.label===null&&(u.label=this.type==="input"?this.buttonElement.val():this.buttonElement.html()),this.buttonElement.addClass(o).attr("role","button").bind("mouseenter"+this.eventNamespace,function(){if(u.disabled)return;e(this).addClass("ui-state-hover"),this===n&&e(this).addClass("ui-state-active")}).bind("mouseleave"+this.eventNamespace,function(){if(u.disabled)return;e(this).removeClass(c)}).bind("click"+this.eventNamespace,function(e){u.disabled&&(e.preventDefault(),e.stopImmediatePropagation())}),this.element.bind("focus"+this.eventNamespace,function(){t.buttonElement.addClass(h)}).bind("blur"+this.eventNamespace,function(){t.buttonElement.removeClass(h)}),a&&(this.element.bind("change"+this.eventNamespace,function(){if(s)return;t.refresh()}),this.buttonElement.bind("mousedown"+this.eventNamespace,function(e){if(u.disabled)return;s=!1,r=e.pageX,i=e.pageY}).bind("mouseup"+this.eventNamespace,function(e){if(u.disabled)return;if(r!==e.pageX||i!==e.pageY)s=!0})),this.type==="checkbox"?this.buttonElement.bind("click"+this.eventNamespace,function(){if(u.disabled||s)return!1;e(this).toggleClass("ui-state-active"),t.buttonElement.attr("aria-pressed",t.element[0].checked)}):this.type==="radio"?this.buttonElement.bind("click"+this.eventNamespace,function(){if(u.disabled||s)return!1;e(this).addClass("ui-state-active"),t.buttonElement.attr("aria-pressed","true");var n=t.element[0];l(n).not(n).map(function(){return e(this).button("widget")[0]}).removeClass("ui-state-active").attr("aria-pressed","false")}):(this.buttonElement.bind("mousedown"+this.eventNamespace,function(){if(u.disabled)return!1;e(this).addClass("ui-state-active"),n=this,t.document.one("mouseup",function(){n=null})}).bind("mouseup"+this.eventNamespace,function(){if(u.disabled)return!1;e(this).removeClass("ui-state-active")}).bind("keydown"+this.eventNamespace,function(t){if(u.disabled)return!1;(t.keyCode===e.ui.keyCode.SPACE||t.keyCode===e.ui.keyCode.ENTER)&&e(this).addClass("ui-state-active")}).bind("keyup"+this.eventNamespace,function(){e(this).removeClass("ui-state-active")}),this.buttonElement.is("a")&&this.buttonElement.keyup(function(t){t.keyCode===e.ui.keyCode.SPACE&&e(this).click()})),this._setOption("disabled",u.disabled),this._resetButton()},_determineButtonType:function(){var e,t,n;this.element.is("[type=checkbox]")?this.type="checkbox":this.element.is("[type=radio]")?this.type="radio":this.element.is("input")?this.type="input":this.type="button",this.type==="checkbox"||this.type==="radio"?(e=this.element.parents().last(),t="label[for=\'"+this.element.attr("id")+"\']",this.buttonElement=e.find(t),this.buttonElement.length||(e=e.length?e.siblings():this.element.siblings(),this.buttonElement=e.filter(t),this.buttonElement.length||(this.buttonElement=e.find(t))),this.element.addClass("ui-helper-hidden-accessible"),n=this.element.is(":checked"),n&&this.buttonElement.addClass("ui-state-active"),this.buttonElement.prop("aria-pressed",n)):this.buttonElement=this.element},widget:function(){return this.buttonElement},_destroy:function(){this.element.removeClass("ui-helper-hidden-accessible"),this.buttonElement.removeClass(o+" "+u+" "+a).removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html()),this.hasTitle||this.buttonElement.removeAttr("title")},_setOption:function(e,t){this._super(e,t);if(e==="disabled"){t?this.element.prop("disabled",!0):this.element.prop("disabled",!1);return}this._resetButton()},refresh:function(){var t=this.element.is(":disabled");t!==this.options.disabled&&this._setOption("disabled",t),this.type==="radio"?l(this.element[0]).each(function(){e(this).is(":checked")?e(this).button("widget").addClass("ui-state-active").attr("aria-pressed","true"):e(this).button("widget").removeClass("ui-state-active").attr("aria-pressed","false")}):this.type==="checkbox"&&(this.element.is(":checked")?this.buttonElement.addClass("ui-state-active").attr("aria-pressed","true"):this.buttonElement.removeClass("ui-state-active").attr("aria-pressed","false"))},_resetButton:function(){if(this.type==="input"){this.options.label&&this.element.val(this.options.label);return}var t=this.buttonElement.removeClass(a),n=e("<span></span>",this.document[0]).addClass("ui-button-text").html(this.options.label).appendTo(t.empty()).text(),r=this.options.icons,i=r.primary&&r.secondary,s=[];r.primary||r.secondary?(this.options.text&&s.push("ui-button-text-icon"+(i?"s":r.primary?"-primary":"-secondary")),r.primary&&t.prepend("<span class=\'ui-button-icon-primary ui-icon "+r.primary+"\'></span>"),r.secondary&&t.append("<span class=\'ui-button-icon-secondary ui-icon "+r.secondary+"\'></span>"),this.options.text||(s.push(i?"ui-button-icons-only":"ui-button-icon-only"),this.hasTitle||t.attr("title",e.trim(n)))):s.push("ui-button-text-only"),t.addClass(s.join(" "))}}),e.widget("ui.buttonset",{version:"1.9.0",options:{items:"button, input[type=button], input[type=submit], input[type=reset], input[type=checkbox], input[type=radio], a, :data(button)"},_create:function(){this.element.addClass("ui-buttonset")},_init:function(){this.refresh()},_setOption:function(e,t){e==="disabled"&&this.buttons.button("option",e,t),this._super(e,t)},refresh:function(){var t=this.element.css("direction")==="rtl";this.buttons=this.element.find(this.options.items).filter(":ui-button").button("refresh").end().not(":ui-button").button().end().map(function(){return e(this).button("widget")[0]}).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass(t?"ui-corner-right":"ui-corner-left").end().filter(":last").addClass(t?"ui-corner-left":"ui-corner-right").end().end()},_destroy:function(){this.element.removeClass("ui-buttonset"),this.buttons.map(function(){return e(this).button("widget")[0]}).removeClass("ui-corner-left ui-corner-right").end().button("destroy")}})})(jQuery);(function($,undefined){function Datepicker(){this.debug=!1,this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1},$.extend(this._defaults,this.regional[""]),this.dpDiv=bindHover($(\'<div id="\'+this._mainDivId+\'" class="ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>\'))}function bindHover(e){var t="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return e.delegate(t,"mouseout",function(){$(this).removeClass("ui-state-hover"),this.className.indexOf("ui-datepicker-prev")!=-1&&$(this).removeClass("ui-datepicker-prev-hover"),this.className.indexOf("ui-datepicker-next")!=-1&&$(this).removeClass("ui-datepicker-next-hover")}).delegate(t,"mouseover",function(){$.datepicker._isDisabledDatepicker(instActive.inline?e.parent()[0]:instActive.input[0])||($(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),$(this).addClass("ui-state-hover"),this.className.indexOf("ui-datepicker-prev")!=-1&&$(this).addClass("ui-datepicker-prev-hover"),this.className.indexOf("ui-datepicker-next")!=-1&&$(this).addClass("ui-datepicker-next-hover"))})}function extendRemove(e,t){$.extend(e,t);for(var n in t)if(t[n]==null||t[n]==undefined)e[n]=t[n];return e}$.extend($.ui,{datepicker:{version:"1.9.0"}});var PROP_NAME="datepicker",dpuuid=(new Date).getTime(),instActive;$.extend(Datepicker.prototype,{markerClassName:"hasDatepicker",maxRows:4,log:function(){this.debug&&console.log.apply("",arguments)},_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(e){return extendRemove(this._defaults,e||{}),this},_attachDatepicker:function(target,settings){var inlineSettings=null;for(var attrName in this._defaults){var attrValue=target.getAttribute("date:"+attrName);if(attrValue){inlineSettings=inlineSettings||{};try{inlineSettings[attrName]=eval(attrValue)}catch(err){inlineSettings[attrName]=attrValue}}}var nodeName=target.nodeName.toLowerCase(),inline=nodeName=="div"||nodeName=="span";target.id||(this.uuid+=1,target.id="dp"+this.uuid);var inst=this._newInst($(target),inline);inst.settings=$.extend({},settings||{},inlineSettings||{}),nodeName=="input"?this._connectDatepicker(target,inst):inline&&this._inlineDatepicker(target,inst)},_newInst:function(e,t){var n=e[0].id.replace(/([^A-Za-z0-9_-])/g,"\\\\\\\\$1");return{id:n,input:e,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:t,dpDiv:t?bindHover($(\'<div class="\'+this._inlineClass+\' ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>\')):this.dpDiv}},_connectDatepicker:function(e,t){var n=$(e);t.append=$([]),t.trigger=$([]);if(n.hasClass(this.markerClassName))return;this._attachments(n,t),n.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp).bind("setData.datepicker",function(e,n,r){t.settings[n]=r}).bind("getData.datepicker",function(e,n){return this._get(t,n)}),this._autoSize(t),$.data(e,PROP_NAME,t),t.settings.disabled&&this._disableDatepicker(e)},_attachments:function(e,t){var n=this._get(t,"appendText"),r=this._get(t,"isRTL");t.append&&t.append.remove(),n&&(t.append=$(\'<span class="\'+this._appendClass+\'">\'+n+"</span>"),e[r?"before":"after"](t.append)),e.unbind("focus",this._showDatepicker),t.trigger&&t.trigger.remove();var i=this._get(t,"showOn");(i=="focus"||i=="both")&&e.focus(this._showDatepicker);if(i=="button"||i=="both"){var s=this._get(t,"buttonText"),o=this._get(t,"buttonImage");t.trigger=$(this._get(t,"buttonImageOnly")?$("<img/>").addClass(this._triggerClass).attr({src:o,alt:s,title:s}):$(\'<button type="button"></button>\').addClass(this._triggerClass).html(o==""?s:$("<img/>").attr({src:o,alt:s,title:s}))),e[r?"before":"after"](t.trigger),t.trigger.click(function(){return $.datepicker._datepickerShowing&&$.datepicker._lastInput==e[0]?$.datepicker._hideDatepicker():$.datepicker._datepickerShowing&&$.datepicker._lastInput!=e[0]?($.datepicker._hideDatepicker(),$.datepicker._showDatepicker(e[0])):$.datepicker._showDatepicker(e[0]),!1})}},_autoSize:function(e){if(this._get(e,"autoSize")&&!e.inline){var t=new Date(2009,11,20),n=this._get(e,"dateFormat");if(n.match(/[DM]/)){var r=function(e){var t=0,n=0;for(var r=0;r<e.length;r++)e[r].length>t&&(t=e[r].length,n=r);return n};t.setMonth(r(this._get(e,n.match(/MM/)?"monthNames":"monthNamesShort"))),t.setDate(r(this._get(e,n.match(/DD/)?"dayNames":"dayNamesShort"))+20-t.getDay())}e.input.attr("size",this._formatDate(e,t).length)}},_inlineDatepicker:function(e,t){var n=$(e);if(n.hasClass(this.markerClassName))return;n.addClass(this.markerClassName).append(t.dpDiv).bind("setData.datepicker",function(e,n,r){t.settings[n]=r}).bind("getData.datepicker",function(e,n){return this._get(t,n)}),$.data(e,PROP_NAME,t),this._setDate(t,this._getDefaultDate(t),!0),this._updateDatepicker(t),this._updateAlternate(t),t.settings.disabled&&this._disableDatepicker(e),t.dpDiv.css("display","block")},_dialogDatepicker:function(e,t,n,r,i){var s=this._dialogInst;if(!s){this.uuid+=1;var o="dp"+this.uuid;this._dialogInput=$(\'<input type="text" id="\'+o+\'" style="position: absolute; top: -100px; width: 0px;"/>\'),this._dialogInput.keydown(this._doKeyDown),$("body").append(this._dialogInput),s=this._dialogInst=this._newInst(this._dialogInput,!1),s.settings={},$.data(this._dialogInput[0],PROP_NAME,s)}extendRemove(s.settings,r||{}),t=t&&t.constructor==Date?this._formatDate(s,t):t,this._dialogInput.val(t),this._pos=i?i.length?i:[i.pageX,i.pageY]:null;if(!this._pos){var u=document.documentElement.clientWidth,a=document.documentElement.clientHeight,f=document.documentElement.scrollLeft||document.body.scrollLeft,l=document.documentElement.scrollTop||document.body.scrollTop;this._pos=[u/2-100+f,a/2-150+l]}return this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),s.settings.onSelect=n,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),$.blockUI&&$.blockUI(this.dpDiv),$.data(this._dialogInput[0],PROP_NAME,s),this},_destroyDatepicker:function(e){var t=$(e),n=$.data(e,PROP_NAME);if(!t.hasClass(this.markerClassName))return;var r=e.nodeName.toLowerCase();$.removeData(e,PROP_NAME),r=="input"?(n.append.remove(),n.trigger.remove(),t.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)):(r=="div"||r=="span")&&t.removeClass(this.markerClassName).empty()},_enableDatepicker:function(e){var t=$(e),n=$.data(e,PROP_NAME);if(!t.hasClass(this.markerClassName))return;var r=e.nodeName.toLowerCase();if(r=="input")e.disabled=!1,n.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""});else if(r=="div"||r=="span"){var i=t.children("."+this._inlineClass);i.children().removeClass("ui-state-disabled"),i.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!1)}this._disabledInputs=$.map(this._disabledInputs,function(t){return t==e?null:t})},_disableDatepicker:function(e){var t=$(e),n=$.data(e,PROP_NAME);if(!t.hasClass(this.markerClassName))return;var r=e.nodeName.toLowerCase();if(r=="input")e.disabled=!0,n.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"});else if(r=="div"||r=="span"){var i=t.children("."+this._inlineClass);i.children().addClass("ui-state-disabled"),i.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!0)}this._disabledInputs=$.map(this._disabledInputs,function(t){return t==e?null:t}),this._disabledInputs[this._disabledInputs.length]=e},_isDisabledDatepicker:function(e){if(!e)return!1;for(var t=0;t<this._disabledInputs.length;t++)if(this._disabledInputs[t]==e)return!0;return!1},_getInst:function(e){try{return $.data(e,PROP_NAME)}catch(t){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(e,t,n){var r=this._getInst(e);if(arguments.length==2&&typeof t=="string")return t=="defaults"?$.extend({},$.datepicker._defaults):r?t=="all"?$.extend({},r.settings):this._get(r,t):null;var i=t||{};typeof t=="string"&&(i={},i[t]=n);if(r){this._curInst==r&&this._hideDatepicker();var s=this._getDateDatepicker(e,!0),o=this._getMinMaxDate(r,"min"),u=this._getMinMaxDate(r,"max");extendRemove(r.settings,i),o!==null&&i.dateFormat!==undefined&&i.minDate===undefined&&(r.settings.minDate=this._formatDate(r,o)),u!==null&&i.dateFormat!==undefined&&i.maxDate===undefined&&(r.settings.maxDate=this._formatDate(r,u)),this._attachments($(e),r),this._autoSize(r),this._setDate(r,s),this._updateAlternate(r),this._updateDatepicker(r)}},_changeDatepicker:function(e,t,n){this._optionDatepicker(e,t,n)},_refreshDatepicker:function(e){var t=this._getInst(e);t&&this._updateDatepicker(t)},_setDateDatepicker:function(e,t){var n=this._getInst(e);n&&(this._setDate(n,t),this._updateDatepicker(n),this._updateAlternate(n))},_getDateDatepicker:function(e,t){var n=this._getInst(e);return n&&!n.inline&&this._setDateFromField(n,t),n?this._getDate(n):null},_doKeyDown:function(e){var t=$.datepicker._getInst(e.target),n=!0,r=t.dpDiv.is(".ui-datepicker-rtl");t._keyEvent=!0;if($.datepicker._datepickerShowing)switch(e.keyCode){case 9:$.datepicker._hideDatepicker(),n=!1;break;case 13:var i=$("td."+$.datepicker._dayOverClass+":not(."+$.datepicker._currentClass+")",t.dpDiv);i[0]&&$.datepicker._selectDay(e.target,t.selectedMonth,t.selectedYear,i[0]);var s=$.datepicker._get(t,"onSelect");if(s){var o=$.datepicker._formatDate(t);s.apply(t.input?t.input[0]:null,[o,t])}else $.datepicker._hideDatepicker();return!1;case 27:$.datepicker._hideDatepicker();break;case 33:$.datepicker._adjustDate(e.target,e.ctrlKey?-$.datepicker._get(t,"stepBigMonths"):-$.datepicker._get(t,"stepMonths"),"M");break;case 34:$.datepicker._adjustDate(e.target,e.ctrlKey?+$.datepicker._get(t,"stepBigMonths"):+$.datepicker._get(t,"stepMonths"),"M");break;case 35:(e.ctrlKey||e.metaKey)&&$.datepicker._clearDate(e.target),n=e.ctrlKey||e.metaKey;break;case 36:(e.ctrlKey||e.metaKey)&&$.datepicker._gotoToday(e.target),n=e.ctrlKey||e.metaKey;break;case 37:(e.ctrlKey||e.metaKey)&&$.datepicker._adjustDate(e.target,r?1:-1,"D"),n=e.ctrlKey||e.metaKey,e.originalEvent.altKey&&$.datepicker._adjustDate(e.target,e.ctrlKey?-$.datepicker._get(t,"stepBigMonths"):-$.datepicker._get(t,"stepMonths"),"M");break;case 38:(e.ctrlKey||e.metaKey)&&$.datepicker._adjustDate(e.target,-7,"D"),n=e.ctrlKey||e.metaKey;break;case 39:(e.ctrlKey||e.metaKey)&&$.datepicker._adjustDate(e.target,r?-1:1,"D"),n=e.ctrlKey||e.metaKey,e.originalEvent.altKey&&$.datepicker._adjustDate(e.target,e.ctrlKey?+$.datepicker._get(t,"stepBigMonths"):+$.datepicker._get(t,"stepMonths"),"M");break;case 40:(e.ctrlKey||e.metaKey)&&$.datepicker._adjustDate(e.target,7,"D"),n=e.ctrlKey||e.metaKey;break;default:n=!1}else e.keyCode==36&&e.ctrlKey?$.datepicker._showDatepicker(this):n=!1;n&&(e.preventDefault(),e.stopPropagation())},_doKeyPress:function(e){var t=$.datepicker._getInst(e.target);if($.datepicker._get(t,"constrainInput")){var n=$.datepicker._possibleChars($.datepicker._get(t,"dateFormat")),r=String.fromCharCode(e.charCode==undefined?e.keyCode:e.charCode);return e.ctrlKey||e.metaKey||r<" "||!n||n.indexOf(r)>-1}},_doKeyUp:function(e){var t=$.datepicker._getInst(e.target);if(t.input.val()!=t.lastVal)try{var n=$.datepicker.parseDate($.datepicker._get(t,"dateFormat"),t.input?t.input.val():null,$.datepicker._getFormatConfig(t));n&&($.datepicker._setDateFromField(t),$.datepicker._updateAlternate(t),$.datepicker._updateDatepicker(t))}catch(r){$.datepicker.log(r)}return!0},_showDatepicker:function(e){e=e.target||e,e.nodeName.toLowerCase()!="input"&&(e=$("input",e.parentNode)[0]);if($.datepicker._isDisabledDatepicker(e)||$.datepicker._lastInput==e)return;var t=$.datepicker._getInst(e);$.datepicker._curInst&&$.datepicker._curInst!=t&&($.datepicker._curInst.dpDiv.stop(!0,!0),t&&$.datepicker._datepickerShowing&&$.datepicker._hideDatepicker($.datepicker._curInst.input[0]));var n=$.datepicker._get(t,"beforeShow"),r=n?n.apply(e,[e,t]):{};if(r===!1)return;extendRemove(t.settings,r),t.lastVal=null,$.datepicker._lastInput=e,$.datepicker._setDateFromField(t),$.datepicker._inDialog&&(e.value=""),$.datepicker._pos||($.datepicker._pos=$.datepicker._findPos(e),$.datepicker._pos[1]+=e.offsetHeight);var i=!1;$(e).parents().each(function(){return i|=$(this).css("position")=="fixed",!i});var s={left:$.datepicker._pos[0],top:$.datepicker._pos[1]};$.datepicker._pos=null,t.dpDiv.empty(),t.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),$.datepicker._updateDatepicker(t),s=$.datepicker._checkOffset(t,s,i),t.dpDiv.css({position:$.datepicker._inDialog&&$.blockUI?"static":i?"fixed":"absolute",display:"none",left:s.left+"px",top:s.top+"px"});if(!t.inline){var o=$.datepicker._get(t,"showAnim"),u=$.datepicker._get(t,"duration"),a=function(){var e=t.dpDiv.find("iframe.ui-datepicker-cover");if(!!e.length){var n=$.datepicker._getBorders(t.dpDiv);e.css({left:-n[0],top:-n[1],width:t.dpDiv.outerWidth(),height:t.dpDiv.outerHeight()})}};t.dpDiv.zIndex($(e).zIndex()+1),$.datepicker._datepickerShowing=!0,$.effects&&($.effects.effect[o]||$.effects[o])?t.dpDiv.show(o,$.datepicker._get(t,"showOptions"),u,a):t.dpDiv[o||"show"](o?u:null,a),(!o||!u)&&a(),t.input.is(":visible")&&!t.input.is(":disabled")&&t.input.focus(),$.datepicker._curInst=t}},_updateDatepicker:function(e){this.maxRows=4;var t=$.datepicker._getBorders(e.dpDiv);instActive=e,e.dpDiv.empty().append(this._generateHTML(e)),this._attachHandlers(e);var n=e.dpDiv.find("iframe.ui-datepicker-cover");!n.length||n.css({left:-t[0],top:-t[1],width:e.dpDiv.outerWidth(),height:e.dpDiv.outerHeight()}),e.dpDiv.find("."+this._dayOverClass+" a").mouseover();var r=this._getNumberOfMonths(e),i=r[1],s=17;e.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),i>1&&e.dpDiv.addClass("ui-datepicker-multi-"+i).css("width",s*i+"em"),e.dpDiv[(r[0]!=1||r[1]!=1?"add":"remove")+"Class"]("ui-datepicker-multi"),e.dpDiv[(this._get(e,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),e==$.datepicker._curInst&&$.datepicker._datepickerShowing&&e.input&&e.input.is(":visible")&&!e.input.is(":disabled")&&e.input[0]!=document.activeElement&&e.input.focus();if(e.yearshtml){var o=e.yearshtml;setTimeout(function(){o===e.yearshtml&&e.yearshtml&&e.dpDiv.find("select.ui-datepicker-year:first").replaceWith(e.yearshtml),o=e.yearshtml=null},0)}},_getBorders:function(e){var t=function(e){return{thin:1,medium:2,thick:3}[e]||e};return[parseFloat(t(e.css("border-left-width"))),parseFloat(t(e.css("border-top-width")))]},_checkOffset:function(e,t,n){var r=e.dpDiv.outerWidth(),i=e.dpDiv.outerHeight(),s=e.input?e.input.outerWidth():0,o=e.input?e.input.outerHeight():0,u=document.documentElement.clientWidth+(n?0:$(document).scrollLeft()),a=document.documentElement.clientHeight+(n?0:$(document).scrollTop());return t.left-=this._get(e,"isRTL")?r-s:0,t.left-=n&&t.left==e.input.offset().left?$(document).scrollLeft():0,t.top-=n&&t.top==e.input.offset().top+o?$(document).scrollTop():0,t.left-=Math.min(t.left,t.left+r>u&&u>r?Math.abs(t.left+r-u):0),t.top-=Math.min(t.top,t.top+i>a&&a>i?Math.abs(i+o):0),t},_findPos:function(e){var t=this._getInst(e),n=this._get(t,"isRTL");while(e&&(e.type=="hidden"||e.nodeType!=1||$.expr.filters.hidden(e)))e=e[n?"previousSibling":"nextSibling"];var r=$(e).offset();return[r.left,r.top]},_hideDatepicker:function(e){var t=this._curInst;if(!t||e&&t!=$.data(e,PROP_NAME))return;if(this._datepickerShowing){var n=this._get(t,"showAnim"),r=this._get(t,"duration"),i=function(){$.datepicker._tidyDialog(t)};$.effects&&($.effects.effect[n]||$.effects[n])?t.dpDiv.hide(n,$.datepicker._get(t,"showOptions"),r,i):t.dpDiv[n=="slideDown"?"slideUp":n=="fadeIn"?"fadeOut":"hide"](n?r:null,i),n||i(),this._datepickerShowing=!1;var s=this._get(t,"onClose");s&&s.apply(t.input?t.input[0]:null,[t.input?t.input.val():"",t]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),$.blockUI&&($.unblockUI(),$("body").append(this.dpDiv))),this._inDialog=!1}},_tidyDialog:function(e){e.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},_checkExternalClick:function(e){if(!$.datepicker._curInst)return;var t=$(e.target),n=$.datepicker._getInst(t[0]);(t[0].id!=$.datepicker._mainDivId&&t.parents("#"+$.datepicker._mainDivId).length==0&&!t.hasClass($.datepicker.markerClassName)&&!t.closest("."+$.datepicker._triggerClass).length&&$.datepicker._datepickerShowing&&(!$.datepicker._inDialog||!$.blockUI)||t.hasClass($.datepicker.markerClassName)&&$.datepicker._curInst!=n)&&$.datepicker._hideDatepicker()},_adjustDate:function(e,t,n){var r=$(e),i=this._getInst(r[0]);if(this._isDisabledDatepicker(r[0]))return;this._adjustInstDate(i,t+(n=="M"?this._get(i,"showCurrentAtPos"):0),n),this._updateDatepicker(i)},_gotoToday:function(e){var t=$(e),n=this._getInst(t[0]);if(this._get(n,"gotoCurrent")&&n.currentDay)n.selectedDay=n.currentDay,n.drawMonth=n.selectedMonth=n.currentMonth,n.drawYear=n.selectedYear=n.currentYear;else{var r=new Date;n.selectedDay=r.getDate(),n.drawMonth=n.selectedMonth=r.getMonth(),n.drawYear=n.selectedYear=r.getFullYear()}this._notifyChange(n),this._adjustDate(t)},_selectMonthYear:function(e,t,n){var r=$(e),i=this._getInst(r[0]);i["selected"+(n=="M"?"Month":"Year")]=i["draw"+(n=="M"?"Month":"Year")]=parseInt(t.options[t.selectedIndex].value,10),this._notifyChange(i),this._adjustDate(r)},_selectDay:function(e,t,n,r){var i=$(e);if($(r).hasClass(this._unselectableClass)||this._isDisabledDatepicker(i[0]))return;var s=this._getInst(i[0]);s.selectedDay=s.currentDay=$("a",r).html(),s.selectedMonth=s.currentMonth=t,s.selectedYear=s.currentYear=n,this._selectDate(e,this._formatDate(s,s.currentDay,s.currentMonth,s.currentYear))},_clearDate:function(e){var t=$(e),n=this._getInst(t[0]);this._selectDate(t,"")},_selectDate:function(e,t){var n=$(e),r=this._getInst(n[0]);t=t!=null?t:this._formatDate(r),r.input&&r.input.val(t),this._updateAlternate(r);var i=this._get(r,"onSelect");i?i.apply(r.input?r.input[0]:null,[t,r]):r.input&&r.input.trigger("change"),r.inline?this._updateDatepicker(r):(this._hideDatepicker(),this._lastInput=r.input[0],typeof r.input[0]!="object"&&r.input.focus(),this._lastInput=null)},_updateAlternate:function(e){var t=this._get(e,"altField");if(t){var n=this._get(e,"altFormat")||this._get(e,"dateFormat"),r=this._getDate(e),i=this.formatDate(n,r,this._getFormatConfig(e));$(t).each(function(){$(this).val(i)})}},noWeekends:function(e){var t=e.getDay();return[t>0&&t<6,""]},iso8601Week:function(e){var t=new Date(e.getTime());t.setDate(t.getDate()+4-(t.getDay()||7));var n=t.getTime();return t.setMonth(0),t.setDate(1),Math.floor(Math.round((n-t)/864e5)/7)+1},parseDate:function(e,t,n){if(e==null||t==null)throw"Invalid arguments";t=typeof t=="object"?t.toString():t+"";if(t=="")return null;var r=(n?n.shortYearCutoff:null)||this._defaults.shortYearCutoff;r=typeof r!="string"?r:(new Date).getFullYear()%100+parseInt(r,10);var i=(n?n.dayNamesShort:null)||this._defaults.dayNamesShort,s=(n?n.dayNames:null)||this._defaults.dayNames,o=(n?n.monthNamesShort:null)||this._defaults.monthNamesShort,u=(n?n.monthNames:null)||this._defaults.monthNames,a=-1,f=-1,l=-1,c=-1,h=!1,p=function(t){var n=y+1<e.length&&e.charAt(y+1)==t;return n&&y++,n},d=function(e){var n=p(e),r=e=="@"?14:e=="!"?20:e=="y"&&n?4:e=="o"?3:2,i=new RegExp("^\\\\d{1,"+r+"}"),s=t.substring(g).match(i);if(!s)throw"Missing number at position "+g;return g+=s[0].length,parseInt(s[0],10)},v=function(e,n,r){var i=$.map(p(e)?r:n,function(e,t){return[[t,e]]}).sort(function(e,t){return-(e[1].length-t[1].length)}),s=-1;$.each(i,function(e,n){var r=n[1];if(t.substr(g,r.length).toLowerCase()==r.toLowerCase())return s=n[0],g+=r.length,!1});if(s!=-1)return s+1;throw"Unknown name at position "+g},m=function(){if(t.charAt(g)!=e.charAt(y))throw"Unexpected literal at position "+g;g++},g=0;for(var y=0;y<e.length;y++)if(h)e.charAt(y)=="\'"&&!p("\'")?h=!1:m();else switch(e.charAt(y)){case"d":l=d("d");break;case"D":v("D",i,s);break;case"o":c=d("o");break;case"m":f=d("m");break;case"M":f=v("M",o,u);break;case"y":a=d("y");break;case"@":var b=new Date(d("@"));a=b.getFullYear(),f=b.getMonth()+1,l=b.getDate();break;case"!":var b=new Date((d("!")-this._ticksTo1970)/1e4);a=b.getFullYear(),f=b.getMonth()+1,l=b.getDate();break;case"\'":p("\'")?m():h=!0;break;default:m()}if(g<t.length){var w=t.substr(g);if(!/^\\s+/.test(w))throw"Extra/unparsed characters found in date: "+w}a==-1?a=(new Date).getFullYear():a<100&&(a+=(new Date).getFullYear()-(new Date).getFullYear()%100+(a<=r?0:-100));if(c>-1){f=1,l=c;do{var E=this._getDaysInMonth(a,f-1);if(l<=E)break;f++,l-=E}while(!0)}var b=this._daylightSavingAdjust(new Date(a,f-1,l));if(b.getFullYear()!=a||b.getMonth()+1!=f||b.getDate()!=l)throw"Invalid date";return b},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925))*24*60*60*1e7,formatDate:function(e,t,n){if(!t)return"";var r=(n?n.dayNamesShort:null)||this._defaults.dayNamesShort,i=(n?n.dayNames:null)||this._defaults.dayNames,s=(n?n.monthNamesShort:null)||this._defaults.monthNamesShort,o=(n?n.monthNames:null)||this._defaults.monthNames,u=function(t){var n=h+1<e.length&&e.charAt(h+1)==t;return n&&h++,n},a=function(e,t,n){var r=""+t;if(u(e))while(r.length<n)r="0"+r;return r},f=function(e,t,n,r){return u(e)?r[t]:n[t]},l="",c=!1;if(t)for(var h=0;h<e.length;h++)if(c)e.charAt(h)=="\'"&&!u("\'")?c=!1:l+=e.charAt(h);else switch(e.charAt(h)){case"d":l+=a("d",t.getDate(),2);break;case"D":l+=f("D",t.getDay(),r,i);break;case"o":l+=a("o",Math.round(((new Date(t.getFullYear(),t.getMonth(),t.getDate())).getTime()-(new Date(t.getFullYear(),0,0)).getTime())/864e5),3);break;case"m":l+=a("m",t.getMonth()+1,2);break;case"M":l+=f("M",t.getMonth(),s,o);break;case"y":l+=u("y")?t.getFullYear():(t.getYear()%100<10?"0":"")+t.getYear()%100;break;case"@":l+=t.getTime();break;case"!":l+=t.getTime()*1e4+this._ticksTo1970;break;case"\'":u("\'")?l+="\'":c=!0;break;default:l+=e.charAt(h)}return l},_possibleChars:function(e){var t="",n=!1,r=function(t){var n=i+1<e.length&&e.charAt(i+1)==t;return n&&i++,n};for(var i=0;i<e.length;i++)if(n)e.charAt(i)=="\'"&&!r("\'")?n=!1:t+=e.charAt(i);else switch(e.charAt(i)){case"d":case"m":case"y":case"@":t+="0123456789";break;case"D":case"M":return null;case"\'":r("\'")?t+="\'":n=!0;break;default:t+=e.charAt(i)}return t},_get:function(e,t){return e.settings[t]!==undefined?e.settings[t]:this._defaults[t]},_setDateFromField:function(e,t){if(e.input.val()==e.lastVal)return;var n=this._get(e,"dateFormat"),r=e.lastVal=e.input?e.input.val():null,i,s;i=s=this._getDefaultDate(e);var o=this._getFormatConfig(e);try{i=this.parseDate(n,r,o)||s}catch(u){this.log(u),r=t?"":r}e.selectedDay=i.getDate(),e.drawMonth=e.selectedMonth=i.getMonth(),e.drawYear=e.selectedYear=i.getFullYear(),e.currentDay=r?i.getDate():0,e.currentMonth=r?i.getMonth():0,e.currentYear=r?i.getFullYear():0,this._adjustInstDate(e)},_getDefaultDate:function(e){return this._restrictMinMax(e,this._determineDate(e,this._get(e,"defaultDate"),new Date))},_determineDate:function(e,t,n){var r=function(e){var t=new Date;return t.setDate(t.getDate()+e),t},i=function(t){try{return $.datepicker.parseDate($.datepicker._get(e,"dateFormat"),t,$.datepicker._getFormatConfig(e))}catch(n){}var r=(t.toLowerCase().match(/^c/)?$.datepicker._getDate(e):null)||new Date,i=r.getFullYear(),s=r.getMonth(),o=r.getDate(),u=/([+-]?[0-9]+)\\s*(d|D|w|W|m|M|y|Y)?/g,a=u.exec(t);while(a){switch(a[2]||"d"){case"d":case"D":o+=parseInt(a[1],10);break;case"w":case"W":o+=parseInt(a[1],10)*7;break;case"m":case"M":s+=parseInt(a[1],10),o=Math.min(o,$.datepicker._getDaysInMonth(i,s));break;case"y":case"Y":i+=parseInt(a[1],10),o=Math.min(o,$.datepicker._getDaysInMonth(i,s))}a=u.exec(t)}return new Date(i,s,o)},s=t==null||t===""?n:typeof t=="string"?i(t):typeof t=="number"?isNaN(t)?n:r(t):new Date(t.getTime());return s=s&&s.toString()=="Invalid Date"?n:s,s&&(s.setHours(0),s.setMinutes(0),s.setSeconds(0),s.setMilliseconds(0)),this._daylightSavingAdjust(s)},_daylightSavingAdjust:function(e){return e?(e.setHours(e.getHours()>12?e.getHours()+2:0),e):null},_setDate:function(e,t,n){var r=!t,i=e.selectedMonth,s=e.selectedYear,o=this._restrictMinMax(e,this._determineDate(e,t,new Date));e.selectedDay=e.currentDay=o.getDate(),e.drawMonth=e.selectedMonth=e.currentMonth=o.getMonth(),e.drawYear=e.selectedYear=e.currentYear=o.getFullYear(),(i!=e.selectedMonth||s!=e.selectedYear)&&!n&&this._notifyChange(e),this._adjustInstDate(e),e.input&&e.input.val(r?"":this._formatDate(e))},_getDate:function(e){var t=!e.currentYear||e.input&&e.input.val()==""?null:this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay));return t},_attachHandlers:function(e){var t=this._get(e,"stepMonths"),n="#"+e.id.replace(/\\\\\\\\/g,"\\\\");e.dpDiv.find("[data-handler]").map(function(){var e={prev:function(){window["DP_jQuery_"+dpuuid].datepicker._adjustDate(n,-t,"M")},next:function(){window["DP_jQuery_"+dpuuid].datepicker._adjustDate(n,+t,"M")},hide:function(){window["DP_jQuery_"+dpuuid].datepicker._hideDatepicker()},today:function(){window["DP_jQuery_"+dpuuid].datepicker._gotoToday(n)},selectDay:function(){return window["DP_jQuery_"+dpuuid].datepicker._selectDay(n,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this),!1},selectMonth:function(){return window["DP_jQuery_"+dpuuid].datepicker._selectMonthYear(n,this,"M"),!1},selectYear:function(){return window["DP_jQuery_"+dpuuid].datepicker._selectMonthYear(n,this,"Y"),!1}};$(this).bind(this.getAttribute("data-event"),e[this.getAttribute("data-handler")])})},_generateHTML:function(e){var t=new Date;t=this._daylightSavingAdjust(new Date(t.getFullYear(),t.getMonth(),t.getDate()));var n=this._get(e,"isRTL"),r=this._get(e,"showButtonPanel"),i=this._get(e,"hideIfNoPrevNext"),s=this._get(e,"navigationAsDateFormat"),o=this._getNumberOfMonths(e),u=this._get(e,"showCurrentAtPos"),a=this._get(e,"stepMonths"),f=o[0]!=1||o[1]!=1,l=this._daylightSavingAdjust(e.currentDay?new Date(e.currentYear,e.currentMonth,e.currentDay):new Date(9999,9,9)),c=this._getMinMaxDate(e,"min"),h=this._getMinMaxDate(e,"max"),p=e.drawMonth-u,d=e.drawYear;p<0&&(p+=12,d--);if(h){var v=this._daylightSavingAdjust(new Date(h.getFullYear(),h.getMonth()-o[0]*o[1]+1,h.getDate()));v=c&&v<c?c:v;while(this._daylightSavingAdjust(new Date(d,p,1))>v)p--,p<0&&(p=11,d--)}e.drawMonth=p,e.drawYear=d;var m=this._get(e,"prevText");m=s?this.formatDate(m,this._daylightSavingAdjust(new Date(d,p-a,1)),this._getFormatConfig(e)):m;var g=this._canAdjustMonth(e,-1,d,p)?\'<a class="ui-datepicker-prev ui-corner-all" data-handler="prev" data-event="click" title="\'+m+\'"><span class="ui-icon ui-icon-circle-triangle-\'+(n?"e":"w")+\'">\'+m+"</span></a>":i?"":\'<a class="ui-datepicker-prev ui-corner-all ui-state-disabled" title="\'+m+\'"><span class="ui-icon ui-icon-circle-triangle-\'+(n?"e":"w")+\'">\'+m+"</span></a>",y=this._get(e,"nextText");y=s?this.formatDate(y,this._daylightSavingAdjust(new Date(d,p+a,1)),this._getFormatConfig(e)):y;var b=this._canAdjustMonth(e,1,d,p)?\'<a class="ui-datepicker-next ui-corner-all" data-handler="next" data-event="click" title="\'+y+\'"><span class="ui-icon ui-icon-circle-triangle-\'+(n?"w":"e")+\'">\'+y+"</span></a>":i?"":\'<a class="ui-datepicker-next ui-corner-all ui-state-disabled" title="\'+y+\'"><span class="ui-icon ui-icon-circle-triangle-\'+(n?"w":"e")+\'">\'+y+"</span></a>",w=this._get(e,"currentText"),E=this._get(e,"gotoCurrent")&&e.currentDay?l:t;w=s?this.formatDate(w,E,this._getFormatConfig(e)):w;var S=e.inline?"":\'<button type="button" class="ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all" data-handler="hide" data-event="click">\'+this._get(e,"closeText")+"</button>",x=r?\'<div class="ui-datepicker-buttonpane ui-widget-content">\'+(n?S:"")+(this._isInRange(e,E)?\'<button type="button" class="ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all" data-handler="today" data-event="click">\'+w+"</button>":"")+(n?"":S)+"</div>":"",T=parseInt(this._get(e,"firstDay"),10);T=isNaN(T)?0:T;var N=this._get(e,"showWeek"),C=this._get(e,"dayNames"),k=this._get(e,"dayNamesShort"),L=this._get(e,"dayNamesMin"),A=this._get(e,"monthNames"),O=this._get(e,"monthNamesShort"),M=this._get(e,"beforeShowDay"),_=this._get(e,"showOtherMonths"),D=this._get(e,"selectOtherMonths"),P=this._get(e,"calculateWeek")||this.iso8601Week,H=this._getDefaultDate(e),B="";for(var j=0;j<o[0];j++){var F="";this.maxRows=4;for(var I=0;I<o[1];I++){var q=this._daylightSavingAdjust(new Date(d,p,e.selectedDay)),R=" ui-corner-all",U="";if(f){U+=\'<div class="ui-datepicker-group\';if(o[1]>1)switch(I){case 0:U+=" ui-datepicker-group-first",R=" ui-corner-"+(n?"right":"left");break;case o[1]-1:U+=" ui-datepicker-group-last",R=" ui-corner-"+(n?"left":"right");break;default:U+=" ui-datepicker-group-middle",R=""}U+=\'">\'}U+=\'<div class="ui-datepicker-header ui-widget-header ui-helper-clearfix\'+R+\'">\'+(/all|left/.test(R)&&j==0?n?b:g:"")+(/all|right/.test(R)&&j==0?n?g:b:"")+this._generateMonthYearHeader(e,p,d,c,h,j>0||I>0,A,O)+\'</div><table class="ui-datepicker-calendar"><thead>\'+"<tr>";var z=N?\'<th class="ui-datepicker-week-col">\'+this._get(e,"weekHeader")+"</th>":"";for(var W=0;W<7;W++){var X=(W+T)%7;z+="<th"+((W+T+6)%7>=5?\' class="ui-datepicker-week-end"\':"")+">"+\'<span title="\'+C[X]+\'">\'+L[X]+"</span></th>"}U+=z+"</tr></thead><tbody>";var V=this._getDaysInMonth(d,p);d==e.selectedYear&&p==e.selectedMonth&&(e.selectedDay=Math.min(e.selectedDay,V));var J=(this._getFirstDayOfMonth(d,p)-T+7)%7,K=Math.ceil((J+V)/7),Q=f?this.maxRows>K?this.maxRows:K:K;this.maxRows=Q;var G=this._daylightSavingAdjust(new Date(d,p,1-J));for(var Y=0;Y<Q;Y++){U+="<tr>";var Z=N?\'<td class="ui-datepicker-week-col">\'+this._get(e,"calculateWeek")(G)+"</td>":"";for(var W=0;W<7;W++){var et=M?M.apply(e.input?e.input[0]:null,[G]):[!0,""],tt=G.getMonth()!=p,nt=tt&&!D||!et[0]||c&&G<c||h&&G>h;Z+=\'<td class="\'+((W+T+6)%7>=5?" ui-datepicker-week-end":"")+(tt?" ui-datepicker-other-month":"")+(G.getTime()==q.getTime()&&p==e.selectedMonth&&e._keyEvent||H.getTime()==G.getTime()&&H.getTime()==q.getTime()?" "+this._dayOverClass:"")+(nt?" "+this._unselectableClass+" ui-state-disabled":"")+(tt&&!_?"":" "+et[1]+(G.getTime()==l.getTime()?" "+this._currentClass:"")+(G.getTime()==t.getTime()?" ui-datepicker-today":""))+\'"\'+((!tt||_)&&et[2]?\' title="\'+et[2]+\'"\':"")+(nt?"":\' data-handler="selectDay" data-event="click" data-month="\'+G.getMonth()+\'" data-year="\'+G.getFullYear()+\'"\')+">"+(tt&&!_?"&#xa0;":nt?\'<span class="ui-state-default">\'+G.getDate()+"</span>":\'<a class="ui-state-default\'+(G.getTime()==t.getTime()?" ui-state-highlight":"")+(G.getTime()==l.getTime()?" ui-state-active":"")+(tt?" ui-priority-secondary":"")+\'" href="#">\'+G.getDate()+"</a>")+"</td>",G.setDate(G.getDate()+1),G=this._daylightSavingAdjust(G)}U+=Z+"</tr>"}p++,p>11&&(p=0,d++),U+="</tbody></table>"+(f?"</div>"+(o[0]>0&&I==o[1]-1?\'<div class="ui-datepicker-row-break"></div>\':""):""),F+=U}B+=F}return B+=x+($.browser.msie&&parseInt($.browser.version,10)<7&&!e.inline?\'<iframe src="javascript:false;" class="ui-datepicker-cover" frameborder="0"></iframe>\':""),e._keyEvent=!1,B},_generateMonthYearHeader:function(e,t,n,r,i,s,o,u){var a=this._get(e,"changeMonth"),f=this._get(e,"changeYear"),l=this._get(e,"showMonthAfterYear"),c=\'<div class="ui-datepicker-title">\',h="";if(s||!a)h+=\'<span class="ui-datepicker-month">\'+o[t]+"</span>";else{var p=r&&r.getFullYear()==n,d=i&&i.getFullYear()==n;h+=\'<select class="ui-datepicker-month" data-handler="selectMonth" data-event="change">\';for(var v=0;v<12;v++)(!p||v>=r.getMonth())&&(!d||v<=i.getMonth())&&(h+=\'<option value="\'+v+\'"\'+(v==t?\' selected="selected"\':"")+">"+u[v]+"</option>");h+="</select>"}l||(c+=h+(s||!a||!f?"&#xa0;":""));if(!e.yearshtml){e.yearshtml="";if(s||!f)c+=\'<span class="ui-datepicker-year">\'+n+"</span>";else{var m=this._get(e,"yearRange").split(":"),g=(new Date).getFullYear(),y=function(e){var t=e.match(/c[+-].*/)?n+parseInt(e.substring(1),10):e.match(/[+-].*/)?g+parseInt(e,10):parseInt(e,10);return isNaN(t)?g:t},b=y(m[0]),w=Math.max(b,y(m[1]||""));b=r?Math.max(b,r.getFullYear()):b,w=i?Math.min(w,i.getFullYear()):w,e.yearshtml+=\'<select class="ui-datepicker-year" data-handler="selectYear" data-event="change">\';for(;b<=w;b++)e.yearshtml+=\'<option value="\'+b+\'"\'+(b==n?\' selected="selected"\':"")+">"+b+"</option>";e.yearshtml+="</select>",c+=e.yearshtml,e.yearshtml=null}}return c+=this._get(e,"yearSuffix"),l&&(c+=(s||!a||!f?"&#xa0;":"")+h),c+="</div>",c},_adjustInstDate:function(e,t,n){var r=e.drawYear+(n=="Y"?t:0),i=e.drawMonth+(n=="M"?t:0),s=Math.min(e.selectedDay,this._getDaysInMonth(r,i))+(n=="D"?t:0),o=this._restrictMinMax(e,this._daylightSavingAdjust(new Date(r,i,s)));e.selectedDay=o.getDate(),e.drawMonth=e.selectedMonth=o.getMonth(),e.drawYear=e.selectedYear=o.getFullYear(),(n=="M"||n=="Y")&&this._notifyChange(e)},_restrictMinMax:function(e,t){var n=this._getMinMaxDate(e,"min"),r=this._getMinMaxDate(e,"max"),i=n&&t<n?n:t;return i=r&&i>r?r:i,i},_notifyChange:function(e){var t=this._get(e,"onChangeMonthYear");t&&t.apply(e.input?e.input[0]:null,[e.selectedYear,e.selectedMonth+1,e])},_getNumberOfMonths:function(e){var t=this._get(e,"numberOfMonths");return t==null?[1,1]:typeof t=="number"?[1,t]:t},_getMinMaxDate:function(e,t){return this._determineDate(e,this._get(e,t+"Date"),null)},_getDaysInMonth:function(e,t){return 32-this._daylightSavingAdjust(new Date(e,t,32)).getDate()},_getFirstDayOfMonth:function(e,t){return(new Date(e,t,1)).getDay()},_canAdjustMonth:function(e,t,n,r){var i=this._getNumberOfMonths(e),s=this._daylightSavingAdjust(new Date(n,r+(t<0?t:i[0]*i[1]),1));return t<0&&s.setDate(this._getDaysInMonth(s.getFullYear(),s.getMonth())),this._isInRange(e,s)},_isInRange:function(e,t){var n=this._getMinMaxDate(e,"min"),r=this._getMinMaxDate(e,"max");return(!n||t.getTime()>=n.getTime())&&(!r||t.getTime()<=r.getTime())},_getFormatConfig:function(e){var t=this._get(e,"shortYearCutoff");return t=typeof t!="string"?t:(new Date).getFullYear()%100+parseInt(t,10),{shortYearCutoff:t,dayNamesShort:this._get(e,"dayNamesShort"),dayNames:this._get(e,"dayNames"),monthNamesShort:this._get(e,"monthNamesShort"),monthNames:this._get(e,"monthNames")}},_formatDate:function(e,t,n,r){t||(e.currentDay=e.selectedDay,e.currentMonth=e.selectedMonth,e.currentYear=e.selectedYear);var i=t?typeof t=="object"?t:this._daylightSavingAdjust(new Date(r,n,t)):this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay));return this.formatDate(this._get(e,"dateFormat"),i,this._getFormatConfig(e))}}),$.fn.datepicker=function(e){if(!this.length)return this;$.datepicker.initialized||($(document).mousedown($.datepicker._checkExternalClick).find(document.body).append($.datepicker.dpDiv),$.datepicker.initialized=!0);var t=Array.prototype.slice.call(arguments,1);return typeof e!="string"||e!="isDisabled"&&e!="getDate"&&e!="widget"?e=="option"&&arguments.length==2&&typeof arguments[1]=="string"?$.datepicker["_"+e+"Datepicker"].apply($.datepicker,[this[0]].concat(t)):this.each(function(){typeof e=="string"?$.datepicker["_"+e+"Datepicker"].apply($.datepicker,[this].concat(t)):$.datepicker._attachDatepicker(this,e)}):$.datepicker["_"+e+"Datepicker"].apply($.datepicker,[this[0]].concat(t))},$.datepicker=new Datepicker,$.datepicker.initialized=!1,$.datepicker.uuid=(new Date).getTime(),$.datepicker.version="1.9.0",window["DP_jQuery_"+dpuuid]=$})(jQuery);(function(e,t){var n="ui-dialog ui-widget ui-widget-content ui-corner-all ",r={buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},i={maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0};e.widget("ui.dialog",{version:"1.9.0",options:{autoOpen:!0,buttons:{},closeOnEscape:!0,closeText:"close",dialogClass:"",draggable:!0,hide:null,height:"auto",maxHeight:!1,maxWidth:!1,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",of:window,collision:"fit",using:function(t){var n=e(this).css(t).offset().top;n<0&&e(this).css("top",t.top-n)}},resizable:!0,show:null,stack:!0,title:"",width:300,zIndex:1e3},_create:function(){this.originalTitle=this.element.attr("title"),typeof this.originalTitle!="string"&&(this.originalTitle=""),this.oldPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)},this.options.title=this.options.title||this.originalTitle;var t=this,r=this.options,i=r.title||"&#160;",s=(this.uiDialog=e("<div>")).addClass(n+r.dialogClass).css({display:"none",outline:0,zIndex:r.zIndex}).attr("tabIndex",-1).keydown(function(n){r.closeOnEscape&&!n.isDefaultPrevented()&&n.keyCode&&n.keyCode===e.ui.keyCode.ESCAPE&&(t.close(n),n.preventDefault())}).mousedown(function(e){t.moveToTop(!1,e)}).appendTo("body"),o=this.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(s),u=(this.uiDialogTitlebar=e("<div>")).addClass("ui-dialog-titlebar  ui-widget-header  ui-corner-all  ui-helper-clearfix").prependTo(s),a=e("<a href=\'#\'></a>").addClass("ui-dialog-titlebar-close  ui-corner-all").attr("role","button").click(function(e){e.preventDefault(),t.close(e)}).appendTo(u),f=(this.uiDialogTitlebarCloseText=e("<span>")).addClass("ui-icon ui-icon-closethick").text(r.closeText).appendTo(a),l=e("<span>").uniqueId().addClass("ui-dialog-title").html(i).prependTo(u),c=(this.uiDialogButtonPane=e("<div>")).addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix"),h=(this.uiButtonSet=e("<div>")).addClass("ui-dialog-buttonset").appendTo(c);s.attr({role:"dialog","aria-labelledby":l.attr("id")}),u.find("*").add(u).disableSelection(),this._hoverable(a),this._focusable(a),r.draggable&&e.fn.draggable&&this._makeDraggable(),r.resizable&&e.fn.resizable&&this._makeResizable(),this._createButtons(r.buttons),this._isOpen=!1,e.fn.bgiframe&&s.bgiframe(),this._on(s,{keydown:function(t){if(!r.modal||t.keyCode!==e.ui.keyCode.TAB)return;var n=e(":tabbable",s),i=n.filter(":first"),o=n.filter(":last");if(t.target===o[0]&&!t.shiftKey)return i.focus(1),!1;if(t.target===i[0]&&t.shiftKey)return o.focus(1),!1}})},_init:function(){this.options.autoOpen&&this.open()},_destroy:function(){var e,t=this.oldPosition;this.overlay&&this.overlay.destroy(),this.uiDialog.hide(),this.element.removeClass("ui-dialog-content ui-widget-content").hide().appendTo("body"),this.uiDialog.remove(),this.originalTitle&&this.element.attr("title",this.originalTitle),e=t.parent.children().eq(t.index),e.length&&e[0]!==this.element[0]?e.before(this.element):t.parent.append(this.element)},widget:function(){return this.uiDialog},close:function(t){var n=this,r,i;if(!this._isOpen)return;if(!1===this._trigger("beforeClose",t))return;return this._isOpen=!1,this.overlay&&this.overlay.destroy(),this.options.hide?this.uiDialog.hide(this.options.hide,function(){n._trigger("close",t)}):(this.uiDialog.hide(),this._trigger("close",t)),e.ui.dialog.overlay.resize(),this.options.modal&&(r=0,e(".ui-dialog").each(function(){this!==n.uiDialog[0]&&(i=e(this).css("z-index"),isNaN(i)||(r=Math.max(r,i)))}),e.ui.dialog.maxZ=r),this},isOpen:function(){return this._isOpen},moveToTop:function(t,n){var r=this.options,i;return r.modal&&!t||!r.stack&&!r.modal?this._trigger("focus",n):(r.zIndex>e.ui.dialog.maxZ&&(e.ui.dialog.maxZ=r.zIndex),this.overlay&&(e.ui.dialog.maxZ+=1,e.ui.dialog.overlay.maxZ=e.ui.dialog.maxZ,this.overlay.$el.css("z-index",e.ui.dialog.overlay.maxZ)),i={scrollTop:this.element.scrollTop(),scrollLeft:this.element.scrollLeft()},e.ui.dialog.maxZ+=1,this.uiDialog.css("z-index",e.ui.dialog.maxZ),this.element.attr(i),this._trigger("focus",n),this)},open:function(){if(this._isOpen)return;var t,n=this.options,r=this.uiDialog;return this._size(),this._position(n.position),r.show(n.show),this.overlay=n.modal?new e.ui.dialog.overlay(this):null,this.moveToTop(!0),t=this.element.find(":tabbable"),t.length||(t=this.uiDialogButtonPane.find(":tabbable"),t.length||(t=r)),t.eq(0).focus(),this._isOpen=!0,this._trigger("open"),this},_createButtons:function(t){var n,r,i=this,s=!1;this.uiDialogButtonPane.remove(),this.uiButtonSet.empty(),typeof t=="object"&&t!==null&&e.each(t,function(){return!(s=!0)}),s?(e.each(t,function(t,n){n=e.isFunction(n)?{click:n,text:t}:n;var r=e("<button type=\'button\'>").attr(n,!0).unbind("click").click(function(){n.click.apply(i.element[0],arguments)}).appendTo(i.uiButtonSet);e.fn.button&&r.button()}),this.uiDialog.addClass("ui-dialog-buttons"),this.uiDialogButtonPane.appendTo(this.uiDialog)):this.uiDialog.removeClass("ui-dialog-buttons")},_makeDraggable:function(){function r(e){return{position:e.position,offset:e.offset}}var t=this,n=this.options;this.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(n,i){e(this).addClass("ui-dialog-dragging"),t._trigger("dragStart",n,r(i))},drag:function(e,n){t._trigger("drag",e,r(n))},stop:function(i,s){n.position=[s.position.left-t.document.scrollLeft(),s.position.top-t.document.scrollTop()],e(this).removeClass("ui-dialog-dragging"),t._trigger("dragStop",i,r(s)),e.ui.dialog.overlay.resize()}})},_makeResizable:function(n){function u(e){return{originalPosition:e.originalPosition,originalSize:e.originalSize,position:e.position,size:e.size}}n=n===t?this.options.resizable:n;var r=this,i=this.options,s=this.uiDialog.css("position"),o=typeof n=="string"?n:"n,e,s,w,se,sw,ne,nw";this.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:this.element,maxWidth:i.maxWidth,maxHeight:i.maxHeight,minWidth:i.minWidth,minHeight:this._minHeight(),handles:o,start:function(t,n){e(this).addClass("ui-dialog-resizing"),r._trigger("resizeStart",t,u(n))},resize:function(e,t){r._trigger("resize",e,u(t))},stop:function(t,n){e(this).removeClass("ui-dialog-resizing"),i.height=e(this).height(),i.width=e(this).width(),r._trigger("resizeStop",t,u(n)),e.ui.dialog.overlay.resize()}}).css("position",s).find(".ui-resizable-se").addClass("ui-icon ui-icon-grip-diagonal-se")},_minHeight:function(){var e=this.options;return e.height==="auto"?e.minHeight:Math.min(e.minHeight,e.height)},_position:function(t){var n=[],r=[0,0],i;if(t){if(typeof t=="string"||typeof t=="object"&&"0"in t)n=t.split?t.split(" "):[t[0],t[1]],n.length===1&&(n[1]=n[0]),e.each(["left","top"],function(e,t){+n[e]===n[e]&&(r[e]=n[e],n[e]=t)}),t={my:n.join(" "),at:n.join(" "),offset:r.join(" ")};t=e.extend({},e.ui.dialog.prototype.options.position,t)}else t=e.ui.dialog.prototype.options.position;i=this.uiDialog.is(":visible"),i||this.uiDialog.show(),this.uiDialog.position(t),i||this.uiDialog.hide()},_setOptions:function(t){var n=this,s={},o=!1;e.each(t,function(e,t){n._setOption(e,t),e in r&&(o=!0),e in i&&(s[e]=t)}),o&&this._size(),this.uiDialog.is(":data(resizable)")&&this.uiDialog.resizable("option",s)},_setOption:function(t,r){var i,s,o=this.uiDialog;switch(t){case"buttons":this._createButtons(r);break;case"closeText":this.uiDialogTitlebarCloseText.text(""+r);break;case"dialogClass":o.removeClass(this.options.dialogClass).addClass(n+r);break;case"disabled":r?o.addClass("ui-dialog-disabled"):o.removeClass("ui-dialog-disabled");break;case"draggable":i=o.is(":data(draggable)"),i&&!r&&o.draggable("destroy"),!i&&r&&this._makeDraggable();break;case"position":this._position(r);break;case"resizable":s=o.is(":data(resizable)"),s&&!r&&o.resizable("destroy"),s&&typeof r=="string"&&o.resizable("option","handles",r),!s&&r!==!1&&this._makeResizable(r);break;case"title":e(".ui-dialog-title",this.uiDialogTitlebar).html(""+(r||"&#160;"))}this._super(t,r)},_size:function(){var t,n,r,i=this.options,s=this.uiDialog.is(":visible");this.element.show().css({width:"auto",minHeight:0,height:0}),i.minWidth>i.width&&(i.width=i.minWidth),t=this.uiDialog.css({height:"auto",width:i.width}).outerHeight(),n=Math.max(0,i.minHeight-t),i.height==="auto"?e.support.minHeight?this.element.css({minHeight:n,height:"auto"}):(this.uiDialog.show(),r=this.element.css("height","auto").height(),s||this.uiDialog.hide(),this.element.height(Math.max(r,n))):this.element.height(Math.max(i.height-t,0)),this.uiDialog.is(":data(resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())}}),e.extend(e.ui.dialog,{uuid:0,maxZ:0,getTitleId:function(e){var t=e.attr("id");return t||(this.uuid+=1,t=this.uuid),"ui-dialog-title-"+t},overlay:function(t){this.$el=e.ui.dialog.overlay.create(t)}}),e.extend(e.ui.dialog.overlay,{instances:[],oldInstances:[],maxZ:0,events:e.map("focus,mousedown,mouseup,keydown,keypress,click".split(","),function(e){return e+".dialog-overlay"}).join(" "),create:function(t){this.instances.length===0&&(setTimeout(function(){e.ui.dialog.overlay.instances.length&&e(document).bind(e.ui.dialog.overlay.events,function(t){if(e(t.target).zIndex()<e.ui.dialog.overlay.maxZ)return!1})},1),e(window).bind("resize.dialog-overlay",e.ui.dialog.overlay.resize));var n=this.oldInstances.pop()||e("<div>").addClass("ui-widget-overlay");return e(document).bind("keydown.dialog-overlay",function(r){var i=e.ui.dialog.overlay.instances;i.length!==0&&i[i.length-1]===n&&t.options.closeOnEscape&&!r.isDefaultPrevented()&&r.keyCode&&r.keyCode===e.ui.keyCode.ESCAPE&&(t.close(r),r.preventDefault())}),n.appendTo(document.body).css({width:this.width(),height:this.height()}),e.fn.bgiframe&&n.bgiframe(),this.instances.push(n),n},destroy:function(t){var n=e.inArray(t,this.instances),r=0;n!==-1&&this.oldInstances.push(this.instances.splice(n,1)[0]),this.instances.length===0&&e([document,window]).unbind(".dialog-overlay"),t.height(0).width(0).remove(),e.each(this.instances,function(){r=Math.max(r,this.css("z-index"))}),this.maxZ=r},height:function(){var t,n;return e.browser.msie?(t=Math.max(document.documentElement.scrollHeight,document.body.scrollHeight),n=Math.max(document.documentElement.offsetHeight,document.body.offsetHeight),t<n?e(window).height()+"px":t+"px"):e(document).height()+"px"},width:function(){var t,n;return e.browser.msie?(t=Math.max(document.documentElement.scrollWidth,document.body.scrollWidth),n=Math.max(document.documentElement.offsetWidth,document.body.offsetWidth),t<n?e(window).width()+"px":t+"px"):e(document).width()+"px"},resize:function(){var t=e([]);e.each(e.ui.dialog.overlay.instances,function(){t=t.add(this)}),t.css({width:0,height:0}).css({width:e.ui.dialog.overlay.width(),height:e.ui.dialog.overlay.height()})}}),e.extend(e.ui.dialog.overlay.prototype,{destroy:function(){e.ui.dialog.overlay.destroy(this.$el)}})})(jQuery);(function(e,t){e.widget("ui.draggable",e.ui.mouse,{version:"1.9.0",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1},_create:function(){this.options.helper=="original"&&!/^(?:r|a|f)/.test(this.element.css("position"))&&(this.element[0].style.position="relative"),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._mouseInit()},_destroy:function(){this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._mouseDestroy()},_mouseCapture:function(t){var n=this.options;return this.helper||n.disabled||e(t.target).is(".ui-resizable-handle")?!1:(this.handle=this._getHandle(t),this.handle?(e(n.iframeFix===!0?"iframe":n.iframeFix).each(function(){e(\'<div class="ui-draggable-iframeFix" style="background: #fff;"></div>\').css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1e3}).css(e(this).offset()).appendTo("body")}),!0):!1)},_mouseStart:function(t){var n=this.options;return this.helper=this._createHelper(t),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),e.ui.ddmanager&&(e.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(),this.offset=this.positionAbs=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},e.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this.position=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,n.cursorAt&&this._adjustOffsetFromHelper(n.cursorAt),n.containment&&this._setContainment(),this._trigger("start",t)===!1?(this._clear(),!1):(this._cacheHelperProportions(),e.ui.ddmanager&&!n.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this._mouseDrag(t,!0),e.ui.ddmanager&&e.ui.ddmanager.dragStart(this,t),!0)},_mouseDrag:function(t,n){this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute");if(!n){var r=this._uiHash();if(this._trigger("drag",t,r)===!1)return this._mouseUp({}),!1;this.position=r.position}if(!this.options.axis||this.options.axis!="y")this.helper[0].style.left=this.position.left+"px";if(!this.options.axis||this.options.axis!="x")this.helper[0].style.top=this.position.top+"px";return e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),!1},_mouseStop:function(t){var n=!1;e.ui.ddmanager&&!this.options.dropBehaviour&&(n=e.ui.ddmanager.drop(this,t)),this.dropped&&(n=this.dropped,this.dropped=!1);var r=this.element[0],i=!1;while(r&&(r=r.parentNode))r==document&&(i=!0);if(!i&&this.options.helper==="original")return!1;if(this.options.revert=="invalid"&&!n||this.options.revert=="valid"&&n||this.options.revert===!0||e.isFunction(this.options.revert)&&this.options.revert.call(this.element,n)){var s=this;e(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){s._trigger("stop",t)!==!1&&s._clear()})}else this._trigger("stop",t)!==!1&&this._clear();return!1},_mouseUp:function(t){return e("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)}),e.ui.ddmanager&&e.ui.ddmanager.dragStop(this,t),e.ui.mouse.prototype._mouseUp.call(this,t)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(t){var n=!this.options.handle||!e(this.options.handle,this.element).length?!0:!1;return e(this.options.handle,this.element).find("*").andSelf().each(function(){this==t.target&&(n=!0)}),n},_createHelper:function(t){var n=this.options,r=e.isFunction(n.helper)?e(n.helper.apply(this.element[0],[t])):n.helper=="clone"?this.element.clone().removeAttr("id"):this.element;return r.parents("body").length||r.appendTo(n.appendTo=="parent"?this.element[0].parentNode:n.appendTo),r[0]!=this.element[0]&&!/(fixed|absolute)/.test(r.css("position"))&&r.css("position","absolute"),r},_adjustOffsetFromHelper:function(t){typeof t=="string"&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var t=this.offsetParent.offset();this.cssPosition=="absolute"&&this.scrollParent[0]!=document&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop());if(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()=="html"&&e.browser.msie)t={top:0,left:0};return{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition=="relative"){var e=this.element.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t=this.options;t.containment=="parent"&&(t.containment=this.helper[0].parentNode);if(t.containment=="document"||t.containment=="window")this.containment=[t.containment=="document"?0:e(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,t.containment=="document"?0:e(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,(t.containment=="document"?0:e(window).scrollLeft())+e(t.containment=="document"?document:window).width()-this.helperProportions.width-this.margins.left,(t.containment=="document"?0:e(window).scrollTop())+(e(t.containment=="document"?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];if(!/^(document|window|parent)$/.test(t.containment)&&t.containment.constructor!=Array){var n=e(t.containment),r=n[0];if(!r)return;var i=n.offset(),s=e(r).css("overflow")!="hidden";this.containment=[(parseInt(e(r).css("borderLeftWidth"),10)||0)+(parseInt(e(r).css("paddingLeft"),10)||0),(parseInt(e(r).css("borderTopWidth"),10)||0)+(parseInt(e(r).css("paddingTop"),10)||0),(s?Math.max(r.scrollWidth,r.offsetWidth):r.offsetWidth)-(parseInt(e(r).css("borderLeftWidth"),10)||0)-(parseInt(e(r).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(s?Math.max(r.scrollHeight,r.offsetHeight):r.offsetHeight)-(parseInt(e(r).css("borderTopWidth"),10)||0)-(parseInt(e(r).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relative_container=n}else t.containment.constructor==Array&&(this.containment=t.containment)},_convertPositionTo:function(t,n){n||(n=this.position);var r=t=="absolute"?1:-1,i=this.options,s=this.cssPosition!="absolute"||this.scrollParent[0]!=document&&!!e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,o=/(html|body)/i.test(s[0].tagName);return{top:n.top+this.offset.relative.top*r+this.offset.parent.top*r-(this.cssPosition=="fixed"?-this.scrollParent.scrollTop():o?0:s.scrollTop())*r,left:n.left+this.offset.relative.left*r+this.offset.parent.left*r-(this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():o?0:s.scrollLeft())*r}},_generatePosition:function(t){var n=this.options,r=this.cssPosition!="absolute"||this.scrollParent[0]!=document&&!!e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,i=/(html|body)/i.test(r[0].tagName),s=t.pageX,o=t.pageY;if(this.originalPosition){var u;if(this.containment){if(this.relative_container){var a=this.relative_container.offset();u=[this.containment[0]+a.left,this.containment[1]+a.top,this.containment[2]+a.left,this.containment[3]+a.top]}else u=this.containment;t.pageX-this.offset.click.left<u[0]&&(s=u[0]+this.offset.click.left),t.pageY-this.offset.click.top<u[1]&&(o=u[1]+this.offset.click.top),t.pageX-this.offset.click.left>u[2]&&(s=u[2]+this.offset.click.left),t.pageY-this.offset.click.top>u[3]&&(o=u[3]+this.offset.click.top)}if(n.grid){var f=n.grid[1]?this.originalPageY+Math.round((o-this.originalPageY)/n.grid[1])*n.grid[1]:this.originalPageY;o=u?f-this.offset.click.top<u[1]||f-this.offset.click.top>u[3]?f-this.offset.click.top<u[1]?f+n.grid[1]:f-n.grid[1]:f:f;var l=n.grid[0]?this.originalPageX+Math.round((s-this.originalPageX)/n.grid[0])*n.grid[0]:this.originalPageX;s=u?l-this.offset.click.left<u[0]||l-this.offset.click.left>u[2]?l-this.offset.click.left<u[0]?l+n.grid[0]:l-n.grid[0]:l:l}}return{top:o-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(this.cssPosition=="fixed"?-this.scrollParent.scrollTop():i?0:r.scrollTop()),left:s-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():i?0:r.scrollLeft())}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]!=this.element[0]&&!this.cancelHelperRemoval&&this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1},_trigger:function(t,n,r){return r=r||this._uiHash(),e.ui.plugin.call(this,t,[n,r]),t=="drag"&&(this.positionAbs=this._convertPositionTo("absolute")),e.Widget.prototype._trigger.call(this,t,n,r)},plugins:{},_uiHash:function(e){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),e.ui.plugin.add("draggable","connectToSortable",{start:function(t,n){var r=e(this).data("draggable"),i=r.options,s=e.extend({},n,{item:r.element});r.sortables=[],e(i.connectToSortable).each(function(){var n=e.data(this,"sortable");n&&!n.options.disabled&&(r.sortables.push({instance:n,shouldRevert:n.options.revert}),n.refreshPositions(),n._trigger("activate",t,s))})},stop:function(t,n){var r=e(this).data("draggable"),i=e.extend({},n,{item:r.element});e.each(r.sortables,function(){this.instance.isOver?(this.instance.isOver=0,r.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=!0),this.instance._mouseStop(t),this.instance.options.helper=this.instance.options._helper,r.options.helper=="original"&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",t,i))})},drag:function(t,n){var r=e(this).data("draggable"),i=this,s=function(t){var n=this.offset.click.top,r=this.offset.click.left,i=this.positionAbs.top,s=this.positionAbs.left,o=t.height,u=t.width,a=t.top,f=t.left;return e.ui.isOver(i+n,s+r,a,f,o,u)};e.each(r.sortables,function(s){this.instance.positionAbs=r.positionAbs,this.instance.helperProportions=r.helperProportions,this.instance.offset.click=r.offset.click,this.instance._intersectsWith(this.instance.containerCache)?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=e(i).clone().removeAttr("id").appendTo(this.instance.element).data("sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return n.helper[0]},t.target=this.instance.currentItem[0],this.instance._mouseCapture(t,!0),this.instance._mouseStart(t,!0,!0),this.instance.offset.click.top=r.offset.click.top,this.instance.offset.click.left=r.offset.click.left,this.instance.offset.parent.left-=r.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=r.offset.parent.top-this.instance.offset.parent.top,r._trigger("toSortable",t),r.dropped=this.instance.element,r.currentItem=r.element,this.instance.fromOutside=r),this.instance.currentItem&&this.instance._mouseDrag(t)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",t,this.instance._uiHash(this.instance)),this.instance._mouseStop(t,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),r._trigger("fromSortable",t),r.dropped=!1)})}}),e.ui.plugin.add("draggable","cursor",{start:function(t,n){var r=e("body"),i=e(this).data("draggable").options;r.css("cursor")&&(i._cursor=r.css("cursor")),r.css("cursor",i.cursor)},stop:function(t,n){var r=e(this).data("draggable").options;r._cursor&&e("body").css("cursor",r._cursor)}}),e.ui.plugin.add("draggable","opacity",{start:function(t,n){var r=e(n.helper),i=e(this).data("draggable").options;r.css("opacity")&&(i._opacity=r.css("opacity")),r.css("opacity",i.opacity)},stop:function(t,n){var r=e(this).data("draggable").options;r._opacity&&e(n.helper).css("opacity",r._opacity)}}),e.ui.plugin.add("draggable","scroll",{start:function(t,n){var r=e(this).data("draggable");r.scrollParent[0]!=document&&r.scrollParent[0].tagName!="HTML"&&(r.overflowOffset=r.scrollParent.offset())},drag:function(t,n){var r=e(this).data("draggable"),i=r.options,s=!1;if(r.scrollParent[0]!=document&&r.scrollParent[0].tagName!="HTML"){if(!i.axis||i.axis!="x")r.overflowOffset.top+r.scrollParent[0].offsetHeight-t.pageY<i.scrollSensitivity?r.scrollParent[0].scrollTop=s=r.scrollParent[0].scrollTop+i.scrollSpeed:t.pageY-r.overflowOffset.top<i.scrollSensitivity&&(r.scrollParent[0].scrollTop=s=r.scrollParent[0].scrollTop-i.scrollSpeed);if(!i.axis||i.axis!="y")r.overflowOffset.left+r.scrollParent[0].offsetWidth-t.pageX<i.scrollSensitivity?r.scrollParent[0].scrollLeft=s=r.scrollParent[0].scrollLeft+i.scrollSpeed:t.pageX-r.overflowOffset.left<i.scrollSensitivity&&(r.scrollParent[0].scrollLeft=s=r.scrollParent[0].scrollLeft-i.scrollSpeed)}else{if(!i.axis||i.axis!="x")t.pageY-e(document).scrollTop()<i.scrollSensitivity?s=e(document).scrollTop(e(document).scrollTop()-i.scrollSpeed):e(window).height()-(t.pageY-e(document).scrollTop())<i.scrollSensitivity&&(s=e(document).scrollTop(e(document).scrollTop()+i.scrollSpeed));if(!i.axis||i.axis!="y")t.pageX-e(document).scrollLeft()<i.scrollSensitivity?s=e(document).scrollLeft(e(document).scrollLeft()-i.scrollSpeed):e(window).width()-(t.pageX-e(document).scrollLeft())<i.scrollSensitivity&&(s=e(document).scrollLeft(e(document).scrollLeft()+i.scrollSpeed))}s!==!1&&e.ui.ddmanager&&!i.dropBehaviour&&e.ui.ddmanager.prepareOffsets(r,t)}}),e.ui.plugin.add("draggable","snap",{start:function(t,n){var r=e(this).data("draggable"),i=r.options;r.snapElements=[],e(i.snap.constructor!=String?i.snap.items||":data(draggable)":i.snap).each(function(){var t=e(this),n=t.offset();this!=r.element[0]&&r.snapElements.push({item:this,width:t.outerWidth(),height:t.outerHeight(),top:n.top,left:n.left})})},drag:function(t,n){var r=e(this).data("draggable"),i=r.options,s=i.snapTolerance,o=n.offset.left,u=o+r.helperProportions.width,a=n.offset.top,f=a+r.helperProportions.height;for(var l=r.snapElements.length-1;l>=0;l--){var c=r.snapElements[l].left,h=c+r.snapElements[l].width,p=r.snapElements[l].top,d=p+r.snapElements[l].height;if(!(c-s<o&&o<h+s&&p-s<a&&a<d+s||c-s<o&&o<h+s&&p-s<f&&f<d+s||c-s<u&&u<h+s&&p-s<a&&a<d+s||c-s<u&&u<h+s&&p-s<f&&f<d+s)){r.snapElements[l].snapping&&r.options.snap.release&&r.options.snap.release.call(r.element,t,e.extend(r._uiHash(),{snapItem:r.snapElements[l].item})),r.snapElements[l].snapping=!1;continue}if(i.snapMode!="inner"){var v=Math.abs(p-f)<=s,m=Math.abs(d-a)<=s,g=Math.abs(c-u)<=s,y=Math.abs(h-o)<=s;v&&(n.position.top=r._convertPositionTo("relative",{top:p-r.helperProportions.height,left:0}).top-r.margins.top),m&&(n.position.top=r._convertPositionTo("relative",{top:d,left:0}).top-r.margins.top),g&&(n.position.left=r._convertPositionTo("relative",{top:0,left:c-r.helperProportions.width}).left-r.margins.left),y&&(n.position.left=r._convertPositionTo("relative",{top:0,left:h}).left-r.margins.left)}var b=v||m||g||y;if(i.snapMode!="outer"){var v=Math.abs(p-a)<=s,m=Math.abs(d-f)<=s,g=Math.abs(c-o)<=s,y=Math.abs(h-u)<=s;v&&(n.position.top=r._convertPositionTo("relative",{top:p,left:0}).top-r.margins.top),m&&(n.position.top=r._convertPositionTo("relative",{top:d-r.helperProportions.height,left:0}).top-r.margins.top),g&&(n.position.left=r._convertPositionTo("relative",{top:0,left:c}).left-r.margins.left),y&&(n.position.left=r._convertPositionTo("relative",{top:0,left:h-r.helperProportions.width}).left-r.margins.left)}!r.snapElements[l].snapping&&(v||m||g||y||b)&&r.options.snap.snap&&r.options.snap.snap.call(r.element,t,e.extend(r._uiHash(),{snapItem:r.snapElements[l].item})),r.snapElements[l].snapping=v||m||g||y||b}}}),e.ui.plugin.add("draggable","stack",{start:function(t,n){var r=e(this).data("draggable").options,i=e.makeArray(e(r.stack)).sort(function(t,n){return(parseInt(e(t).css("zIndex"),10)||0)-(parseInt(e(n).css("zIndex"),10)||0)});if(!i.length)return;var s=parseInt(i[0].style.zIndex)||0;e(i).each(function(e){this.style.zIndex=s+e}),this[0].style.zIndex=s+i.length}}),e.ui.plugin.add("draggable","zIndex",{start:function(t,n){var r=e(n.helper),i=e(this).data("draggable").options;r.css("zIndex")&&(i._zIndex=r.css("zIndex")),r.css("zIndex",i.zIndex)},stop:function(t,n){var r=e(this).data("draggable").options;r._zIndex&&e(n.helper).css("zIndex",r._zIndex)}})})(jQuery);(function(e,t){e.widget("ui.droppable",{version:"1.9.0",widgetEventPrefix:"drop",options:{accept:"*",activeClass:!1,addClasses:!0,greedy:!1,hoverClass:!1,scope:"default",tolerance:"intersect"},_create:function(){var t=this.options,n=t.accept;this.isover=0,this.isout=1,this.accept=e.isFunction(n)?n:function(e){return e.is(n)},this.proportions={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight},e.ui.ddmanager.droppables[t.scope]=e.ui.ddmanager.droppables[t.scope]||[],e.ui.ddmanager.droppables[t.scope].push(this),t.addClasses&&this.element.addClass("ui-droppable")},_destroy:function(){var t=e.ui.ddmanager.droppables[this.options.scope];for(var n=0;n<t.length;n++)t[n]==this&&t.splice(n,1);this.element.removeClass("ui-droppable ui-droppable-disabled")},_setOption:function(t,n){t=="accept"&&(this.accept=e.isFunction(n)?n:function(e){return e.is(n)}),e.Widget.prototype._setOption.apply(this,arguments)},_activate:function(t){var n=e.ui.ddmanager.current;this.options.activeClass&&this.element.addClass(this.options.activeClass),n&&this._trigger("activate",t,this.ui(n))},_deactivate:function(t){var n=e.ui.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass),n&&this._trigger("deactivate",t,this.ui(n))},_over:function(t){var n=e.ui.ddmanager.current;if(!n||(n.currentItem||n.element)[0]==this.element[0])return;this.accept.call(this.element[0],n.currentItem||n.element)&&(this.options.hoverClass&&this.element.addClass(this.options.hoverClass),this._trigger("over",t,this.ui(n)))},_out:function(t){var n=e.ui.ddmanager.current;if(!n||(n.currentItem||n.element)[0]==this.element[0])return;this.accept.call(this.element[0],n.currentItem||n.element)&&(this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("out",t,this.ui(n)))},_drop:function(t,n){var r=n||e.ui.ddmanager.current;if(!r||(r.currentItem||r.element)[0]==this.element[0])return!1;var i=!1;return this.element.find(":data(droppable)").not(".ui-draggable-dragging").each(function(){var t=e.data(this,"droppable");if(t.options.greedy&&!t.options.disabled&&t.options.scope==r.options.scope&&t.accept.call(t.element[0],r.currentItem||r.element)&&e.ui.intersect(r,e.extend(t,{offset:t.element.offset()}),t.options.tolerance))return i=!0,!1}),i?!1:this.accept.call(this.element[0],r.currentItem||r.element)?(this.options.activeClass&&this.element.removeClass(this.options.activeClass),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("drop",t,this.ui(r)),this.element):!1},ui:function(e){return{draggable:e.currentItem||e.element,helper:e.helper,position:e.position,offset:e.positionAbs}}}),e.ui.intersect=function(t,n,r){if(!n.offset)return!1;var i=(t.positionAbs||t.position.absolute).left,s=i+t.helperProportions.width,o=(t.positionAbs||t.position.absolute).top,u=o+t.helperProportions.height,a=n.offset.left,f=a+n.proportions.width,l=n.offset.top,c=l+n.proportions.height;switch(r){case"fit":return a<=i&&s<=f&&l<=o&&u<=c;case"intersect":return a<i+t.helperProportions.width/2&&s-t.helperProportions.width/2<f&&l<o+t.helperProportions.height/2&&u-t.helperProportions.height/2<c;case"pointer":var h=(t.positionAbs||t.position.absolute).left+(t.clickOffset||t.offset.click).left,p=(t.positionAbs||t.position.absolute).top+(t.clickOffset||t.offset.click).top,d=e.ui.isOver(p,h,l,a,n.proportions.height,n.proportions.width);return d;case"touch":return(o>=l&&o<=c||u>=l&&u<=c||o<l&&u>c)&&(i>=a&&i<=f||s>=a&&s<=f||i<a&&s>f);default:return!1}},e.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(t,n){var r=e.ui.ddmanager.droppables[t.options.scope]||[],i=n?n.type:null,s=(t.currentItem||t.element).find(":data(droppable)").andSelf();e:for(var o=0;o<r.length;o++){if(r[o].options.disabled||t&&!r[o].accept.call(r[o].element[0],t.currentItem||t.element))continue;for(var u=0;u<s.length;u++)if(s[u]==r[o].element[0]){r[o].proportions.height=0;continue e}r[o].visible=r[o].element.css("display")!="none";if(!r[o].visible)continue;i=="mousedown"&&r[o]._activate.call(r[o],n),r[o].offset=r[o].element.offset(),r[o].proportions={width:r[o].element[0].offsetWidth,height:r[o].element[0].offsetHeight}}},drop:function(t,n){var r=!1;return e.each(e.ui.ddmanager.droppables[t.options.scope]||[],function(){if(!this.options)return;!this.options.disabled&&this.visible&&e.ui.intersect(t,this,this.options.tolerance)&&(r=this._drop.call(this,n)||r),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],t.currentItem||t.element)&&(this.isout=1,this.isover=0,this._deactivate.call(this,n))}),r},dragStart:function(t,n){t.element.parentsUntil("body").bind("scroll.droppable",function(){t.options.refreshPositions||e.ui.ddmanager.prepareOffsets(t,n)})},drag:function(t,n){t.options.refreshPositions&&e.ui.ddmanager.prepareOffsets(t,n),e.each(e.ui.ddmanager.droppables[t.options.scope]||[],function(){if(this.options.disabled||this.greedyChild||!this.visible)return;var r=e.ui.intersect(t,this,this.options.tolerance),i=!r&&this.isover==1?"isout":r&&this.isover==0?"isover":null;if(!i)return;var s;if(this.options.greedy){var o=this.options.scope,u=this.element.parents(":data(droppable)").filter(function(){return e.data(this,"droppable").options.scope===o});u.length&&(s=e.data(u[0],"droppable"),s.greedyChild=i=="isover"?1:0)}s&&i=="isover"&&(s.isover=0,s.isout=1,s._out.call(s,n)),this[i]=1,this[i=="isout"?"isover":"isout"]=0,this[i=="isover"?"_over":"_out"].call(this,n),s&&i=="isout"&&(s.isout=0,s.isover=1,s._over.call(s,n))})},dragStop:function(t,n){t.element.parentsUntil("body").unbind("scroll.droppable"),t.options.refreshPositions||e.ui.ddmanager.prepareOffsets(t,n)}}})(jQuery);jQuery.effects||function(e,t){var n=e.uiBackCompat!==!1,r="ui-effects-";e.effects={effect:{}},function(t,n){function p(e,t,n){var r=a[t.type]||{};return e==null?n||!t.def?null:t.def:(e=r.floor?~~e:parseFloat(e),isNaN(e)?t.def:r.mod?(e+r.mod)%r.mod:0>e?0:r.max<e?r.max:e)}function d(e){var n=o(),r=n._rgba=[];return e=e.toLowerCase(),h(s,function(t,i){var s,o=i.re.exec(e),a=o&&i.parse(o),f=i.space||"rgba";if(a)return s=n[f](a),n[u[f].cache]=s[u[f].cache],r=n._rgba=s._rgba,!1}),r.length?(r.join()==="0,0,0,0"&&t.extend(r,c.transparent),n):c[e]}function v(e,t,n){return n=(n+1)%1,n*6<1?e+(t-e)*n*6:n*2<1?t:n*3<2?e+(t-e)*(2/3-n)*6:e}var r="backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor".split(" "),i=/^([\\-+])=\\s*(\\d+\\.?\\d*)/,s=[{re:/rgba?\\(\\s*(\\d{1,3})\\s*,\\s*(\\d{1,3})\\s*,\\s*(\\d{1,3})\\s*(?:,\\s*(\\d+(?:\\.\\d+)?)\\s*)?\\)/,parse:function(e){return[e[1],e[2],e[3],e[4]]}},{re:/rgba?\\(\\s*(\\d+(?:\\.\\d+)?)\\%\\s*,\\s*(\\d+(?:\\.\\d+)?)\\%\\s*,\\s*(\\d+(?:\\.\\d+)?)\\%\\s*(?:,\\s*(\\d+(?:\\.\\d+)?)\\s*)?\\)/,parse:function(e){return[e[1]*2.55,e[2]*2.55,e[3]*2.55,e[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,parse:function(e){return[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(e){return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)]}},{re:/hsla?\\(\\s*(\\d+(?:\\.\\d+)?)\\s*,\\s*(\\d+(?:\\.\\d+)?)\\%\\s*,\\s*(\\d+(?:\\.\\d+)?)\\%\\s*(?:,\\s*(\\d+(?:\\.\\d+)?)\\s*)?\\)/,space:"hsla",parse:function(e){return[e[1],e[2]/100,e[3]/100,e[4]]}}],o=t.Color=function(e,n,r,i){return new t.Color.fn.parse(e,n,r,i)},u={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},a={"byte":{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},f=o.support={},l=t("<p>")[0],c,h=t.each;l.style.cssText="background-color:rgba(1,1,1,.5)",f.rgba=l.style.backgroundColor.indexOf("rgba")>-1,h(u,function(e,t){t.cache="_"+e,t.props.alpha={idx:3,type:"percent",def:1}}),o.fn=t.extend(o.prototype,{parse:function(r,i,s,a){if(r===n)return this._rgba=[null,null,null,null],this;if(r.jquery||r.nodeType)r=t(r).css(i),i=n;var f=this,l=t.type(r),v=this._rgba=[],m;i!==n&&(r=[r,i,s,a],l="array");if(l==="string")return this.parse(d(r)||c._default);if(l==="array")return h(u.rgba.props,function(e,t){v[t.idx]=p(r[t.idx],t)}),this;if(l==="object")return r instanceof o?h(u,function(e,t){r[t.cache]&&(f[t.cache]=r[t.cache].slice())}):h(u,function(t,n){var i=n.cache;h(n.props,function(e,t){if(!f[i]&&n.to){if(e==="alpha"||r[e]==null)return;f[i]=n.to(f._rgba)}f[i][t.idx]=p(r[e],t,!0)}),f[i]&&e.inArray(null,f[i].slice(0,3))<0&&(f[i][3]=1,n.from&&(f._rgba=n.from(f[i])))}),this},is:function(e){var t=o(e),n=!0,r=this;return h(u,function(e,i){var s,o=t[i.cache];return o&&(s=r[i.cache]||i.to&&i.to(r._rgba)||[],h(i.props,function(e,t){if(o[t.idx]!=null)return n=o[t.idx]===s[t.idx],n})),n}),n},_space:function(){var e=[],t=this;return h(u,function(n,r){t[r.cache]&&e.push(n)}),e.pop()},transition:function(e,t){var n=o(e),r=n._space(),i=u[r],s=this.alpha()===0?o("transparent"):this,f=s[i.cache]||i.to(s._rgba),l=f.slice();return n=n[i.cache],h(i.props,function(e,r){var i=r.idx,s=f[i],o=n[i],u=a[r.type]||{};if(o===null)return;s===null?l[i]=o:(u.mod&&(o-s>u.mod/2?s+=u.mod:s-o>u.mod/2&&(s-=u.mod)),l[i]=p((o-s)*t+s,r))}),this[r](l)},blend:function(e){if(this._rgba[3]===1)return this;var n=this._rgba.slice(),r=n.pop(),i=o(e)._rgba;return o(t.map(n,function(e,t){return(1-r)*i[t]+r*e}))},toRgbaString:function(){var e="rgba(",n=t.map(this._rgba,function(e,t){return e==null?t>2?1:0:e});return n[3]===1&&(n.pop(),e="rgb("),e+n.join()+")"},toHslaString:function(){var e="hsla(",n=t.map(this.hsla(),function(e,t){return e==null&&(e=t>2?1:0),t&&t<3&&(e=Math.round(e*100)+"%"),e});return n[3]===1&&(n.pop(),e="hsl("),e+n.join()+")"},toHexString:function(e){var n=this._rgba.slice(),r=n.pop();return e&&n.push(~~(r*255)),"#"+t.map(n,function(e,t){return e=(e||0).toString(16),e.length===1?"0"+e:e}).join("")},toString:function(){return this._rgba[3]===0?"transparent":this.toRgbaString()}}),o.fn.parse.prototype=o.fn,u.hsla.to=function(e){if(e[0]==null||e[1]==null||e[2]==null)return[null,null,null,e[3]];var t=e[0]/255,n=e[1]/255,r=e[2]/255,i=e[3],s=Math.max(t,n,r),o=Math.min(t,n,r),u=s-o,a=s+o,f=a*.5,l,c;return o===s?l=0:t===s?l=60*(n-r)/u+360:n===s?l=60*(r-t)/u+120:l=60*(t-n)/u+240,f===0||f===1?c=f:f<=.5?c=u/a:c=u/(2-a),[Math.round(l)%360,c,f,i==null?1:i]},u.hsla.from=function(e){if(e[0]==null||e[1]==null||e[2]==null)return[null,null,null,e[3]];var t=e[0]/360,n=e[1],r=e[2],i=e[3],s=r<=.5?r*(1+n):r+n-r*n,o=2*r-s,u,a,f;return[Math.round(v(o,s,t+1/3)*255),Math.round(v(o,s,t)*255),Math.round(v(o,s,t-1/3)*255),i]},h(u,function(e,r){var s=r.props,u=r.cache,a=r.to,f=r.from;o.fn[e]=function(e){a&&!this[u]&&(this[u]=a(this._rgba));if(e===n)return this[u].slice();var r,i=t.type(e),l=i==="array"||i==="object"?e:arguments,c=this[u].slice();return h(s,function(e,t){var n=l[i==="object"?e:t.idx];n==null&&(n=c[t.idx]),c[t.idx]=p(n,t)}),f?(r=o(f(c)),r[u]=c,r):o(c)},h(s,function(n,r){if(o.fn[n])return;o.fn[n]=function(s){var o=t.type(s),u=n==="alpha"?this._hsla?"hsla":"rgba":e,a=this[u](),f=a[r.idx],l;return o==="undefined"?f:(o==="function"&&(s=s.call(this,f),o=t.type(s)),s==null&&r.empty?this:(o==="string"&&(l=i.exec(s),l&&(s=f+parseFloat(l[2])*(l[1]==="+"?1:-1))),a[r.idx]=s,this[u](a)))}})}),h(r,function(e,n){t.cssHooks[n]={set:function(e,r){var i,s,u="";if(t.type(r)!=="string"||(i=d(r))){r=o(i||r);if(!f.rgba&&r._rgba[3]!==1){s=n==="backgroundColor"?e.parentNode:e;while((u===""||u==="transparent")&&s&&s.style)try{u=t.css(s,"backgroundColor"),s=s.parentNode}catch(a){}r=r.blend(u&&u!=="transparent"?u:"_default")}r=r.toRgbaString()}try{e.style[n]=r}catch(r){}}},t.fx.step[n]=function(e){e.colorInit||(e.start=o(e.elem,n),e.end=o(e.end),e.colorInit=!0),t.cssHooks[n].set(e.elem,e.start.transition(e.end,e.pos))}}),t.cssHooks.borderColor={expand:function(e){var t={};return h(["Top","Right","Bottom","Left"],function(n,r){t["border"+r+"Color"]=e}),t}},c=t.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"}}(jQuery),function(){function i(){var t=this.ownerDocument.defaultView?this.ownerDocument.defaultView.getComputedStyle(this,null):this.currentStyle,n={},r,i,s;if(t&&t.length&&t[0]&&t[t[0]]){s=t.length;while(s--)r=t[s],typeof t[r]=="string"&&(n[e.camelCase(r)]=t[r])}else for(r in t)typeof t[r]=="string"&&(n[r]=t[r]);return n}function s(t,n){var i={},s,o;for(s in n)o=n[s],t[s]!==o&&!r[s]&&(e.fx.step[s]||!isNaN(parseFloat(o)))&&(i[s]=o);return i}var n=["add","remove","toggle"],r={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};e.each(["borderLeftStyle","borderRightStyle","borderBottomStyle","borderTopStyle"],function(t,n){e.fx.step[n]=function(e){if(e.end!=="none"&&!e.setAttr||e.pos===1&&!e.setAttr)jQuery.style(e.elem,n,e.end),e.setAttr=!0}}),e.effects.animateClass=function(t,r,o,u){var a=e.speed(r,o,u);return this.queue(function(){var r=e(this),o=r.attr("class")||"",u,f=a.children?r.find("*").andSelf():r;f=f.map(function(){var t=e(this);return{el:t,start:i.call(this)}}),u=function(){e.each(n,function(e,n){t[n]&&r[n+"Class"](t[n])})},u(),f=f.map(function(){return this.end=i.call(this.el[0]),this.diff=s(this.start,this.end),this}),r.attr("class",o),f=f.map(function(){var t=this,n=e.Deferred(),r=jQuery.extend({},a,{queue:!1,complete:function(){n.resolve(t)}});return this.el.animate(this.diff,r),n.promise()}),e.when.apply(e,f.get()).done(function(){u(),e.each(arguments,function(){var t=this.el;e.each(this.diff,function(e){t.css(e,"")})}),a.complete.call(r[0])})})},e.fn.extend({_addClass:e.fn.addClass,addClass:function(t,n,r,i){return n?e.effects.animateClass.call(this,{add:t},n,r,i):this._addClass(t)},_removeClass:e.fn.removeClass,removeClass:function(t,n,r,i){return n?e.effects.animateClass.call(this,{remove:t},n,r,i):this._removeClass(t)},_toggleClass:e.fn.toggleClass,toggleClass:function(n,r,i,s,o){return typeof r=="boolean"||r===t?i?e.effects.animateClass.call(this,r?{add:n}:{remove:n},i,s,o):this._toggleClass(n,r):e.effects.animateClass.call(this,{toggle:n},r,i,s)},switchClass:function(t,n,r,i,s){return e.effects.animateClass.call(this,{add:n,remove:t},r,i,s)}})}(),function(){function i(n,r,i,s){e.isPlainObject(n)&&(r=n,n=n.effect),n={effect:n},r===t&&(r={}),e.isFunction(r)&&(s=r,i=null,r={});if(typeof r=="number"||e.fx.speeds[r])s=i,i=r,r={};return e.isFunction(i)&&(s=i,i=null),r&&e.extend(n,r),i=i||r.duration,n.duration=e.fx.off?0:typeof i=="number"?i:i in e.fx.speeds?e.fx.speeds[i]:e.fx.speeds._default,n.complete=s||r.complete,n}function s(t){return!t||typeof t=="number"||e.fx.speeds[t]?!0:typeof t=="string"&&!e.effects.effect[t]?n&&e.effects[t]?!1:!0:!1}e.extend(e.effects,{version:"1.9.0",save:function(e,t){for(var n=0;n<t.length;n++)t[n]!==null&&e.data(r+t[n],e[0].style[t[n]])},restore:function(e,n){var i,s;for(s=0;s<n.length;s++)n[s]!==null&&(i=e.data(r+n[s]),i===t&&(i=""),e.css(n[s],i))},setMode:function(e,t){return t==="toggle"&&(t=e.is(":hidden")?"show":"hide"),t},getBaseline:function(e,t){var n,r;switch(e[0]){case"top":n=0;break;case"middle":n=.5;break;case"bottom":n=1;break;default:n=e[0]/t.height}switch(e[1]){case"left":r=0;break;case"center":r=.5;break;case"right":r=1;break;default:r=e[1]/t.width}return{x:r,y:n}},createWrapper:function(t){if(t.parent().is(".ui-effects-wrapper"))return t.parent();var n={width:t.outerWidth(!0),height:t.outerHeight(!0),"float":t.css("float")},r=e("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),i={width:t.width(),height:t.height()},s=document.activeElement;try{s.id}catch(o){s=document.body}return t.wrap(r),(t[0]===s||e.contains(t[0],s))&&e(s).focus(),r=t.parent(),t.css("position")==="static"?(r.css({position:"relative"}),t.css({position:"relative"})):(e.extend(n,{position:t.css("position"),zIndex:t.css("z-index")}),e.each(["top","left","bottom","right"],function(e,r){n[r]=t.css(r),isNaN(parseInt(n[r],10))&&(n[r]="auto")}),t.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),t.css(i),r.css(n).show()},removeWrapper:function(t){var n=document.activeElement;return t.parent().is(".ui-effects-wrapper")&&(t.parent().replaceWith(t),(t[0]===n||e.contains(t[0],n))&&e(n).focus()),t},setTransition:function(t,n,r,i){return i=i||{},e.each(n,function(e,n){var s=t.cssUnit(n);s[0]>0&&(i[n]=s[0]*r+s[1])}),i}}),e.fn.extend({effect:function(t,r,s,o){function h(t){function s(){e.isFunction(r)&&r.call(n[0]),e.isFunction(t)&&t()}var n=e(this),r=u.complete,i=u.mode;(n.is(":hidden")?i==="hide":i==="show")?s():l.call(n[0],u,s)}var u=i.apply(this,arguments),a=u.mode,f=u.queue,l=e.effects.effect[u.effect],c=!l&&n&&e.effects[u.effect];return e.fx.off||!l&&!c?a?this[a](u.duration,u.complete):this.each(function(){u.complete&&u.complete.call(this)}):l?f===!1?this.each(h):this.queue(f||"fx",h):c.call(this,{options:u,duration:u.duration,callback:u.complete,mode:u.mode})},_show:e.fn.show,show:function(e){if(s(e))return this._show.apply(this,arguments);var t=i.apply(this,arguments);return t.mode="show",this.effect.call(this,t)},_hide:e.fn.hide,hide:function(e){if(s(e))return this._hide.apply(this,arguments);var t=i.apply(this,arguments);return t.mode="hide",this.effect.call(this,t)},__toggle:e.fn.toggle,toggle:function(t){if(s(t)||typeof t=="boolean"||e.isFunction(t))return this.__toggle.apply(this,arguments);var n=i.apply(this,arguments);return n.mode="toggle",this.effect.call(this,n)},cssUnit:function(t){var n=this.css(t),r=[];return e.each(["em","px","%","pt"],function(e,t){n.indexOf(t)>0&&(r=[parseFloat(n),t])}),r}})}(),function(){var t={};e.each(["Quad","Cubic","Quart","Quint","Expo"],function(e,n){t[n]=function(t){return Math.pow(t,e+2)}}),e.extend(t,{Sine:function(e){return 1-Math.cos(e*Math.PI/2)},Circ:function(e){return 1-Math.sqrt(1-e*e)},Elastic:function(e){return e===0||e===1?e:-Math.pow(2,8*(e-1))*Math.sin(((e-1)*80-7.5)*Math.PI/15)},Back:function(e){return e*e*(3*e-2)},Bounce:function(e){var t,n=4;while(e<((t=Math.pow(2,--n))-1)/11);return 1/Math.pow(4,3-n)-7.5625*Math.pow((t*3-2)/22-e,2)}}),e.each(t,function(t,n){e.easing["easeIn"+t]=n,e.easing["easeOut"+t]=function(e){return 1-n(1-e)},e.easing["easeInOut"+t]=function(e){return e<.5?n(e*2)/2:1-n(e*-2+2)/2}})}()}(jQuery);(function(e,t){var n=/up|down|vertical/,r=/up|left|vertical|horizontal/;e.effects.effect.blind=function(t,i){var s=e(this),o=["position","top","bottom","left","right","height","width"],u=e.effects.setMode(s,t.mode||"hide"),a=t.direction||"up",f=n.test(a),l=f?"height":"width",c=f?"top":"left",h=r.test(a),p={},d=u==="show",v,m,g;s.parent().is(".ui-effects-wrapper")?e.effects.save(s.parent(),o):e.effects.save(s,o),s.show(),v=e.effects.createWrapper(s).css({overflow:"hidden"}),m=v[l](),g=parseFloat(v.css(c))||0,p[l]=d?m:0,h||(s.css(f?"bottom":"right",0).css(f?"top":"left","auto").css({position:"absolute"}),p[c]=d?g:m+g),d&&(v.css(l,0),h||v.css(c,g+m)),v.animate(p,{duration:t.duration,easing:t.easing,queue:!1,complete:function(){u==="hide"&&s.hide(),e.effects.restore(s,o),e.effects.removeWrapper(s),i()}})}})(jQuery);(function(e,t){e.effects.effect.bounce=function(t,n){var r=e(this),i=["position","top","bottom","left","right","height","width"],s=e.effects.setMode(r,t.mode||"effect"),o=s==="hide",u=s==="show",a=t.direction||"up",f=t.distance,l=t.times||5,c=l*2+(u||o?1:0),h=t.duration/c,p=t.easing,d=a==="up"||a==="down"?"top":"left",v=a==="up"||a==="left",m,g,y,b=r.queue(),w=b.length;(u||o)&&i.push("opacity"),e.effects.save(r,i),r.show(),e.effects.createWrapper(r),f||(f=r[d==="top"?"outerHeight":"outerWidth"]()/3),u&&(y={opacity:1},y[d]=0,r.css("opacity",0).css(d,v?-f*2:f*2).animate(y,h,p)),o&&(f/=Math.pow(2,l-1)),y={},y[d]=0;for(m=0;m<l;m++)g={},g[d]=(v?"-=":"+=")+f,r.animate(g,h,p).animate(y,h,p),f=o?f*2:f/2;o&&(g={opacity:0},g[d]=(v?"-=":"+=")+f,r.animate(g,h,p)),r.queue(function(){o&&r.hide(),e.effects.restore(r,i),e.effects.removeWrapper(r),n()}),w>1&&b.splice.apply(b,[1,0].concat(b.splice(w,c+1))),r.dequeue()}})(jQuery);(function(e,t){e.effects.effect.clip=function(t,n){var r=e(this),i=["position","top","bottom","left","right","height","width"],s=e.effects.setMode(r,t.mode||"hide"),o=s==="show",u=t.direction||"vertical",a=u==="vertical",f=a?"height":"width",l=a?"top":"left",c={},h,p,d;e.effects.save(r,i),r.show(),h=e.effects.createWrapper(r).css({overflow:"hidden"}),p=r[0].tagName==="IMG"?h:r,d=p[f](),o&&(p.css(f,0),p.css(l,d/2)),c[f]=o?d:0,c[l]=o?0:d/2,p.animate(c,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){o||r.hide(),e.effects.restore(r,i),e.effects.removeWrapper(r),n()}})}})(jQuery);(function(e,t){e.effects.effect.drop=function(t,n){var r=e(this),i=["position","top","bottom","left","right","opacity","height","width"],s=e.effects.setMode(r,t.mode||"hide"),o=s==="show",u=t.direction||"left",a=u==="up"||u==="down"?"top":"left",f=u==="up"||u==="left"?"pos":"neg",l={opacity:o?1:0},c;e.effects.save(r,i),r.show(),e.effects.createWrapper(r),c=t.distance||r[a==="top"?"outerHeight":"outerWidth"](!0)/2,o&&r.css("opacity",0).css(a,f==="pos"?-c:c),l[a]=(o?f==="pos"?"+=":"-=":f==="pos"?"-=":"+=")+c,r.animate(l,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){s==="hide"&&r.hide(),e.effects.restore(r,i),e.effects.removeWrapper(r),n()}})}})(jQuery);(function(e,t){e.effects.effect.explode=function(t,n){function y(){c.push(this),c.length===r*i&&b()}function b(){s.css({visibility:"visible"}),e(c).remove(),u||s.hide(),n()}var r=t.pieces?Math.round(Math.sqrt(t.pieces)):3,i=r,s=e(this),o=e.effects.setMode(s,t.mode||"hide"),u=o==="show",a=s.show().css("visibility","hidden").offset(),f=Math.ceil(s.outerWidth()/i),l=Math.ceil(s.outerHeight()/r),c=[],h,p,d,v,m,g;for(h=0;h<r;h++){v=a.top+h*l,g=h-(r-1)/2;for(p=0;p<i;p++)d=a.left+p*f,m=p-(i-1)/2,s.clone().appendTo("body").wrap("<div></div>").css({position:"absolute",visibility:"visible",left:-p*f,top:-h*l}).parent().addClass("ui-effects-explode").css({position:"absolute",overflow:"hidden",width:f,height:l,left:d+(u?m*f:0),top:v+(u?g*l:0),opacity:u?0:1}).animate({left:d+(u?0:m*f),top:v+(u?0:g*l),opacity:u?1:0},t.duration||500,t.easing,y)}}})(jQuery);(function(e,t){e.effects.effect.fade=function(t,n){var r=e(this),i=e.effects.setMode(r,t.mode||"toggle");r.animate({opacity:i},{queue:!1,duration:t.duration,easing:t.easing,complete:n})}})(jQuery);(function(e,t){e.effects.effect.fold=function(t,n){var r=e(this),i=["position","top","bottom","left","right","height","width"],s=e.effects.setMode(r,t.mode||"hide"),o=s==="show",u=s==="hide",a=t.size||15,f=/([0-9]+)%/.exec(a),l=!!t.horizFirst,c=o!==l,h=c?["width","height"]:["height","width"],p=t.duration/2,d,v,m={},g={};e.effects.save(r,i),r.show(),d=e.effects.createWrapper(r).css({overflow:"hidden"}),v=c?[d.width(),d.height()]:[d.height(),d.width()],f&&(a=parseInt(f[1],10)/100*v[u?0:1]),o&&d.css(l?{height:0,width:a}:{height:a,width:0}),m[h[0]]=o?v[0]:a,g[h[1]]=o?v[1]:0,d.animate(m,p,t.easing).animate(g,p,t.easing,function(){u&&r.hide(),e.effects.restore(r,i),e.effects.removeWrapper(r),n()})}})(jQuery);(function(e,t){e.effects.effect.highlight=function(t,n){var r=e(this),i=["backgroundImage","backgroundColor","opacity"],s=e.effects.setMode(r,t.mode||"show"),o={backgroundColor:r.css("backgroundColor")};s==="hide"&&(o.opacity=0),e.effects.save(r,i),r.show().css({backgroundImage:"none",backgroundColor:t.color||"#ffff99"}).animate(o,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){s==="hide"&&r.hide(),e.effects.restore(r,i),n()}})}})(jQuery);(function(e,t){e.effects.effect.pulsate=function(t,n){var r=e(this),i=e.effects.setMode(r,t.mode||"show"),s=i==="show",o=i==="hide",u=s||i==="hide",a=(t.times||5)*2+(u?1:0),f=t.duration/a,l=0,c=r.queue(),h=c.length,p;if(s||!r.is(":visible"))r.css("opacity",0).show(),l=1;for(p=1;p<a;p++)r.animate({opacity:l},f,t.easing),l=1-l;r.animate({opacity:l},f,t.easing),r.queue(function(){o&&r.hide(),n()}),h>1&&c.splice.apply(c,[1,0].concat(c.splice(h,a+1))),r.dequeue()}})(jQuery);(function(e,t){e.effects.effect.puff=function(t,n){var r=e(this),i=e.effects.setMode(r,t.mode||"hide"),s=i==="hide",o=parseInt(t.percent,10)||150,u=o/100,a={height:r.height(),width:r.width()};e.extend(t,{effect:"scale",queue:!1,fade:!0,mode:i,complete:n,percent:s?o:100,from:s?a:{height:a.height*u,width:a.width*u}}),r.effect(t)},e.effects.effect.scale=function(t,n){var r=e(this),i=e.extend(!0,{},t),s=e.effects.setMode(r,t.mode||"effect"),o=parseInt(t.percent,10)||(parseInt(t.percent,10)===0?0:s==="hide"?0:100),u=t.direction||"both",a=t.origin,f={height:r.height(),width:r.width(),outerHeight:r.outerHeight(),outerWidth:r.outerWidth()},l={y:u!=="horizontal"?o/100:1,x:u!=="vertical"?o/100:1};i.effect="size",i.queue=!1,i.complete=n,s!=="effect"&&(i.origin=a||["middle","center"],i.restore=!0),i.from=t.from||(s==="show"?{height:0,width:0}:f),i.to={height:f.height*l.y,width:f.width*l.x,outerHeight:f.outerHeight*l.y,outerWidth:f.outerWidth*l.x},i.fade&&(s==="show"&&(i.from.opacity=0,i.to.opacity=1),s==="hide"&&(i.from.opacity=1,i.to.opacity=0)),r.effect(i)},e.effects.effect.size=function(t,n){var r=e(this),i=["position","top","bottom","left","right","width","height","overflow","opacity"],s=["position","top","bottom","left","right","overflow","opacity"],o=["width","height","overflow"],u=["fontSize"],a=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],f=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],l=e.effects.setMode(r,t.mode||"effect"),c=t.restore||l!=="effect",h=t.scale||"both",p=t.origin||["middle","center"],d,v,m,g=r.css("position");l==="show"&&r.show(),d={height:r.height(),width:r.width(),outerHeight:r.outerHeight(),outerWidth:r.outerWidth()},r.from=t.from||d,r.to=t.to||d,m={from:{y:r.from.height/d.height,x:r.from.width/d.width},to:{y:r.to.height/d.height,x:r.to.width/d.width}};if(h==="box"||h==="both")m.from.y!==m.to.y&&(i=i.concat(a),r.from=e.effects.setTransition(r,a,m.from.y,r.from),r.to=e.effects.setTransition(r,a,m.to.y,r.to)),m.from.x!==m.to.x&&(i=i.concat(f),r.from=e.effects.setTransition(r,f,m.from.x,r.from),r.to=e.effects.setTransition(r,f,m.to.x,r.to));(h==="content"||h==="both")&&m.from.y!==m.to.y&&(i=i.concat(u),r.from=e.effects.setTransition(r,u,m.from.y,r.from),r.to=e.effects.setTransition(r,u,m.to.y,r.to)),e.effects.save(r,c?i:s),r.show(),e.effects.createWrapper(r),r.css("overflow","hidden").css(r.from),p&&(v=e.effects.getBaseline(p,d),r.from.top=(d.outerHeight-r.outerHeight())*v.y,r.from.left=(d.outerWidth-r.outerWidth())*v.x,r.to.top=(d.outerHeight-r.to.outerHeight)*v.y,r.to.left=(d.outerWidth-r.to.outerWidth)*v.x),r.css(r.from);if(h==="content"||h==="both")a=a.concat(["marginTop","marginBottom"]).concat(u),f=f.concat(["marginLeft","marginRight"]),o=i.concat(a).concat(f),r.find("*[width]").each(function(){var n=e(this),r={height:n.height(),width:n.width()};c&&e.effects.save(n,o),n.from={height:r.height*m.from.y,width:r.width*m.from.x},n.to={height:r.height*m.to.y,width:r.width*m.to.x},m.from.y!==m.to.y&&(n.from=e.effects.setTransition(n,a,m.from.y,n.from),n.to=e.effects.setTransition(n,a,m.to.y,n.to)),m.from.x!==m.to.x&&(n.from=e.effects.setTransition(n,f,m.from.x,n.from),n.to=e.effects.setTransition(n,f,m.to.x,n.to)),n.css(n.from),n.animate(n.to,t.duration,t.easing,function(){c&&e.effects.restore(n,o)})});r.animate(r.to,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){r.to.opacity===0&&r.css("opacity",r.from.opacity),l==="hide"&&r.hide(),e.effects.restore(r,c?i:s),c||(g==="static"?r.css({position:"relative",top:r.to.top,left:r.to.left}):e.each(["top","left"],function(e,t){r.css(t,function(t,n){var i=parseInt(n,10),s=e?r.to.left:r.to.top;return n==="auto"?s+"px":i+s+"px"})})),e.effects.removeWrapper(r),n()}})}})(jQuery);(function(e,t){e.effects.effect.shake=function(t,n){var r=e(this),i=["position","top","bottom","left","right","height","width"],s=e.effects.setMode(r,t.mode||"effect"),o=t.direction||"left",u=t.distance||20,a=t.times||3,f=a*2+1,l=Math.round(t.duration/f),c=o==="up"||o==="down"?"top":"left",h=o==="up"||o==="left",p={},d={},v={},m,g=r.queue(),y=g.length;e.effects.save(r,i),r.show(),e.effects.createWrapper(r),p[c]=(h?"-=":"+=")+u,d[c]=(h?"+=":"-=")+u*2,v[c]=(h?"-=":"+=")+u*2,r.animate(p,l,t.easing);for(m=1;m<a;m++)r.animate(d,l,t.easing).animate(v,l,t.easing);r.animate(d,l,t.easing).animate(p,l/2,t.easing).queue(function(){s==="hide"&&r.hide(),e.effects.restore(r,i),e.effects.removeWrapper(r),n()}),y>1&&g.splice.apply(g,[1,0].concat(g.splice(y,f+1))),r.dequeue()}})(jQuery);(function(e,t){e.effects.effect.slide=function(t,n){var r=e(this),i=["position","top","bottom","left","right","width","height"],s=e.effects.setMode(r,t.mode||"show"),o=s==="show",u=t.direction||"left",a=u==="up"||u==="down"?"top":"left",f=u==="up"||u==="left",l,c={};e.effects.save(r,i),r.show(),l=t.distance||r[a==="top"?"outerHeight":"outerWidth"](!0),e.effects.createWrapper(r).css({overflow:"hidden"}),o&&r.css(a,f?isNaN(l)?"-"+l:-l:l),c[a]=(o?f?"+=":"-=":f?"-=":"+=")+l,r.animate(c,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){s==="hide"&&r.hide(),e.effects.restore(r,i),e.effects.removeWrapper(r),n()}})}})(jQuery);(function(e,t){e.effects.effect.transfer=function(t,n){var r=e(this),i=e(t.to),s=i.css("position")==="fixed",o=e("body"),u=s?o.scrollTop():0,a=s?o.scrollLeft():0,f=i.offset(),l={top:f.top-u,left:f.left-a,height:i.innerHeight(),width:i.innerWidth()},c=r.offset(),h=e(\'<div class="ui-effects-transfer"></div>\').appendTo(document.body).addClass(t.className).css({top:c.top-u,left:c.left-a,height:r.innerHeight(),width:r.innerWidth(),position:s?"fixed":"absolute"}).animate(l,t.duration,t.easing,function(){h.remove(),n()})}})(jQuery);(function(e,t){var n=!1;e.widget("ui.menu",{version:"1.9.0",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-carat-1-e"},menus:"ul",position:{my:"left top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element,this.element.uniqueId().addClass("ui-menu ui-widget ui-widget-content ui-corner-all").toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length).attr({role:this.options.role,tabIndex:0}).bind("click"+this.eventNamespace,e.proxy(function(e){this.options.disabled&&e.preventDefault()},this)),this.options.disabled&&this.element.addClass("ui-state-disabled").attr("aria-disabled","true"),this._on({"mousedown .ui-menu-item > a":function(e){e.preventDefault()},"click .ui-state-disabled > a":function(e){e.preventDefault()},"click .ui-menu-item:has(a)":function(t){var r=e(t.target).closest(".ui-menu-item");!n&&r.not(".ui-state-disabled").length&&(n=!0,this.select(t),r.has(".ui-menu").length?this.expand(t):this.element.is(":focus")||(this.element.trigger("focus",[!0]),this.active&&this.active.parents(".ui-menu").length===1&&clearTimeout(this.timer)))},"mouseenter .ui-menu-item":function(t){var n=e(t.currentTarget);n.siblings().children(".ui-state-active").removeClass("ui-state-active"),this.focus(t,n)},mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(e,t){var n=this.active||this.element.children(".ui-menu-item").eq(0);t||this.focus(e,n)},blur:function(t){this._delay(function(){e.contains(this.element[0],this.document[0].activeElement)||this.collapseAll(t)})},keydown:"_keydown"}),this.refresh(),this._on(this.document,{click:function(t){e(t.target).closest(".ui-menu").length||this.collapseAll(t),n=!1}})},_destroy:function(){this.element.removeAttr("aria-activedescendant").find(".ui-menu").andSelf().removeClass("ui-menu ui-widget ui-widget-content ui-corner-all ui-menu-icons").removeAttr("role").removeAttr("tabIndex").removeAttr("aria-labelledby").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-disabled").removeUniqueId().show(),this.element.find(".ui-menu-item").removeClass("ui-menu-item").removeAttr("role").removeAttr("aria-disabled").children("a").removeUniqueId().removeClass("ui-corner-all ui-state-hover").removeAttr("tabIndex").removeAttr("role").removeAttr("aria-haspopup").children().each(function(){var t=e(this);t.data("ui-menu-submenu-carat")&&t.remove()}),this.element.find(".ui-menu-divider").removeClass("ui-menu-divider ui-widget-content")},_keydown:function(t){function a(e){return e.replace(/[\\-\\[\\]{}()*+?.,\\\\\\^$|#\\s]/g,"\\\\$&")}var n,r,i,s,o,u=!0;switch(t.keyCode){case e.ui.keyCode.PAGE_UP:this.previousPage(t);break;case e.ui.keyCode.PAGE_DOWN:this.nextPage(t);break;case e.ui.keyCode.HOME:this._move("first","first",t);break;case e.ui.keyCode.END:this._move("last","last",t);break;case e.ui.keyCode.UP:this.previous(t);break;case e.ui.keyCode.DOWN:this.next(t);break;case e.ui.keyCode.LEFT:this.collapse(t);break;case e.ui.keyCode.RIGHT:this.active&&!this.active.is(".ui-state-disabled")&&this.expand(t);break;case e.ui.keyCode.ENTER:case e.ui.keyCode.SPACE:this._activate(t);break;case e.ui.keyCode.ESCAPE:this.collapse(t);break;default:u=!1,r=this.previousFilter||"",i=String.fromCharCode(t.keyCode),s=!1,clearTimeout(this.filterTimer),i===r?s=!0:i=r+i,o=new RegExp("^"+a(i),"i"),n=this.activeMenu.children(".ui-menu-item").filter(function(){return o.test(e(this).children("a").text())}),n=s&&n.index(this.active.next())!==-1?this.active.nextAll(".ui-menu-item"):n,n.length||(i=String.fromCharCode(t.keyCode),o=new RegExp("^"+a(i),"i"),n=this.activeMenu.children(".ui-menu-item").filter(function(){return o.test(e(this).children("a").text())})),n.length?(this.focus(t,n),n.length>1?(this.previousFilter=i,this.filterTimer=this._delay(function(){delete this.previousFilter},1e3)):delete this.previousFilter):delete this.previousFilter}u&&t.preventDefault()},_activate:function(e){this.active.is(".ui-state-disabled")||(this.active.children("a[aria-haspopup=\'true\']").length?this.expand(e):this.select(e))},refresh:function(){var t,n=this.options.icons.submenu,r=this.element.find(this.options.menus+":not(.ui-menu)").addClass("ui-menu ui-widget ui-widget-content ui-corner-all").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"});t=r.add(this.element),t.children(":not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role","presentation").children("a").uniqueId().addClass("ui-corner-all").attr({tabIndex:-1,role:this._itemRole()}),t.children(":not(.ui-menu-item)").each(function(){var t=e(this);/[^\\-\\s]/.test(t.text())||t.addClass("ui-widget-content ui-menu-divider")}),t.children(".ui-state-disabled").attr("aria-disabled","true"),r.each(function(){var t=e(this),r=t.prev("a"),i=e("<span>").addClass("ui-menu-icon ui-icon "+n).data("ui-menu-submenu-carat",!0);r.attr("aria-haspopup","true").prepend(i),t.attr("aria-labelledby",r.attr("id"))}),this.active&&!e.contains(this.element[0],this.active[0])&&this.blur()},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},focus:function(e,t){var n,r;this.blur(e,e&&e.type==="focus"),this._scrollIntoView(t),this.active=t.first(),r=this.active.children("a").addClass("ui-state-focus"),this.options.role&&this.element.attr("aria-activedescendant",r.attr("id")),this.active.parent().closest(".ui-menu-item").children("a:first").addClass("ui-state-active"),e&&e.type==="keydown"?this._close():this.timer=this._delay(function(){this._close()},this.delay),n=t.children(".ui-menu"),n.length&&/^mouse/.test(e.type)&&this._startOpening(n),this.activeMenu=t.parent(),this._trigger("focus",e,{item:t})},_scrollIntoView:function(t){var n,r,i,s,o,u;this._hasScroll()&&(n=parseFloat(e.css(this.activeMenu[0],"borderTopWidth"))||0,r=parseFloat(e.css(this.activeMenu[0],"paddingTop"))||0,i=t.offset().top-this.activeMenu.offset().top-n-r,s=this.activeMenu.scrollTop(),o=this.activeMenu.height(),u=t.height(),i<0?this.activeMenu.scrollTop(s+i):i+u>o&&this.activeMenu.scrollTop(s+i-o+u))},blur:function(e,t){t||clearTimeout(this.timer);if(!this.active)return;this.active.children("a").removeClass("ui-state-focus"),this.active=null,this._trigger("blur",e,{item:this.active})},_startOpening:function(e){clearTimeout(this.timer);if(e.attr("aria-hidden")!=="true")return;this.timer=this._delay(function(){this._close(),this._open(e)},this.delay)},_open:function(t){var n=e.extend({of:this.active},this.options.position);clearTimeout(this.timer),this.element.find(".ui-menu").not(t.parents(".ui-menu")).hide().attr("aria-hidden","true"),t.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(n)},collapseAll:function(t,n){clearTimeout(this.timer),this.timer=this._delay(function(){var r=n?this.element:e(t&&t.target).closest(this.element.find(".ui-menu"));r.length||(r=this.element),this._close(r),this.blur(t),this.activeMenu=r},this.delay)},_close:function(e){e||(e=this.active?this.active.parent():this.element),e.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false").end().find("a.ui-state-active").removeClass("ui-state-active")},collapse:function(e){var t=this.active&&this.active.parent().closest(".ui-menu-item",this.element);t&&t.length&&(this._close(),this.focus(e,t))},expand:function(e){var t=this.active&&this.active.children(".ui-menu ").children(".ui-menu-item").first();t&&t.length&&(this._open(t.parent()),this._delay(function(){this.focus(e,t)}))},next:function(e){this._move("next","first",e)},previous:function(e){this._move("prev","last",e)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},_move:function(e,t,n){var r;this.active&&(e==="first"||e==="last"?r=this.active[e==="first"?"prevAll":"nextAll"](".ui-menu-item").eq(-1):r=this.active[e+"All"](".ui-menu-item").eq(0));if(!r||!r.length||!this.active)r=this.activeMenu.children(".ui-menu-item")[t]();this.focus(n,r)},nextPage:function(t){var n,r,i;if(!this.active){this.next(t);return}if(this.isLastItem())return;this._hasScroll()?(r=this.active.offset().top,i=this.element.height(),this.active.nextAll(".ui-menu-item").each(function(){return n=e(this),n.offset().top-r-i<0}),this.focus(t,n)):this.focus(t,this.activeMenu.children(".ui-menu-item")[this.active?"last":"first"]())},previousPage:function(t){var n,r,i;if(!this.active){this.next(t);return}if(this.isFirstItem())return;this._hasScroll()?(r=this.active.offset().top,i=this.element.height(),this.active.prevAll(".ui-menu-item").each(function(){return n=e(this),n.offset().top-r+i>0}),this.focus(t,n)):this.focus(t,this.activeMenu.children(".ui-menu-item").first())},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight")},select:function(t){this.active=this.active||e(t.target).closest(".ui-menu-item");var n={item:this.active};this.active.has(".ui-menu").length||this.collapseAll(t,!0),this._trigger("select",t,n)}})})(jQuery);(function(e,t){e.widget("ui.progressbar",{version:"1.9.0",options:{value:0,max:100},min:0,_create:function(){this.element.addClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").attr({role:"progressbar","aria-valuemin":this.min,"aria-valuemax":this.options.max,"aria-valuenow":this._value()}),this.valueDiv=e("<div class=\'ui-progressbar-value ui-widget-header ui-corner-left\'></div>").appendTo(this.element),this.oldValue=this._value(),this._refreshValue()},_destroy:function(){this.element.removeClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),this.valueDiv.remove()},value:function(e){return e===t?this._value():(this._setOption("value",e),this)},_setOption:function(e,t){e==="value"&&(this.options.value=t,this._refreshValue(),this._value()===this.options.max&&this._trigger("complete")),this._super(e,t)},_value:function(){var e=this.options.value;return typeof e!="number"&&(e=0),Math.min(this.options.max,Math.max(this.min,e))},_percentage:function(){return 100*this._value()/this.options.max},_refreshValue:function(){var e=this.value(),t=this._percentage();this.oldValue!==e&&(this.oldValue=e,this._trigger("change")),this.valueDiv.toggle(e>this.min).toggleClass("ui-corner-right",e===this.options.max).width(t.toFixed(0)+"%"),this.element.attr("aria-valuenow",e)}})})(jQuery);(function(e,t){e.widget("ui.resizable",e.ui.mouse,{version:"1.9.0",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:1e3},_create:function(){var t=this,n=this.options;this.element.addClass("ui-resizable"),e.extend(this,{_aspectRatio:!!n.aspectRatio,aspectRatio:n.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:n.helper||n.ghost||n.animate?n.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)&&(this.element.wrap(e(\'<div class="ui-wrapper" style="overflow: hidden;"></div>\').css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("resizable",this.element.data("resizable")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize()),this.handles=n.handles||(e(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se");if(this.handles.constructor==String){this.handles=="all"&&(this.handles="n,e,s,w,se,sw,ne,nw");var r=this.handles.split(",");this.handles={};for(var i=0;i<r.length;i++){var s=e.trim(r[i]),o="ui-resizable-"+s,u=e(\'<div class="ui-resizable-handle \'+o+\'"></div>\');u.css({zIndex:n.zIndex}),"se"==s&&u.addClass("ui-icon ui-icon-gripsmall-diagonal-se"),this.handles[s]=".ui-resizable-"+s,this.element.append(u)}}this._renderAxis=function(t){t=t||this.element;for(var n in this.handles){this.handles[n].constructor==String&&(this.handles[n]=e(this.handles[n],this.element).show());if(this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)){var r=e(this.handles[n],this.element),i=0;i=/sw|ne|nw|se|n|s/.test(n)?r.outerHeight():r.outerWidth();var s=["padding",/ne|nw|n/.test(n)?"Top":/se|sw|s/.test(n)?"Bottom":/^e$/.test(n)?"Right":"Left"].join("");t.css(s,i),this._proportionallyResize()}if(!e(this.handles[n]).length)continue}},this._renderAxis(this.element),this._handles=e(".ui-resizable-handle",this.element).disableSelection(),this._handles.mouseover(function(){if(!t.resizing){if(this.className)var e=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i);t.axis=e&&e[1]?e[1]:"se"}}),n.autoHide&&(this._handles.hide(),e(this.element).addClass("ui-resizable-autohide").mouseenter(function(){if(n.disabled)return;e(this).removeClass("ui-resizable-autohide"),t._handles.show()}).mouseleave(function(){if(n.disabled)return;t.resizing||(e(this).addClass("ui-resizable-autohide"),t._handles.hide())})),this._mouseInit()},_destroy:function(){this._mouseDestroy();var t=function(t){e(t).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").removeData("ui-resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};if(this.elementIsWrapper){t(this.element);var n=this.element;n.after(this.originalElement.css({position:n.css("position"),width:n.outerWidth(),height:n.outerHeight(),top:n.css("top"),left:n.css("left")})).remove()}return this.originalElement.css("resize",this.originalResizeStyle),t(this.originalElement),this},_mouseCapture:function(t){var n=!1;for(var r in this.handles)e(this.handles[r])[0]==t.target&&(n=!0);return!this.options.disabled&&n},_mouseStart:function(t){var r=this.options,i=this.element.position(),s=this.element;this.resizing=!0,this.documentScroll={top:e(document).scrollTop(),left:e(document).scrollLeft()},(s.is(".ui-draggable")||/absolute/.test(s.css("position")))&&s.css({position:"absolute",top:i.top,left:i.left}),this._renderProxy();var o=n(this.helper.css("left")),u=n(this.helper.css("top"));r.containment&&(o+=e(r.containment).scrollLeft()||0,u+=e(r.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:o,top:u},this.size=this._helper?{width:s.outerWidth(),height:s.outerHeight()}:{width:s.width(),height:s.height()},this.originalSize=this._helper?{width:s.outerWidth(),height:s.outerHeight()}:{width:s.width(),height:s.height()},this.originalPosition={left:o,top:u},this.sizeDiff={width:s.outerWidth()-s.width(),height:s.outerHeight()-s.height()},this.originalMousePosition={left:t.pageX,top:t.pageY},this.aspectRatio=typeof r.aspectRatio=="number"?r.aspectRatio:this.originalSize.width/this.originalSize.height||1;var a=e(".ui-resizable-"+this.axis).css("cursor");return e("body").css("cursor",a=="auto"?this.axis+"-resize":a),s.addClass("ui-resizable-resizing"),this._propagate("start",t),!0},_mouseDrag:function(e){var t=this.helper,n=this.options,r={},i=this,s=this.originalMousePosition,o=this.axis,u=e.pageX-s.left||0,a=e.pageY-s.top||0,f=this._change[o];if(!f)return!1;var l=f.apply(this,[e,u,a]);this._updateVirtualBoundaries(e.shiftKey);if(this._aspectRatio||e.shiftKey)l=this._updateRatio(l,e);return l=this._respectSize(l,e),this._propagate("resize",e),t.css({top:this.position.top+"px",left:this.position.left+"px",width:this.size.width+"px",height:this.size.height+"px"}),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),this._updateCache(l),this._trigger("resize",e,this.ui()),!1},_mouseStop:function(t){this.resizing=!1;var n=this.options,r=this;if(this._helper){var i=this._proportionallyResizeElements,s=i.length&&/textarea/i.test(i[0].nodeName),o=s&&e.ui.hasScroll(i[0],"left")?0:r.sizeDiff.height,u=s?0:r.sizeDiff.width,a={width:r.helper.width()-u,height:r.helper.height()-o},f=parseInt(r.element.css("left"),10)+(r.position.left-r.originalPosition.left)||null,l=parseInt(r.element.css("top"),10)+(r.position.top-r.originalPosition.top)||null;n.animate||this.element.css(e.extend(a,{top:l,left:f})),r.helper.height(r.size.height),r.helper.width(r.size.width),this._helper&&!n.animate&&this._proportionallyResize()}return e("body").css("cursor","auto"),this.element.removeClass("ui-resizable-resizing"),this._propagate("stop",t),this._helper&&this.helper.remove(),!1},_updateVirtualBoundaries:function(e){var t=this.options,n,i,s,o,u;u={minWidth:r(t.minWidth)?t.minWidth:0,maxWidth:r(t.maxWidth)?t.maxWidth:Infinity,minHeight:r(t.minHeight)?t.minHeight:0,maxHeight:r(t.maxHeight)?t.maxHeight:Infinity};if(this._aspectRatio||e)n=u.minHeight*this.aspectRatio,s=u.minWidth/this.aspectRatio,i=u.maxHeight*this.aspectRatio,o=u.maxWidth/this.aspectRatio,n>u.minWidth&&(u.minWidth=n),s>u.minHeight&&(u.minHeight=s),i<u.maxWidth&&(u.maxWidth=i),o<u.maxHeight&&(u.maxHeight=o);this._vBoundaries=u},_updateCache:function(e){var t=this.options;this.offset=this.helper.offset(),r(e.left)&&(this.position.left=e.left),r(e.top)&&(this.position.top=e.top),r(e.height)&&(this.size.height=e.height),r(e.width)&&(this.size.width=e.width)},_updateRatio:function(e,t){var n=this.options,i=this.position,s=this.size,o=this.axis;return r(e.height)?e.width=e.height*this.aspectRatio:r(e.width)&&(e.height=e.width/this.aspectRatio),o=="sw"&&(e.left=i.left+(s.width-e.width),e.top=null),o=="nw"&&(e.top=i.top+(s.height-e.height),e.left=i.left+(s.width-e.width)),e},_respectSize:function(e,t){var n=this.helper,i=this._vBoundaries,s=this._aspectRatio||t.shiftKey,o=this.axis,u=r(e.width)&&i.maxWidth&&i.maxWidth<e.width,a=r(e.height)&&i.maxHeight&&i.maxHeight<e.height,f=r(e.width)&&i.minWidth&&i.minWidth>e.width,l=r(e.height)&&i.minHeight&&i.minHeight>e.height;f&&(e.width=i.minWidth),l&&(e.height=i.minHeight),u&&(e.width=i.maxWidth),a&&(e.height=i.maxHeight);var c=this.originalPosition.left+this.originalSize.width,h=this.position.top+this.size.height,p=/sw|nw|w/.test(o),d=/nw|ne|n/.test(o);f&&p&&(e.left=c-i.minWidth),u&&p&&(e.left=c-i.maxWidth),l&&d&&(e.top=h-i.minHeight),a&&d&&(e.top=h-i.maxHeight);var v=!e.width&&!e.height;return v&&!e.left&&e.top?e.top=null:v&&!e.top&&e.left&&(e.left=null),e},_proportionallyResize:function(){var t=this.options;if(!this._proportionallyResizeElements.length)return;var n=this.helper||this.element;for(var r=0;r<this._proportionallyResizeElements.length;r++){var i=this._proportionallyResizeElements[r];if(!this.borderDif){var s=[i.css("borderTopWidth"),i.css("borderRightWidth"),i.css("borderBottomWidth"),i.css("borderLeftWidth")],o=[i.css("paddingTop"),i.css("paddingRight"),i.css("paddingBottom"),i.css("paddingLeft")];this.borderDif=e.map(s,function(e,t){var n=parseInt(e,10)||0,r=parseInt(o[t],10)||0;return n+r})}i.css({height:n.height()-this.borderDif[0]-this.borderDif[2]||0,width:n.width()-this.borderDif[1]-this.borderDif[3]||0})}},_renderProxy:function(){var t=this.element,n=this.options;this.elementOffset=t.offset();if(this._helper){this.helper=this.helper||e(\'<div style="overflow:hidden;"></div>\');var r=e.browser.msie&&e.browser.version<7,i=r?1:0,s=r?2:-1;this.helper.addClass(this._helper).css({width:this.element.outerWidth()+s,height:this.element.outerHeight()+s,position:"absolute",left:this.elementOffset.left-i+"px",top:this.elementOffset.top-i+"px",zIndex:++n.zIndex}),this.helper.appendTo("body").disableSelection()}else this.helper=this.element},_change:{e:function(e,t,n){return{width:this.originalSize.width+t}},w:function(e,t,n){var r=this.options,i=this.originalSize,s=this.originalPosition;return{left:s.left+t,width:i.width-t}},n:function(e,t,n){var r=this.options,i=this.originalSize,s=this.originalPosition;return{top:s.top+n,height:i.height-n}},s:function(e,t,n){return{height:this.originalSize.height+n}},se:function(t,n,r){return e.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[t,n,r]))},sw:function(t,n,r){return e.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[t,n,r]))},ne:function(t,n,r){return e.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[t,n,r]))},nw:function(t,n,r){return e.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[t,n,r]))}},_propagate:function(t,n){e.ui.plugin.call(this,t,[n,this.ui()]),t!="resize"&&this._trigger(t,n,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),e.ui.plugin.add("resizable","alsoResize",{start:function(t,n){var r=e(this).data("resizable"),i=r.options,s=function(t){e(t).each(function(){var t=e(this);t.data("resizable-alsoresize",{width:parseInt(t.width(),10),height:parseInt(t.height(),10),left:parseInt(t.css("left"),10),top:parseInt(t.css("top"),10)})})};typeof i.alsoResize=="object"&&!i.alsoResize.parentNode?i.alsoResize.length?(i.alsoResize=i.alsoResize[0],s(i.alsoResize)):e.each(i.alsoResize,function(e){s(e)}):s(i.alsoResize)},resize:function(t,n){var r=e(this).data("resizable"),i=r.options,s=r.originalSize,o=r.originalPosition,u={height:r.size.height-s.height||0,width:r.size.width-s.width||0,top:r.position.top-o.top||0,left:r.position.left-o.left||0},a=function(t,r){e(t).each(function(){var t=e(this),i=e(this).data("resizable-alsoresize"),s={},o=r&&r.length?r:t.parents(n.originalElement[0]).length?["width","height"]:["width","height","top","left"];e.each(o,function(e,t){var n=(i[t]||0)+(u[t]||0);n&&n>=0&&(s[t]=n||null)}),t.css(s)})};typeof i.alsoResize=="object"&&!i.alsoResize.nodeType?e.each(i.alsoResize,function(e,t){a(e,t)}):a(i.alsoResize)},stop:function(t,n){e(this).removeData("resizable-alsoresize")}}),e.ui.plugin.add("resizable","animate",{stop:function(t,n){var r=e(this).data("resizable"),i=r.options,s=r._proportionallyResizeElements,o=s.length&&/textarea/i.test(s[0].nodeName),u=o&&e.ui.hasScroll(s[0],"left")?0:r.sizeDiff.height,a=o?0:r.sizeDiff.width,f={width:r.size.width-a,height:r.size.height-u},l=parseInt(r.element.css("left"),10)+(r.position.left-r.originalPosition.left)||null,c=parseInt(r.element.css("top"),10)+(r.position.top-r.originalPosition.top)||null;r.element.animate(e.extend(f,c&&l?{top:c,left:l}:{}),{duration:i.animateDuration,easing:i.animateEasing,step:function(){var n={width:parseInt(r.element.css("width"),10),height:parseInt(r.element.css("height"),10),top:parseInt(r.element.css("top"),10),left:parseInt(r.element.css("left"),10)};s&&s.length&&e(s[0]).css({width:n.width,height:n.height}),r._updateCache(n),r._propagate("resize",t)}})}}),e.ui.plugin.add("resizable","containment",{start:function(t,r){var i=e(this).data("resizable"),s=i.options,o=i.element,u=s.containment,a=u instanceof e?u.get(0):/parent/.test(u)?o.parent().get(0):u;if(!a)return;i.containerElement=e(a);if(/document/.test(u)||u==document)i.containerOffset={left:0,top:0},i.containerPosition={left:0,top:0},i.parentData={element:e(document),left:0,top:0,width:e(document).width(),height:e(document).height()||document.body.parentNode.scrollHeight};else{var f=e(a),l=[];e(["Top","Right","Left","Bottom"]).each(function(e,t){l[e]=n(f.css("padding"+t))}),i.containerOffset=f.offset(),i.containerPosition=f.position(),i.containerSize={height:f.innerHeight()-l[3],width:f.innerWidth()-l[1]};var c=i.containerOffset,h=i.containerSize.height,p=i.containerSize.width,d=e.ui.hasScroll(a,"left")?a.scrollWidth:p,v=e.ui.hasScroll(a)?a.scrollHeight:h;i.parentData={element:a,left:c.left,top:c.top,width:d,height:v}}},resize:function(t,n){var r=e(this).data("resizable"),i=r.options,s=r.containerSize,o=r.containerOffset,u=r.size,a=r.position,f=r._aspectRatio||t.shiftKey,l={top:0,left:0},c=r.containerElement;c[0]!=document&&/static/.test(c.css("position"))&&(l=o),a.left<(r._helper?o.left:0)&&(r.size.width=r.size.width+(r._helper?r.position.left-o.left:r.position.left-l.left),f&&(r.size.height=r.size.width/r.aspectRatio),r.position.left=i.helper?o.left:0),a.top<(r._helper?o.top:0)&&(r.size.height=r.size.height+(r._helper?r.position.top-o.top:r.position.top),f&&(r.size.width=r.size.height*r.aspectRatio),r.position.top=r._helper?o.top:0),r.offset.left=r.parentData.left+r.position.left,r.offset.top=r.parentData.top+r.position.top;var h=Math.abs((r._helper?r.offset.left-l.left:r.offset.left-l.left)+r.sizeDiff.width),p=Math.abs((r._helper?r.offset.top-l.top:r.offset.top-o.top)+r.sizeDiff.height),d=r.containerElement.get(0)==r.element.parent().get(0),v=/relative|absolute/.test(r.containerElement.css("position"));d&&v&&(h-=r.parentData.left),h+r.size.width>=r.parentData.width&&(r.size.width=r.parentData.width-h,f&&(r.size.height=r.size.width/r.aspectRatio)),p+r.size.height>=r.parentData.height&&(r.size.height=r.parentData.height-p,f&&(r.size.width=r.size.height*r.aspectRatio))},stop:function(t,n){var r=e(this).data("resizable"),i=r.options,s=r.position,o=r.containerOffset,u=r.containerPosition,a=r.containerElement,f=e(r.helper),l=f.offset(),c=f.outerWidth()-r.sizeDiff.width,h=f.outerHeight()-r.sizeDiff.height;r._helper&&!i.animate&&/relative/.test(a.css("position"))&&e(this).css({left:l.left-u.left-o.left,width:c,height:h}),r._helper&&!i.animate&&/static/.test(a.css("position"))&&e(this).css({left:l.left-u.left-o.left,width:c,height:h})}}),e.ui.plugin.add("resizable","ghost",{start:function(t,n){var r=e(this).data("resizable"),i=r.options,s=r.size;r.ghost=r.originalElement.clone(),r.ghost.css({opacity:.25,display:"block",position:"relative",height:s.height,width:s.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass(typeof i.ghost=="string"?i.ghost:""),r.ghost.appendTo(r.helper)},resize:function(t,n){var r=e(this).data("resizable"),i=r.options;r.ghost&&r.ghost.css({position:"relative",height:r.size.height,width:r.size.width})},stop:function(t,n){var r=e(this).data("resizable"),i=r.options;r.ghost&&r.helper&&r.helper.get(0).removeChild(r.ghost.get(0))}}),e.ui.plugin.add("resizable","grid",{resize:function(t,n){var r=e(this).data("resizable"),i=r.options,s=r.size,o=r.originalSize,u=r.originalPosition,a=r.axis,f=i._aspectRatio||t.shiftKey;i.grid=typeof i.grid=="number"?[i.grid,i.grid]:i.grid;var l=Math.round((s.width-o.width)/(i.grid[0]||1))*(i.grid[0]||1),c=Math.round((s.height-o.height)/(i.grid[1]||1))*(i.grid[1]||1);/^(se|s|e)$/.test(a)?(r.size.width=o.width+l,r.size.height=o.height+c):/^(ne)$/.test(a)?(r.size.width=o.width+l,r.size.height=o.height+c,r.position.top=u.top-c):/^(sw)$/.test(a)?(r.size.width=o.width+l,r.size.height=o.height+c,r.position.left=u.left-l):(r.size.width=o.width+l,r.size.height=o.height+c,r.position.top=u.top-c,r.position.left=u.left-l)}});var n=function(e){return parseInt(e,10)||0},r=function(e){return!isNaN(parseInt(e,10))}})(jQuery);(function(e,t){e.widget("ui.selectable",e.ui.mouse,{version:"1.9.0",options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch"},_create:function(){var t=this;this.element.addClass("ui-selectable"),this.dragged=!1;var n;this.refresh=function(){n=e(t.options.filter,t.element[0]),n.addClass("ui-selectee"),n.each(function(){var t=e(this),n=t.offset();e.data(this,"selectable-item",{element:this,$element:t,left:n.left,top:n.top,right:n.left+t.outerWidth(),bottom:n.top+t.outerHeight(),startselected:!1,selected:t.hasClass("ui-selected"),selecting:t.hasClass("ui-selecting"),unselecting:t.hasClass("ui-unselecting")})})},this.refresh(),this.selectees=n.addClass("ui-selectee"),this._mouseInit(),this.helper=e("<div class=\'ui-selectable-helper\'></div>")},_destroy:function(){this.selectees.removeClass("ui-selectee").removeData("selectable-item"),this.element.removeClass("ui-selectable ui-selectable-disabled"),this._mouseDestroy()},_mouseStart:function(t){var n=this;this.opos=[t.pageX,t.pageY];if(this.options.disabled)return;var r=this.options;this.selectees=e(r.filter,this.element[0]),this._trigger("start",t),e(r.appendTo).append(this.helper),this.helper.css({left:t.clientX,top:t.clientY,width:0,height:0}),r.autoRefresh&&this.refresh(),this.selectees.filter(".ui-selected").each(function(){var r=e.data(this,"selectable-item");r.startselected=!0,!t.metaKey&&!t.ctrlKey&&(r.$element.removeClass("ui-selected"),r.selected=!1,r.$element.addClass("ui-unselecting"),r.unselecting=!0,n._trigger("unselecting",t,{unselecting:r.element}))}),e(t.target).parents().andSelf().each(function(){var r=e.data(this,"selectable-item");if(r){var i=!t.metaKey&&!t.ctrlKey||!r.$element.hasClass("ui-selected");return r.$element.removeClass(i?"ui-unselecting":"ui-selected").addClass(i?"ui-selecting":"ui-unselecting"),r.unselecting=!i,r.selecting=i,r.selected=i,i?n._trigger("selecting",t,{selecting:r.element}):n._trigger("unselecting",t,{unselecting:r.element}),!1}})},_mouseDrag:function(t){var n=this;this.dragged=!0;if(this.options.disabled)return;var r=this.options,i=this.opos[0],s=this.opos[1],o=t.pageX,u=t.pageY;if(i>o){var a=o;o=i,i=a}if(s>u){var a=u;u=s,s=a}return this.helper.css({left:i,top:s,width:o-i,height:u-s}),this.selectees.each(function(){var a=e.data(this,"selectable-item");if(!a||a.element==n.element[0])return;var f=!1;r.tolerance=="touch"?f=!(a.left>o||a.right<i||a.top>u||a.bottom<s):r.tolerance=="fit"&&(f=a.left>i&&a.right<o&&a.top>s&&a.bottom<u),f?(a.selected&&(a.$element.removeClass("ui-selected"),a.selected=!1),a.unselecting&&(a.$element.removeClass("ui-unselecting"),a.unselecting=!1),a.selecting||(a.$element.addClass("ui-selecting"),a.selecting=!0,n._trigger("selecting",t,{selecting:a.element}))):(a.selecting&&((t.metaKey||t.ctrlKey)&&a.startselected?(a.$element.removeClass("ui-selecting"),a.selecting=!1,a.$element.addClass("ui-selected"),a.selected=!0):(a.$element.removeClass("ui-selecting"),a.selecting=!1,a.startselected&&(a.$element.addClass("ui-unselecting"),a.unselecting=!0),n._trigger("unselecting",t,{unselecting:a.element}))),a.selected&&!t.metaKey&&!t.ctrlKey&&!a.startselected&&(a.$element.removeClass("ui-selected"),a.selected=!1,a.$element.addClass("ui-unselecting"),a.unselecting=!0,n._trigger("unselecting",t,{unselecting:a.element})))}),!1},_mouseStop:function(t){var n=this;this.dragged=!1;var r=this.options;return e(".ui-unselecting",this.element[0]).each(function(){var r=e.data(this,"selectable-item");r.$element.removeClass("ui-unselecting"),r.unselecting=!1,r.startselected=!1,n._trigger("unselected",t,{unselected:r.element})}),e(".ui-selecting",this.element[0]).each(function(){var r=e.data(this,"selectable-item");r.$element.removeClass("ui-selecting").addClass("ui-selected"),r.selecting=!1,r.selected=!0,r.startselected=!0,n._trigger("selected",t,{selected:r.element})}),this._trigger("stop",t),this.helper.remove(),!1}})})(jQuery);(function(e,t){var n=5;e.widget("ui.slider",e.ui.mouse,{version:"1.9.0",widgetEventPrefix:"slide",options:{animate:!1,distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null},_create:function(){var t,r=this.options,i=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),s="<a class=\'ui-slider-handle ui-state-default ui-corner-all\' href=\'#\'></a>",o=r.values&&r.values.length||1,u=[];this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget"+" ui-widget-content"+" ui-corner-all"+(r.disabled?" ui-slider-disabled ui-disabled":"")),this.range=e([]),r.range&&(r.range===!0&&(r.values||(r.values=[this._valueMin(),this._valueMin()]),r.values.length&&r.values.length!==2&&(r.values=[r.values[0],r.values[0]])),this.range=e("<div></div>").appendTo(this.element).addClass("ui-slider-range ui-widget-header"+(r.range==="min"||r.range==="max"?" ui-slider-range-"+r.range:"")));for(t=i.length;t<o;t++)u.push(s);this.handles=i.add(e(u.join("")).appendTo(this.element)),this.handle=this.handles.eq(0),this.handles.add(this.range).filter("a").click(function(e){e.preventDefault()}).mouseenter(function(){r.disabled||e(this).addClass("ui-state-hover")}).mouseleave(function(){e(this).removeClass("ui-state-hover")}).focus(function(){r.disabled?e(this).blur():(e(".ui-slider .ui-state-focus").removeClass("ui-state-focus"),e(this).addClass("ui-state-focus"))}).blur(function(){e(this).removeClass("ui-state-focus")}),this.handles.each(function(t){e(this).data("ui-slider-handle-index",t)}),this._on(this.handles,{keydown:function(t){var r,i,s,o,u=e(t.target).data("ui-slider-handle-index");switch(t.keyCode){case e.ui.keyCode.HOME:case e.ui.keyCode.END:case e.ui.keyCode.PAGE_UP:case e.ui.keyCode.PAGE_DOWN:case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:t.preventDefault();if(!this._keySliding){this._keySliding=!0,e(t.target).addClass("ui-state-active"),r=this._start(t,u);if(r===!1)return}}o=this.options.step,this.options.values&&this.options.values.length?i=s=this.values(u):i=s=this.value();switch(t.keyCode){case e.ui.keyCode.HOME:s=this._valueMin();break;case e.ui.keyCode.END:s=this._valueMax();break;case e.ui.keyCode.PAGE_UP:s=this._trimAlignValue(i+(this._valueMax()-this._valueMin())/n);break;case e.ui.keyCode.PAGE_DOWN:s=this._trimAlignValue(i-(this._valueMax()-this._valueMin())/n);break;case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:if(i===this._valueMax())return;s=this._trimAlignValue(i+o);break;case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:if(i===this._valueMin())return;s=this._trimAlignValue(i-o)}this._slide(t,u,s)},keyup:function(t){var n=e(t.target).data("ui-slider-handle-index");this._keySliding&&(this._keySliding=!1,this._stop(t,n),this._change(t,n),e(t.target).removeClass("ui-state-active"))}}),this._refreshValue(),this._animateOff=!1},_destroy:function(){this.handles.remove(),this.range.remove(),this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-slider-disabled ui-widget ui-widget-content ui-corner-all"),this._mouseDestroy()},_mouseCapture:function(t){var n,r,i,s,o,u,a,f,l=this,c=this.options;return c.disabled?!1:(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),n={x:t.pageX,y:t.pageY},r=this._normValueFromMouse(n),i=this._valueMax()-this._valueMin()+1,this.handles.each(function(t){var n=Math.abs(r-l.values(t));i>n&&(i=n,s=e(this),o=t)}),c.range===!0&&this.values(1)===c.min&&(o+=1,s=e(this.handles[o])),u=this._start(t,o),u===!1?!1:(this._mouseSliding=!0,this._handleIndex=o,s.addClass("ui-state-active").focus(),a=s.offset(),f=!e(t.target).parents().andSelf().is(".ui-slider-handle"),this._clickOffset=f?{left:0,top:0}:{left:t.pageX-a.left-s.width()/2,top:t.pageY-a.top-s.height()/2-(parseInt(s.css("borderTopWidth"),10)||0)-(parseInt(s.css("borderBottomWidth"),10)||0)+(parseInt(s.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(t,o,r),this._animateOff=!0,!0))},_mouseStart:function(e){return!0},_mouseDrag:function(e){var t={x:e.pageX,y:e.pageY},n=this._normValueFromMouse(t);return this._slide(e,this._handleIndex,n),!1},_mouseStop:function(e){return this.handles.removeClass("ui-state-active"),this._mouseSliding=!1,this._stop(e,this._handleIndex),this._change(e,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1,!1},_detectOrientation:function(){this.orientation=this.options.orientation==="vertical"?"vertical":"horizontal"},_normValueFromMouse:function(e){var t,n,r,i,s;return this.orientation==="horizontal"?(t=this.elementSize.width,n=e.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(t=this.elementSize.height,n=e.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),r=n/t,r>1&&(r=1),r<0&&(r=0),this.orientation==="vertical"&&(r=1-r),i=this._valueMax()-this._valueMin(),s=this._valueMin()+r*i,this._trimAlignValue(s)},_start:function(e,t){var n={handle:this.handles[t],value:this.value()};return this.options.values&&this.options.values.length&&(n.value=this.values(t),n.values=this.values()),this._trigger("start",e,n)},_slide:function(e,t,n){var r,i,s;this.options.values&&this.options.values.length?(r=this.values(t?0:1),this.options.values.length===2&&this.options.range===!0&&(t===0&&n>r||t===1&&n<r)&&(n=r),n!==this.values(t)&&(i=this.values(),i[t]=n,s=this._trigger("slide",e,{handle:this.handles[t],value:n,values:i}),r=this.values(t?0:1),s!==!1&&this.values(t,n,!0))):n!==this.value()&&(s=this._trigger("slide",e,{handle:this.handles[t],value:n}),s!==!1&&this.value(n))},_stop:function(e,t){var n={handle:this.handles[t],value:this.value()};this.options.values&&this.options.values.length&&(n.value=this.values(t),n.values=this.values()),this._trigger("stop",e,n)},_change:function(e,t){if(!this._keySliding&&!this._mouseSliding){var n={handle:this.handles[t],value:this.value()};this.options.values&&this.options.values.length&&(n.value=this.values(t),n.values=this.values()),this._trigger("change",e,n)}},value:function(e){if(arguments.length){this.options.value=this._trimAlignValue(e),this._refreshValue(),this._change(null,0);return}return this._value()},values:function(t,n){var r,i,s;if(arguments.length>1){this.options.values[t]=this._trimAlignValue(n),this._refreshValue(),this._change(null,t);return}if(!arguments.length)return this._values();if(!e.isArray(arguments[0]))return this.options.values&&this.options.values.length?this._values(t):this.value();r=this.options.values,i=arguments[0];for(s=0;s<r.length;s+=1)r[s]=this._trimAlignValue(i[s]),this._change(null,s);this._refreshValue()},_setOption:function(t,n){var r,i=0;e.isArray(this.options.values)&&(i=this.options.values.length),e.Widget.prototype._setOption.apply(this,arguments);switch(t){case"disabled":n?(this.handles.filter(".ui-state-focus").blur(),this.handles.removeClass("ui-state-hover"),this.handles.prop("disabled",!0),this.element.addClass("ui-disabled")):(this.handles.prop("disabled",!1),this.element.removeClass("ui-disabled"));break;case"orientation":this._detectOrientation(),this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation),this._refreshValue();break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":this._animateOff=!0,this._refreshValue();for(r=0;r<i;r+=1)this._change(null,r);this._animateOff=!1}},_value:function(){var e=this.options.value;return e=this._trimAlignValue(e),e},_values:function(e){var t,n,r;if(arguments.length)return t=this.options.values[e],t=this._trimAlignValue(t),t;n=this.options.values.slice();for(r=0;r<n.length;r+=1)n[r]=this._trimAlignValue(n[r]);return n},_trimAlignValue:function(e){if(e<=this._valueMin())return this._valueMin();if(e>=this._valueMax())return this._valueMax();var t=this.options.step>0?this.options.step:1,n=(e-this._valueMin())%t,r=e-n;return Math.abs(n)*2>=t&&(r+=n>0?t:-t),parseFloat(r.toFixed(5))},_valueMin:function(){return this.options.min},_valueMax:function(){return this.options.max},_refreshValue:function(){var t,n,r,i,s,o=this.options.range,u=this.options,a=this,f=this._animateOff?!1:u.animate,l={};this.options.values&&this.options.values.length?this.handles.each(function(r,i){n=(a.values(r)-a._valueMin())/(a._valueMax()-a._valueMin())*100,l[a.orientation==="horizontal"?"left":"bottom"]=n+"%",e(this).stop(1,1)[f?"animate":"css"](l,u.animate),a.options.range===!0&&(a.orientation==="horizontal"?(r===0&&a.range.stop(1,1)[f?"animate":"css"]({left:n+"%"},u.animate),r===1&&a.range[f?"animate":"css"]({width:n-t+"%"},{queue:!1,duration:u.animate})):(r===0&&a.range.stop(1,1)[f?"animate":"css"]({bottom:n+"%"},u.animate),r===1&&a.range[f?"animate":"css"]({height:n-t+"%"},{queue:!1,duration:u.animate}))),t=n}):(r=this.value(),i=this._valueMin(),s=this._valueMax(),n=s!==i?(r-i)/(s-i)*100:0,l[this.orientation==="horizontal"?"left":"bottom"]=n+"%",this.handle.stop(1,1)[f?"animate":"css"](l,u.animate),o==="min"&&this.orientation==="horizontal"&&this.range.stop(1,1)[f?"animate":"css"]({width:n+"%"},u.animate),o==="max"&&this.orientation==="horizontal"&&this.range[f?"animate":"css"]({width:100-n+"%"},{queue:!1,duration:u.animate}),o==="min"&&this.orientation==="vertical"&&this.range.stop(1,1)[f?"animate":"css"]({height:n+"%"},u.animate),o==="max"&&this.orientation==="vertical"&&this.range[f?"animate":"css"]({height:100-n+"%"},{queue:!1,duration:u.animate}))}})})(jQuery);(function(e,t){e.widget("ui.sortable",e.ui.mouse,{version:"1.9.0",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3},_create:function(){var e=this.options;this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.floating=this.items.length?e.axis==="x"||/left|right/.test(this.items[0].item.css("float"))||/inline|table-cell/.test(this.items[0].item.css("display")):!1,this.offset=this.element.offset(),this._mouseInit(),this.ready=!0},_destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled"),this._mouseDestroy();for(var e=this.items.length-1;e>=0;e--)this.items[e].item.removeData(this.widgetName+"-item");return this},_setOption:function(t,n){t==="disabled"?(this.options[t]=n,this.widget().toggleClass("ui-sortable-disabled",!!n)):e.Widget.prototype._setOption.apply(this,arguments)},_mouseCapture:function(t,n){var r=this;if(this.reverting)return!1;if(this.options.disabled||this.options.type=="static")return!1;this._refreshItems(t);var i=null,s=e(t.target).parents().each(function(){if(e.data(this,r.widgetName+"-item")==r)return i=e(this),!1});e.data(t.target,r.widgetName+"-item")==r&&(i=e(t.target));if(!i)return!1;if(this.options.handle&&!n){var o=!1;e(this.options.handle,i).find("*").andSelf().each(function(){this==t.target&&(o=!0)});if(!o)return!1}return this.currentItem=i,this._removeCurrentsFromItems(),!0},_mouseStart:function(t,n,r){var i=this.options;this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(t),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},e.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,i.cursorAt&&this._adjustOffsetFromHelper(i.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!=this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),i.containment&&this._setContainment(),i.cursor&&(e("body").css("cursor")&&(this._storedCursor=e("body").css("cursor")),e("body").css("cursor",i.cursor)),i.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",i.opacity)),i.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",i.zIndex)),this.scrollParent[0]!=document&&this.scrollParent[0].tagName!="HTML"&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",t,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions();if(!r)for(var s=this.containers.length-1;s>=0;s--)this.containers[s]._trigger("activate",t,this._uiHash(this));return e.ui.ddmanager&&(e.ui.ddmanager.current=this),e.ui.ddmanager&&!i.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(t),!0},_mouseDrag:function(t){this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs);if(this.options.scroll){var n=this.options,r=!1;this.scrollParent[0]!=document&&this.scrollParent[0].tagName!="HTML"?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-t.pageY<n.scrollSensitivity?this.scrollParent[0].scrollTop=r=this.scrollParent[0].scrollTop+n.scrollSpeed:t.pageY-this.overflowOffset.top<n.scrollSensitivity&&(this.scrollParent[0].scrollTop=r=this.scrollParent[0].scrollTop-n.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-t.pageX<n.scrollSensitivity?this.scrollParent[0].scrollLeft=r=this.scrollParent[0].scrollLeft+n.scrollSpeed:t.pageX-this.overflowOffset.left<n.scrollSensitivity&&(this.scrollParent[0].scrollLeft=r=this.scrollParent[0].scrollLeft-n.scrollSpeed)):(t.pageY-e(document).scrollTop()<n.scrollSensitivity?r=e(document).scrollTop(e(document).scrollTop()-n.scrollSpeed):e(window).height()-(t.pageY-e(document).scrollTop())<n.scrollSensitivity&&(r=e(document).scrollTop(e(document).scrollTop()+n.scrollSpeed)),t.pageX-e(document).scrollLeft()<n.scrollSensitivity?r=e(document).scrollLeft(e(document).scrollLeft()-n.scrollSpeed):e(window).width()-(t.pageX-e(document).scrollLeft())<n.scrollSensitivity&&(r=e(document).scrollLeft(e(document).scrollLeft()+n.scrollSpeed))),r!==!1&&e.ui.ddmanager&&!n.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t)}this.positionAbs=this._convertPositionTo("absolute");if(!this.options.axis||this.options.axis!="y")this.helper[0].style.left=this.position.left+"px";if(!this.options.axis||this.options.axis!="x")this.helper[0].style.top=this.position.top+"px";for(var i=this.items.length-1;i>=0;i--){var s=this.items[i],o=s.item[0],u=this._intersectsWithPointer(s);if(!u)continue;if(s.instance!==this.currentContainer)continue;if(o!=this.currentItem[0]&&this.placeholder[u==1?"next":"prev"]()[0]!=o&&!e.contains(this.placeholder[0],o)&&(this.options.type=="semi-dynamic"?!e.contains(this.element[0],o):!0)){this.direction=u==1?"down":"up";if(this.options.tolerance!="pointer"&&!this._intersectsWithSides(s))break;this._rearrange(t,s),this._trigger("change",t,this._uiHash());break}}return this._contactContainers(t),e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),this._trigger("sort",t,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(t,n){if(!t)return;e.ui.ddmanager&&!this.options.dropBehaviour&&e.ui.ddmanager.drop(this,t);if(this.options.revert){var r=this,i=this.placeholder.offset();this.reverting=!0,e(this.helper).animate({left:i.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollLeft),top:i.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollTop)},parseInt(this.options.revert,10)||500,function(){r._clear(t)})}else this._clear(t,n);return!1},cancel:function(){if(this.dragging){this._mouseUp({target:null}),this.options.helper=="original"?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var t=this.containers.length-1;t>=0;t--)this.containers[t]._trigger("deactivate",null,this._uiHash(this)),this.containers[t].containerCache.over&&(this.containers[t]._trigger("out",null,this._uiHash(this)),this.containers[t].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.options.helper!="original"&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),e.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?e(this.domPosition.prev).after(this.currentItem):e(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(t){var n=this._getItemsAsjQuery(t&&t.connected),r=[];return t=t||{},e(n).each(function(){var n=(e(t.item||this).attr(t.attribute||"id")||"").match(t.expression||/(.+)[-=_](.+)/);n&&r.push((t.key||n[1]+"[]")+"="+(t.key&&t.expression?n[1]:n[2]))}),!r.length&&t.key&&r.push(t.key+"="),r.join("&")},toArray:function(t){var n=this._getItemsAsjQuery(t&&t.connected),r=[];return t=t||{},n.each(function(){r.push(e(t.item||this).attr(t.attribute||"id")||"")}),r},_intersectsWith:function(e){var t=this.positionAbs.left,n=t+this.helperProportions.width,r=this.positionAbs.top,i=r+this.helperProportions.height,s=e.left,o=s+e.width,u=e.top,a=u+e.height,f=this.offset.click.top,l=this.offset.click.left,c=r+f>u&&r+f<a&&t+l>s&&t+l<o;return this.options.tolerance=="pointer"||this.options.forcePointerForContainers||this.options.tolerance!="pointer"&&this.helperProportions[this.floating?"width":"height"]>e[this.floating?"width":"height"]?c:s<t+this.helperProportions.width/2&&n-this.helperProportions.width/2<o&&u<r+this.helperProportions.height/2&&i-this.helperProportions.height/2<a},_intersectsWithPointer:function(t){var n=this.options.axis==="x"||e.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,t.top,t.height),r=this.options.axis==="y"||e.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,t.left,t.width),i=n&&r,s=this._getDragVerticalDirection(),o=this._getDragHorizontalDirection();return i?this.floating?o&&o=="right"||s=="down"?2:1:s&&(s=="down"?2:1):!1},_intersectsWithSides:function(t){var n=e.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,t.top+t.height/2,t.height),r=e.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,t.left+t.width/2,t.width),i=this._getDragVerticalDirection(),s=this._getDragHorizontalDirection();return this.floating&&s?s=="right"&&r||s=="left"&&!r:i&&(i=="down"&&n||i=="up"&&!n)},_getDragVerticalDirection:function(){var e=this.positionAbs.top-this.lastPositionAbs.top;return e!=0&&(e>0?"down":"up")},_getDragHorizontalDirection:function(){var e=this.positionAbs.left-this.lastPositionAbs.left;return e!=0&&(e>0?"right":"left")},refresh:function(e){return this._refreshItems(e),this.refreshPositions(),this},_connectWith:function(){var e=this.options;return e.connectWith.constructor==String?[e.connectWith]:e.connectWith},_getItemsAsjQuery:function(t){var n=[],r=[],i=this._connectWith();if(i&&t)for(var s=i.length-1;s>=0;s--){var o=e(i[s]);for(var u=o.length-1;u>=0;u--){var a=e.data(o[u],this.widgetName);a&&a!=this&&!a.options.disabled&&r.push([e.isFunction(a.options.items)?a.options.items.call(a.element):e(a.options.items,a.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),a])}}r.push([e.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):e(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]);for(var s=r.length-1;s>=0;s--)r[s][0].each(function(){n.push(this)});return e(n)},_removeCurrentsFromItems:function(){var e=this.currentItem.find(":data("+this.widgetName+"-item)");for(var t=0;t<this.items.length;t++)for(var n=0;n<e.length;n++)e[n]==this.items[t].item[0]&&this.items.splice(t,1)},_refreshItems:function(t){this.items=[],this.containers=[this];var n=this.items,r=[[e.isFunction(this.options.items)?this.options.items.call(this.element[0],t,{item:this.currentItem}):e(this.options.items,this.element),this]],i=this._connectWith();if(i&&this.ready)for(var s=i.length-1;s>=0;s--){var o=e(i[s]);for(var u=o.length-1;u>=0;u--){var a=e.data(o[u],this.widgetName);a&&a!=this&&!a.options.disabled&&(r.push([e.isFunction(a.options.items)?a.options.items.call(a.element[0],t,{item:this.currentItem}):e(a.options.items,a.element),a]),this.containers.push(a))}}for(var s=r.length-1;s>=0;s--){var f=r[s][1],l=r[s][0];for(var u=0,c=l.length;u<c;u++){var h=e(l[u]);h.data(this.widgetName+"-item",f),n.push({item:h,instance:f,width:0,height:0,left:0,top:0})}}},refreshPositions:function(t){this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());for(var n=this.items.length-1;n>=0;n--){var r=this.items[n];if(r.instance!=this.currentContainer&&this.currentContainer&&r.item[0]!=this.currentItem[0])continue;var i=this.options.toleranceElement?e(this.options.toleranceElement,r.item):r.item;t||(r.width=i.outerWidth(),r.height=i.outerHeight());var s=i.offset();r.left=s.left,r.top=s.top}if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(var n=this.containers.length-1;n>=0;n--){var s=this.containers[n].element.offset();this.containers[n].containerCache.left=s.left,this.containers[n].containerCache.top=s.top,this.containers[n].containerCache.width=this.containers[n].element.outerWidth(),this.containers[n].containerCache.height=this.containers[n].element.outerHeight()}return this},_createPlaceholder:function(t){t=t||this;var n=t.options;if(!n.placeholder||n.placeholder.constructor==String){var r=n.placeholder;n.placeholder={element:function(){var n=e(document.createElement(t.currentItem[0].nodeName)).addClass(r||t.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper")[0];return r||(n.style.visibility="hidden"),n},update:function(e,i){if(r&&!n.forcePlaceholderSize)return;i.height()||i.height(t.currentItem.innerHeight()-parseInt(t.currentItem.css("paddingTop")||0,10)-parseInt(t.currentItem.css("paddingBottom")||0,10)),i.width()||i.width(t.currentItem.innerWidth()-parseInt(t.currentItem.css("paddingLeft")||0,10)-parseInt(t.currentItem.css("paddingRight")||0,10))}}}t.placeholder=e(n.placeholder.element.call(t.element,t.currentItem)),t.currentItem.after(t.placeholder),n.placeholder.update(t,t.placeholder)},_contactContainers:function(t){var n=null,r=null;for(var i=this.containers.length-1;i>=0;i--){if(e.contains(this.currentItem[0],this.containers[i].element[0]))continue;if(this._intersectsWith(this.containers[i].containerCache)){if(n&&e.contains(this.containers[i].element[0],n.element[0]))continue;n=this.containers[i],r=i}else this.containers[i].containerCache.over&&(this.containers[i]._trigger("out",t,this._uiHash(this)),this.containers[i].containerCache.over=0)}if(!n)return;if(this.containers.length===1)this.containers[r]._trigger("over",t,this._uiHash(this)),this.containers[r].containerCache.over=1;else if(this.currentContainer!=this.containers[r]){var s=1e4,o=null,u=this.positionAbs[this.containers[r].floating?"left":"top"];for(var a=this.items.length-1;a>=0;a--){if(!e.contains(this.containers[r].element[0],this.items[a].item[0]))continue;var f=this.containers[r].floating?this.items[a].item.offset().left:this.items[a].item.offset().top;Math.abs(f-u)<s&&(s=Math.abs(f-u),o=this.items[a],this.direction=f-u>0?"down":"up")}if(!o&&!this.options.dropOnEmpty)return;this.currentContainer=this.containers[r],o?this._rearrange(t,o,null,!0):this._rearrange(t,null,this.containers[r].element,!0),this._trigger("change",t,this._uiHash()),this.containers[r]._trigger("change",t,this._uiHash(this)),this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[r]._trigger("over",t,this._uiHash(this)),this.containers[r].containerCache.over=1}},_createHelper:function(t){var n=this.options,r=e.isFunction(n.helper)?e(n.helper.apply(this.element[0],[t,this.currentItem])):n.helper=="clone"?this.currentItem.clone():this.currentItem;return r.parents("body").length||e(n.appendTo!="parent"?n.appendTo:this.currentItem[0].parentNode)[0].appendChild(r[0]),r[0]==this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(r[0].style.width==""||n.forceHelperSize)&&r.width(this.currentItem.width()),(r[0].style.height==""||n.forceHelperSize)&&r.height(this.currentItem.height()),r},_adjustOffsetFromHelper:function(t){typeof t=="string"&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var t=this.offsetParent.offset();this.cssPosition=="absolute"&&this.scrollParent[0]!=document&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop());if(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()=="html"&&e.browser.msie)t={top:0,left:0};return{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition=="relative"){var e=this.currentItem.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t=this.options;t.containment=="parent"&&(t.containment=this.helper[0].parentNode);if(t.containment=="document"||t.containment=="window")this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,e(t.containment=="document"?document:window).width()-this.helperProportions.width-this.margins.left,(e(t.containment=="document"?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];if(!/^(document|window|parent)$/.test(t.containment)){var n=e(t.containment)[0],r=e(t.containment).offset(),i=e(n).css("overflow")!="hidden";this.containment=[r.left+(parseInt(e(n).css("borderLeftWidth"),10)||0)+(parseInt(e(n).css("paddingLeft"),10)||0)-this.margins.left,r.top+(parseInt(e(n).css("borderTopWidth"),10)||0)+(parseInt(e(n).css("paddingTop"),10)||0)-this.margins.top,r.left+(i?Math.max(n.scrollWidth,n.offsetWidth):n.offsetWidth)-(parseInt(e(n).css("borderLeftWidth"),10)||0)-(parseInt(e(n).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,r.top+(i?Math.max(n.scrollHeight,n.offsetHeight):n.offsetHeight)-(parseInt(e(n).css("borderTopWidth"),10)||0)-(parseInt(e(n).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top]}},_convertPositionTo:function(t,n){n||(n=this.position);var r=t=="absolute"?1:-1,i=this.options,s=this.cssPosition!="absolute"||this.scrollParent[0]!=document&&!!e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,o=/(html|body)/i.test(s[0].tagName);return{top:n.top+this.offset.relative.top*r+this.offset.parent.top*r-(this.cssPosition=="fixed"?-this.scrollParent.scrollTop():o?0:s.scrollTop())*r,left:n.left+this.offset.relative.left*r+this.offset.parent.left*r-(this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():o?0:s.scrollLeft())*r}},_generatePosition:function(t){var n=this.options,r=this.cssPosition!="absolute"||this.scrollParent[0]!=document&&!!e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,i=/(html|body)/i.test(r[0].tagName);this.cssPosition=="relative"&&(this.scrollParent[0]==document||this.scrollParent[0]==this.offsetParent[0])&&(this.offset.relative=this._getRelativeOffset());var s=t.pageX,o=t.pageY;if(this.originalPosition){this.containment&&(t.pageX-this.offset.click.left<this.containment[0]&&(s=this.containment[0]+this.offset.click.left),t.pageY-this.offset.click.top<this.containment[1]&&(o=this.containment[1]+this.offset.click.top),t.pageX-this.offset.click.left>this.containment[2]&&(s=this.containment[2]+this.offset.click.left),t.pageY-this.offset.click.top>this.containment[3]&&(o=this.containment[3]+this.offset.click.top));if(n.grid){var u=this.originalPageY+Math.round((o-this.originalPageY)/n.grid[1])*n.grid[1];o=this.containment?u-this.offset.click.top<this.containment[1]||u-this.offset.click.top>this.containment[3]?u-this.offset.click.top<this.containment[1]?u+n.grid[1]:u-n.grid[1]:u:u;var a=this.originalPageX+Math.round((s-this.originalPageX)/n.grid[0])*n.grid[0];s=this.containment?a-this.offset.click.left<this.containment[0]||a-this.offset.click.left>this.containment[2]?a-this.offset.click.left<this.containment[0]?a+n.grid[0]:a-n.grid[0]:a:a}}return{top:o-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(this.cssPosition=="fixed"?-this.scrollParent.scrollTop():i?0:r.scrollTop()),left:s-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():i?0:r.scrollLeft())}},_rearrange:function(e,t,n,r){n?n[0].appendChild(this.placeholder[0]):t.item[0].parentNode.insertBefore(this.placeholder[0],this.direction=="down"?t.item[0]:t.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var i=this.counter;this._delay(function(){i==this.counter&&this.refreshPositions(!r)})},_clear:function(t,n){this.reverting=!1;var r=[];!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null;if(this.helper[0]==this.currentItem[0]){for(var i in this._storedCSS)if(this._storedCSS[i]=="auto"||this._storedCSS[i]=="static")this._storedCSS[i]="";this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();this.fromOutside&&!n&&r.push(function(e){this._trigger("receive",e,this._uiHash(this.fromOutside))}),(this.fromOutside||this.domPosition.prev!=this.currentItem.prev().not(".ui-sortable-helper")[0]||this.domPosition.parent!=this.currentItem.parent()[0])&&!n&&r.push(function(e){this._trigger("update",e,this._uiHash())}),this!==this.currentContainer&&(n||(r.push(function(e){this._trigger("remove",e,this._uiHash())}),r.push(function(e){return function(t){e._trigger("receive",t,this._uiHash(this))}}.call(this,this.currentContainer)),r.push(function(e){return function(t){e._trigger("update",t,this._uiHash(this))}}.call(this,this.currentContainer))));for(var i=this.containers.length-1;i>=0;i--)n||r.push(function(e){return function(t){e._trigger("deactivate",t,this._uiHash(this))}}.call(this,this.containers[i])),this.containers[i].containerCache.over&&(r.push(function(e){return function(t){e._trigger("out",t,this._uiHash(this))}}.call(this,this.containers[i])),this.containers[i].containerCache.over=0);this._storedCursor&&e("body").css("cursor",this._storedCursor),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex",this._storedZIndex=="auto"?"":this._storedZIndex),this.dragging=!1;if(this.cancelHelperRemoval){if(!n){this._trigger("beforeStop",t,this._uiHash());for(var i=0;i<r.length;i++)r[i].call(this,t);this._trigger("stop",t,this._uiHash())}return this.fromOutside=!1,!1}n||this._trigger("beforeStop",t,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.helper[0]!=this.currentItem[0]&&this.helper.remove(),this.helper=null;if(!n){for(var i=0;i<r.length;i++)r[i].call(this,t);this._trigger("stop",t,this._uiHash())}return this.fromOutside=!1,!0},_trigger:function(){e.Widget.prototype._trigger.apply(this,arguments)===!1&&this.cancel()},_uiHash:function(t){var n=t||this;return{helper:n.helper,placeholder:n.placeholder||e([]),position:n.position,originalPosition:n.originalPosition,offset:n.positionAbs,item:n.currentItem,sender:t?t.element:null}}})})(jQuery);(function(e){function t(e){return function(){var t=this.element.val();e.apply(this,arguments),this._refresh(),t!==this.element.val()&&this._trigger("change")}}e.widget("ui.spinner",{version:"1.9.0",defaultElement:"<input>",widgetEventPrefix:"spin",options:{culture:null,icons:{down:"ui-icon-triangle-1-s",up:"ui-icon-triangle-1-n"},incremental:!0,max:null,min:null,numberFormat:null,page:10,step:1,change:null,spin:null,start:null,stop:null},_create:function(){this._setOption("max",this.options.max),this._setOption("min",this.options.min),this._setOption("step",this.options.step),this._value(this.element.val(),!0),this._draw(),this._on(this._events),this._refresh(),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_getCreateOptions:function(){var t={},n=this.element;return e.each(["min","max","step"],function(e,r){var i=n.attr(r);i!==undefined&&i.length&&(t[r]=i)}),t},_events:{keydown:function(e){this._start(e)&&this._keydown(e)&&e.preventDefault()},keyup:"_stop",focus:function(){this.uiSpinner.addClass("ui-state-active"),this.previous=this.element.val()},blur:function(e){if(this.cancelBlur){delete this.cancelBlur;return}this._refresh(),this.uiSpinner.removeClass("ui-state-active"),this.previous!==this.element.val()&&this._trigger("change",e)},mousewheel:function(e,t){if(!t)return;if(!this.spinning&&!this._start(e))return!1;this._spin((t>0?1:-1)*this.options.step,e),clearTimeout(this.mousewheelTimer),this.mousewheelTimer=this._delay(function(){this.spinning&&this._stop(e)},100),e.preventDefault()},"mousedown .ui-spinner-button":function(t){function r(){var e=this.element[0]===this.document[0].activeElement;e||(this.element.focus(),this.previous=n,this._delay(function(){this.previous=n}))}var n;n=this.element[0]===this.document[0].activeElement?this.previous:this.element.val(),t.preventDefault(),r.call(this),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur,r.call(this)});if(this._start(t)===!1)return;this._repeat(null,e(t.currentTarget).hasClass("ui-spinner-up")?1:-1,t)},"mouseup .ui-spinner-button":"_stop","mouseenter .ui-spinner-button":function(t){if(!e(t.currentTarget).hasClass("ui-state-active"))return;if(this._start(t)===!1)return!1;this._repeat(null,e(t.currentTarget).hasClass("ui-spinner-up")?1:-1,t)},"mouseleave .ui-spinner-button":"_stop"},_draw:function(){var e=this.uiSpinner=this.element.addClass("ui-spinner-input").attr("autocomplete","off").wrap(this._uiSpinnerHtml()).parent().append(this._buttonHtml());this._hoverable(e),this.element.attr("role","spinbutton"),this.buttons=e.find(".ui-spinner-button").attr("tabIndex",-1).button().removeClass("ui-corner-all"),this.buttons.height()>Math.ceil(e.height()*.5)&&e.height()>0&&e.height(e.height()),this.options.disabled&&this.disable()},_keydown:function(t){var n=this.options,r=e.ui.keyCode;switch(t.keyCode){case r.UP:return this._repeat(null,1,t),!0;case r.DOWN:return this._repeat(null,-1,t),!0;case r.PAGE_UP:return this._repeat(null,n.page,t),!0;case r.PAGE_DOWN:return this._repeat(null,-n.page,t),!0}return!1},_uiSpinnerHtml:function(){return"<span class=\'ui-spinner ui-state-default ui-widget ui-widget-content ui-corner-all\'></span>"},_buttonHtml:function(){return"<a class=\'ui-spinner-button ui-spinner-up ui-corner-tr\'><span class=\'ui-icon "+this.options.icons.up+"\'>&#9650;</span>"+"</a>"+"<a class=\'ui-spinner-button ui-spinner-down ui-corner-br\'>"+"<span class=\'ui-icon "+this.options.icons.down+"\'>&#9660;</span>"+"</a>"},_start:function(e){return!this.spinning&&this._trigger("start",e)===!1?!1:(this.counter||(this.counter=1),this.spinning=!0,!0)},_repeat:function(e,t,n){e=e||500,clearTimeout(this.timer),this.timer=this._delay(function(){this._repeat(40,t,n)},e),this._spin(t*this.options.step,n)},_spin:function(e,t){var n=this.value()||0;this.counter||(this.counter=1),n=this._adjustValue(n+e*this._increment(this.counter));if(!this.spinning||this._trigger("spin",t,{value:n})!==!1)this._value(n),this.counter++},_increment:function(t){var n=this.options.incremental;return n?e.isFunction(n)?n(t):Math.floor(t*t*t/5e4-t*t/500+17*t/200+1):1},_precision:function(){var e=this._precisionOf(this.options.step);return this.options.min!==null&&(e=Math.max(e,this._precisionOf(this.options.min))),e},_precisionOf:function(e){var t=e.toString(),n=t.indexOf(".");return n===-1?0:t.length-n-1},_adjustValue:function(e){var t,n,r=this.options;return t=r.min!==null?r.min:0,n=e-t,n=Math.round(n/r.step)*r.step,e=t+n,e=parseFloat(e.toFixed(this._precision())),r.max!==null&&e>r.max?r.max:r.min!==null&&e<r.min?r.min:e},_stop:function(e){if(!this.spinning)return;clearTimeout(this.timer),clearTimeout(this.mousewheelTimer),this.counter=0,this.spinning=!1,this._trigger("stop",e)},_setOption:function(e,t){if(e==="culture"||e==="numberFormat"){var n=this._parse(this.element.val());this.options[e]=t,this.element.val(this._format(n));return}(e==="max"||e==="min"||e==="step")&&typeof t=="string"&&(t=this._parse(t)),this._super(e,t),e==="disabled"&&(t?(this.element.prop("disabled",!0),this.buttons.button("disable")):(this.element.prop("disabled",!1),this.buttons.button("enable")))},_setOptions:t(function(e){this._super(e),this._value(this.element.val())}),_parse:function(e){return typeof e=="string"&&e!==""&&(e=window.Globalize&&this.options.numberFormat?Globalize.parseFloat(e,10,this.options.culture):+e),e===""||isNaN(e)?null:e},_format:function(e){return e===""?"":window.Globalize&&this.options.numberFormat?Globalize.format(e,this.options.numberFormat,this.options.culture):e},_refresh:function(){this.element.attr({"aria-valuemin":this.options.min,"aria-valuemax":this.options.max,"aria-valuenow":this._parse(this.element.val())})},_value:function(e,t){var n;e!==""&&(n=this._parse(e),n!==null&&(t||(n=this._adjustValue(n)),e=this._format(n))),this.element.val(e),this._refresh()},_destroy:function(){this.element.removeClass("ui-spinner-input").prop("disabled",!1).removeAttr("autocomplete").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),this.uiSpinner.replaceWith(this.element)},stepUp:t(function(e){this._stepUp(e)}),_stepUp:function(e){this._spin((e||1)*this.options.step)},stepDown:t(function(e){this._stepDown(e)}),_stepDown:function(e){this._spin((e||1)*-this.options.step)},pageUp:t(function(e){this._stepUp((e||1)*this.options.page)}),pageDown:t(function(e){this._stepDown((e||1)*this.options.page)}),value:function(e){if(!arguments.length)return this._parse(this.element.val());t(this._value).call(this,e)},widget:function(){return this.uiSpinner}})})(jQuery);(function(e,t){function i(){return++n}function s(e){return e=e.cloneNode(!1),e.hash.length>1&&e.href.replace(r,"")===location.href.replace(r,"")}var n=0,r=/#.*$/;e.widget("ui.tabs",{version:"1.9.0",delay:300,options:{active:null,collapsible:!1,event:"click",heightStyle:"content",hide:null,show:null,activate:null,beforeActivate:null,beforeLoad:null,load:null},_create:function(){var t,n=this,r=this.options,i=r.active;this.running=!1,this.element.addClass("ui-tabs ui-widget ui-widget-content ui-corner-all").toggleClass("ui-tabs-collapsible",r.collapsible).delegate(".ui-tabs-nav > li","mousedown"+this.eventNamespace,function(t){e(this).is(".ui-state-disabled")&&t.preventDefault()}).delegate(".ui-tabs-anchor","focus"+this.eventNamespace,function(){e(this).closest("li").is(".ui-state-disabled")&&this.blur()}),this._processTabs();if(i===null){location.hash&&this.anchors.each(function(e,t){if(t.hash===location.hash)return i=e,!1}),i===null&&(i=this.tabs.filter(".ui-tabs-active").index());if(i===null||i===-1)i=this.tabs.length?0:!1}i!==!1&&(i=this.tabs.index(this.tabs.eq(i)),i===-1&&(i=r.collapsible?!1:0)),r.active=i,!r.collapsible&&r.active===!1&&this.anchors.length&&(r.active=0),e.isArray(r.disabled)&&(r.disabled=e.unique(r.disabled.concat(e.map(this.tabs.filter(".ui-state-disabled"),function(e){return n.tabs.index(e)}))).sort()),this.options.active!==!1&&this.anchors.length?this.active=this._findActive(this.options.active):this.active=e(),this._refresh(),this.active.length&&this.load(r.active)},_getCreateEventData:function(){return{tab:this.active,panel:this.active.length?this._getPanelForTab(this.active):e()}},_tabKeydown:function(t){var n=e(this.document[0].activeElement).closest("li"),r=this.tabs.index(n),i=!0;if(this._handlePageNav(t))return;switch(t.keyCode){case e.ui.keyCode.RIGHT:case e.ui.keyCode.DOWN:r++;break;case e.ui.keyCode.UP:case e.ui.keyCode.LEFT:i=!1,r--;break;case e.ui.keyCode.END:r=this.anchors.length-1;break;case e.ui.keyCode.HOME:r=0;break;case e.ui.keyCode.SPACE:t.preventDefault(),clearTimeout(this.activating),this._activate(r);return;case e.ui.keyCode.ENTER:t.preventDefault(),clearTimeout(this.activating),this._activate(r===this.options.active?!1:r);return;default:return}t.preventDefault(),clearTimeout(this.activating),r=this._focusNextTab(r,i),t.ctrlKey||(n.attr("aria-selected","false"),this.tabs.eq(r).attr("aria-selected","true"),this.activating=this._delay(function(){this.option("active",r)},this.delay))},_panelKeydown:function(t){if(this._handlePageNav(t))return;t.ctrlKey&&t.keyCode===e.ui.keyCode.UP&&(t.preventDefault(),this.active.focus())},_handlePageNav:function(t){if(t.altKey&&t.keyCode===e.ui.keyCode.PAGE_UP)return this._activate(this._focusNextTab(this.options.active-1,!1)),!0;if(t.altKey&&t.keyCode===e.ui.keyCode.PAGE_DOWN)return this._activate(this._focusNextTab(this.options.active+1,!0)),!0},_findNextTab:function(t,n){function i(){return t>r&&(t=0),t<0&&(t=r),t}var r=this.tabs.length-1;while(e.inArray(i(),this.options.disabled)!==-1)t=n?t+1:t-1;return t},_focusNextTab:function(e,t){return e=this._findNextTab(e,t),this.tabs.eq(e).focus(),e},_setOption:function(e,t){if(e==="active"){this._activate(t);return}if(e==="disabled"){this._setupDisabled(t);return}this._super(e,t),e==="collapsible"&&(this.element.toggleClass("ui-tabs-collapsible",t),!t&&this.options.active===!1&&this._activate(0)),e==="event"&&this._setupEvents(t),e==="heightStyle"&&this._setupHeightStyle(t)},_tabId:function(e){return e.attr("aria-controls")||"ui-tabs-"+i()},_sanitizeSelector:function(e){return e?e.replace(/[!"$%&\'()*+,.\\/:;<=>?@\\[\\]\\^`{|}~]/g,"\\\\$&"):""},refresh:function(){var t,n=this.options,r=this.tablist.children(":has(a[href])");n.disabled=e.map(r.filter(".ui-state-disabled"),function(e){return r.index(e)}),this._processTabs(),n.active===!1||!this.anchors.length?(n.active=!1,this.active=e()):this.active.length&&!e.contains(this.tablist[0],this.active[0])?this.tabs.length===n.disabled.length?(n.active=!1,this.active=e()):this._activate(this._findNextTab(Math.max(0,n.active-1),!1)):n.active=this.tabs.index(this.active),this._refresh()},_refresh:function(){this._setupDisabled(this.options.disabled),this._setupEvents(this.options.event),this._setupHeightStyle(this.options.heightStyle),this.tabs.not(this.active).attr({"aria-selected":"false",tabIndex:-1}),this.panels.not(this._getPanelForTab(this.active)).hide().attr({"aria-expanded":"false","aria-hidden":"true"}),this.active.length?(this.active.addClass("ui-tabs-active ui-state-active").attr({"aria-selected":"true",tabIndex:0}),this._getPanelForTab(this.active).show().attr({"aria-expanded":"true","aria-hidden":"false"})):this.tabs.eq(0).attr("tabIndex",0)},_processTabs:function(){var t=this;this.tablist=this._getList().addClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").attr("role","tablist"),this.tabs=this.tablist.find("> li:has(a[href])").addClass("ui-state-default ui-corner-top").attr({role:"tab",tabIndex:-1}),this.anchors=this.tabs.map(function(){return e("a",this)[0]}).addClass("ui-tabs-anchor").attr({role:"presentation",tabIndex:-1}),this.panels=e(),this.anchors.each(function(n,r){var i,o,u,a=e(r).uniqueId().attr("id"),f=e(r).closest("li"),l=f.attr("aria-controls");s(r)?(i=r.hash,o=t.element.find(t._sanitizeSelector(i))):(u=t._tabId(f),i="#"+u,o=t.element.find(i),o.length||(o=t._createPanel(u),o.insertAfter(t.panels[n-1]||t.tablist)),o.attr("aria-live","polite")),o.length&&(t.panels=t.panels.add(o)),l&&f.data("ui-tabs-aria-controls",l),f.attr({"aria-controls":i.substring(1),"aria-labelledby":a}),o.attr("aria-labelledby",a)}),this.panels.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").attr("role","tabpanel")},_getList:function(){return this.element.find("ol,ul").eq(0)},_createPanel:function(t){return e("<div>").attr("id",t).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").data("ui-tabs-destroy",!0)},_setupDisabled:function(t){e.isArray(t)&&(t.length?t.length===this.anchors.length&&(t=!0):t=!1);for(var n=0,r;r=this.tabs[n];n++)t===!0||e.inArray(n,t)!==-1?e(r).addClass("ui-state-disabled").attr("aria-disabled","true"):e(r).removeClass("ui-state-disabled").removeAttr("aria-disabled");this.options.disabled=t},_setupEvents:function(t){var n={click:function(e){e.preventDefault()}};t&&e.each(t.split(" "),function(e,t){n[t]="_eventHandler"}),this._off(this.anchors.add(this.tabs).add(this.panels)),this._on(this.anchors,n),this._on(this.tabs,{keydown:"_tabKeydown"}),this._on(this.panels,{keydown:"_panelKeydown"}),this._focusable(this.tabs),this._hoverable(this.tabs)},_setupHeightStyle:function(t){var n,r,i=this.element.parent();t==="fill"?(e.support.minHeight||(r=i.css("overflow"),i.css("overflow","hidden")),n=i.height(),this.element.siblings(":visible").each(function(){var t=e(this),r=t.css("position");if(r==="absolute"||r==="fixed")return;n-=t.outerHeight(!0)}),r&&i.css("overflow",r),this.element.children().not(this.panels).each(function(){n-=e(this).outerHeight(!0)}),this.panels.each(function(){e(this).height(Math.max(0,n-e(this).innerHeight()+e(this).height()))}).css("overflow","auto")):t==="auto"&&(n=0,this.panels.each(function(){n=Math.max(n,e(this).height("").height())}).height(n))},_eventHandler:function(t){var n=this.options,r=this.active,i=e(t.currentTarget),s=i.closest("li"),o=s[0]===r[0],u=o&&n.collapsible,a=u?e():this._getPanelForTab(s),f=r.length?this._getPanelForTab(r):e(),l={oldTab:r,oldPanel:f,newTab:u?e():s,newPanel:a};t.preventDefault();if(s.hasClass("ui-state-disabled")||s.hasClass("ui-tabs-loading")||this.running||o&&!n.collapsible||this._trigger("beforeActivate",t,l)===!1)return;n.active=u?!1:this.tabs.index(s),this.active=o?e():s,this.xhr&&this.xhr.abort(),!f.length&&!a.length&&e.error("jQuery UI Tabs: Mismatching fragment identifier."),a.length&&this.load(this.tabs.index(s),t),this._toggle(t,l)},_toggle:function(t,n){function o(){r.running=!1,r._trigger("activate",t,n)}function u(){n.newTab.closest("li").addClass("ui-tabs-active ui-state-active"),i.length&&r.options.show?r._show(i,r.options.show,o):(i.show(),o())}var r=this,i=n.newPanel,s=n.oldPanel;this.running=!0,s.length&&this.options.hide?this._hide(s,this.options.hide,function(){n.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),u()}):(n.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),s.hide(),u()),s.attr({"aria-expanded":"false","aria-hidden":"true"}),n.oldTab.attr("aria-selected","false"),i.length&&s.length?n.oldTab.attr("tabIndex",-1):i.length&&this.tabs.filter(function(){return e(this).attr("tabIndex")===0}).attr("tabIndex",-1),i.attr({"aria-expanded":"true","aria-hidden":"false"}),n.newTab.attr({"aria-selected":"true",tabIndex:0})},_activate:function(t){var n,r=this._findActive(t);if(r[0]===this.active[0])return;r.length||(r=this.active),n=r.find(".ui-tabs-anchor")[0],this._eventHandler({target:n,currentTarget:n,preventDefault:e.noop})},_findActive:function(t){return t===!1?e():this.tabs.eq(t)},_getIndex:function(e){return typeof e=="string"&&(e=this.anchors.index(this.anchors.filter("[href$=\'"+e+"\']"))),e},_destroy:function(){this.xhr&&this.xhr.abort(),this.element.removeClass("ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible"),this.tablist.removeClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").removeAttr("role"),this.anchors.removeClass("ui-tabs-anchor").removeAttr("role").removeAttr("tabIndex").removeData("href.tabs").removeData("load.tabs").removeUniqueId(),this.tabs.add(this.panels).each(function(){e.data(this,"ui-tabs-destroy")?e(this).remove():e(this).removeClass("ui-state-default ui-state-active ui-state-disabled ui-corner-top ui-corner-bottom ui-widget-content ui-tabs-active ui-tabs-panel").removeAttr("tabIndex").removeAttr("aria-live").removeAttr("aria-busy").removeAttr("aria-selected").removeAttr("aria-labelledby").removeAttr("aria-hidden").removeAttr("aria-expanded").removeAttr("role")}),this.tabs.each(function(){var t=e(this),n=t.data("ui-tabs-aria-controls");n?t.attr("aria-controls",n):t.removeAttr("aria-controls")}),this.options.heightStyle!=="content"&&this.panels.css("height","")},enable:function(n){var r=this.options.disabled;if(r===!1)return;n===t?r=!1:(n=this._getIndex(n),e.isArray(r)?r=e.map(r,function(e){return e!==n?e:null}):r=e.map(this.tabs,function(e,t){return t!==n?t:null})),this._setupDisabled(r)},disable:function(n){var r=this.options.disabled;if(r===!0)return;if(n===t)r=!0;else{n=this._getIndex(n);if(e.inArray(n,r)!==-1)return;e.isArray(r)?r=e.merge([n],r).sort():r=[n]}this._setupDisabled(r)},load:function(t,n){t=this._getIndex(t);var r=this,i=this.tabs.eq(t),o=i.find(".ui-tabs-anchor"),u=this._getPanelForTab(i),a={tab:i,panel:u};if(s(o[0]))return;this.xhr=e.ajax(this._ajaxSettings(o,n,a)),this.xhr&&this.xhr.statusText!=="canceled"&&(i.addClass("ui-tabs-loading"),u.attr("aria-busy","true"),this.xhr.success(function(e){setTimeout(function(){u.html(e),r._trigger("load",n,a)},1)}).complete(function(e,t){setTimeout(function(){t==="abort"&&r.panels.stop(!1,!0),i.removeClass("ui-tabs-loading"),u.removeAttr("aria-busy"),e===r.xhr&&delete r.xhr},1)}))},_ajaxSettings:function(t,n,r){var i=this;return{url:t.attr("href"),beforeSend:function(t,s){return i._trigger("beforeLoad",n,e.extend({jqXHR:t,ajaxSettings:s},r))}}},_getPanelForTab:function(t){var n=e(t).attr("aria-controls");return this.element.find(this._sanitizeSelector("#"+n))}}),e.uiBackCompat!==!1&&(e.ui.tabs.prototype._ui=function(e,t){return{tab:e,panel:t,index:this.anchors.index(e)}},e.widget("ui.tabs",e.ui.tabs,{url:function(e,t){this.anchors.eq(e).attr("href",t)}}),e.widget("ui.tabs",e.ui.tabs,{options:{ajaxOptions:null,cache:!1},_create:function(){this._super();var t=this;this._on({tabsbeforeload:function(n,r){if(e.data(r.tab[0],"cache.tabs")){n.preventDefault();return}r.jqXHR.success(function(){t.options.cache&&e.data(r.tab[0],"cache.tabs",!0)})}})},_ajaxSettings:function(t,n,r){var i=this.options.ajaxOptions;return e.extend({},i,{error:function(e,t,n){try{i.error(e,t,r.tab.closest("li").index(),r.tab[0])}catch(n){}}},this._superApply(arguments))},_setOption:function(e,t){e==="cache"&&t===!1&&this.anchors.removeData("cache.tabs"),this._super(e,t)},_destroy:function(){this.anchors.removeData("cache.tabs"),this._super()},url:function(e,t){this.anchors.eq(e).removeData("cache.tabs"),this._superApply(arguments)}}),e.widget("ui.tabs",e.ui.tabs,{abort:function(){this.xhr&&this.xhr.abort()}}),e.widget("ui.tabs",e.ui.tabs,{options:{spinner:"<em>Loading&#8230;</em>"},_create:function(){this._super(),this._on({tabsbeforeload:function(e,t){if(e.target!==this.element[0]||!this.options.spinner)return;var n=t.tab.find("span"),r=n.html();n.html(this.options.spinner),t.jqXHR.complete(function(){n.html(r)})}})}}),e.widget("ui.tabs",e.ui.tabs,{options:{enable:null,disable:null},enable:function(t){var n=this.options,r;if(t&&n.disabled===!0||e.isArray(n.disabled)&&e.inArray(t,n.disabled)!==-1)r=!0;this._superApply(arguments),r&&this._trigger("enable",null,this._ui(this.anchors[t],this.panels[t]))},disable:function(t){var n=this.options,r;if(t&&n.disabled===!1||e.isArray(n.disabled)&&e.inArray(t,n.disabled)===-1)r=!0;this._superApply(arguments),r&&this._trigger("disable",null,this._ui(this.anchors[t],this.panels[t]))}}),e.widget("ui.tabs",e.ui.tabs,{options:{add:null,remove:null,tabTemplate:"<li><a href=\'#{href}\'><span>#{label}</span></a></li>"},add:function(n,r,i){i===t&&(i=this.anchors.length);var s,o,u=this.options,a=e(u.tabTemplate.replace(/#\\{href\\}/g,n).replace(/#\\{label\\}/g,r)),f=n.indexOf("#")?this._tabId(a):n.replace("#","");return a.addClass("ui-state-default ui-corner-top").data("ui-tabs-destroy",!0),a.attr("aria-controls",f),s=i>=this.tabs.length,o=this.element.find("#"+f),o.length||(o=this._createPanel(f),s?i>0?o.insertAfter(this.panels.eq(-1)):o.appendTo(this.element):o.insertBefore(this.panels[i])),o.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").hide(),s?a.appendTo(this.tablist):a.insertBefore(this.tabs[i]),u.disabled=e.map(u.disabled,function(e){return e>=i?++e:e}),this.refresh(),this.tabs.length===1&&u.active===!1&&this.option("active",0),this._trigger("add",null,this._ui(this.anchors[i],this.panels[i])),this},remove:function(t){t=this._getIndex(t);var n=this.options,r=this.tabs.eq(t).remove(),i=this._getPanelForTab(r).remove();return r.hasClass("ui-tabs-active")&&this.anchors.length>2&&this._activate(t+(t+1<this.anchors.length?1:-1)),n.disabled=e.map(e.grep(n.disabled,function(e){return e!==t}),function(e){return e>=t?--e:e}),this.refresh(),this._trigger("remove",null,this._ui(r.find("a")[0],i[0])),this}}),e.widget("ui.tabs",e.ui.tabs,{length:function(){return this.anchors.length}}),e.widget("ui.tabs",e.ui.tabs,{options:{idPrefix:"ui-tabs-"},_tabId:function(t){var n=t.is("li")?t.find("a[href]"):t;return n=n[0],e(n).closest("li").attr("aria-controls")||n.title&&n.title.replace(/\\s/g,"_").replace(/[^\\w\\u00c0-\\uFFFF\\-]/g,"")||this.options.idPrefix+i()}}),e.widget("ui.tabs",e.ui.tabs,{options:{panelTemplate:"<div></div>"},_createPanel:function(t){return e(this.options.panelTemplate).attr("id",t).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").data("ui-tabs-destroy",!0)}}),e.widget("ui.tabs",e.ui.tabs,{_create:function(){var e=this.options;e.active===null&&e.selected!==t&&(e.active=e.selected===-1?!1:e.selected),this._super(),e.selected=e.active,e.selected===!1&&(e.selected=-1)},_setOption:function(e,t){if(e!=="selected")return this._super(e,t);var n=this.options;this._super("active",t===-1?!1:t),n.selected=n.active,n.selected===!1&&(n.selected=-1)},_eventHandler:function(e){this._superApply(arguments),this.options.selected=this.options.active,this.options.selected===!1&&(this.options.selected=-1)}}),e.widget("ui.tabs",e.ui.tabs,{options:{show:null,select:null},_create:function(){this._super(),this.options.active!==!1&&this._trigger("show",null,this._ui(this.active.find(".ui-tabs-anchor")[0],this._getPanelForTab(this.active)[0]))},_trigger:function(e,t,n){var r=this._superApply(arguments);return r?(e==="beforeActivate"&&n.newTab.length?r=this._super("select",t,{tab:n.newTab.find(".ui-tabs-anchor")[0],panel:n.newPanel[0],index:n.newTab.closest("li").index()}):e==="activate"&&n.newTab.length&&(r=this._super("show",t,{tab:n.newTab.find(".ui-tabs-anchor")[0],panel:n.newPanel[0],index:n.newTab.closest("li").index()})),r):!1}}),e.widget("ui.tabs",e.ui.tabs,{select:function(e){e=this._getIndex(e);if(e===-1){if(!this.options.collapsible||this.options.selected===-1)return;e=this.options.selected}this.anchors.eq(e).trigger(this.options.event+this.eventNamespace)}}),function(){var t=0;e.widget("ui.tabs",e.ui.tabs,{options:{cookie:null},_create:function(){var e=this.options,t;e.active==null&&e.cookie&&(t=parseInt(this._cookie(),10),t===-1&&(t=!1),e.active=t),this._super()},_cookie:function(n){var r=[this.cookie||(this.cookie=this.options.cookie.name||"ui-tabs-"+ ++t)];return arguments.length&&(r.push(n===!1?-1:n),r.push(this.options.cookie)),e.cookie.apply(null,r)},_refresh:function(){this._super(),this.options.cookie&&this._cookie(this.options.active,this.options.cookie)},_eventHandler:function(e){this._superApply(arguments),this.options.cookie&&this._cookie(this.options.active,this.options.cookie)},_destroy:function(){this._super(),this.options.cookie&&this._cookie(null,this.options.cookie)}})}(),e.widget("ui.tabs",e.ui.tabs,{_trigger:function(t,n,r){var i=e.extend({},r);return t==="load"&&(i.panel=i.panel[0],i.tab=i.tab.find(".ui-tabs-anchor")[0]),this._super(t,n,i)}}),e.widget("ui.tabs",e.ui.tabs,{options:{fx:null},_getFx:function(){var t,n,r=this.options.fx;return r&&(e.isArray(r)?(t=r[0],n=r[1]):t=n=r),r?{show:n,hide:t}:null},_toggle:function(e,t){function o(){n.running=!1,n._trigger("activate",e,t)}function u(){t.newTab.closest("li").addClass("ui-tabs-active ui-state-active"),r.length&&s.show?r.animate(s.show,s.show.duration,function(){o()}):(r.show(),o())}var n=this,r=t.newPanel,i=t.oldPanel,s=this._getFx();if(!s)return this._super(e,t);n.running=!0,i.length&&s.hide?i.animate(s.hide,s.hide.duration,function(){t.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),u()}):(t.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),i.hide(),u())}}))})(jQuery);(function(e){function n(t,n){var r=(t.attr("aria-describedby")||"").split(/\\s+/);r.push(n),t.data("ui-tooltip-id",n).attr("aria-describedby",e.trim(r.join(" ")))}function r(t){var n=t.data("ui-tooltip-id"),r=(t.attr("aria-describedby")||"").split(/\\s+/),i=e.inArray(n,r);i!==-1&&r.splice(i,1),t.removeData("ui-tooltip-id"),r=e.trim(r.join(" ")),r?t.attr("aria-describedby",r):t.removeAttr("aria-describedby")}var t=0;e.widget("ui.tooltip",{version:"1.9.0",options:{content:function(){return e(this).attr("title")},hide:!0,items:"[title]",position:{my:"left+15 center",at:"right center",collision:"flipfit flipfit"},show:!0,tooltipClass:null,track:!1,close:null,open:null},_create:function(){this._on({mouseover:"open",focusin:"open"}),this.tooltips={}},_setOption:function(t,n){var r=this;if(t==="disabled"){this[n?"_disable":"_enable"](),this.options[t]=n;return}this._super(t,n),t==="content"&&e.each(this.tooltips,function(e,t){r._updateContent(t)})},_disable:function(){var t=this;e.each(this.tooltips,function(n,r){var i=e.Event("blur");i.target=i.currentTarget=r[0],t.close(i,!0)}),this.element.find(this.options.items).andSelf().each(function(){var t=e(this);t.is("[title]")&&t.data("ui-tooltip-title",t.attr("title")).attr("title","")})},_enable:function(){this.element.find(this.options.items).andSelf().each(function(){var t=e(this);t.data("ui-tooltip-title")&&t.attr("title",t.data("ui-tooltip-title"))})},open:function(t){var n=e(t?t.target:this.element).closest(this.options.items);if(!n.length)return;if(this.options.track&&n.data("ui-tooltip-id")){this._find(n).position(e.extend({of:n},this.options.position)),this._off(this.document,"mousemove");return}n.attr("title")&&n.data("ui-tooltip-title",n.attr("title")),n.data("tooltip-open",!0),this._updateContent(n,t)},_updateContent:function(e,t){var n,r=this.options.content,i=this;if(typeof r=="string")return this._open(t,e,r);n=r.call(e[0],function(n){if(!e.data("tooltip-open"))return;i._delay(function(){this._open(t,e,n)})}),n&&this._open(t,e,n)},_open:function(t,r,i){function u(e){o.of=e,s.position(o)}var s,o;if(!i)return;s=this._find(r);if(s.length){s.find(".ui-tooltip-content").html(i);return}r.is("[title]")&&(t&&t.type==="mouseover"?r.attr("title",""):r.removeAttr("title")),s=this._tooltip(r),n(r,s.attr("id")),s.find(".ui-tooltip-content").html(i),this.options.track&&t&&/^mouse/.test(t.originalEvent.type)?(o=e.extend({},this.options.position),this._on(this.document,{mousemove:u}),u(t)):s.position(e.extend({of:r},this.options.position)),s.hide(),this._show(s,this.options.show),this._trigger("open",t,{tooltip:s}),this._on(r,{mouseleave:"close",focusout:"close",keyup:function(t){if(t.keyCode===e.ui.keyCode.ESCAPE){var n=e.Event(t);n.currentTarget=r[0],this.close(n,!0)}}})},close:function(t,n){var i=this,s=e(t?t.currentTarget:this.element),o=this._find(s);if(this.closing)return;if(!n&&t&&t.type!=="focusout"&&this.document[0].activeElement===s[0])return;s.data("ui-tooltip-title")&&s.attr("title",s.data("ui-tooltip-title")),r(s),o.stop(!0),this._hide(o,this.options.hide,function(){e(this).remove(),delete i.tooltips[this.id]}),s.removeData("tooltip-open"),this._off(s,"mouseleave focusout keyup"),this._off(this.document,"mousemove"),this.closing=!0,this._trigger("close",t,{tooltip:o}),this.closing=!1},_tooltip:function(n){var r="ui-tooltip-"+t++,i=e("<div>").attr({id:r,role:"tooltip"}).addClass("ui-tooltip ui-widget ui-corner-all ui-widget-content "+(this.options.tooltipClass||""));return e("<div>").addClass("ui-tooltip-content").appendTo(i),i.appendTo(this.document[0].body),e.fn.bgiframe&&i.bgiframe(),this.tooltips[r]=n,i},_find:function(t){var n=t.data("ui-tooltip-id");return n?e("#"+n):e()},_destroy:function(){var t=this;e.each(this.tooltips,function(n,r){var i=e.Event("blur");i.target=i.currentTarget=r[0],t.close(i,!0),e("#"+n).remove(),r.data("ui-tooltip-title")&&(r.attr("title",r.data("ui-tooltip-title")),r.removeData("ui-tooltip-title"))})}})})(jQuery);';
},function(e,t,n){n(3)(n(16))},function(e,t){e.exports='/*\r\n * Autocomplete - jQuery plugin 1.0.2\r\n *\r\n * Copyright (c) 2007 Dylan Verheul, Dan G. Switzer, Anjesh Tuladhar, Jrn Zaefferer\r\n *\r\n * Dual licensed under the MIT and GPL licenses:\r\n *   http://www.opensource.org/licenses/mit-license.php\r\n *   http://www.gnu.org/licenses/gpl.html\r\n *\r\n * Revision: $Id: jquery.autocomplete.js 5747 2008-06-25 18:30:55Z joern.zaefferer $\r\n *\r\n * Modified by Tim Trinidad 10/04/2010\r\n *   to be compatible with Drupal (changed \'q\' param to \'jq\'\r\n *   and to take a "defaultText" parameter which shows on first click\r\n *   if the search term is empty\r\n *\r\n * SGY-3779 - added an anchorTo option to allow the autocomplete hint box to align with an element\r\n *    other than the associated input.\r\n */\r\n\r\n;(function($) {\r\n\r\ndelete $.fn.Autocompleter;\r\ndelete $.fn.autocomplete;\r\n\r\n$.fn.extend({\r\n  autocomplete: function(urlOrData, options) {\r\n    var isUrl = typeof urlOrData == "string";\r\n    options = $.extend({}, $.Autocompleter.defaults, {\r\n      url: isUrl ? urlOrData : null,\r\n      data: isUrl ? null : urlOrData,\r\n      delay: isUrl ? $.Autocompleter.defaults.delay : 10,\r\n      max: options && !options.scroll ? 10 : 150\r\n    }, options);\r\n\r\n    // if highlight is set to false, replace it with a do-nothing function\r\n    options.highlight = options.highlight || function(value) { return value; };\r\n\r\n    // if the formatMatch option is not specified, then use formatItem for backwards compatibility\r\n    options.formatMatch = options.formatMatch || options.formatItem;\r\n\r\n    return this.each(function() {\r\n      new $.Autocompleter(this, options);\r\n    });\r\n  },\r\n  result: function(handler) {\r\n    return this.bind("result", handler);\r\n  },\r\n  search: function(handler) {\r\n    return this.trigger("search", [handler]);\r\n  },\r\n  flushCache: function() {\r\n    return this.trigger("flushCache");\r\n  },\r\n  setOptions: function(options){\r\n    return this.trigger("setOptions", [options]);\r\n  },\r\n  unautocomplete: function() {\r\n    return this.trigger("unautocomplete");\r\n  }\r\n});\r\n\r\n$.Autocompleter = function(input, options) {\r\n\r\n  var KEY = {\r\n    UP: 38,\r\n    DOWN: 40,\r\n    DEL: 46,\r\n    TAB: 9,\r\n    RETURN: 13,\r\n    ESC: 27,\r\n    COMMA: 188,\r\n    PAGEUP: 33,\r\n    PAGEDOWN: 34,\r\n    BACKSPACE: 8\r\n  };\r\n\r\n  // Create $ object for input element\r\n  var $input = $(input).attr("autocomplete", "off").addClass(options.inputClass);\r\n\r\n  var timeout;\r\n  var previousValue = "";\r\n  var cache = $.Autocompleter.Cache(options);\r\n  var hasFocus = 0;\r\n  var lastKeyPressCode;\r\n  var config = {\r\n    mouseDownOnSelect: false\r\n  };\r\n  var select = $.Autocompleter.Select(options, input, selectCurrent, config);\r\n\r\n  var blockSubmit;\r\n\r\n  // prevent form submit in opera when selecting with return key\r\n  $.browser.opera && $(input.form).bind("submit.autocomplete", function() {\r\n    if (blockSubmit) {\r\n      blockSubmit = false;\r\n      return false;\r\n    }\r\n  });\r\n\r\n  // only opera doesn\'t trigger keydown multiple times while pressed, others don\'t work with keypress at all\r\n  $input.bind(($.browser.opera ? "keypress" : "keydown") + ".autocomplete", function(event) {\r\n    // track last key pressed\r\n    lastKeyPressCode = event.keyCode;\r\n    switch(event.keyCode) {\r\n\r\n      case KEY.UP:\r\n        event.preventDefault();\r\n        if ( select.visible() ) {\r\n          select.prev();\r\n        } else {\r\n          onChange(0, true);\r\n        }\r\n        break;\r\n\r\n      case KEY.DOWN:\r\n        event.preventDefault();\r\n        if ( select.visible() ) {\r\n          select.next();\r\n        } else {\r\n          onChange(0, true);\r\n        }\r\n        break;\r\n\r\n      case KEY.PAGEUP:\r\n        event.preventDefault();\r\n        if ( select.visible() ) {\r\n          select.pageUp();\r\n        } else {\r\n          onChange(0, true);\r\n        }\r\n        break;\r\n\r\n      case KEY.PAGEDOWN:\r\n        event.preventDefault();\r\n        if ( select.visible() ) {\r\n          select.pageDown();\r\n        } else {\r\n          onChange(0, true);\r\n        }\r\n        break;\r\n\r\n      // matches also semicolon\r\n      case options.multiple && $.trim(options.multipleSeparator) == "," && KEY.COMMA:\r\n      case KEY.TAB:\r\n      case KEY.RETURN:\r\n        if( selectCurrent() ) {\r\n          // stop default to prevent a form submit, Opera needs special handling\r\n          event.preventDefault();\r\n          blockSubmit = true;\r\n          return false;\r\n        }\r\n        break;\r\n\r\n      case KEY.ESC:\r\n        select.hide();\r\n        break;\r\n\r\n      default:\r\n        clearTimeout(timeout);\r\n        timeout = setTimeout(onChange, options.delay);\r\n        break;\r\n    }\r\n  }).focus(function(){\r\n    // track whether the field has focus, we shouldn\'t process any\r\n    // results if the field no longer has focus\r\n    hasFocus++;\r\n  }).blur(function() {\r\n    hasFocus = 0;\r\n    if (!config.mouseDownOnSelect) {\r\n      hideResults();\r\n    }\r\n  }).click(function() {\r\n    // show select when clicking in a focused field\r\n    if ( hasFocus++ > 0 && !select.visible() ) {\r\n      onChange(0, true);\r\n    }\r\n  }).bind("search", function() {\r\n    // TODO why not just specifying both arguments?\r\n    var fn = (arguments.length > 1) ? arguments[1] : null;\r\n    function findValueCallback(q, data) {\r\n      var result;\r\n      if( data && data.length ) {\r\n        for (var i=0; i < data.length; i++) {\r\n          if( data[i].result.toLowerCase() == q.toLowerCase() ) {\r\n            result = data[i];\r\n            break;\r\n          }\r\n        }\r\n      }\r\n      if( typeof fn == "function" ) fn(result);\r\n      else $input.trigger("result", result && [result.data, result.value]);\r\n    }\r\n    $.each(trimWords($input.val()), function(i, value) {\r\n      request(value, findValueCallback, findValueCallback);\r\n    });\r\n  }).bind("flushCache", function() {\r\n    cache.flush();\r\n  }).bind("setOptions", function() {\r\n    $.extend(options, arguments[1]);\r\n    // if we\'ve updated the data, repopulate\r\n    if ( "data" in arguments[1] )\r\n      cache.populate();\r\n  }).bind("unautocomplete", function() {\r\n    select.unbind();\r\n    $input.unbind();\r\n    $(input.form).unbind(".autocomplete");\r\n  });\r\n\r\n\r\n  function selectCurrent() {\r\n    var selected = select.selected();\r\n    if( !selected )\r\n      return false;\r\n\r\n    var v = selected.result;\r\n    previousValue = v;\r\n\r\n    if ( options.multiple ) {\r\n      var words = trimWords($input.val());\r\n      if ( words.length > 1 ) {\r\n        v = words.slice(0, words.length - 1).join( options.multipleSeparator ) + options.multipleSeparator + v;\r\n      }\r\n      v += options.multipleSeparator;\r\n    }\r\n\r\n    $input.val(v);\r\n    hideResultsNow();\r\n    $input.trigger("result", [selected.data, selected.value]);\r\n    return true;\r\n  }\r\n\r\n  function onChange(crap, skipPrevCheck) {\r\n    if( lastKeyPressCode == KEY.DEL ) {\r\n      select.hide();\r\n     // return;\r\n    }\r\n\r\n    var currentValue = $input.val();\r\n\r\n    if ( !skipPrevCheck && currentValue == previousValue )\r\n      return;\r\n\r\n    previousValue = currentValue;\r\n\r\n    currentValue = lastWord(currentValue);\r\n    if ( currentValue.length >= options.minChars) {\r\n      $input.addClass(options.loadingClass);\r\n      if (!options.matchCase)\r\n        currentValue = currentValue.toLowerCase();\r\n      request(currentValue, receiveData, hideResultsNow);\r\n    } else {\r\n      stopLoading();\r\n      select.hide();\r\n    }\r\n  };\r\n\r\n  function trimWords(value) {\r\n    if ( !value ) {\r\n      return [""];\r\n    }\r\n    var words = value.split( options.multipleSeparator );\r\n    var result = [];\r\n    $.each(words, function(i, value) {\r\n      if ( $.trim(value) )\r\n        result[i] = $.trim(value);\r\n    });\r\n    return result;\r\n  }\r\n\r\n  function lastWord(value) {\r\n    if ( !options.multiple )\r\n      return value;\r\n    var words = trimWords(value);\r\n    return words[words.length - 1];\r\n  }\r\n\r\n  // fills in the input box w/the first match (assumed to be the best match)\r\n  // q: the term entered\r\n  // sValue: the first matching result\r\n  function autoFill(q, sValue){\r\n    // autofill in the complete box w/the first match as long as the user hasn\'t entered in more data\r\n    // if the last user key pressed was backspace, don\'t autofill\r\n    if( options.autoFill && (lastWord($input.val()).toLowerCase() == q.toLowerCase()) && lastKeyPressCode != KEY.BACKSPACE ) {\r\n      // fill in the value (keep the case the user has typed)\r\n      $input.val($input.val() + sValue.substring(lastWord(previousValue).length));\r\n      // select the portion of the value not typed by the user (so the next character will erase)\r\n      $.Autocompleter.Selection(input, previousValue.length, previousValue.length + sValue.length);\r\n    }\r\n  };\r\n\r\n  function hideResults() {\r\n    clearTimeout(timeout);\r\n    timeout = setTimeout(hideResultsNow, 200);\r\n  };\r\n\r\n  function hideResultsNow() {\r\n    var wasVisible = select.visible();\r\n    select.hide();\r\n    clearTimeout(timeout);\r\n    stopLoading();\r\n    if (options.mustMatch) {\r\n      // call search and run callback\r\n      $input.search(\r\n        function (result){\r\n          // if no value found, clear the input box\r\n          if( !result ) {\r\n            if (options.multiple) {\r\n              var words = trimWords($input.val()).slice(0, -1);\r\n              $input.val( words.join(options.multipleSeparator) + (words.length ? options.multipleSeparator : "") );\r\n            }\r\n            else\r\n              $input.val( "" );\r\n          }\r\n        }\r\n      );\r\n    }\r\n    if (wasVisible)\r\n      // position cursor at end of input field\r\n      $.Autocompleter.Selection(input, input.value.length, input.value.length);\r\n  };\r\n\r\n  function receiveData(q, data) {\r\n    if ( data && data.length && hasFocus ) {\r\n      stopLoading();\r\n      select.display(data, q);\r\n      autoFill(q, data[0].value);\r\n      select.show();\r\n    } else {\r\n      hideResultsNow();\r\n    }\r\n  };\r\n\r\n  function request(term, success, failure) {\r\n    if (!options.matchCase)\r\n      term = term.toLowerCase();\r\n    var data = cache.load(term);\r\n\r\n    if( options.injectMatch && typeof options.injectMatch == \'function\' ){\r\n      var injectedMatch = options.injectMatch( data );\r\n      if(typeof injectedMatch == \'object\')\r\n        data = data.concat( injectedMatch );\r\n    }\r\n\r\n    // recieve the cached data\r\n    if (data && data.length) {\r\n      success(term, data);\r\n    // if an AJAX url has been supplied, try loading the data now\r\n    } else if( (typeof options.url == "string") && (options.url.length > 0) ){\r\n\r\n      var extraParams = {\r\n        timestamp: +new Date()\r\n      };\r\n      $.each(options.extraParams, function(key, param) {\r\n        extraParams[key] = typeof param == "function" ? param() : param;\r\n      });\r\n\r\n      $.ajax({\r\n        // try to leverage ajaxQueue plugin to abort previous requests\r\n        mode: "abort",\r\n        // limit abortion to this input\r\n        port: "autocomplete" + input.name,\r\n        dataType: options.dataType,\r\n        url: options.url,\r\n        beforeSend: options.beforeSend,\r\n        data: $.extend({\r\n          jq: lastWord(term),\r\n          limit: options.max\r\n        }, extraParams),\r\n        success: function(data) {\r\n          var parsed = options.parse && options.parse(data) || parse(data);\r\n          cache.add(term, parsed);\r\n          success(term, parsed);\r\n        }\r\n      });\r\n    } else {\r\n      // if we have a failure, we need to empty the list -- this prevents the the [TAB] key from selecting the last successful match\r\n      select.emptyList();\r\n      failure(term);\r\n    }\r\n  };\r\n\r\n  function parse(data) {\r\n    var parsed = [];\r\n    var rows = data.split("\\n");\r\n    for (var i=0; i < rows.length; i++) {\r\n      var row = $.trim(rows[i]);\r\n      if (row) {\r\n        row = row.split("|");\r\n        parsed[parsed.length] = {\r\n          data: row,\r\n          value: row[0],\r\n          result: options.formatResult && options.formatResult(row, row[0]) || row[0]\r\n        };\r\n      }\r\n    }\r\n    return parsed;\r\n  };\r\n\r\n  function stopLoading() {\r\n    $input.removeClass(options.loadingClass);\r\n  };\r\n\r\n};\r\n\r\n$.Autocompleter.defaults = {\r\n  inputClass: "ac_input",\r\n  resultsClass: "ac_results",\r\n  loadingClass: "ac_loading",\r\n  minChars: 1,\r\n  delay: 400,\r\n  defaultText: false,\r\n  matchCase: false,\r\n  matchSubset: true,\r\n  matchContains: false,\r\n  cacheLength: 10,\r\n  max: 100,\r\n  mustMatch: false,\r\n  extraParams: {},\r\n  selectFirst: true,\r\n  formatItem: function(row) { return row[0]; },\r\n  formatMatch: null,\r\n  autoFill: false,\r\n  width: 0,\r\n  multiple: false,\r\n  multipleSeparator: ", ",\r\n  highlight: function(value, term) {\r\n    return value.replace(new RegExp("(?![^&;]+;)(?!<[^<>]*)(" + term.replace(/([\\^\\$\\(\\)\\[\\]\\{\\}\\*\\.\\+\\?\\|\\\\])/gi, "\\\\$1") + ")(?![^<>]*>)(?![^&;]+;)", "gi"), "<strong>$1</strong>");\r\n  },\r\n  scroll: true,\r\n  scrollHeight: 180,\r\n  beforeSend: function(){},\r\n  injectMatch: function(){}\r\n};\r\n\r\n$.Autocompleter.Cache = function(options) {\r\n\r\n  var data = {};\r\n  var length = 0;\r\n\r\n  function matchSubset(s, sub) { if(s == \'%\') return true; // added to allow an "always on" option\r\n    if (!options.matchCase)\r\n      s = s.toLowerCase();\r\n    var i = s.indexOf(sub);\r\n    if (i == -1) return false;\r\n    return i == 0 || options.matchContains;\r\n  };\r\n\r\n  function add(q, value) {\r\n    if (length > options.cacheLength){\r\n      flush();\r\n    }\r\n    if (!data[q]){\r\n      length++;\r\n    }\r\n    data[q] = value;\r\n  }\r\n\r\n  function populate(){\r\n    if( !options.data ) return false;\r\n    // track the matches\r\n    var stMatchSets = {},\r\n      nullData = 0;\r\n\r\n    // no url was specified, we need to adjust the cache length to make sure it fits the local data store\r\n    if( !options.url ) options.cacheLength = 1;\r\n\r\n    // track all options for minChars = 0\r\n    stMatchSets[""] = [];\r\n\r\n    // loop through the array and create a lookup structure\r\n    for ( var i = 0, ol = options.data.length; i < ol; i++ ) {\r\n      var rawValue = options.data[i];\r\n      // if rawValue is a string, make an array otherwise just reference the array\r\n      rawValue = (typeof rawValue == "string") ? [rawValue] : rawValue;\r\n\r\n      var value = options.formatMatch(rawValue, i+1, options.data.length);\r\n      if ( value === false )\r\n        continue;\r\n\r\n      var firstChar = value.charAt(0).toLowerCase();\r\n      // if no lookup array for this character exists, look it up now\r\n      if( !stMatchSets[firstChar] )\r\n        stMatchSets[firstChar] = [];\r\n\r\n      // if the match is a string\r\n      var row = {\r\n        value: value,\r\n        data: rawValue,\r\n        result: options.formatResult && options.formatResult(rawValue) || value\r\n      };\r\n\r\n      // push the current match into the set list\r\n      stMatchSets[firstChar].push(row);\r\n\r\n      // keep track of minChars zero items\r\n      if ( nullData++ < options.max ) {\r\n        stMatchSets[""].push(row);\r\n      }\r\n    };\r\n\r\n    // add the data items to the cache\r\n    $.each(stMatchSets, function(i, value) {\r\n      // increase the cache size\r\n      options.cacheLength++;\r\n      // add to the cache\r\n      add(i, value);\r\n    });\r\n  }\r\n\r\n  // populate any existing data\r\n  setTimeout(populate, 25);\r\n\r\n  function flush(){\r\n    data = {};\r\n    length = 0;\r\n  }\r\n\r\n  return {\r\n    flush: flush,\r\n    add: add,\r\n    populate: populate,\r\n    load: function(q) {\r\n      if (!options.cacheLength || !length)\r\n        return null;\r\n      /*\r\n       * if dealing w/local data and matchContains than we must make sure\r\n       * to loop through all the data collections looking for matches\r\n       */\r\n      if( !options.url && options.matchContains ){\r\n        // track all matches\r\n        var csub = [];\r\n        // loop through all the data grids for matches\r\n        for( var k in data ){\r\n          // don\'t search through the stMatchSets[""] (minChars: 0) cache\r\n          // this prevents duplicates\r\n          if( k.length > 0 ){\r\n            var c = data[k];\r\n            $.each(c, function(i, x) {\r\n              // if we\'ve got a match, add it to the array\r\n              if (matchSubset(x.value, q)) {\r\n                csub.push(x);\r\n              }\r\n            });\r\n          }\r\n        }\r\n        return csub;\r\n      } else\r\n      // if the exact item exists, use it\r\n      if (data[q]){\r\n        return data[q];\r\n      } else\r\n      if (options.matchSubset) {\r\n        for (var i = q.length - 1; i >= options.minChars; i--) {\r\n          var c = data[q.substr(0, i)];\r\n          if (c) {\r\n            var csub = [];\r\n            $.each(c, function(i, x) {\r\n              if (matchSubset(x.value, q)) {\r\n                csub[csub.length] = x;\r\n              }\r\n            });\r\n            return csub;\r\n          }\r\n        }\r\n      }\r\n      return null;\r\n    }\r\n  };\r\n};\r\n\r\n$.Autocompleter.Select = function (options, input, select, config) {\r\n  var CLASSES = {\r\n    ACTIVE: "ac_over"\r\n  };\r\n\r\n  var listItems,\r\n    active = -1,\r\n    data,\r\n    term = "",\r\n    needsInit = true,\r\n    element,\r\n    list;\r\n\r\n  // Create results\r\n  function init() {\r\n    if (!needsInit)\r\n      return;\r\n    element = $("<div/>")\r\n    .hide()\r\n    .addClass(options.resultsClass)\r\n    .css("position", "absolute")\r\n    .appendTo(document.body);\r\n\r\n    list = $("<ul/>").appendTo(element).mouseover( function(event) {\r\n      if(target(event).nodeName && target(event).nodeName.toUpperCase() == \'LI\') {\r\n              active = $("li", list).removeClass(CLASSES.ACTIVE).index(target(event));\r\n          $(target(event)).addClass(CLASSES.ACTIVE);\r\n          }\r\n    }).click(function(event) {\r\n      $(target(event)).addClass(CLASSES.ACTIVE);\r\n      select();\r\n      // TODO provide option to avoid setting focus again after selection? useful for cleanup-on-focus\r\n      try{input.focus();}catch(e){}\r\n      return false;\r\n    }).mousedown(function() {\r\n      config.mouseDownOnSelect = true;\r\n    }).mouseup(function() {\r\n      config.mouseDownOnSelect = false;\r\n    });\r\n\r\n    if( options.width > 0 )\r\n      element.css("width", options.width);\r\n\r\n    needsInit = false;\r\n  }\r\n\r\n  function target(event) {\r\n    var element = event.target;\r\n    while(element && element.tagName != "LI")\r\n      element = element.parentNode;\r\n    // more fun with IE, sometimes event.target is empty, just ignore it then\r\n    if(!element)\r\n      return [];\r\n    return element;\r\n  }\r\n\r\n  function moveSelect(step) {\r\n    listItems.slice(active, active + 1).removeClass(CLASSES.ACTIVE);\r\n    movePosition(step);\r\n        var activeItem = listItems.slice(active, active + 1).addClass(CLASSES.ACTIVE);\r\n        if(options.scroll) {\r\n            var offset = 0;\r\n            listItems.slice(0, active).each(function() {\r\n        offset += this.offsetHeight;\r\n      });\r\n            if((offset + activeItem[0].offsetHeight - list.scrollTop()) > list[0].clientHeight) {\r\n                list.scrollTop(offset + activeItem[0].offsetHeight - list.innerHeight());\r\n            } else if(offset < list.scrollTop()) {\r\n                list.scrollTop(offset);\r\n            }\r\n        }\r\n  };\r\n\r\n  function movePosition(step) {\r\n    active += step;\r\n    if (active < 0) {\r\n      active = listItems.size() - 1;\r\n    } else if (active >= listItems.size()) {\r\n      active = 0;\r\n    }\r\n  }\r\n\r\n  function limitNumberOfItems(available) {\r\n    return options.max && options.max < available\r\n      ? options.max\r\n      : available;\r\n  }\r\n\r\n  function fillList() {\r\n    list.empty();\r\n    var max = limitNumberOfItems(data.length);\r\n\r\n    if(term.length == 0 && options.defaultText !== false){\r\n      var i = 0;\r\n      var li = $("<li/>").html( options.defaultText ).addClass(i%2 == 0 ? "ac_even" : "ac_odd").appendTo(list)[0];\r\n      $.data(li, "ac_data", data[i]);\r\n    }\r\n    else {\r\n      for (var i=0; i < max; i++) {\r\n        if (!data[i])\r\n          continue;\r\n        var formatted = options.formatItem(data[i].data, i+1, max, data[i].value, term);\r\n        if ( formatted === false )\r\n          continue;\r\n        var li = $("<li/>").html( options.highlight(formatted, term) ).addClass(i%2 == 0 ? "ac_even" : "ac_odd").appendTo(list)[0];\r\n        $.data(li, "ac_data", data[i]);\r\n      }\r\n    }\r\n\r\n    listItems = list.find("li");\r\n    if ( options.selectFirst ) {\r\n      listItems.slice(0, 1).addClass(CLASSES.ACTIVE);\r\n      active = 0;\r\n    }\r\n    // apply bgiframe if available\r\n    if ( $.fn.bgiframe )\r\n      list.bgiframe();\r\n  }\r\n\r\n  return {\r\n    display: function(d, q) {\r\n      init();\r\n      data = d;\r\n      term = q;\r\n      fillList();\r\n    },\r\n    next: function() {\r\n      moveSelect(1);\r\n    },\r\n    prev: function() {\r\n      moveSelect(-1);\r\n    },\r\n    pageUp: function() {\r\n      if (active != 0 && active - 8 < 0) {\r\n        moveSelect( -active );\r\n      } else {\r\n        moveSelect(-8);\r\n      }\r\n    },\r\n    pageDown: function() {\r\n      if (active != listItems.size() - 1 && active + 8 > listItems.size()) {\r\n        moveSelect( listItems.size() - 1 - active );\r\n      } else {\r\n        moveSelect(8);\r\n      }\r\n    },\r\n    hide: function() {\r\n      element && element.hide();\r\n      listItems && listItems.removeClass(CLASSES.ACTIVE);\r\n      active = -1;\r\n    },\r\n    visible : function() {\r\n      return element && element.is(":visible");\r\n    },\r\n    current: function() {\r\n      return this.visible() && (listItems.filter("." + CLASSES.ACTIVE)[0] || options.selectFirst && listItems[0]);\r\n    },\r\n    show: function() {\r\n      var anchorObj = typeof options.anchorTo != \'undefined\' ? $(options.anchorTo) : $(input);\r\n      var offset = anchorObj.offset();\r\n      var newWidth = typeof options.width == "string" || options.width > 0 ? options.width : (anchorObj.outerWidth() - parseInt(anchorObj.css(\'border-left-width\')) - parseInt(anchorObj.css(\'border-right-width\')));\r\n      element.css({\r\n        width: newWidth,\r\n        top: offset.top + anchorObj.get(0).offsetHeight,\r\n        left: offset.left\r\n      }).show();\r\n      if(options.scroll) {\r\n        list.scrollTop(0);\r\n        list.css({\r\n          maxHeight: options.scrollHeight,\r\n          overflow: \'auto\'\r\n        });\r\n\r\n        if($.browser.msie && typeof document.body.style.maxHeight === "undefined") {\r\n          var listHeight = 0;\r\n          listItems.each(function() {\r\n            listHeight += this.offsetHeight;\r\n          });\r\n          var scrollbarsVisible = listHeight > options.scrollHeight;\r\n                    list.css(\'height\', scrollbarsVisible ? options.scrollHeight : listHeight );\r\n          if (!scrollbarsVisible) {\r\n            // IE doesn\'t recalculate width when scrollbar disappears\r\n            listItems.width( list.width() - parseInt(listItems.css("padding-left")) - parseInt(listItems.css("padding-right")) );\r\n          }\r\n        }\r\n      }\r\n    },\r\n    selected: function() {\r\n      var selected = listItems && listItems.filter("." + CLASSES.ACTIVE).removeClass(CLASSES.ACTIVE);\r\n      return selected && selected.length && $.data(selected[0], "ac_data");\r\n    },\r\n    emptyList: function (){\r\n      list && list.empty();\r\n    },\r\n    unbind: function() {\r\n      element && element.remove();\r\n    }\r\n  };\r\n};\r\n\r\n$.Autocompleter.Selection = function(field, start, end) {\r\n  if( field.createTextRange ){\r\n    var selRange = field.createTextRange();\r\n    selRange.collapse(true);\r\n    selRange.moveStart("character", start);\r\n    selRange.moveEnd("character", end);\r\n    selRange.select();\r\n  } else if( field.setSelectionRange ){\r\n    field.setSelectionRange(start, end);\r\n  } else {\r\n    if( field.selectionStart ){\r\n      field.selectionStart = start;\r\n      field.selectionEnd = end;\r\n    }\r\n  }\r\n  field.focus();\r\n};\r\n\r\n})(jQuery);\r\n'},function(e,t,n){n(3)(n(18))},function(e,t){e.exports="/*\n * ppDrag 0.2 - Extremely Fast Drag&Drop for jQuery\n * http://ppdrag.ppetrov.com/\n *\n * Copyright (c) 2008 Peter Petrov (ppetrov AT ppetrov.com)\n * Licensed under the LGPL (LGPL-LICENSE.txt) license.\n *\n * Patched to add triggered events for integration with other plugins\n */\n\n(function($) {\n\n\t$.fn.ppdrag = function(options) {\n\t\tif (typeof options == 'string') {\n\t\t\tif (options == 'destroy') return this.each(function() {\n\t\t\t\t$.ppdrag.removeEvent(this, 'mousedown', $.ppdrag.start, false);\n\t\t\t\t$.data(this, 'pp-ppdrag', null);\n\t\t\t});\n\t\t}\n\t\treturn this.each(function() {\n\t\t\t$.data(this, 'pp-ppdrag', { options: $.extend({}, options) });\n\t\t\t$.ppdrag.addEvent(this, 'mousedown', $.ppdrag.start, false);\n\t\t});\n\t};\n\n\t$.ppdrag = {\n\t\tstart: function(event) {\n\t\t\tif (!$.ppdrag.current) {\n\t\t\t\t$.ppdrag.current = {\n\t\t\t\t\tel: this,\n\t\t\t\t\toleft: parseInt(this.style.left) || 0,\n\t\t\t\t\totop: parseInt(this.style.top) || 0,\n\t\t\t\t\tox: event.pageX || event.screenX,\n\t\t\t\t\toy: event.pageY || event.screenY\n\t\t\t\t};\n\t\t\t\tvar current = $.ppdrag.current;\n\t\t\t\tvar data = $.data(current.el, 'pp-ppdrag');\n\t\t\t\tif (data.options.zIndex) {\n\t\t\t\t\tcurrent.zIndex = current.el.style.zIndex;\n\t\t\t\t\tcurrent.el.style.zIndex = data.options.zIndex;\n\t\t\t\t}\n\t\t\t\t$.ppdrag.addEvent(document, 'mouseup', $.ppdrag.stop, true);\n\t\t\t\t$.ppdrag.addEvent(document, 'mousemove', $.ppdrag.drag, true);\n\t\t\t}\n\t\t\tif (event.stopPropagation) event.stopPropagation();\n\t\t\tif (event.preventDefault) event.preventDefault();\n\t\t\t$($.ppdrag.current.el).trigger('ppdrag_start');\n\t\t\treturn false;\n\t\t},\n\n\t\tdrag: function(event) {\n\t\t\tif (!event) var event = window.event;\n\t\t\tvar current = $.ppdrag.current;\n\t\t\tcurrent.el.style.left = (current.oleft + (event.pageX || event.screenX) - current.ox) + 'px';\n\t\t\tcurrent.el.style.top = (current.otop + (event.pageY || event.screenY) - current.oy) + 'px';\n\t\t\tif (event.stopPropagation) event.stopPropagation();\n\t\t\tif (event.preventDefault) event.preventDefault();\n\t\t\treturn false;\n\t\t},\n\n\t\tstop: function(event) {\n\t\t\tvar current = $.ppdrag.current;\n\t\t\tvar data = $.data(current.el, 'pp-ppdrag');\n\t\t\t$.ppdrag.removeEvent(document, 'mousemove', $.ppdrag.drag, true);\n\t\t\t$.ppdrag.removeEvent(document, 'mouseup', $.ppdrag.stop, true);\n\t\t\tif (data.options.zIndex) {\n\t\t\t\tcurrent.el.style.zIndex = current.zIndex;\n\t\t\t}\n\t\t\tif (data.options.stop) {\n\t\t\t\tdata.options.stop.apply(current.el, [ current.el ]);\n\t\t\t}\n\t\t\t$.ppdrag.current = null;\n\t\t\tif (event.stopPropagation) event.stopPropagation();\n\t\t\tif (event.preventDefault) event.preventDefault();\n\n      var dropTarget = $.ppdrag.getDropTarget( event , $(current.el) );\n\n\t\t\t$(current.el).trigger('ppdrag_stop',[event,dropTarget]);\n\t\t\treturn false;\n\t\t},\n\n\t\taddEvent: function(obj, type, fn, mode) {\n\t\t\tif (obj.addEventListener)\n\t\t\t\tobj.addEventListener(type, fn, mode);\n\t\t\telse if (obj.attachEvent) {\n\t\t\t\tobj[\"e\"+type+fn] = fn;\n\t\t\t\tobj[type+fn] = function() { return obj[\"e\"+type+fn](window.event); }\n\t\t\t\tobj.attachEvent(\"on\"+type, obj[type+fn]);\n\t\t\t}\n\t\t},\n\n\t\tremoveEvent: function(obj, type, fn, mode) {\n\t\t\tif (obj.removeEventListener)\n\t\t\t\tobj.removeEventListener(type, fn, mode);\n\t\t\telse if (obj.detachEvent) {\n\t\t\t\tobj.detachEvent(\"on\"+type, obj[type+fn]);\n\t\t\t\tobj[type+fn] = null;\n\t\t\t\tobj[\"e\"+type+fn] = null;\n\t\t\t}\n\t\t},\n\n    // with some help from JQueryUI ddmanager\n\t\tgetDropTarget: function( e , srcItem )\n\t\t{\n      var options = srcItem.data('pp-ppdrag');\n      if(typeof options != 'object' || typeof options.options != 'object' || !options.options.dzObj)\n      \treturn false;\n      var dzOpts = options.options;\n\n      var item = dzOpts.dzSubSelector ? $( dzOpts.dzSubSelector , srcItem ) : srcItem;\n      var offset = item.offset();\n      var x = offset.left;\n      var y = offset.top;\n      var itemHeight = item[0].clientHeight;\n      var itemWidth = item[0].clientWidth;\n\n      var dzObj = dzOpts.dzObj;\n      var dzOffset = dzObj.offset();\n      var dropTarget = false;\n\n      // the element was dropped inside the dropzone\n      if( (y + itemHeight ) >= dzOffset.top && y < (dzOffset.top + dzObj[0].clientHeight) &&\n      \t( x + itemWidth ) >= dzOffset.left && x < (dzOffset.left + dzObj[0].clientWidth) )\n      {\n      \tvar childOffset,childWidth,childHeight,intersectWidth,intersectHeight,childArea;\n      \tvar intersectArea = 0;\n        var dzSelector = dzOpts.dzSelector ? dzOpts.dzSelector : '';\n        var not_self_id = dzSelector ? item.closest(dzSelector).attr('id') : item.attr('id');\n\n      \tdzObj.children( dzSelector + ':not(#'+String(not_self_id)+')').each(function(){\n      \t\tvar srcChildObj = $(this);\n          childOffset = srcChildObj.offset();\n          childHeight = srcChildObj[0].clientHeight;\n          childWidth = srcChildObj[0].clientWidth\n\n          // y range of this element is within the bounds of this child\n\t\t      if( y >= childOffset.top && y < (childOffset.top + childHeight) ||\n\t\t      \t((y + itemHeight) >= childOffset.top && (y + itemHeight) < (childOffset.top + childHeight)) )\n\t\t      {\n\t          // x range of this element is within the bounds of this child\n\t\t\t      if( x >= childOffset.left && x < (childOffset.left + childWidth) ||\n\t\t\t      \t((x + itemWidth) >= childOffset.left && (y + itemWidth) < (childOffset.left + childWidth)) )\n            {\n              // calculate the intersection of the objects to tell which is the 'most' target\n              intersectWidth = x < childOffset.left ? (x + itemWidth) - childOffset.left : (childOffset.left + childWidth) - x;\n              intersectHeight = y < childOffset.top ? (y + itemHeight) - childOffset.top : (childOffset.top + childHeight) + y;\n              childArea = intersectWidth * intersectHeight;\n\n              if( childArea > intersectArea )\n              {\n              \tintersectArea = childArea\n              \tdropTarget = srcChildObj;\n\n              \t// determine what sides of the drop target the item is near so it can\n              \t// attached back to the DOM before or after the drop target\n                var nearest_x = (x - childOffset.left) > 0 ? 'right' : 'left';\n              \tvar nearest_y = (y + itemHeight) > (childOffset.top + childHeight) ? 'bottom' : 'top';\n              \tdropTarget.data('ppdrag_dropProx', { 'x': nearest_x , 'y': nearest_y } )\n              }\n            }\n\t\t      }\n      \t});\n      }\n\n      return dropTarget;\n\t\t}\n\t};\n\n})(jQuery);\n"},function(e,t,n){
n(3)(n(20))},function(e,t){e.exports='/*!\n * jQuery UI Sortable 1.9.0\n * http://jqueryui.com\n *\n * Copyright 2012 jQuery Foundation and other contributors\n * Released under the MIT license.\n * http://jquery.org/license\n *\n * http://api.jqueryui.com/sortable/\n *\n * Depends:\n *\tjquery.ui.core.js\n *\tjquery.ui.mouse.js\n *\tjquery.ui.widget.js\n *\n * Schoology Addition Notes : \n *   SGY-24780 - Had to fix an issue with _mouseCapture where _mouseCapture would fire even if the item\'s class did not match the current options.items\n */\n(function( $, undefined ) {\n\nvar INTERSECT_DECREASING = 1,\n    INTERSECT_INCREASING = 2;\n\n$.widget("ui.sortable", $.ui.mouse, {\n\tversion: "1.9.0",\n\twidgetEventPrefix: "sort",\n\tready: false,\n\toptions: {\n\t\tappendTo: "parent",\n\t\taxis: false,\n\t\tconnectWith: false,\n\t\tcontainment: false,\n\t\tcursor: \'auto\',\n\t\tcursorAt: false,\n\t\tdropOnEmpty: true,\n    expandDelay: 0,\n\t\tforcePlaceholderSize: false,\n\t\tforceHelperSize: false,\n\t\tgrid: false,\n\t\thandle: false,\n\t\thelper: "original",\n\t\titems: \'> *\',\n\t\topacity: false,\n\t\tplaceholder: false,\n\t\trevert: false,\n\t\tscroll: true,\n\t\tscrollSensitivity: 20,\n\t\tscrollSpeed: 20,\n\t\tscope: "default",\n\t\ttolerance: "intersect",\n\t\tzIndex: 1000\n\t},\n\t_create: function() {\n\n\t\tvar o = this.options;\n\t\tthis.containerCache = {};\n\t\tthis.element.addClass("ui-sortable");\n\n\t\t//Get the items\n\t\tthis.refresh();\n\n\t\t//Let\'s determine if the items are being displayed horizontally\n\t\tthis.floating = this.items.length ? o.axis === \'x\' || (/left|right/).test(this.items[0].item.css(\'float\')) || (/inline|table-cell/).test(this.items[0].item.css(\'display\')) : false;\n\n\t\t//Let\'s determine the parent\'s offset\n\t\tthis.offset = this.element.offset();\n\n\t\t//Initialize mouse events for interaction\n\t\tthis._mouseInit();\n\n\t\t//We\'re ready to go\n\t\tthis.ready = true\n\n\t},\n\n\t_destroy: function() {\n\t\tthis.element\n\t\t\t.removeClass("ui-sortable ui-sortable-disabled");\n\t\tthis._mouseDestroy();\n\n\t\tfor ( var i = this.items.length - 1; i >= 0; i-- )\n\t\t\tthis.items[i].item.removeData(this.widgetName + "-item");\n\n\t\treturn this;\n\t},\n\n\t_setOption: function(key, value){\n\t\tif ( key === "disabled" ) {\n\t\t\tthis.options[ key ] = value;\n\n\t\t\tthis.widget().toggleClass( "ui-sortable-disabled", !!value );\n\t\t} else {\n\t\t\t// Don\'t call widget base _setOption for disable as it adds ui-state-disabled class\n\t\t\t$.Widget.prototype._setOption.apply(this, arguments);\n\t\t}\n\t},\n\n\t_mouseCapture: function(event, overrideHandle) {\n\t\tvar that = this;\n\n\t\tif (this.reverting) {\n\t\t\treturn false;\n\t\t}\n\n\t\tif(this.options.disabled || this.options.type == \'static\') return false;\n\n\t\t//We have to refresh the items data once first\n\t\tthis._refreshItems(event);\n\n\t\t//Find out if the clicked node (or one of its parents) is a actual item in this.items\n\t\tvar currentItem = null, nodes = $(event.target).parents().each(function() {\n\t\t\tif($.data(this, that.widgetName + \'-item\') == that) {\n\t\t\t\tcurrentItem = $(this);\n\t\t\t\treturn false;\n\t\t\t}\n\t\t});\n\t\tif($.data(event.target, that.widgetName + \'-item\') == that) currentItem = $(event.target);\n    \n\t\t// SGY-24780 - Schoology addition, if the current item does not match the options.items selector, prevent the current action\n\t\tif(!currentItem || !currentItem.is($(this.element).find(this.options.items))) return false;\n\n\t\tif(this.options.handle && !overrideHandle) {\n\t\t\tvar validHandle = false;\n\n\t\t\t$(this.options.handle, currentItem).find("*").andSelf().each(function() { if(this == event.target) validHandle = true; });\n\t\t\tif(!validHandle) return false;\n\t\t}\n\n\t\tthis.currentItem = currentItem;\n\t\tthis._removeCurrentsFromItems();\n\t\treturn true;\n\n\t},\n\n\t_mouseStart: function(event, overrideHandle, noActivation) {\n\n\t\tvar o = this.options;\n\t\tthis.currentContainer = this;\n\n\t\t//We only need to call refreshPositions, because the refreshItems call has been moved to mouseCapture\n\t\tthis.refreshPositions();\n\n\t\t//Create and append the visible helper\n\t\tthis.helper = this._createHelper(event);\n\n\t\t//Cache the helper size\n\t\tthis._cacheHelperProportions();\n\n\t\t/*\n\t\t * - Position generation -\n\t\t * This block generates everything position related - it\'s the core of draggables.\n\t\t */\n\n\t\t//Cache the margins of the original element\n\t\tthis._cacheMargins();\n\n\t\t//Get the next scrolling parent\n\t\tthis.scrollParent = this.helper.scrollParent();\n\n\t\t//The element\'s absolute position on the page minus margins\n\t\tthis.offset = this.currentItem.offset();\n\t\tthis.offset = {\n\t\t\ttop: this.offset.top - this.margins.top,\n\t\t\tleft: this.offset.left - this.margins.left\n\t\t};\n\n\t\t$.extend(this.offset, {\n\t\t\tclick: { //Where the click happened, relative to the element\n\t\t\t\tleft: event.pageX - this.offset.left,\n\t\t\t\ttop: event.pageY - this.offset.top\n\t\t\t},\n\t\t\tparent: this._getParentOffset(),\n\t\t\trelative: this._getRelativeOffset() //This is a relative to absolute position minus the actual position calculation - only used for relative positioned helper\n\t\t});\n\n\t\t// Only after we got the offset, we can change the helper\'s position to absolute\n\t\t// TODO: Still need to figure out a way to make relative sorting possible\n\t\tthis.helper.css("position", "absolute");\n\t\tthis.cssPosition = this.helper.css("position");\n\n\t\t//Generate the original position\n\t\tthis.originalPosition = this._generatePosition(event);\n\t\tthis.originalPageX = event.pageX;\n\t\tthis.originalPageY = event.pageY;\n\n\t\t//Adjust the mouse offset relative to the helper if \'cursorAt\' is supplied\n\t\t(o.cursorAt && this._adjustOffsetFromHelper(o.cursorAt));\n\n\t\t//Cache the former DOM position\n\t\tthis.domPosition = { prev: this.currentItem.prev()[0], parent: this.currentItem.parent()[0] };\n\n\t\t//If the helper is not the original, hide the original so it\'s not playing any role during the drag, won\'t cause anything bad this way\n\t\tif(this.helper[0] != this.currentItem[0]) {\n\t\t\tthis.currentItem.hide();\n\t\t}\n\n\t\t//Create the placeholder\n\t\tthis._createPlaceholder();\n\n\t\t//Set a containment if given in the options\n\t\tif(o.containment)\n\t\t\tthis._setContainment();\n\n\t\tif(o.cursor) { // cursor option\n\t\t\tif ($(\'body\').css("cursor")) this._storedCursor = $(\'body\').css("cursor");\n\t\t\t$(\'body\').css("cursor", o.cursor);\n\t\t}\n\n\t\tif(o.opacity) { // opacity option\n\t\t\tif (this.helper.css("opacity")) this._storedOpacity = this.helper.css("opacity");\n\t\t\tthis.helper.css("opacity", o.opacity);\n\t\t}\n\n\t\tif(o.zIndex) { // zIndex option\n\t\t\tif (this.helper.css("zIndex")) this._storedZIndex = this.helper.css("zIndex");\n\t\t\tthis.helper.css("zIndex", o.zIndex);\n\t\t}\n\n\t\t//Prepare scrolling\n\t\tif(this.scrollParent[0] != document && this.scrollParent[0].tagName != \'HTML\')\n\t\t\tthis.overflowOffset = this.scrollParent.offset();\n\n\t\t//Call callbacks\n\t\tthis._trigger("start", event, this._uiHash());\n\n\t\t//Recache the helper size\n\t\tif(!this._preserveHelperProportions)\n\t\t\tthis._cacheHelperProportions();\n\n\n\t\t//Post \'activate\' events to possible containers\n\t\tif(!noActivation) {\n\t\t\t for (var i = this.containers.length - 1; i >= 0; i--) { this.containers[i]._trigger("activate", event, this._uiHash(this)); }\n\t\t}\n\n\t\t//Prepare possible droppables\n\t\tif($.ui.ddmanager)\n\t\t\t$.ui.ddmanager.current = this;\n\n\t\tif ($.ui.ddmanager && !o.dropBehaviour)\n\t\t\t$.ui.ddmanager.prepareOffsets(this, event);\n\n\t\tthis.dragging = true;\n\n\t\tthis.helper.addClass("ui-sortable-helper");\n\t\tthis._mouseDrag(event); //Execute the drag once - this causes the helper not to be visible before getting its correct position\n\t\treturn true;\n\n\t},\n\n\t_mouseDrag: function(event) {\n\n\t\t//Compute the helpers position\n\t\tthis.position = this._generatePosition(event);\n\t\tthis.positionAbs = this._convertPositionTo("absolute");\n\n\t\tif (!this.lastPositionAbs) {\n\t\t\tthis.lastPositionAbs = this.positionAbs;\n\t\t}\n\n\t\t//Do scrolling\n\t\tif(this.options.scroll) {\n\t\t\tvar o = this.options, scrolled = false;\n\t\t\tif(this.scrollParent[0] != document && this.scrollParent[0].tagName != \'HTML\') {\n\n\t\t\t\tif((this.overflowOffset.top + this.scrollParent[0].offsetHeight) - event.pageY < o.scrollSensitivity)\n\t\t\t\t\tthis.scrollParent[0].scrollTop = scrolled = this.scrollParent[0].scrollTop + o.scrollSpeed;\n\t\t\t\telse if(event.pageY - this.overflowOffset.top < o.scrollSensitivity)\n\t\t\t\t\tthis.scrollParent[0].scrollTop = scrolled = this.scrollParent[0].scrollTop - o.scrollSpeed;\n\n\t\t\t\tif((this.overflowOffset.left + this.scrollParent[0].offsetWidth) - event.pageX < o.scrollSensitivity)\n\t\t\t\t\tthis.scrollParent[0].scrollLeft = scrolled = this.scrollParent[0].scrollLeft + o.scrollSpeed;\n\t\t\t\telse if(event.pageX - this.overflowOffset.left < o.scrollSensitivity)\n\t\t\t\t\tthis.scrollParent[0].scrollLeft = scrolled = this.scrollParent[0].scrollLeft - o.scrollSpeed;\n\n\t\t\t} else {\n\n\t\t\t\tif(event.pageY - $(document).scrollTop() < o.scrollSensitivity)\n\t\t\t\t\tscrolled = $(document).scrollTop($(document).scrollTop() - o.scrollSpeed);\n\t\t\t\telse if($(window).height() - (event.pageY - $(document).scrollTop()) < o.scrollSensitivity)\n\t\t\t\t\tscrolled = $(document).scrollTop($(document).scrollTop() + o.scrollSpeed);\n\n\t\t\t\tif(event.pageX - $(document).scrollLeft() < o.scrollSensitivity)\n\t\t\t\t\tscrolled = $(document).scrollLeft($(document).scrollLeft() - o.scrollSpeed);\n\t\t\t\telse if($(window).width() - (event.pageX - $(document).scrollLeft()) < o.scrollSensitivity)\n\t\t\t\t\tscrolled = $(document).scrollLeft($(document).scrollLeft() + o.scrollSpeed);\n\n\t\t\t}\n\n\t\t\tif(scrolled !== false && $.ui.ddmanager && !o.dropBehaviour)\n\t\t\t\t$.ui.ddmanager.prepareOffsets(this, event);\n\t\t}\n\n\t\t//Regenerate the absolute position used for position checks\n\t\tthis.positionAbs = this._convertPositionTo("absolute");\n    \n    var y_offset = 0;\n    var x_offset = 0;\n\n\t\t//Set the helper position\n\t\tif(!this.options.axis || this.options.axis != "y")\n      this.helper[0].style.left = String(Number(this.position.left)+x_offset)+\'px\';\n\n\t\tif(!this.options.axis || this.options.axis != "x")\n      this.helper[0].style.top = String(Number(this.position.top)+y_offset)+\'px\';\n\n    // Check and reset hovering state at each cycle\n    // From http://mjsarfatti.com/sandbox/nestedSortable\n    this.hovering = this.hovering ? this.hovering : null;\n\n\t\t//Rearrange\n\t\tfor (var i = this.items.length - 1; i >= 0; i--) {\n\n\t\t\t//Cache variables and intersection, continue if no intersection\n\t\t\tvar item = this.items[i], itemElement = item.item[0], intersection = this._intersectsWithPointer(item);\n\t\t\tif (!intersection) continue;\n\n\t\t\t// Only put the placeholder inside the current Container, skip all\n\t\t\t// items form other containers. This works because when moving\n\t\t\t// an item from one container to another the\n\t\t\t// currentContainer is switched before the placeholder is moved.\n\t\t\t//\n\t\t\t// Without this moving items in "sub-sortables" can cause the placeholder to jitter\n\t\t\t// beetween the outer and inner container.\n\t\t\tif (item.instance !== this.currentContainer) continue;\n\n\t\t\tif (itemElement != this.currentItem[0] //cannot intersect with itself\n\t\t\t\t&&\tthis.placeholder[intersection == INTERSECT_DECREASING ? "next" : "prev"]()[0] != itemElement //no useless actions that have been done before\n\t\t\t\t&&\t!$.contains(this.placeholder[0], itemElement) //no action if the item moved is the parent of the item checked\n\t\t\t\t&& (this.options.type == \'semi-dynamic\' ? !$.contains(this.element[0], itemElement) : true)\n\t\t\t\t//&& itemElement.parentNode == this.placeholder[0].parentNode // only rearrange items within the same container\n\t\t\t) {\n\n        // Trigger an \'expand\' function if hovering\n        // From http://mjsarfatti.com/sandbox/nestedSortable\n        if (this.options.expandDelay) {\n          this.hovering && window.clearTimeout(this.hovering);\n          var self = this;\n          var hoverTarget = $(itemElement);\n          this.hovering = window.setTimeout(function() {\n            self._trigger("expand", event, hoverTarget);\n            self.refresh(event);\n          }, this.options.expandDelay);\n        }\n\n\t\t\t\tthis.direction = intersection == INTERSECT_DECREASING ? "down" : "up";\n        \n\t\t\t\tif (this.options.tolerance == "pointer" || this._intersectsWithSides(item)) {\n\t\t\t\t\tthis._rearrange(event, item);\n\t\t\t\t} else {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tthis._trigger("change", event, this._uiHash());\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\t//Post events to containers\n\t\tthis._contactContainers(event);\n\n\t\t//Interconnect with droppables\n\t\tif($.ui.ddmanager) $.ui.ddmanager.drag(this, event);\n\n\t\t//Call callbacks\n\t\tthis._trigger(\'sort\', event, this._uiHash());\n\n\t\tthis.lastPositionAbs = this.positionAbs;\n\t\treturn false;\n\n\t},\n\n\t_mouseStop: function(event, noPropagation) {\n\n\t\tif(!event) return;\n\n\t\t//If we are using droppables, inform the manager about the drop\n\t\tif ($.ui.ddmanager && !this.options.dropBehaviour)\n\t\t\t$.ui.ddmanager.drop(this, event);\n\n\t\tif(this.options.revert) {\n\t\t\tvar that = this;\n\t\t\tvar cur = this.placeholder.offset();\n\n\t\t\tthis.reverting = true;\n\n\t\t\t$(this.helper).animate({\n\t\t\t\tleft: cur.left - this.offset.parent.left - this.margins.left + (this.offsetParent[0] == document.body ? 0 : this.offsetParent[0].scrollLeft),\n\t\t\t\ttop: cur.top - this.offset.parent.top - this.margins.top + (this.offsetParent[0] == document.body ? 0 : this.offsetParent[0].scrollTop)\n\t\t\t}, parseInt(this.options.revert, 10) || 500, function() {\n\t\t\t\tthat._clear(event);\n\t\t\t});\n\t\t} else {\n\t\t\tthis._clear(event, noPropagation);\n\t\t}\n\n\t\treturn false;\n\n\t},\n\n\tcancel: function() {\n\n\t\tif(this.dragging) {\n\n\t\t\tthis._mouseUp({ target: null });\n\n\t\t\tif(this.options.helper == "original")\n\t\t\t\tthis.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper");\n\t\t\telse\n\t\t\t\tthis.currentItem.show();\n\n\t\t\t//Post deactivating events to containers\n\t\t\tfor (var i = this.containers.length - 1; i >= 0; i--){\n\t\t\t\tthis.containers[i]._trigger("deactivate", null, this._uiHash(this));\n\t\t\t\tif(this.containers[i].containerCache.over) {\n\t\t\t\t\tthis.containers[i]._trigger("out", null, this._uiHash(this));\n\t\t\t\t\tthis.containers[i].containerCache.over = 0;\n\t\t\t\t}\n\t\t\t}\n\n\t\t}\n\n\t\tif (this.placeholder) {\n\t\t\t//$(this.placeholder[0]).remove(); would have been the jQuery way - unfortunately, it unbinds ALL events from the original node!\n\t\t\tif(this.placeholder[0].parentNode) this.placeholder[0].parentNode.removeChild(this.placeholder[0]);\n\t\t\tif(this.options.helper != "original" && this.helper && this.helper[0].parentNode) this.helper.remove();\n\n\t\t\t$.extend(this, {\n\t\t\t\thelper: null,\n\t\t\t\tdragging: false,\n\t\t\t\treverting: false,\n\t\t\t\t_noFinalSort: null\n\t\t\t});\n\n\t\t\tif(this.domPosition.prev) {\n\t\t\t\t$(this.domPosition.prev).after(this.currentItem);\n\t\t\t} else {\n\t\t\t\t$(this.domPosition.parent).prepend(this.currentItem);\n\t\t\t}\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tserialize: function(o) {\n\n\t\tvar items = this._getItemsAsjQuery(o && o.connected);\n\t\tvar str = []; o = o || {};\n\n\t\t$(items).each(function() {\n\t\t\tvar res = ($(o.item || this).attr(o.attribute || \'id\') || \'\').match(o.expression || (/(.+)[-=_](.+)/));\n\t\t\tif(res) str.push((o.key || res[1]+\'[]\')+\'=\'+(o.key && o.expression ? res[1] : res[2]));\n\t\t});\n\n\t\tif(!str.length && o.key) {\n\t\t\tstr.push(o.key + \'=\');\n\t\t}\n\n\t\treturn str.join(\'&\');\n\n\t},\n\n\ttoArray: function(o) {\n\n\t\tvar items = this._getItemsAsjQuery(o && o.connected);\n\t\tvar ret = []; o = o || {};\n\n\t\titems.each(function() { ret.push($(o.item || this).attr(o.attribute || \'id\') || \'\'); });\n\t\treturn ret;\n\n\t},\n\n\t/* Be careful with the following core functions */\n\t_intersectsWith: function(item) {\n\n\t\tvar x1 = this.positionAbs.left,\n\t\t\tx2 = x1 + this.helperProportions.width,\n\t\t\ty1 = this.positionAbs.top,\n\t\t\ty2 = y1 + this.helperProportions.height;\n\n\t\tvar l = item.left,\n\t\t\tr = l + item.width,\n\t\t\tt = item.top,\n\t\t\tb = t + item.height;\n\n\t\tif(\t   this.options.tolerance == "pointer"\n\t\t\t|| this.options.forcePointerForContainers\n\t\t\t|| (this.options.tolerance != "pointer" && this.helperProportions[this.floating ? \'width\' : \'height\'] > item[this.floating ? \'width\' : \'height\'])\n\t\t) {\n      var dyClick = this.offset.click.top,\n        dxClick = this.offset.click.left;\n\n      var isOverElement = (y1 + dyClick) > t && (y1 + dyClick) < b && (x1 + dxClick) > l && (x1 + dxClick) < r;\n\t\t\treturn isOverElement;\n\t\t} else {\n\t\t\treturn (l < x1 + (this.helperProportions.width / 2) // Right Half\n\t\t\t\t&& x2 - (this.helperProportions.width / 2) < r // Left Half\n\t\t\t\t&& t < y1 + (this.helperProportions.height / 2) // Bottom Half\n\t\t\t\t&& y2 - (this.helperProportions.height / 2) < b ); // Top Half\n\n\t\t}\n\t},\n\n  /**\n   * Determine if the given item is being moused over by the pointer\n   * When there is an intersect, a INTERSECT_* constant is returned to signify whether the drag direction is\n   * increasing or decreasing:\n   * INTERSECT_INCREASING - the pointer is being moved to the right and/or down\n   * INTERSECT_DECREASING - the pointer is being moved to the left and/or up\n   *\n   * @param object item\n   * @return bool/int  false if not intersected, INTERSECT_INCREASING/INTERSECT_DECREASING depending on drag direction\n   */\n\t_intersectsWithPointer: function(item) {\n\n\t\tvar isOverElementHeight = (this.options.axis === \'x\') || $.ui.isOverAxis(this.positionAbs.top + this.offset.click.top, item.top, item.height),\n\t\t\tisOverElementWidth = (this.options.axis === \'y\') || $.ui.isOverAxis(this.positionAbs.left + this.offset.click.left, item.left, item.width),\n\t\t\tisOverElement = isOverElementHeight && isOverElementWidth,\n\t\t\tverticalDirection = this._getDragVerticalDirection(),\n\t\t\thorizontalDirection = this._getDragHorizontalDirection();\n\n\t\tif (!isOverElement)\n\t\t\treturn false;\n\n\t\treturn this.floating ?\n\t\t\t( ((horizontalDirection && horizontalDirection == "right") || verticalDirection == "down") ? INTERSECT_INCREASING : INTERSECT_DECREASING )\n\t\t\t: ( verticalDirection && (verticalDirection == "down" ? INTERSECT_INCREASING : INTERSECT_DECREASING) );\n\n\t},\n\n\t_intersectsWithSides: function(item) {\n\t\tvar isOverBottomHalf = this._isOverBottomHalf(item),\n\t\t\tisOverRightHalf = this._isOverRightHalf(item),\n\t\t\tverticalDirection = this._getDragVerticalDirection(),\n\t\t\thorizontalDirection = this._getDragHorizontalDirection();\n\n\t\tif (this.floating && horizontalDirection) {\n\t\t\treturn ((horizontalDirection == "right" && isOverRightHalf) || (horizontalDirection == "left" && !isOverRightHalf));\n\t\t} else {\n\t\t\treturn verticalDirection && ((verticalDirection == "down" && isOverBottomHalf) || (verticalDirection == "up" && !isOverBottomHalf));\n\t\t}\n\n\t},\n\n  _isOverBottomHalf: function(item){\n    return $.ui.isOverAxis(this.positionAbs.top + this.offset.click.top, item.top + (item.height/2), item.height / 2);\n  },\n\n  _isOverRightHalf: function(item){\n    return $.ui.isOverAxis(this.positionAbs.left + this.offset.click.left, item.left + (item.width/2), item.width / 2);\n  },\n\n\t_getDragVerticalDirection: function() {\n\t\tvar delta = this.positionAbs.top - this.lastPositionAbs.top;\n\t\treturn delta != 0 && (delta > 0 ? "down" : "up");\n\t},\n\n\t_getDragHorizontalDirection: function() {\n\t\tvar delta = this.positionAbs.left - this.lastPositionAbs.left;\n\t\treturn delta != 0 && (delta > 0 ? "right" : "left");\n\t},\n\n\trefresh: function(event) {\n\t\tthis._refreshItems(event);\n\t\tthis.refreshPositions();\n\t\treturn this;\n\t},\n\n\t_connectWith: function() {\n\t\tvar options = this.options;\n\t\treturn options.connectWith.constructor == String\n\t\t\t? [options.connectWith]\n\t\t\t: options.connectWith;\n\t},\n\n\t_getItemsAsjQuery: function(connected) {\n\n\t\tvar items = [];\n\t\tvar queries = [];\n\t\tvar connectWith = this._connectWith();\n\n\t\tif(connectWith && connected) {\n\t\t\tfor (var i = connectWith.length - 1; i >= 0; i--){\n\t\t\t\tvar cur = $(connectWith[i]);\n\t\t\t\tfor (var j = cur.length - 1; j >= 0; j--){\n\t\t\t\t\tvar inst = $.data(cur[j], this.widgetName);\n\t\t\t\t\tif(inst && inst != this && !inst.options.disabled) {\n\t\t\t\t\t\tqueries.push([$.isFunction(inst.options.items) ? inst.options.items.call(inst.element) : $(inst.options.items, inst.element).not(".ui-sortable-helper").not(\'.ui-sortable-placeholder\'), inst]);\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t};\n\t\t}\n\n\t\tqueries.push([$.isFunction(this.options.items) ? this.options.items.call(this.element, null, { options: this.options, item: this.currentItem }) : $(this.options.items, this.element).not(".ui-sortable-helper").not(\'.ui-sortable-placeholder\'), this]);\n\n\t\tfor (var i = queries.length - 1; i >= 0; i--){\n\t\t\tqueries[i][0].each(function() {\n\t\t\t\titems.push(this);\n\t\t\t});\n\t\t};\n\n\t\treturn $(items);\n\n\t},\n\n\t_removeCurrentsFromItems: function() {\n\n\t\tvar list = this.currentItem.find(":data(" + this.widgetName + "-item)");\n\n\t\tfor (var i=0; i < this.items.length; i++) {\n\n\t\t\tfor (var j=0; j < list.length; j++) {\n\t\t\t\tif(list[j] == this.items[i].item[0])\n\t\t\t\t\tthis.items.splice(i,1);\n\t\t\t};\n\n\t\t};\n\n\t},\n\n\t_refreshItems: function(event) {\n\n\t\tthis.items = [];\n\t\tthis.containers = [this];\n\t\tvar items = this.items;\n\t\tvar queries = [[$.isFunction(this.options.items) ? this.options.items.call(this.element[0], event, { item: this.currentItem }) : $(this.options.items, this.element).not(".ui-sortable-helper").not(\'.ui-sortable-placeholder\'), this]];\n\t\tvar connectWith = this._connectWith();\n\n\t\tif(connectWith && this.ready) { //Shouldn\'t be run the first time through due to massive slow-down\n\t\t\tfor (var i = connectWith.length - 1; i >= 0; i--){\n\t\t\t\tvar cur = $(connectWith[i]);\n\t\t\t\tfor (var j = cur.length - 1; j >= 0; j--){\n\t\t\t\t\tvar inst = $.data(cur[j], this.widgetName);\n\t\t\t\t\tif(inst && inst != this && !inst.options.disabled) {\n\t\t\t\t\t\tqueries.push([$.isFunction(inst.options.items) ? inst.options.items.call(inst.element[0], event, { item: this.currentItem }) : $(inst.options.items, inst.element), inst]);\n\t\t\t\t\t\tthis.containers.push(inst);\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t};\n\t\t}\n\n\t\tfor (var i = queries.length - 1; i >= 0; i--) {\n\t\t\tvar targetData = queries[i][1];\n\t\t\tvar _queries = queries[i][0];\n\n\t\t\tfor (var j=0, queriesLength = _queries.length; j < queriesLength; j++) {\n\t\t\t\tvar item = $(_queries[j]);\n\n\t\t\t\titem.data(this.widgetName + \'-item\', targetData); // Data for target checking (mouse manager)\n\n\t\t\t\titems.push({\n\t\t\t\t\titem: item,\n\t\t\t\t\tinstance: targetData,\n\t\t\t\t\twidth: 0, height: 0,\n\t\t\t\t\tleft: 0, top: 0\n\t\t\t\t});\n\t\t\t};\n\t\t};\n\n\t},\n\n\trefreshPositions: function(fast) {\n\n\t\t//This has to be redone because due to the item being moved out/into the offsetParent, the offsetParent\'s position will change\n\t\tif(this.offsetParent && this.helper) {\n\t\t\tthis.offset.parent = this._getParentOffset();\n\t\t}\n\n\t\tfor (var i = this.items.length - 1; i >= 0; i--){\n\t\t\tvar item = this.items[i];\n\n\t\t\t//We ignore calculating positions of all connected containers when we\'re not over them\n\t\t\tif(item.instance != this.currentContainer && this.currentContainer && item.item[0] != this.currentItem[0])\n\t\t\t\tcontinue;\n\n      this._refreshItemPosition(item, fast);\n\t\t};\n\n\t\tif(this.options.custom && this.options.custom.refreshContainers) {\n\t\t\tthis.options.custom.refreshContainers.call(this);\n\t\t} else {\n\t\t\tfor (var i = this.containers.length - 1; i >= 0; i--){\n\t\t\t\tvar p = this.containers[i].element.offset();\n\t\t\t\tthis.containers[i].containerCache.left = p.left;\n\t\t\t\tthis.containers[i].containerCache.top = p.top;\n\t\t\t\tthis.containers[i].containerCache.width\t= this.containers[i].element.outerWidth();\n\t\t\t\tthis.containers[i].containerCache.height = this.containers[i].element.outerHeight();\n\t\t\t};\n\t\t}\n\n\t\treturn this;\n\t},\n\n  _refreshItemPosition: function(item, fast) {\n    var t = this.options.toleranceElement ? $(this.options.toleranceElement, item.item) : item.item;\n\n    if (!fast) {\n      item.width = t.outerWidth();\n      item.height = t.outerHeight();\n    }\n\n    var p = t.offset();\n    item.left = p.left;\n    item.top = p.top;\n  },\n\n\t_createPlaceholder: function(that) {\n\t\tthat = that || this;\n\t\tvar o = that.options;\n\n\t\tif(!o.placeholder || o.placeholder.constructor == String) {\n\t\t\tvar className = o.placeholder;\n\t\t\to.placeholder = {\n\t\t\t\telement: function() {\n\n\t\t\t\t\tvar el = $(document.createElement(that.currentItem[0].nodeName))\n\t\t\t\t\t\t.addClass(className || that.currentItem[0].className+" ui-sortable-placeholder")\n\t\t\t\t\t\t.removeClass("ui-sortable-helper")[0];\n\n\t\t\t\t\tif(!className)\n\t\t\t\t\t\tel.style.visibility = "hidden";\n\n\t\t\t\t\treturn el;\n\t\t\t\t},\n\t\t\t\tupdate: function(container, p) {\n\n\t\t\t\t\t// 1. If a className is set as \'placeholder option, we don\'t force sizes - the class is responsible for that\n\t\t\t\t\t// 2. The option \'forcePlaceholderSize can be enabled to force it even if a class name is specified\n\t\t\t\t\tif(className && !o.forcePlaceholderSize) return;\n\n\t\t\t\t\t//If the element doesn\'t have a actual height by itself (without styles coming from a stylesheet), it receives the inline height from the dragged item\n\t\t\t\t\tif(!p.height()) { p.height(that.currentItem.innerHeight() - parseInt(that.currentItem.css(\'paddingTop\')||0, 10) - parseInt(that.currentItem.css(\'paddingBottom\')||0, 10)); };\n\t\t\t\t\tif(!p.width()) { p.width(that.currentItem.innerWidth() - parseInt(that.currentItem.css(\'paddingLeft\')||0, 10) - parseInt(that.currentItem.css(\'paddingRight\')||0, 10)); };\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\n\t\t//Create the placeholder\n\t\tthat.placeholder = $(o.placeholder.element.call(that.element, that.currentItem));\n\n\t\t//Append it after the actual current item\n\t\tthat.currentItem.after(that.placeholder);\n\n\t\t//Update the size of the placeholder (TODO: Logic to fuzzy, see line 316/317)\n\t\to.placeholder.update(that, that.placeholder);\n\n\t},\n\n\t_contactContainers: function(event) {\n\n\t\t// get innermost container that intersects with item\n\t\tvar innermostContainer = null, innermostIndex = null;\n\n\n\t\tfor (var i = this.containers.length - 1; i >= 0; i--){\n\n\t\t\t// never consider a container that\'s located within the item itself\n\t\t\tif($.contains(this.currentItem[0], this.containers[i].element[0]))\n\t\t\t\tcontinue;\n\n\t\t\tif(this._intersectsWith(this.containers[i].containerCache)) {\n\t\t\t\t// if we\'ve already found a container and it\'s more "inner" than this, then continue\n\t\t\t\tif(innermostContainer && $.contains(this.containers[i].element[0], innermostContainer.element[0]))\n\t\t\t\t\tcontinue;\n\n\t\t\t\tinnermostContainer = this.containers[i];\n\t\t\t\tinnermostIndex = i;\n\n\t\t\t} else {\n\t\t\t\t// container doesn\'t intersect. trigger "out" event if necessary\n\t\t\t\tif(this.containers[i].containerCache.over) {\n\t\t\t\t\tthis.containers[i]._trigger("out", event, this._uiHash(this));\n\t\t\t\t\tthis.containers[i].containerCache.over = 0;\n\t\t\t\t}\n\t\t\t}\n\n\t\t}\n\n\t\t// if no intersecting containers found, return\n\t\tif(!innermostContainer) return;\n\n\t\t// move the item into the container if it\'s not there already\n\t\tif(this.containers.length === 1) {\n\t\t\tthis.containers[innermostIndex]._trigger("over", event, this._uiHash(this));\n\t\t\tthis.containers[innermostIndex].containerCache.over = 1;\n\t\t} else if(this.currentContainer != this.containers[innermostIndex]) {\n\n\t\t\t//When entering a new container, we will find the item with the least distance and append our item near it\n\t\t\tvar dist = 10000;\n      var itemWithLeastDistance = null;\n      var floating = this.containers[innermostIndex].floating;\n      var base = floating? this.positionAbs.left : this.positionAbs.top;\n\t\t\tfor (var j = this.items.length - 1; j >= 0; j--) {\n\t\t\t\tif(!$.contains(this.containers[innermostIndex].element[0], this.items[j].item[0])) continue;\n\t\t\t\tvar itemPosition = floating ? this.items[j].item.offset().left : this.items[j].item.offset().top;\n\t\t\t\tif(Math.abs(itemPosition - base) < dist) {\n\t\t\t\t\tdist = Math.abs(itemPosition - base);\n          itemWithLeastDistance = this.items[j];\n\t\t\t\t}\n\t\t\t}\n\n      if(itemWithLeastDistance){\n        // we just switched to a new container, calculate the dimensions of the elements inside the new container\n        // so we can perform the following direction calculation\n        this._refreshItemPosition(itemWithLeastDistance);\n\n        // if an item is detected in the new container, determine if we are to the right or below the item with the least distance\n        // if we are to the right or below the item, the direction should be up so the contents is pushed up\n        var after = floating ? this._isOverRightHalf(itemWithLeastDistance) : this._isOverBottomHalf(itemWithLeastDistance);\n        this.direction = after ? \'up\' : \'down\';\n      }\n\n\t\t\tif(!itemWithLeastDistance && !this.options.dropOnEmpty) //Check if dropOnEmpty is enabled\n\t\t\t\treturn;\n\n\t\t\tthis.currentContainer = this.containers[innermostIndex];\n\t\t\titemWithLeastDistance ? this._rearrange(event, itemWithLeastDistance, null, true) : this._rearrange(event, null, this.containers[innermostIndex].element, true);\n\t\t\tthis._trigger("change", event, this._uiHash());\n\t\t\tthis.containers[innermostIndex]._trigger("change", event, this._uiHash(this));\n\n\t\t\t//Update the placeholder\n\t\t\tthis.options.placeholder.update(this.currentContainer, this.placeholder);\n\n\t\t\tthis.containers[innermostIndex]._trigger("over", event, this._uiHash(this));\n\t\t\tthis.containers[innermostIndex].containerCache.over = 1;\n\t\t}\n\n\n\t},\n\n\t_createHelper: function(event) {\n\n\t\tvar o = this.options;\n\t\tvar helper = $.isFunction(o.helper) ? $(o.helper.apply(this.element[0], [event, this.currentItem])) : (o.helper == \'clone\' ? this.currentItem.clone() : this.currentItem);\n\n\t\tif(!helper.parents(\'body\').length) //Add the helper to the DOM if that didn\'t happen already\n\t\t\t$(o.appendTo != \'parent\' ? o.appendTo : this.currentItem[0].parentNode)[0].appendChild(helper[0]);\n\n\t\tif(helper[0] == this.currentItem[0])\n\t\t\tthis._storedCSS = { width: this.currentItem[0].style.width, height: this.currentItem[0].style.height, position: this.currentItem.css("position"), top: this.currentItem.css("top"), left: this.currentItem.css("left") };\n\n\t\tif(helper[0].style.width == \'\' || o.forceHelperSize) helper.width(this.currentItem.width());\n\t\tif(helper[0].style.height == \'\' || o.forceHelperSize) helper.height(this.currentItem.height());\n\n\t\treturn helper;\n\n\t},\n\n\t_adjustOffsetFromHelper: function(obj) {\n\t\tif (typeof obj == \'string\') {\n\t\t\tobj = obj.split(\' \');\n\t\t}\n\t\tif ($.isArray(obj)) {\n\t\t\tobj = {left: +obj[0], top: +obj[1] || 0};\n\t\t}\n\t\tif (\'left\' in obj) {\n\t\t\tthis.offset.click.left = obj.left + this.margins.left;\n\t\t}\n\t\tif (\'right\' in obj) {\n\t\t\tthis.offset.click.left = this.helperProportions.width - obj.right + this.margins.left;\n\t\t}\n\t\tif (\'top\' in obj) {\n\t\t\tthis.offset.click.top = obj.top + this.margins.top;\n\t\t}\n\t\tif (\'bottom\' in obj) {\n\t\t\tthis.offset.click.top = this.helperProportions.height - obj.bottom + this.margins.top;\n\t\t}\n\t},\n\n\t_getParentOffset: function() {\n\n\n\t\t//Get the offsetParent and cache its position\n\t\tthis.offsetParent = this.helper.offsetParent();\n\n\t\tvar po = this.offsetParent.offset();\n\n\t\t// This is a special case where we need to modify a offset calculated on start, since the following happened:\n\t\t// 1. The position of the helper is absolute, so it\'s position is calculated based on the next positioned parent\n\t\t// 2. The actual offset parent is a child of the scroll parent, and the scroll parent isn\'t the document, which means that\n\t\t//    the scroll is included in the initial calculation of the offset of the parent, and never recalculated upon drag\n    // bug fix: in firefox and ie, the html element reports the same scrollTop as the window,\n    //          in chrome and safari, the html element will always report 0 for scrollTop\n    //          should treat the html element in the same boat as the document element and not add the extra scroll values\n\t\tif(this.scrollParent[0] != document && !this.scrollParent.is(\'html\') && $.contains(this.scrollParent[0], this.offsetParent[0])) {\n\t\t\tpo.left += this.scrollParent.scrollLeft();\n\t\t\tpo.top += this.scrollParent.scrollTop();\n\t\t}\n\n\t\tif((this.offsetParent[0] == document.body) //This needs to be actually done for all browsers, since pageX/pageY includes this information\n\t\t|| (this.offsetParent[0].tagName && this.offsetParent[0].tagName.toLowerCase() == \'html\' && $.browser.msie)) //Ugly IE fix\n\t\t\tpo = { top: 0, left: 0 };\n\n\t\treturn {\n\t\t\ttop: po.top + (parseInt(this.offsetParent.css("borderTopWidth"),10) || 0),\n\t\t\tleft: po.left + (parseInt(this.offsetParent.css("borderLeftWidth"),10) || 0)\n\t\t};\n\n\t},\n\n\t_getRelativeOffset: function() {\n\n\t\tif(this.cssPosition == "relative") {\n\t\t\tvar p = this.currentItem.position();\n\t\t\treturn {\n\t\t\t\ttop: p.top - (parseInt(this.helper.css("top"),10) || 0) + this.scrollParent.scrollTop(),\n\t\t\t\tleft: p.left - (parseInt(this.helper.css("left"),10) || 0) + this.scrollParent.scrollLeft()\n\t\t\t};\n\t\t} else {\n\t\t\treturn { top: 0, left: 0 };\n\t\t}\n\n\t},\n\n\t_cacheMargins: function() {\n\t\tthis.margins = {\n\t\t\tleft: (parseInt(this.currentItem.css("marginLeft"),10) || 0),\n\t\t\ttop: (parseInt(this.currentItem.css("marginTop"),10) || 0)\n\t\t};\n\t},\n\n\t_cacheHelperProportions: function() {\n\t\tthis.helperProportions = {\n\t\t\twidth: this.helper.outerWidth(),\n\t\t\theight: this.helper.outerHeight()\n\t\t};\n\t},\n\n\t_setContainment: function() {\n\n\t\tvar o = this.options;\n\t\tif(o.containment == \'parent\') o.containment = this.helper[0].parentNode;\n\t\tif(o.containment == \'document\' || o.containment == \'window\') this.containment = [\n\t\t\t0 - this.offset.relative.left - this.offset.parent.left,\n\t\t\t0 - this.offset.relative.top - this.offset.parent.top,\n\t\t\t$(o.containment == \'document\' ? document : window).width() - this.helperProportions.width - this.margins.left,\n\t\t\t($(o.containment == \'document\' ? document : window).height() || document.body.parentNode.scrollHeight) - this.helperProportions.height - this.margins.top\n\t\t];\n\n\t\tif(!(/^(document|window|parent)$/).test(o.containment)) {\n\t\t\tvar ce = $(o.containment)[0];\n\t\t\tvar co = $(o.containment).offset();\n\t\t\tvar over = ($(ce).css("overflow") != \'hidden\');\n\n\t\t\tthis.containment = [\n\t\t\t\tco.left + (parseInt($(ce).css("borderLeftWidth"),10) || 0) + (parseInt($(ce).css("paddingLeft"),10) || 0) - this.margins.left,\n\t\t\t\tco.top + (parseInt($(ce).css("borderTopWidth"),10) || 0) + (parseInt($(ce).css("paddingTop"),10) || 0) - this.margins.top,\n\t\t\t\tco.left+(over ? Math.max(ce.scrollWidth,ce.offsetWidth) : ce.offsetWidth) - (parseInt($(ce).css("borderLeftWidth"),10) || 0) - (parseInt($(ce).css("paddingRight"),10) || 0) - this.helperProportions.width - this.margins.left,\n\t\t\t\tco.top+(over ? Math.max(ce.scrollHeight,ce.offsetHeight) : ce.offsetHeight) - (parseInt($(ce).css("borderTopWidth"),10) || 0) - (parseInt($(ce).css("paddingBottom"),10) || 0) - this.helperProportions.height - this.margins.top\n\t\t\t];\n\t\t}\n\n\t},\n\n\t_convertPositionTo: function(d, pos) {\n\n\t\tif(!pos) pos = this.position;\n\t\tvar mod = d == "absolute" ? 1 : -1;\n\t\tvar o = this.options, scroll = this.cssPosition == \'absolute\' && !(this.scrollParent[0] != document && $.contains(this.scrollParent[0], this.offsetParent[0])) ? this.offsetParent : this.scrollParent, scrollIsRootNode = (/(html|body)/i).test(scroll[0].tagName);\n\n\t\treturn {\n\t\t\ttop: (\n\t\t\t\tpos.top\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// The absolute mouse position\n\t\t\t\t+ this.offset.relative.top * mod\t\t\t\t\t\t\t\t\t\t// Only for relative positioned nodes: Relative offset from element to offset parent\n\t\t\t\t+ this.offset.parent.top * mod\t\t\t\t\t\t\t\t\t\t\t// The offsetParent\'s offset without borders (offset + border)\n\t\t\t\t- ( ( this.cssPosition == \'fixed\' ? -this.scrollParent.scrollTop() : ( scrollIsRootNode ? 0 : scroll.scrollTop() ) ) * mod)\n\t\t\t),\n\t\t\tleft: (\n\t\t\t\tpos.left\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// The absolute mouse position\n\t\t\t\t+ this.offset.relative.left * mod\t\t\t\t\t\t\t\t\t\t// Only for relative positioned nodes: Relative offset from element to offset parent\n\t\t\t\t+ this.offset.parent.left * mod\t\t\t\t\t\t\t\t\t\t\t// The offsetParent\'s offset without borders (offset + border)\n\t\t\t\t- ( ( this.cssPosition == \'fixed\' ? -this.scrollParent.scrollLeft() : scrollIsRootNode ? 0 : scroll.scrollLeft() ) * mod)\n\t\t\t)\n\t\t};\n\n\t},\n\n\t_generatePosition: function(event) {\n\n\t\tvar o = this.options, scroll = this.cssPosition == \'absolute\' && !(this.scrollParent[0] != document && $.contains(this.scrollParent[0], this.offsetParent[0])) ? this.offsetParent : this.scrollParent, scrollIsRootNode = (/(html|body)/i).test(scroll[0].tagName);\n\n\t\t// This is another very weird special case that only happens for relative elements:\n\t\t// 1. If the css position is relative\n\t\t// 2. and the scroll parent is the document or similar to the offset parent\n\t\t// we have to refresh the relative offset during the scroll so there are no jumps\n\t\tif(this.cssPosition == \'relative\' && !(this.scrollParent[0] != document && this.scrollParent[0] != this.offsetParent[0])) {\n\t\t\tthis.offset.relative = this._getRelativeOffset();\n\t\t}\n\n\t\tvar pageX = event.pageX;\n\t\tvar pageY = event.pageY;\n\n\t\t/*\n\t\t * - Position constraining -\n\t\t * Constrain the position to a mix of grid, containment.\n\t\t */\n\n\t\tif(this.originalPosition) { //If we are not dragging yet, we won\'t check for options\n\n\t\t\tif(this.containment) {\n\t\t\t\tif(event.pageX - this.offset.click.left < this.containment[0]) pageX = this.containment[0] + this.offset.click.left;\n\t\t\t\tif(event.pageY - this.offset.click.top < this.containment[1]) pageY = this.containment[1] + this.offset.click.top;\n\t\t\t\tif(event.pageX - this.offset.click.left > this.containment[2]) pageX = this.containment[2] + this.offset.click.left;\n\t\t\t\tif(event.pageY - this.offset.click.top > this.containment[3]) pageY = this.containment[3] + this.offset.click.top;\n\t\t\t}\n\n\t\t\tif(o.grid) {\n\t\t\t\tvar top = this.originalPageY + Math.round((pageY - this.originalPageY) / o.grid[1]) * o.grid[1];\n\t\t\t\tpageY = this.containment ? (!(top - this.offset.click.top < this.containment[1] || top - this.offset.click.top > this.containment[3]) ? top : (!(top - this.offset.click.top < this.containment[1]) ? top - o.grid[1] : top + o.grid[1])) : top;\n\n\t\t\t\tvar left = this.originalPageX + Math.round((pageX - this.originalPageX) / o.grid[0]) * o.grid[0];\n\t\t\t\tpageX = this.containment ? (!(left - this.offset.click.left < this.containment[0] || left - this.offset.click.left > this.containment[2]) ? left : (!(left - this.offset.click.left < this.containment[0]) ? left - o.grid[0] : left + o.grid[0])) : left;\n\t\t\t}\n\n\t\t}\n\n\t\treturn {\n\t\t\ttop: (\n\t\t\t\tpageY\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// The absolute mouse position\n\t\t\t\t- this.offset.click.top\t\t\t\t\t\t\t\t\t\t\t\t\t// Click offset (relative to the element)\n\t\t\t\t- this.offset.relative.top\t\t\t\t\t\t\t\t\t\t\t\t// Only for relative positioned nodes: Relative offset from element to offset parent\n\t\t\t\t- this.offset.parent.top\t\t\t\t\t\t\t\t\t\t\t\t// The offsetParent\'s offset without borders (offset + border)\n\t\t\t\t+ ( ( this.cssPosition == \'fixed\' ? -this.scrollParent.scrollTop() : ( scrollIsRootNode ? 0 : scroll.scrollTop() ) ))\n\t\t\t),\n\t\t\tleft: (\n\t\t\t\tpageX\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// The absolute mouse position\n\t\t\t\t- this.offset.click.left\t\t\t\t\t\t\t\t\t\t\t\t// Click offset (relative to the element)\n\t\t\t\t- this.offset.relative.left\t\t\t\t\t\t\t\t\t\t\t\t// Only for relative positioned nodes: Relative offset from element to offset parent\n\t\t\t\t- this.offset.parent.left\t\t\t\t\t\t\t\t\t\t\t\t// The offsetParent\'s offset without borders (offset + border)\n\t\t\t\t+ ( ( this.cssPosition == \'fixed\' ? -this.scrollParent.scrollLeft() : scrollIsRootNode ? 0 : scroll.scrollLeft() ))\n\t\t\t)\n\t\t};\n\n\t},\n\n\t_rearrange: function(event, i, a, hardRefresh) {\n    \n\t\ta ? a[0].appendChild(this.placeholder[0]) : i.item[0].parentNode.insertBefore(this.placeholder[0], (this.direction == \'down\' ? i.item[0] : i.item[0].nextSibling));\n\n\t\t//Various things done here to improve the performance:\n\t\t// 1. we create a setTimeout, that calls refreshPositions\n\t\t// 2. on the instance, we have a counter variable, that get\'s higher after every append\n\t\t// 3. on the local scope, we copy the counter variable, and check in the timeout, if it\'s still the same\n\t\t// 4. this lets only the last addition to the timeout stack through\n\t\tthis.counter = this.counter ? ++this.counter : 1;\n\t\tvar counter = this.counter;\n\n\t\tthis._delay(function() {\n\t\t\tif(counter == this.counter) this.refreshPositions(!hardRefresh); //Precompute after each DOM insertion, NOT on mousemove\n\t\t});\n\n\t},\n\n\t_clear: function(event, noPropagation) {\n\n\t\tthis.reverting = false;\n\t\t// We delay all events that have to be triggered to after the point where the placeholder has been removed and\n\t\t// everything else normalized again\n\t\tvar delayedTriggers = [];\n\n\t\t// We first have to update the dom position of the actual currentItem\n\t\t// Note: don\'t do it if the current item is already removed (by a user), or it gets reappended (see #4088)\n\t\tif(!this._noFinalSort && this.currentItem.parent().length) this.placeholder.before(this.currentItem);\n\t\tthis._noFinalSort = null;\n\n\t\tif(this.helper[0] == this.currentItem[0]) {\n\t\t\tfor(var i in this._storedCSS) {\n\t\t\t\tif(this._storedCSS[i] == \'auto\' || this._storedCSS[i] == \'static\') this._storedCSS[i] = \'\';\n\t\t\t}\n\t\t\tthis.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper");\n\t\t} else {\n\t\t\tthis.currentItem.show();\n\t\t}\n\n\t\tif(this.fromOutside && !noPropagation) delayedTriggers.push(function(event) { this._trigger("receive", event, this._uiHash(this.fromOutside)); });\n\t\tif((this.fromOutside || this.domPosition.prev != this.currentItem.prev().not(".ui-sortable-helper")[0] || this.domPosition.parent != this.currentItem.parent()[0]) && !noPropagation) delayedTriggers.push(function(event) { this._trigger("update", event, this._uiHash()); }); //Trigger update callback if the DOM position has changed\n\n\t\t// Check if the items Container has Changed and trigger appropriate\n\t\t// events.\n\t\tif (this !== this.currentContainer) {\n\t\t\tif(!noPropagation) {\n\t\t\t\tdelayedTriggers.push(function(event) { this._trigger("remove", event, this._uiHash()); });\n\t\t\t\tdelayedTriggers.push((function(c) { return function(event) { c._trigger("receive", event, this._uiHash(this)); };  }).call(this, this.currentContainer));\n\t\t\t\tdelayedTriggers.push((function(c) { return function(event) { c._trigger("update", event, this._uiHash(this));  }; }).call(this, this.currentContainer));\n\t\t\t}\n\t\t}\n\n\n\t\t//Post events to containers\n\t\tfor (var i = this.containers.length - 1; i >= 0; i--){\n\t\t\tif(!noPropagation) delayedTriggers.push((function(c) { return function(event) { c._trigger("deactivate", event, this._uiHash(this)); };  }).call(this, this.containers[i]));\n\t\t\tif(this.containers[i].containerCache.over) {\n\t\t\t\tdelayedTriggers.push((function(c) { return function(event) { c._trigger("out", event, this._uiHash(this)); };  }).call(this, this.containers[i]));\n\t\t\t\tthis.containers[i].containerCache.over = 0;\n\t\t\t}\n\t\t}\n\n\t\t//Do what was originally in plugins\n\t\tif(this._storedCursor) $(\'body\').css("cursor", this._storedCursor); //Reset cursor\n\t\tif(this._storedOpacity) this.helper.css("opacity", this._storedOpacity); //Reset opacity\n\t\tif(this._storedZIndex) this.helper.css("zIndex", this._storedZIndex == \'auto\' ? \'\' : this._storedZIndex); //Reset z-index\n\n\t\tthis.dragging = false;\n\t\tif(this.cancelHelperRemoval) {\n\t\t\tif(!noPropagation) {\n\t\t\t\tthis._trigger("beforeStop", event, this._uiHash());\n\t\t\t\tfor (var i=0; i < delayedTriggers.length; i++) { delayedTriggers[i].call(this, event); }; //Trigger all delayed events\n\t\t\t\tthis._trigger("stop", event, this._uiHash());\n\t\t\t}\n\n\t\t\tthis.fromOutside = false;\n\t\t\treturn false;\n\t\t}\n\n\t\tif(!noPropagation) this._trigger("beforeStop", event, this._uiHash());\n\n\t\t//$(this.placeholder[0]).remove(); would have been the jQuery way - unfortunately, it unbinds ALL events from the original node!\n\t\tthis.placeholder[0].parentNode.removeChild(this.placeholder[0]);\n\n\t\tif(this.helper[0] != this.currentItem[0]) this.helper.remove(); this.helper = null;\n\n\t\tif(!noPropagation) {\n\t\t\tfor (var i=0; i < delayedTriggers.length; i++) { delayedTriggers[i].call(this, event); }; //Trigger all delayed events\n\t\t\tthis._trigger("stop", event, this._uiHash());\n\t\t}\n\n\t\tthis.fromOutside = false;\n\t\treturn true;\n\n\t},\n\n\t_trigger: function() {\n\t\tif ($.Widget.prototype._trigger.apply(this, arguments) === false) {\n\t\t\tthis.cancel();\n\t\t}\n\t},\n\n\t_uiHash: function(_inst) {\n\t\tvar inst = _inst || this;\n\t\treturn {\n\t\t\thelper: inst.helper,\n\t\t\tplaceholder: inst.placeholder || $([]),\n\t\t\tposition: inst.position,\n\t\t\toriginalPosition: inst.originalPosition,\n\t\t\toffset: inst.positionAbs,\n\t\t\titem: inst.currentItem,\n\t\t\tsender: _inst ? _inst.element : null\n\t\t};\n\t}\n\n});\n\n})(jQuery);\n';
},function(e,t,n){n(3)(n(22))},function(e,t){e.exports=" /*\r\n * jQuery UI selectmenu\r\n *\r\n * Copyright (c) 2009 AUTHORS.txt (http://jqueryui.com/about)\r\n * Dual licensed under the MIT (MIT-LICENSE.txt)\r\n * and GPL (GPL-LICENSE.txt) licenses.\r\n *\r\n * http://docs.jquery.com/UI\r\n */\r\n\r\n(function($) {\r\n\r\n$.widget(\"ui.selectmenu\", {\r\n  _init: function() {\r\n    var self = this, o = this.options;\r\n\r\n    //quick array of button and menu id's\r\n    this.ids = [this.element.attr('id') + '-' + 'button', this.element.attr('id') + '-' + 'menu'];\r\n\r\n    //define safe mouseup for future toggling\r\n    this._safemouseup = true;\r\n\r\n    //create menu button wrapper\r\n    this.newelement = $('<a class=\"'+ this.widgetBaseClass +' ui-widget ui-state-default ui-corner-all\" id=\"'+this.ids[0]+'\" role=\"button\" href=\"#\" aria-haspopup=\"true\" aria-owns=\"'+this.ids[1]+'\"></a>')\r\n      .insertAfter(this.element);\r\n\r\n    //transfer tabindex\r\n    var tabindex = this.element.attr('tabindex');\r\n    if(tabindex){ this.newelement.attr('tabindex', tabindex); }\r\n\r\n    //save reference to select in data for ease in calling methods\r\n    this.newelement.data('selectelement', this.element);\r\n\r\n    //menu icon\r\n    this.selectmenuIcon = $('<span class=\"'+ this.widgetBaseClass +'-icon ui-icon\"></span>')\r\n      .prependTo(this.newelement)\r\n      .addClass( (o.style == \"popup\")? 'ui-icon-triangle-2-n-s' : 'ui-icon-triangle-1-s' );\r\n\r\n\r\n    //make associated form label trigger focus\r\n    $('label[for='+this.element.attr('id')+']')\r\n      .attr('for', this.ids[0])\r\n      .bind('click', function(){\r\n        self.newelement[0].focus();\r\n        return false;\r\n      });\r\n\r\n    //click toggle for menu visibility\r\n    this.newelement\r\n      .bind('mousedown', function(event){\r\n        self._toggle(event);\r\n        //make sure a click won't open/close instantly\r\n        if(o.style == \"popup\"){\r\n          self._safemouseup = false;\r\n          setTimeout(function(){self._safemouseup = true;}, 300);\r\n        }\r\n        return false;\r\n      })\r\n      .bind('click',function(){\r\n        return false;\r\n      })\r\n      .keydown(function(event){\r\n        var ret = true;\r\n        switch (event.keyCode) {\r\n          case $.ui.keyCode.ENTER:\r\n            ret = true;\r\n            break;\r\n          case $.ui.keyCode.SPACE:\r\n            ret = false;\r\n            self._toggle(event);\r\n            break;\r\n          case $.ui.keyCode.UP:\r\n          case $.ui.keyCode.LEFT:\r\n            ret = false;\r\n            self._moveSelection(-1);\r\n            break;\r\n          case $.ui.keyCode.DOWN:\r\n          case $.ui.keyCode.RIGHT:\r\n            ret = false;\r\n            self._moveSelection(1);\r\n            break;\r\n          case $.ui.keyCode.TAB:\r\n            ret = true;\r\n            break;\r\n          default:\r\n            ret = false;\r\n            self._typeAhead(event.keyCode, 'mouseup');\r\n            break;\r\n        }\r\n        return ret;\r\n      })\r\n      .bind('mouseover focus', function(){\r\n        $(this).addClass(self.widgetBaseClass+'-focus ui-state-hover');\r\n      })\r\n      .bind('mouseout blur', function(){\r\n        $(this).removeClass(self.widgetBaseClass+'-focus ui-state-hover');\r\n      });\r\n\r\n    //document click closes menu\r\n    $(document)\r\n      .mousedown(function(event){\r\n        self.close(event);\r\n      });\r\n\r\n    //change event on original selectmenu\r\n    this.element\r\n      .click(function(){ this._refreshValue(); })\r\n      .focus(function(){ this.newelement[0].focus(); });\r\n\r\n    //create menu portion, append to body\r\n    var cornerClass = (o.style == \"dropdown\")? \" ui-corner-bottom\" : \" ui-corner-all\"\r\n    this.list = $('<ul class=\"' + self.widgetBaseClass + '-menu ui-widget ui-widget-content'+cornerClass+'\" aria-hidden=\"true\" role=\"listbox\" aria-labelledby=\"'+this.ids[0]+'\" id=\"'+this.ids[1]+'\"></ul>').appendTo('body');\r\n\r\n    //serialize selectmenu element options\r\n    var selectOptionData = [];\r\n    this.element\r\n      .find('option')\r\n      .each(function(){\r\n        selectOptionData.push({\r\n          value: $(this).attr('value'),\r\n          text: self._formatText(jQuery(this).text()),\r\n          selected: $(this).attr('selected'),\r\n          classes: $(this).attr('class'),\r\n          parentOptGroup: $(this).parent('optgroup').attr('label')\r\n        });\r\n      });\r\n\r\n    //active state class is only used in popup style\r\n    var activeClass = (self.options.style == \"popup\") ? \" ui-state-active\" : \"\";\r\n\r\n    //write li's\r\n    for(var i in selectOptionData){\r\n      var thisLi = $('<li role=\"presentation\"><a href=\"#\" tabindex=\"-1\" role=\"option\" aria-selected=\"false\">'+ selectOptionData[i].text +'</a></li>')\r\n        .data('index',i)\r\n        .addClass(selectOptionData[i].classes)\r\n        .data('optionClasses', selectOptionData[i].classes|| '')\r\n        .mouseup(function(event){\r\n            if(self._safemouseup){\r\n              var changed = $(this).data('index') != self._selectedIndex();\r\n              self.value($(this).data('index'));\r\n              self.select(event);\r\n              if(changed){ self.change(event); }\r\n              self.close(event,true);\r\n            }\r\n          return false;\r\n        })\r\n        .click(function(){\r\n          return false;\r\n        })\r\n        .bind('mouseover focus', function(){\r\n          self._selectedOptionLi().addClass(activeClass);\r\n          self._focusedOptionLi().removeClass(self.widgetBaseClass+'-item-focus ui-state-hover');\r\n          $(this).removeClass('ui-state-active').addClass(self.widgetBaseClass + '-item-focus ui-state-hover');\r\n        })\r\n        .bind('mouseout blur', function(){\r\n\r\n          // following line is in the latest (https://github.com/fnagel/jquery-ui/blob/selectmenu/ui/jquery.ui.selectmenu.js)\r\n          // but JS errors. I'm fairly certain using a jQuery object as a selector is not quite right\r\n          //if($(this).is( self._selectedOptionLi() )){ $(this).addClass(activeClass); }\r\n\r\n          if($(this).get(0)==self._selectedOptionLi().get(0)){ $(this).addClass(activeClass); }\r\n          $(this).removeClass(self.widgetBaseClass + '-item-focus ui-state-hover');\r\n        });\r\n\r\n      //optgroup or not...\r\n      if(selectOptionData[i].parentOptGroup){\r\n        var optGroupName = self.widgetBaseClass + '-group-' + (selectOptionData[i].parentOptGroup.replace(/[\\W]/g,'-'));\r\n        if(this.list.find('li.' + optGroupName).size()){\r\n          this.list.find('li.' + optGroupName + ':last ul').append(thisLi);\r\n        }\r\n        else{\r\n          $('<li role=\"presentation\" class=\"'+self.widgetBaseClass+'-group '+optGroupName+'\"><span class=\"'+self.widgetBaseClass+'-group-label\">'+selectOptionData[i].parentOptGroup+'</span><ul></ul></li>')\r\n            .appendTo(this.list)\r\n            .find('ul')\r\n            .append(thisLi);\r\n        }\r\n      }\r\n      else{\r\n        thisLi.appendTo(this.list);\r\n      }\r\n\r\n      //this allows for using the scrollbar in an overflowed list\r\n      this.list.bind('mousedown mouseup', function(){return false;});\r\n\r\n      //append icon if option is specified\r\n      if(o.icons){\r\n        for(var j in o.icons){\r\n          if(thisLi.is(o.icons[j].find)){\r\n            thisLi\r\n              .data('optionClasses', selectOptionData[i].classes + ' ' + self.widgetBaseClass + '-hasIcon')\r\n              .addClass(self.widgetBaseClass + '-hasIcon');\r\n            var iconClass = o.icons[j].icon || \"\";\r\n\r\n            thisLi\r\n              .find('a:eq(0)')\r\n              .prepend('<span class=\"'+self.widgetBaseClass+'-item-icon ui-icon '+iconClass + '\"></span>');\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    //add corners to top and bottom menu items\r\n    this.list.find('li:last').addClass(\"ui-corner-bottom\");\r\n    if(o.style == 'popup'){ this.list.find('li:first').addClass(\"ui-corner-top\"); }\r\n\r\n    //transfer classes to selectmenu and list\r\n    if(o.transferClasses){\r\n      var transferClasses = this.element.attr('class') || '';\r\n      this.newelement.add(this.list).addClass(transferClasses);\r\n    }\r\n\r\n    //original selectmenu width\r\n    var selectWidth = this.element.width();\r\n\r\n    //set menu button width\r\n    this.newelement.width( (o.width) ? o.width : selectWidth);\r\n\r\n    //set menu width to either menuWidth option value, width option value, or select width\r\n    if(o.style == 'dropdown'){ this.list.width( (o.menuWidth) ? o.menuWidth : ((o.width) ? o.width : selectWidth)); }\r\n    else { this.list.width( (o.menuWidth) ? o.menuWidth : ((o.width) ? o.width - o.handleWidth : selectWidth - o.handleWidth)); }\r\n\r\n    //set max height from option\r\n    if(o.maxHeight && o.maxHeight < this.list.height()){ this.list.height(o.maxHeight); }\r\n\r\n    //save reference to actionable li's (not group label li's)\r\n    this._optionLis = this.list.find('li:not(.'+ self.widgetBaseClass +'-group)');\r\n\r\n    //transfer menu click to menu button\r\n    this.list\r\n      .keydown(function(event){\r\n        var ret = true;\r\n        switch (event.keyCode) {\r\n          case $.ui.keyCode.UP:\r\n          case $.ui.keyCode.LEFT:\r\n            ret = false;\r\n            self._moveFocus(-1);\r\n            break;\r\n          case $.ui.keyCode.DOWN:\r\n          case $.ui.keyCode.RIGHT:\r\n            ret = false;\r\n            self._moveFocus(1);\r\n            break;\r\n          case $.ui.keyCode.HOME:\r\n            ret = false;\r\n            self._moveFocus(':first');\r\n            break;\r\n          case $.ui.keyCode.PAGE_UP:\r\n            ret = false;\r\n            self._scrollPage('up');\r\n            break;\r\n          case $.ui.keyCode.PAGE_DOWN:\r\n            ret = false;\r\n            self._scrollPage('down');\r\n            break;\r\n          case $.ui.keyCode.END:\r\n            ret = false;\r\n            self._moveFocus(':last');\r\n            break;\r\n          case $.ui.keyCode.ENTER:\r\n          case $.ui.keyCode.SPACE:\r\n            ret = false;\r\n            self.close(event,true);\r\n            $(event.target).parents('li:eq(0)').trigger('mouseup');\r\n            break;\r\n          case $.ui.keyCode.TAB:\r\n            ret = true;\r\n            self.close(event,true);\r\n            break;\r\n          case $.ui.keyCode.ESCAPE:\r\n            ret = false;\r\n            self.close(event,true);\r\n            break;\r\n          default:\r\n            ret = false;\r\n            self._typeAhead(event.keyCode,'focus');\r\n            break;\r\n        }\r\n        return ret;\r\n      });\r\n\r\n    //selectmenu style\r\n    if(o.style == 'dropdown'){\r\n      this.newelement\r\n        .addClass(self.widgetBaseClass+\"-dropdown\");\r\n      this.list\r\n        .addClass(self.widgetBaseClass+\"-menu-dropdown\");\r\n    }\r\n    else {\r\n      this.newelement\r\n        .addClass(self.widgetBaseClass+\"-popup\");\r\n      this.list\r\n        .addClass(self.widgetBaseClass+\"-menu-popup\");\r\n    }\r\n\r\n    //append status span to button\r\n    this.newelement.prepend('<span class=\"'+self.widgetBaseClass+'-status\">'+ selectOptionData[this._selectedIndex()].text +'</span>');\r\n\r\n    //hide original selectmenu element\r\n    this.element.hide();\r\n\r\n    //transfer disabled state\r\n    if(this.element.attr('disabled') == true){ this.disable(); }\r\n\r\n    //update value\r\n    this.value(this._selectedIndex());\r\n    \r\n  },\r\n  destroy: function() {\r\n    this.element.removeData(this.widgetName)\r\n      .removeClass(this.widgetBaseClass + '-disabled' + ' ' + this.namespace + '-state-disabled')\r\n      .removeAttr('aria-disabled');\r\n\r\n    //unbind click on label, reset its for attr\r\n    $('label[for='+this.newelement.attr('id')+']')\r\n      .attr('for',this.element.attr('id'))\r\n      .unbind('click');\r\n    this.newelement.remove();\r\n    this.list.remove();\r\n    this.element.show();\r\n  },\r\n  _typeAhead: function(code, eventType){\r\n    var self = this;\r\n    //define self._prevChar if needed\r\n    if(!self._prevChar){ self._prevChar = ['',0]; }\r\n    var C = String.fromCharCode(code);\r\n    c = C.toLowerCase();\r\n    var focusFound = false;\r\n    function focusOpt(elem, ind){\r\n      focusFound = true;\r\n      $(elem).trigger(eventType);\r\n      self._prevChar[1] = ind;\r\n    };\r\n    this.list.find('li a').each(function(i){\r\n      if(!focusFound){\r\n        var thisText = $(this).text();\r\n        if( thisText.indexOf(C) == 0 || thisText.indexOf(c) == 0){\r\n            if(self._prevChar[0] == C){\r\n              if(self._prevChar[1] < i){ focusOpt(this,i); }\r\n            }\r\n            else{ focusOpt(this,i); }\r\n        }\r\n      }\r\n    });\r\n    this._prevChar[0] = C;\r\n  },\r\n  _uiHash: function(){\r\n    return {\r\n      value: this.value()\r\n    };\r\n  },\r\n  open: function(event){\r\n    var self = this;\r\n    var disabledStatus = this.newelement.attr(\"aria-disabled\");\r\n    if(disabledStatus != 'true'){\r\n      this._refreshPosition();\r\n      this._closeOthers(event);\r\n      this.newelement\r\n        .addClass('ui-state-active');\r\n\r\n      this.list\r\n        .appendTo('body')\r\n        .addClass(self.widgetBaseClass + '-open')\r\n        .attr('aria-hidden', false)\r\n        .find('li:not(.'+ self.widgetBaseClass +'-group):visible:eq('+ this._selectedIndex() +') a')[0].focus();\r\n      if(this.options.style == \"dropdown\"){ this.newelement.removeClass('ui-corner-all').addClass('ui-corner-top'); }\r\n      this._refreshPosition();\r\n      this._trigger(\"open\", event, this._uiHash());\r\n    }\r\n  },\r\n  close: function(event, retainFocus){\r\n    if(this.newelement.is('.ui-state-active')){\r\n      this.newelement\r\n        .removeClass('ui-state-active');\r\n      this.list\r\n        .attr('aria-hidden', true)\r\n        .removeClass(this.widgetBaseClass+'-open');\r\n      if(this.options.style == \"dropdown\"){ this.newelement.removeClass('ui-corner-top').addClass('ui-corner-all'); }\r\n      if(retainFocus){this.newelement[0].focus();}\r\n      this._trigger(\"close\", event, this._uiHash());\r\n    }\r\n  },\r\n  change: function(event) {\r\n    this.element.trigger('change');\r\n    this._trigger(\"change\", event, this._uiHash());\r\n  },\r\n  select: function(event) {\r\n    this._trigger(\"select\", event, this._uiHash());\r\n  },\r\n  _closeOthers: function(event){\r\n    $('.'+ this.widgetBaseClass +'.ui-state-active').not(this.newelement).each(function(){\r\n      $(this).data('selectelement').selectmenu('close',event);\r\n    });\r\n    $('.'+ this.widgetBaseClass +'.ui-state-hover').trigger('mouseout');\r\n  },\r\n  _toggle: function(event,retainFocus){\r\n    if(this.list.is('.'+ this.widgetBaseClass +'-open')){ this.close(event,retainFocus); }\r\n    else { this.open(event); }\r\n  },\r\n  _formatText: function(text){\r\n    return this.options.format ? this.options.format(text) : text;\r\n  },\r\n  _selectedIndex: function(){\r\n    return this.element[0].selectedIndex;\r\n  },\r\n  _selectedOptionLi: function(){\r\n    return this._optionLis.eq(this._selectedIndex());\r\n  },\r\n  _focusedOptionLi: function(){\r\n    return this.list.find('.'+ this.widgetBaseClass +'-item-focus');\r\n  },\r\n  _moveSelection: function(amt){\r\n    var currIndex = parseInt(this._selectedOptionLi().data('index'), 10);\r\n    var newIndex = currIndex + amt;\r\n    return this._optionLis.eq(newIndex).trigger('mouseup');\r\n  },\r\n  _moveFocus: function(amt){\r\n    if(!isNaN(amt)){\r\n      var currIndex = parseInt(this._focusedOptionLi().data('index'), 10);\r\n      var newIndex = currIndex + amt;\r\n    }\r\n    else { var newIndex = parseInt(this._optionLis.filter(amt).data('index'), 10); }\r\n    if(newIndex < 0){ newIndex = 0; }\r\n    if(newIndex > this._optionLis.size()-1){\r\n      newIndex =  this._optionLis.size()-1;\r\n    }\r\n    var activeID = this.widgetBaseClass + '-item-' + Math.round(Math.random() * 1000);\r\n    this._focusedOptionLi().find('a:eq(0)').attr('id','');\r\n    this._optionLis.eq(newIndex).trigger('focus').find('a:eq(0)').attr('id',activeID).trigger('focus'); // need to trigger focus on both the li and the a for the internal tracking to work\r\n    this.list.attr('aria-activedescendant', activeID);\r\n  },\r\n  _scrollPage: function(direction){\r\n    var numPerPage = Math.floor(this.list.outerHeight() / this.list.find('li:first').outerHeight());\r\n    numPerPage = (direction == 'up') ? -numPerPage : numPerPage;\r\n    this._moveFocus(numPerPage);\r\n  },\r\n  _setData: function(key, value) {\r\n    this.options[key] = value;\r\n    if (key == 'disabled') {\r\n      this.close();\r\n      this.element\r\n        .add(this.newelement)\r\n        .add(this.list)\r\n          [value ? 'addClass' : 'removeClass'](\r\n            this.widgetBaseClass + '-disabled' + ' ' +\r\n            this.namespace + '-state-disabled')\r\n          .attr(\"aria-disabled\", value);\r\n    }\r\n  },\r\n  value: function(newValue) {\r\n    if (arguments.length) {\r\n      this.element[0].selectedIndex = newValue;\r\n      this._refreshValue();\r\n      this._refreshPosition();\r\n    }\r\n    return this.element[0].selectedIndex;\r\n  },\r\n  _refreshValue: function() {\r\n    var activeClass = (this.options.style == \"popup\") ? \" ui-state-active\" : \"\";\r\n    var activeID = this.widgetBaseClass + '-item-' + Math.round(Math.random() * 1000);\r\n    //deselect previous\r\n    this.list\r\n      .find('.'+ this.widgetBaseClass +'-item-selected')\r\n      .removeClass(this.widgetBaseClass + \"-item-selected\" + activeClass)\r\n      .find('a')\r\n      .attr('aria-selected', 'false')\r\n      .attr('id', '');\r\n    // remove focus class from the focused li\r\n    this.list\r\n      .find('.' + this.widgetBaseClass + '-item-focus')\r\n      .removeClass(this.widgetBaseClass + '-item-focus');\r\n    // remove hover class from the li\r\n    this.list\r\n      .find('.ui-state-hover')\r\n      .removeClass('ui-state-hover');\r\n    //select new\r\n    this._selectedOptionLi()\r\n      .addClass(this.widgetBaseClass + \"-item-selected\"+activeClass)\r\n      .addClass(this.widgetBaseClass + '-item-focus')\r\n      .find('a')\r\n      .attr('aria-selected', 'true')\r\n      .attr('id', activeID);\r\n\r\n    //toggle any class brought in from option\r\n    var currentOptionClasses = this.newelement.data('optionClasses') ? this.newelement.data('optionClasses') : \"\";\r\n    var newOptionClasses = this._selectedOptionLi().data('optionClasses') ? this._selectedOptionLi().data('optionClasses') : \"\";\r\n    this.newelement\r\n      .removeClass(currentOptionClasses)\r\n      .data('optionClasses', newOptionClasses)\r\n      .addClass( newOptionClasses )\r\n      .find('.'+this.widgetBaseClass+'-status')\r\n      .html(\r\n        this._selectedOptionLi()\r\n          .find('a:eq(0)')\r\n          .html()\r\n      );\r\n\r\n    this.list.attr('aria-activedescendant', activeID)\r\n  },\r\n  _refreshPosition: function(){\r\n    //set left value\r\n    if(this.options.align == 'left'){\r\n      this.list.css('left', this.newelement.offset().left);\r\n    }\r\n    else {\r\n      this.list.css('left', this.newelement.offset().left - this.list.width() + this.newelement.width());\r\n    }\r\n\r\n    //set top value\r\n    var menuTop = this.newelement.offset().top;\r\n    var scrolledAmt = this.list[0].scrollTop;\r\n    this.list.find('li:lt('+this._selectedIndex()+')').each(function(){\r\n      scrolledAmt -= $(this).outerHeight();\r\n    });\r\n\r\n    if(this.newelement.is('.'+this.widgetBaseClass+'-popup')){\r\n      menuTop+=scrolledAmt;\r\n      this.list.css('top', menuTop);\r\n    }\r\n    else {\r\n      menuTop += this.newelement.height();\r\n      this.list.css('top', menuTop);\r\n    }\r\n  },\r\n\r\n  options: {\r\n    transferClasses: true,\r\n    style: 'popup',\r\n    width: null,\r\n    menuWidth: null,\r\n    handleWidth: 26,\r\n    maxHeight: null,\r\n    icons: null,\r\n    format: null,\r\n    align: 'left'\r\n  }\r\n});\r\n\r\n})(jQuery);"},function(e,t,n){n(3)(n(24))},function(e,t){e.exports="/*!\r\n * jQuery Cookie Plugin v1.4.1\r\n * https://github.com/carhartl/jquery-cookie\r\n *\r\n * Copyright 2006, 2014 Klaus Hartl\r\n * Released under the MIT license\r\n */\r\n(function (factory) {\r\n  if (typeof define === 'function' && define.amd) {\r\n    // AMD\r\n    define(['jquery'], factory);\r\n  } else if (typeof exports === 'object') {\r\n    // CommonJS\r\n    factory(require('jquery'));\r\n  } else {\r\n    // Browser globals\r\n    factory(jQuery);\r\n  }\r\n}(function ($) {\r\n\r\n  var pluses = /\\+/g;\r\n\r\n  function encode(s) {\r\n    return config.raw ? s : encodeURIComponent(s);\r\n  }\r\n\r\n  function decode(s) {\r\n    return config.raw ? s : decodeURIComponent(s);\r\n  }\r\n\r\n  function stringifyCookieValue(value) {\r\n    return encode(config.json ? JSON.stringify(value) : String(value));\r\n  }\r\n\r\n  function parseCookieValue(s) {\r\n    if (s.indexOf('\"') === 0) {\r\n      // This is a quoted cookie as according to RFC2068, unescape...\r\n      s = s.slice(1, -1).replace(/\\\\\"/g, '\"').replace(/\\\\\\\\/g, '\\\\');\r\n    }\r\n\r\n    try {\r\n      // Replace server-side written pluses with spaces.\r\n      // If we can't decode the cookie, ignore it, it's unusable.\r\n      // If we can't parse the cookie, ignore it, it's unusable.\r\n      s = decodeURIComponent(s.replace(pluses, ' '));\r\n      return config.json ? JSON.parse(s) : s;\r\n    } catch(e) {}\r\n  }\r\n\r\n  function read(s, converter) {\r\n    var value = config.raw ? s : parseCookieValue(s);\r\n    return $.isFunction(converter) ? converter(value) : value;\r\n  }\r\n\r\n  var config = $.cookie = function (key, value, options) {\r\n\r\n    // Write\r\n\r\n    if (arguments.length > 1 && !$.isFunction(value)) {\r\n      options = $.extend({}, config.defaults, options);\r\n\r\n      if (typeof options.expires === 'number') {\r\n        var days = options.expires, t = options.expires = new Date();\r\n        t.setTime(+t + days * 864e+5);\r\n      }\r\n\r\n      return (document.cookie = [\r\n        encode(key), '=', stringifyCookieValue(value),\r\n        options.expires ? '; expires=' + options.expires.toUTCString() : '', // use expires attribute, max-age is not supported by IE\r\n        options.path    ? '; path=' + options.path : '',\r\n        options.domain  ? '; domain=' + options.domain : '',\r\n        options.secure  ? '; secure' : ''\r\n      ].join(''));\r\n    }\r\n\r\n    // Read\r\n\r\n    var result = key ? undefined : {};\r\n\r\n    // To prevent the for loop in the first place assign an empty array\r\n    // in case there are no cookies at all. Also prevents odd result when\r\n    // calling $.cookie().\r\n    var cookies = document.cookie ? document.cookie.split('; ') : [];\r\n\r\n    for (var i = 0, l = cookies.length; i < l; i++) {\r\n      var parts = cookies[i].split('=');\r\n      var name = decode(parts.shift());\r\n      var cookie = parts.join('=');\r\n\r\n      if (key && key === name) {\r\n        // If second argument (value) is a function it's a converter...\r\n        result = read(cookie, value);\r\n        break;\r\n      }\r\n\r\n      // Prevent storing a cookie that we couldn't decode.\r\n      if (!key && (cookie = read(cookie)) !== undefined) {\r\n        result[name] = cookie;\r\n      }\r\n    }\r\n\r\n    return result;\r\n  };\r\n\r\n  config.defaults = {};\r\n\r\n  $.removeCookie = function (key, options) {\r\n    if ($.cookie(key) === undefined) {\r\n      return false;\r\n    }\r\n\r\n    // Must not alter options, thus extending a fresh object...\r\n    $.cookie(key, '', $.extend({}, options, { expires: -1 }));\r\n    return !$.cookie(key);\r\n  };\r\n\r\n}));\r\n"},function(e,t,n){n(3)(n(26))},function(e,t){e.exports="/*\r\n * switcheroo v1.0\r\n * Conditionally replace difficult to overlay dom elements (like quicktime objects) with placeholder objects\r\n * designed primarily to work with drupal popups module\r\n */\r\n\r\n(function($){\r\n  $.fn.sHideObjectEmbed = function(options) {\r\n\r\n    var opts = $.extend( {}, $.fn.sHideObjectEmbed.defaults, options);\r\n\r\n    $.each( opts.hide_events , function ( i , val ){\r\n\r\n     $(document).bind( String(val) , function(e){\r\n      \r\n       if( opts.disable_when_open && e.type == 'popups_open_path' && Popups && Popups.activePopup()) \r\n         return;\r\n\r\n       $( opts.object_selector ).each(function(){\r\n         var t = $(this);\r\n         if( opts.placeholder ){\r\n           placeholder = $(opts.placeholder_opts.html);\r\n           placeholder.addClass(String(opts.placeholder_opts.label_class));\r\n\r\n           if( opts.placeholder_opts.mimic ){\r\n             var disp = t.css('display') == 'inline' ? 'inline-block' : t.css('display');\r\n             placeholder.css({\r\n              'width': t.css('width') ? t.css('width') : 0,\r\n              'height': t.css('height') ? t.css('height') : 0,\r\n              'display': disp ? disp : 'block',\r\n              //'padding': t.css('padding') ? t.css('padding') : 0,\r\n              'margin': t.css('margin') ? t.css('margin') : 0\r\n             });\r\n           }\r\n\r\n           t.before(placeholder);\r\n         }\r\n         /*\r\n          * The majority of DOM elements we want to hide do not support the .data method.  The unsupported elements \r\n          * according to http://api.jquery.com/data/ are <object>, <applet> and <embed>.  Let's instead set a data-hide-ini attribute\r\n          * on the element itself to track the original class\r\n          */\r\n         var dataIni = t.attr('data-sHideObjEmb-ini');\r\n         if(!dataIni){\r\n           t.attr('data-sHideObjEmb-ini',t.css('display'));           \r\n         }\r\n         switch( opts.hide_method ) {\r\n           default:\r\n           case 'display':\r\n             t.css('display','none');\r\n             break;\r\n           case 'visibility':\r\n             t.css('visibility','hidden');\r\n             break;\r\n         }\r\n       });\r\n     });\r\n    });\r\n\r\n    $.each( opts.show_events , function ( i , val ){\r\n     $(document).bind( String(val) , function(e){\r\n       if( opts.disable_when_open && e.type == 'popups_close' && Popups && Popups.activePopup()) \r\n        return;\r\n\r\n       $('.' + String(opts.placeholder_opts.label_class)).remove();\r\n       $( opts.object_selector ).each(function(){\r\n         switch( opts.hide_method ) {\r\n           default:\r\n           case 'display':\r\n             $(this).css('display',$(this).attr('data-sHideObjEmb-ini'));\r\n             break;\r\n           case 'visibility':\r\n             $(this).css('visibility','visible');\r\n             break;\r\n          }\r\n       });\r\n     });\r\n    });\r\n  }\r\n\r\n  // plug-in defaults\r\n  $.fn.sHideObjectEmbed.defaults = {\r\n   object_selector: 'object',\r\n   placeholder: 'div',\r\n   placeholder_opts: {\r\n    mimic: true,\r\n    html: '<div></div>' ,\r\n    label_class : 'sHideObjectEmbedPlaceholderd'\r\n   },\r\n   hide_events: [],\r\n   show_events: [],\r\n   disable_when_open: true,\r\n   hide_method: 'display'\r\n  };\r\n\r\n})(jQuery)"},function(e,t,n){n(3)(n(28))},function(e,t){e.exports="/*\n * jQuery clueTip plugin\n * Version 1.1pre  (May 16, 2010)\n * @requires jQuery v1.3+\n *\n * Dual licensed under the MIT and GPL licenses:\n * http://www.opensource.org/licenses/mit-license.php\n * http://www.gnu.org/licenses/gpl.html\n *\n */\n\n/*\n *\n * Full list of options/settings can be found at the bottom of this file and at http://plugins.learningjquery.com/cluetip/\n *\n * Examples can be found at http://plugins.learningjquery.com/cluetip/demo/\n *\n*/\n\n(function($) {\n  $.cluetip = {version: '1.1pre'};\n  var $cluetip, $cluetipInner, $cluetipOuter, $cluetipTitle, $cluetipArrows, $cluetipWait, $dropShadow, imgCount;\n  var insertionType = 'appendTo', insertionElement = 'body';\n\n\n  $.fn.cluetip = function(js, options) {\n    if (typeof js == 'object') {\n      options = js;\n      js = null;\n    }\n    if (js == 'destroy') {\n      return this.removeData('cluetip').unbind('.cluetip');\n    }\n\n    // merge per-call options with defaults\n    options = $.extend(true, {}, $.fn.cluetip.defaults, options || {});\n\n    /** =create cluetip divs **/\n\n    if (!$('#cluetip').length) {\n      $(['<div id=\"cluetip\">',\n        '<div id=\"cluetip-outer\">',\n          '<h3 id=\"cluetip-title\"></h3>',\n          '<div id=\"cluetip-inner\"></div>',\n        '</div>',\n        '<div id=\"cluetip-extra\"></div>',\n        '<div id=\"cluetip-arrows\" class=\"cluetip-arrows\"></div>',\n      '</div>'].join(''))\n      [insertionType](insertionElement).hide();\n\n      var cluezIndex = +options.cluezIndex;\n\n      $cluetip = $('#cluetip').css({position: 'absolute'});\n      $cluetipOuter = $('#cluetip-outer').css({position: 'relative', zIndex: cluezIndex});\n      $cluetipInner = $('#cluetip-inner');\n      $cluetipTitle = $('#cluetip-title');\n      $cluetipArrows = $('#cluetip-arrows');\n      $cluetipWait = $('<div id=\"cluetip-waitimage\"></div>')\n        .css({position: 'absolute'}).insertBefore($cluetip).hide();\n    }\n    var cluetipPadding = (parseInt($cluetip.css('paddingLeft'),10)||0) + (parseInt($cluetip.css('paddingRight'),10)||0);\n\n\n    this.each(function(index) {\n      var link = this, $this = $(this);\n\n      // support metadata plugin (v1.0 and 2.0)\n      var opts = $.extend(true, {}, options, $.metadata ? $this.metadata() : $.meta ? $this.data() : {});\n\n\n      // start out with no contents (for ajax activation)\n      var cluetipContents = false;\n\n      cluezIndex = +opts.cluezIndex;\n      $this.data('cluetip', {title: link.title, zIndex: cluezIndex});\n      var isActive = false, closeOnDelay = 0;\n\n      var tipAttribute = $this.attr(opts.attribute), ctClass = opts.cluetipClass;\n      if (!tipAttribute && !opts.splitTitle && !js) {\n        return true;\n      }\n      // if hideLocal is set to true, on DOM ready hide the local content that will be displayed in the clueTip\n      if (opts.local && opts.localPrefix) {tipAttribute = opts.localPrefix + tipAttribute;}\n      if (opts.local && opts.hideLocal) { $(tipAttribute + ':first').hide(); }\n      var tOffset = parseInt(opts.topOffset, 10), lOffset = parseInt(opts.leftOffset, 10);\n      // vertical measurement variables\n      var tipHeight, wHeight,\n          defHeight = isNaN(parseInt(opts.height, 10)) ? 'auto' : (/\\D/g).test(opts.height) ? opts.height : opts.height + 'px';\n      var sTop, linkTop, posY, tipY, mouseY, baseline;\n      // horizontal measurement variables\n      var tipInnerWidth = parseInt(opts.width, 10) || 275,\n          tipWidth = tipInnerWidth + cluetipPadding + opts.dropShadowSteps,\n          linkWidth = this.offsetWidth,\n          linkLeft, posX, tipX, mouseX, winWidth;\n\n      // parse the title\n      var tipParts;\n      var tipTitle = (opts.attribute != 'title') ? $this.attr(opts.titleAttribute) : '';\n      if (opts.splitTitle) {\n        if (tipTitle == undefined) {tipTitle = '';}\n        tipParts = tipTitle.split(opts.splitTitle);\n        tipTitle = tipParts.shift();\n      }\n      if (opts.escapeTitle) {\n        tipTitle = tipTitle.replace(/&/g,'&amp;').replace(/>/g,'&gt;').replace(/</g,'&lt;');\n      }\n\n      var localContent;\n      function returnFalse() { return false; }\n\n/***************************************\n* ACTIVATION\n****************************************/\n\n//activate clueTip\n    var activate = function(event) {\n      if (!opts.onActivate($this)) {\n        return false;\n      }\n      isActive = true;\n      $cluetip.removeClass().css({width: tipInnerWidth});\n      if (tipAttribute == $this.attr('href')) {\n        $this.css('cursor', opts.cursor);\n      }\n      if (opts.hoverClass) {\n        $this.addClass(opts.hoverClass);\n      }\n      linkTop = posY = $this.offset().top;\n      linkLeft = $this.offset().left;\n      mouseX = event.pageX;\n      mouseY = event.pageY;\n      if (link.tagName.toLowerCase() != 'area') {\n        sTop = $(document).scrollTop();\n        winWidth = $(window).width();\n      }\n// position clueTip horizontally\n      if (opts.positionBy == 'fixed') {\n        posX = linkWidth + linkLeft + lOffset;\n        $cluetip.css({left: posX});\n      } else {\n        posX = (linkWidth > linkLeft && linkLeft > tipWidth)\n          || linkLeft + linkWidth + tipWidth + lOffset > winWidth\n          ? linkLeft - tipWidth - lOffset\n          : linkWidth + linkLeft + lOffset;\n        if (link.tagName.toLowerCase() == 'area' || opts.positionBy == 'mouse' || linkWidth + tipWidth > winWidth) { // position by mouse\n          if (mouseX + 20 + tipWidth > winWidth) {\n            $cluetip.addClass(' cluetip-' + ctClass);\n            posX = (mouseX - tipWidth - lOffset) >= 0 ? mouseX - tipWidth - lOffset - parseInt($cluetip.css('marginLeft'),10) + parseInt($cluetipInner.css('marginRight'),10) :  mouseX - (tipWidth/2);\n          } else {\n            posX = mouseX + lOffset;\n          }\n        }\n        var pY = posX < 0 ? event.pageY + tOffset : event.pageY;\n        $cluetip.css({\n          left: (posX > 0 && opts.positionBy != 'bottomTop') ? posX : (mouseX + (tipWidth/2) > winWidth) ? winWidth/2 - tipWidth/2 : Math.max(mouseX - (tipWidth/2),0),\n          zIndex: $this.data('cluetip').zIndex\n        });\n        $cluetipArrows.css({zIndex: $this.data('cluetip').zIndex+1});\n      }\n        wHeight = $(window).height();\n\n/***************************************\n* load a string from cluetip method's first argument\n***************************************/\n      if (js) {\n        if (typeof js == 'function') {\n          js = js.call(link);\n        }\n        $cluetipInner.html(js);\n        cluetipShow(pY);\n      }\n/***************************************\n* load the title attribute only (or user-selected attribute).\n* clueTip title is the string before the first delimiter\n* subsequent delimiters place clueTip body text on separate lines\n***************************************/\n\n      else if (tipParts) {\n        var tpl = tipParts.length;\n        $cluetipInner.html(tpl ? tipParts[0] : '');\n        if (tpl > 1) {\n          for (var i=1; i < tpl; i++){\n            $cluetipInner.append('<div class=\"split-body\">' + tipParts[i] + '</div>');\n          }\n        }\n        cluetipShow(pY);\n      }\n/***************************************\n* load external file via ajax\n***************************************/\n\n      else if (!opts.local && tipAttribute.indexOf('#') !== 0) {\n        if (/\\.(jpe?g|tiff?|gif|png)$/i.test(tipAttribute)) {\n          $cluetipInner.html('<img src=\"' + tipAttribute + '\" alt=\"' + tipTitle + '\" />');\n          cluetipShow(pY);\n        } else if (cluetipContents && opts.ajaxCache) {\n          $cluetipInner.html(cluetipContents);\n          cluetipShow(pY);\n        } else {\n          var optionBeforeSend = opts.ajaxSettings.beforeSend,\n              optionError = opts.ajaxSettings.error,\n              optionSuccess = opts.ajaxSettings.success,\n              optionComplete = opts.ajaxSettings.complete;\n          var ajaxSettings = {\n            cache: false, // force requested page not to be cached by browser\n            url: tipAttribute,\n            beforeSend: function(xhr) {\n              if (optionBeforeSend) {optionBeforeSend.call(link, xhr, $cluetip, $cluetipInner);}\n              $cluetipOuter.children().empty();\n              if (opts.waitImage) {\n                $cluetipWait\n                .css({top: mouseY+20, left: mouseX+20, zIndex: $this.data('cluetip').zIndex-1})\n                .show();\n              }\n            },\n            error: function(xhr, textStatus) {\n              if (isActive) {\n                if (optionError) {\n                  optionError.call(link, xhr, textStatus, $cluetip, $cluetipInner);\n                } else {\n                  $cluetipInner.html('<i>sorry, the contents could not be loaded</i>');\n                }\n              }\n            },\n            success: function(data, textStatus) {\n              cluetipContents = opts.ajaxProcess.call(link, data);\n              if (isActive) {\n                if (optionSuccess) {optionSuccess.call(link, data, textStatus, $cluetip, $cluetipInner);}\n                $cluetipInner.html(cluetipContents);\n              }\n            },\n            complete: function(xhr, textStatus) {\n              if (optionComplete) {optionComplete.call(link, xhr, textStatus, $cluetip, $cluetipInner);}\n              var imgs = $cluetipInner[0].getElementsByTagName('img');\n              imgCount = imgs.length;\n              for (var i=0, l = imgs.length; i < l; i++) {\n                if (imgs[i].complete) {\n                  imgCount--;\n                }\n              }\n              if (imgCount && !$.browser.opera) {\n                $(imgs).bind('load error', function() {\n                  imgCount--;\n                  if (imgCount<1) {\n                    $cluetipWait.hide();\n                    if (isActive) { cluetipShow(pY); }\n                  }\n                });\n              } else {\n                $cluetipWait.hide();\n                if (isActive) { cluetipShow(pY); }\n              }\n            }\n          };\n          var ajaxMergedSettings = $.extend(true, {}, opts.ajaxSettings, ajaxSettings);\n\n          $.ajax(ajaxMergedSettings);\n        }\n\n/***************************************\n* load an element from the same page\n***************************************/\n      } else if (opts.local) {\n\n        var $localContent = $(tipAttribute + (/#\\S+$/.test(tipAttribute) ? '' : ':eq(' + index + ')')).clone(true).show();\n        if (opts.localIdSuffix) {\n          $localContent.attr('id', $localContent[0].id + opts.localIdSuffix);\n        }\n        $cluetipInner.html($localContent);\n        cluetipShow(pY);\n      }\n    };\n\n// get dimensions and options for cluetip and prepare it to be shown\n    var cluetipShow = function(bpY) {\n      $cluetip.addClass('cluetip-' + ctClass);\n      if (opts.truncate) {\n        var $truncloaded = $cluetipInner.text().slice(0,opts.truncate) + '...';\n        $cluetipInner.html($truncloaded);\n      }\n\n      function doNothing() {}; //empty function\n      tipTitle ? $cluetipTitle.show().html(tipTitle) : (opts.showTitle) ? $cluetipTitle.show().html('&nbsp;') : $cluetipTitle.hide();\n      if (opts.sticky) {\n        var $closeLink = $('<div id=\"cluetip-close\"><a href=\"#\">' + opts.closeText + '</a></div>');\n        (opts.closePosition == 'bottom') ? $closeLink.appendTo($cluetipInner) : (opts.closePosition == 'title') ? $closeLink.prependTo($cluetipTitle) : $closeLink.prependTo($cluetipInner);\n        $closeLink.bind('click.cluetip', function() {\n          cluetipClose();\n          return false;\n        });\n        if (opts.mouseOutClose) {\n          $cluetip.bind('mouseleave.cluetip', function() {\n            cluetipClose();\n          });\n        } else {\n          $cluetip.unbind('mouseleave.cluetip');\n        }\n      }\n// now that content is loaded, finish the positioning\n      var direction = '';\n      $cluetipOuter.css({zIndex: $this.data('cluetip').zIndex, overflow: defHeight == 'auto' ? 'visible' : 'auto', height: defHeight});\n      tipHeight = defHeight == 'auto' ? Math.max($cluetip.outerHeight(),$cluetip.height()) : parseInt(defHeight,10);\n      tipY = posY;\n      baseline = sTop + wHeight;\n      if (opts.positionBy == 'fixed') {\n        tipY = posY - opts.dropShadowSteps + tOffset;\n      } else if ( (posX < mouseX && Math.max(posX, 0) + tipWidth > mouseX) || opts.positionBy == 'bottomTop') {\n        if (posY + tipHeight + tOffset > baseline && mouseY - sTop > tipHeight + tOffset) {\n          tipY = mouseY - tipHeight - tOffset;\n          direction = 'top';\n        } else {\n          tipY = mouseY + tOffset;\n          direction = 'bottom';\n        }\n      } else if ( posY + tipHeight + tOffset > baseline ) {\n        tipY = (tipHeight >= wHeight) ? sTop : baseline - tipHeight - tOffset;\n      } else if ($this.css('display') == 'block' || link.tagName.toLowerCase() == 'area' || opts.positionBy == \"mouse\") {\n        tipY = bpY - tOffset;\n      } else {\n        tipY = posY - opts.dropShadowSteps;\n      }\n      if (direction == '') {\n        posX < linkLeft ? direction = 'left' : direction = 'right';\n      }\n      $cluetip.css({top: tipY + 'px'}).removeClass().addClass('clue-' + direction + '-' + ctClass).addClass(' cluetip-' + ctClass);\n      if (opts.arrows) { // set up arrow positioning to align with element\n        var bgY = (posY - tipY - opts.dropShadowSteps);\n        $cluetipArrows.css({top: (/(left|right)/.test(direction) && posX >=0 && bgY > 0) ? bgY + 'px' : /(left|right)/.test(direction) ? 0 : ''}).show();\n      } else {\n        $cluetipArrows.hide();\n      }\n\n// (first hide, then) ***SHOW THE CLUETIP***\n      // handle dropshadow divs first\n      $dropShadow = createDropShadows(opts);\n      if ($dropShadow && $dropShadow.length) {\n        $dropShadow.hide().css({height: tipHeight, width: tipInnerWidth, zIndex: $this.data('cluetip').zIndex-1}).show();\n      }\n\n      $cluetip.hide()[opts.fx.open](opts.fx.openSpeed || 0);\n      if ($.fn.bgiframe) { $cluetip.bgiframe(); }\n      // delayed close (not fully tested)\n      if (opts.delayedClose > 0) {\n        closeOnDelay = setTimeout(cluetipClose, opts.delayedClose);\n      }\n      // trigger the optional onShow function\n      opts.onShow.call(link, $cluetip, $cluetipInner);\n    };\n\n/***************************************\n   =INACTIVATION\n-------------------------------------- */\n    var inactivate = function(event) {\n      isActive = false;\n      $cluetipWait.hide();\n      if (!opts.sticky || (/click|toggle/).test(opts.activation) ) {\n        cluetipClose();\n        clearTimeout(closeOnDelay);\n      }\n      if (opts.hoverClass) {\n        $this.removeClass(opts.hoverClass);\n      }\n    };\n// close cluetip and reset some things\n    var cluetipClose = function() {\n      $cluetipOuter\n      .parent().hide().removeClass();\n      opts.onHide.call(link, $cluetip, $cluetipInner);\n      $this.removeClass('cluetip-clicked');\n      if (tipTitle) {\n        $this.attr(opts.titleAttribute, tipTitle);\n      }\n      $this.css('cursor','');\n      if (opts.arrows) {\n        $cluetipArrows.css({top: ''});\n      }\n    };\n\n    $(document).bind('hideCluetip', function(e) {\n      cluetipClose();\n    });\n/***************************************\n   =BIND EVENTS\n-------------------------------------- */\n  // activate by click\n      if ( (/click|toggle/).test(opts.activation) ) {\n        $this.bind('click.cluetip', function(event) {\n          if ($cluetip.is(':hidden') || !$this.is('.cluetip-clicked')) {\n            activate(event);\n            $('.cluetip-clicked').removeClass('cluetip-clicked');\n            $this.addClass('cluetip-clicked');\n          } else {\n            inactivate(event);\n          }\n          this.blur();\n          return false;\n        });\n  // activate by focus; inactivate by blur\n      } else if (opts.activation == 'focus') {\n        $this.bind('focus.cluetip', function(event) {\n          activate(event);\n        });\n        $this.bind('blur.cluetip', function(event) {\n          inactivate(event);\n        });\n  // activate by hover\n      } else {\n        // clicking is returned false if clickThrough option is set to false\n        $this[opts.clickThrough ? 'unbind' : 'bind']('click', returnFalse);\n        //set up mouse tracking\n        var mouseTracks = function(evt) {\n          if (opts.tracking == true) {\n            var trackX = posX - evt.pageX;\n            var trackY = tipY ? tipY - evt.pageY : posY - evt.pageY;\n            $this.bind('mousemove.cluetip', function(evt) {\n              $cluetip.css({left: evt.pageX + trackX, top: evt.pageY + trackY });\n            });\n          }\n        };\n        if ($.fn.hoverIntent && opts.hoverIntent) {\n          $this.hoverIntent({\n            sensitivity: opts.hoverIntent.sensitivity,\n            interval: opts.hoverIntent.interval,\n            over: function(event) {\n              activate(event);\n              mouseTracks(event);\n            },\n            timeout: opts.hoverIntent.timeout,\n            out: function(event) {inactivate(event); $this.unbind('mousemove.cluetip');}\n          });\n        } else {\n          $this.bind('mouseenter.cluetip', function(event) {\n            activate(event);\n            mouseTracks(event);\n          })\n          .bind('mouseleave.cluetip', function(event) {\n            inactivate(event);\n            $this.unbind('mousemove.cluetip');\n          });\n        }\n\n        $this.bind('mouseover.cluetip', function(event) {\n          $this.attr('title','');\n        }).bind('mouseleave.cluetip', function(event) {\n          $this.attr('title', $this.data('cluetip').title);\n        });\n      }\n    });\n\n    /** =private functions\n    ************************************************************/\n    /** =create dropshadow divs **/\n\n    function createDropShadows(options, newDropShadow) {\n      var dropShadowSteps = (options.dropShadow && options.dropShadowSteps) ? +options.dropShadowSteps : 0;\n      if ($.support.boxShadow) {\n        var dsOffsets = dropShadowSteps === 0 ? '0 0 ' : '1px 1px ';\n        $('#cluetip').css($.support.boxShadow, dsOffsets + dropShadowSteps + 'px rgba(0,0,0,0.5)');\n        return false;\n      }\n      var oldDropShadow = $('#cluetip .cluetip-drop-shadow');\n      if (dropShadowSteps == oldDropShadow.length) {\n        return oldDropShadow;\n      }\n      oldDropShadow.remove();\n      var dropShadows = [];\n      for (var i=0; i < dropShadowSteps;) {\n        dropShadows[i++] = '<div style=\"top:' + i + 'px;left:' + i + 'px;\"></div>';\n      }\n\n      newDropShadow = $(dropShadows.join(''))\n      .css({\n        position: 'absolute',\n        backgroundColor: '#000',\n        zIndex: cluezIndex -1,\n        opacity: .1\n      })\n      .addClass('cluetip-drop-shadow')\n      .prependTo('#cluetip');\n      return newDropShadow;\n\n    }\n\n\n    return this;\n  };\n\n  (function() {\n    $.support = $.support || {};\n    // check support for CSS3 properties (currently only boxShadow)\n    var div = document.createElement('div'),\n        divStyle = div.style,\n        styleProps = ['boxShadow'],\n        prefixes = ['moz', 'Moz', 'webkit', 'o'];\n\n    for (var i=0, sl = styleProps.length; i < sl; i++) {\n      var prop = styleProps[i],\n          uProp = prop.charAt(0).toUpperCase() + prop.slice(1);\n\n      if ( typeof divStyle[ prop ] !== 'undefined' ) {\n        $.support[ prop ] = prop;\n      } else {\n        for (var j=0, pl = prefixes.length; j < pl; j++) {\n\n          if (typeof divStyle[ prefixes[j] + uProp ] !== 'undefined') {\n            $.support[ prop ] = prefixes[j] + uProp;\n            break;\n          }\n        }\n      }\n    }\n    div = null; delete div;\n  })();\n\n/*\n * options for clueTip\n *\n * each one can be explicitly overridden by changing its value.\n * for example: $.fn.cluetip.defaults.width = 200;\n * would change the default width for all clueTips to 200.\n *\n * each one can also be overridden by passing an options map to the cluetip method.\n * for example: $('a.example').cluetip({width: 200});\n * would change the default width to 200 for clueTips invoked by a link with class of \"example\"\n *\n */\n\n  $.fn.cluetip.defaults = {  // set up default options\n    width:            275,      // The width of the clueTip\n    height:           'auto',   // The height of the clueTip\n    cluezIndex:       97,       // Sets the z-index style property of the clueTip\n    positionBy:       'auto',   // Sets the type of positioning: 'auto', 'mouse','bottomTop', 'fixed'\n    topOffset:        15,       // Number of px to offset clueTip from top of invoking element\n    leftOffset:       15,       // Number of px to offset clueTip from left of invoking element\n    local:            false,    // Whether to use content from the same page for the clueTip's body\n    localPrefix:      null,       // string to be prepended to the tip attribute if local is true\n    localIdSuffix:    null,     // string to be appended to the cluetip content element's id if local is true\n    hideLocal:        true,     // If local option is set to true, this determines whether local content\n                                // to be shown in clueTip should be hidden at its original location\n    attribute:        'rel',    // the attribute to be used for fetching the clueTip's body content\n    titleAttribute:   'title',  // the attribute to be used for fetching the clueTip's title\n    splitTitle:       '',       // A character used to split the title attribute into the clueTip title and divs\n                                // within the clueTip body. more info below [6]\n    escapeTitle:      false,    // whether to html escape the title attribute\n    showTitle:        true,     // show title bar of the clueTip, even if title attribute not set\n    cluetipClass:     'default',// class added to outermost clueTip div in the form of 'cluetip-' + clueTipClass.\n    hoverClass:       '',       // class applied to the invoking element onmouseover and removed onmouseout\n    waitImage:        true,     // whether to show a \"loading\" img, which is set in jquery.cluetip.css\n    cursor:           'help',\n    arrows:           false,    // if true, displays arrow on appropriate side of clueTip\n    dropShadow:       true,     // set to false if you don't want the drop-shadow effect on the clueTip\n    dropShadowSteps:  6,        // adjusts the size of the drop shadow\n    sticky:           false,    // keep visible until manually closed\n    mouseOutClose:    false,    // close when clueTip is moused out\n    activation:       'hover',  // set to 'click' to force user to click to show clueTip\n                                // set to 'focus' to show on focus of a form element and hide on blur\n    clickThrough:     false,    // if true, and activation is not 'click', then clicking on link will take user to the link's href,\n                                // even if href and tipAttribute are equal\n    tracking:         false,    // if true, clueTip will track mouse movement (experimental)\n    delayedClose:     0,        // close clueTip on a timed delay (experimental)\n    closePosition:    'top',    // location of close text for sticky cluetips; can be 'top' or 'bottom' or 'title'\n    closeText:        'Close',  // text (or HTML) to to be clicked to close sticky clueTips\n    truncate:         0,        // number of characters to truncate clueTip's contents. if 0, no truncation occurs\n\n    // effect and speed for opening clueTips\n    fx: {\n                      open:       'show', // can be 'show' or 'slideDown' or 'fadeIn'\n                      openSpeed:  ''\n    },\n\n    // settings for when hoverIntent plugin is used\n    hoverIntent: {\n                      sensitivity:  3,\n              \t\t\t  interval:     50,\n              \t\t\t  timeout:      0\n    },\n\n    // short-circuit function to run just before clueTip is shown.\n    onActivate:       function(e) {return true;},\n    // function to run just after clueTip is shown.\n    onShow:           function(ct, ci){},\n    // function to run just after clueTip is hidden.\n    onHide:           function(ct, ci){},\n    // whether to cache results of ajax request to avoid unnecessary hits to server\n    ajaxCache:        true,\n\n    // process data retrieved via xhr before it's displayed\n    ajaxProcess:      function(data) {\n                        data = data.replace(/<(script|style|title)[^<]+<\\/(script|style|title)>/gm, '').replace(/<(link|meta)[^>]+>/g,'');\n                        return data;\n    },\n\n    // can pass in standard $.ajax() parameters. Callback functions, such as beforeSend,\n    // will be queued first within the default callbacks.\n    // The only exception is error, which overrides the default\n    ajaxSettings: {\n                      // error: function(ct, ci) { /* override default error callback */ }\n                      // beforeSend: function(ct, ci) { /* called first within default beforeSend callback }\n                      dataType: 'html'\n    },\n    debug: false\n  };\n\n\n/*\n * Global defaults for clueTips. Apply to all calls to the clueTip plugin.\n *\n * @example $.cluetip.setup({\n *   insertionType: 'prependTo',\n *   insertionElement: '#container'\n * });\n *\n * @property\n * @name $.cluetip.setup\n * @type Map\n * @cat Plugins/tooltip\n * @option String insertionType: Default is 'appendTo'. Determines the method to be used for inserting the clueTip into the DOM. Permitted values are 'appendTo', 'prependTo', 'insertBefore', and 'insertAfter'\n * @option String insertionElement: Default is 'body'. Determines which element in the DOM the plugin will reference when inserting the clueTip.\n *\n */\n\n  var insertionType = 'appendTo', insertionElement = 'body';\n\n  $.cluetip.setup = function(options) {\n    if (options && options.insertionType && (options.insertionType).match(/appendTo|prependTo|insertBefore|insertAfter/)) {\n      insertionType = options.insertionType;\n    }\n    if (options && options.insertionElement) {\n      insertionElement = options.insertionElement;\n    }\n  };\n\n})(jQuery);";
},function(e,t,n){n(3)(n(30))},function(e,t){e.exports="// tipsy, facebook style tooltips for jquery\n// version 1.0.0a\n// (c) 2008-2010 jason frame [jason@onehackoranother.com]\n// releated under the MIT license\n\n(function($) {\n    \n    function fixTitle($ele) {\n        if ($ele.attr('title') || typeof($ele.attr('original-title')) != 'string') {\n            $ele.attr('original-title', $ele.attr('title') || '').removeAttr('title');\n        }\n    }\n    \n    function Tipsy(element, options) {\n        this.$element = $(element);\n        this.options = options;\n        this.enabled = true;\n        fixTitle(this.$element);\n    }\n    \n    Tipsy.prototype = {\n        show: function(args) {\n            args = typeof args !== 'undefined' ? args : {};\n\n            var title = this.getTitle();\n            if (title && this.enabled) {\n                var $tip = this.tip();\n                \n                $tip.find('.tipsy-inner')[this.options.html ? 'html' : 'text'](title);\n                $tip[0].className = 'tipsy'; // reset classname in case of dynamic gravity\n                $tip.remove().css({top: 0, left: 0, visibility: 'hidden', display: 'block'}).appendTo(document.body);\n\n                if(typeof args.addClass !== 'undefined') {\n                  args.addClass($tip);\n                }\n                \n                var pos = $.extend({}, this.$element.offset(), {\n                    width: this.$element[0].offsetWidth,\n                    height: this.$element[0].offsetHeight\n                });\n                \n                var actualWidth = $tip[0].offsetWidth, actualHeight = $tip[0].offsetHeight;\n                var gravity = (typeof this.options.gravity == 'function')\n                                ? this.options.gravity.call(this.$element[0])\n                                : this.options.gravity;\n                \n                var tp;\n                switch (gravity.charAt(0)) {\n                    case 'n':\n                        tp = {top: pos.top + pos.height + this.options.offset, left: pos.left + pos.width / 2 - actualWidth / 2};\n                        break;\n                    case 's':\n                        tp = {top: pos.top - actualHeight - this.options.offset, left: pos.left + pos.width / 2 - actualWidth / 2};\n                        break;\n                    case 'e':\n                        tp = {top: pos.top + pos.height / 2 - actualHeight / 2, left: pos.left - actualWidth - this.options.offset};\n                        break;\n                    case 'w':\n                        tp = {top: pos.top + pos.height / 2 - actualHeight / 2, left: pos.left + pos.width + this.options.offset};\n                        break;\n                }\n                \n                if (gravity.length == 2) {\n                    if (gravity.charAt(1) == 'w') {\n                        tp.left = pos.left + pos.width / 2 - 15;\n                    } else {\n                        tp.left = pos.left + pos.width / 2 - actualWidth + 15;\n                    }\n                }\n\n                if(typeof args.posOffset !== 'undefined') {\n                  tp.top += args.posOffset.top;\n                  tp.left += args.posOffset.left;\n                }\n                else if (typeof args.pos !== 'undefined') {\n                  tp.top = args.pos.top;\n                  tp.left = args.pos.left;\n                }\n\n                $tip.css(tp).addClass('tipsy-' + gravity);\n                $tip.attr(\"role\", \"tooltip\");\n                if (this.options.fade) {\n                    $tip.stop().css({opacity: 0, display: 'block', visibility: 'visible'}).animate({opacity: this.options.opacity});\n                } else {\n                    $tip.css({visibility: 'visible', opacity: this.options.opacity});\n                }\n            }\n        },\n        \n        hide: function() {\n            if (this.options.fade) {\n                this.tip().stop().fadeOut(function() { $(this).remove(); });\n            } else {\n                this.tip().remove();\n            }\n        },\n        \n        getTitle: function() {\n            var title, $e = this.$element, o = this.options;\n            fixTitle($e);\n            var title, o = this.options;\n            if (typeof o.title == 'string') {\n                title = $e.attr(o.title == 'title' ? 'original-title' : o.title);\n            } else if (typeof o.title == 'function') {\n                title = o.title.call($e[0]);\n            }\n            title = ('' + title).replace(/(^\\s*|\\s*$)/, \"\");\n            return title || o.fallback;\n        },\n        \n        tip: function() {\n            if (!this.$tip) {\n                this.$tip = $('<div class=\"tipsy\"></div>').html('<div class=\"tipsy-arrow\"></div><div class=\"tipsy-inner\"></div>');\n            }\n            return this.$tip;\n        },\n        \n        validate: function() {\n            if (!this.$element[0].parentNode) {\n                this.hide();\n                this.$element = null;\n                this.options = null;\n            }\n        },\n        \n        enable: function() { this.enabled = true; },\n        disable: function() { this.enabled = false; },\n        toggleEnabled: function() { this.enabled = !this.enabled; }\n    };\n    \n    $.fn.tipsy = function(options, args) {\n        this.attr('tabindex', 0);\n\n        if (options === true) {\n            return this.data('tipsy');\n        } else if (typeof options == 'string') {\n            // SGY: add support for passing args to Tipsy.methods()\n            args = typeof args !== 'undefined' ? args : {};\n            return this.data('tipsy')[options](args);\n        }\n        \n        options = $.extend({}, $.fn.tipsy.defaults, options);\n        \n        function get(ele) {\n            var tipsy = $.data(ele, 'tipsy');\n            if (!tipsy) {\n                tipsy = new Tipsy(ele, $.fn.tipsy.elementOptions(ele, options));\n                $.data(ele, 'tipsy', tipsy);\n            }\n            return tipsy;\n        }\n        \n        function enter() {\n            var tipsy = get(this);\n            tipsy.hoverState = 'in';\n            if (options.delayIn == 0) {\n                tipsy.show();\n            } else {\n                setTimeout(function() { if (tipsy.hoverState == 'in') tipsy.show(); }, options.delayIn);\n            }\n        };\n        \n        function leave() {\n            var tipsy = get(this);\n            tipsy.hoverState = 'out';\n            if (options.delayOut == 0) {\n                tipsy.hide();\n            } else {\n                setTimeout(function() { if (tipsy.hoverState == 'out') tipsy.hide(); }, options.delayOut);\n            }\n        };\n        \n        if (!options.live) this.each(function() { get(this); });\n        \n        if (options.trigger != 'manual') {\n            var binder   = options.live ? 'live' : 'bind',\n                eventIn  = options.trigger == 'hover' ? 'mouseenter focus' : 'focus',\n                eventOut = options.trigger == 'hover' ? 'mouseleave blur' : 'blur';\n            this[binder](eventIn, enter)[binder](eventOut, leave);\n        }\n        \n        return this;\n        \n    };\n    \n    $.fn.tipsy.defaults = {\n        delayIn: 0,\n        delayOut: 0,\n        fade: false,\n        fallback: '',\n        gravity: 'n',\n        html: false,\n        live: false,\n        offset: 0,\n        opacity: 0.8,\n        title: 'title',\n        trigger: 'hover'\n    };\n    \n    // Overwrite this method to provide options on a per-element basis.\n    // For example, you could store the gravity in a 'tipsy-gravity' attribute:\n    // return $.extend({}, options, {gravity: $(ele).attr('tipsy-gravity') || 'n' });\n    // (remember - do not modify 'options' in place!)\n    $.fn.tipsy.elementOptions = function(ele, options) {\n        return $.metadata ? $.extend({}, options, $(ele).metadata()) : options;\n    };\n    \n    $.fn.tipsy.autoNS = function() {\n        return $(this).offset().top > ($(document).scrollTop() + $(window).height() / 2) ? 's' : 'n';\n    };\n    \n    $.fn.tipsy.autoWE = function() {\n        return $(this).offset().left > ($(document).scrollLeft() + $(window).width() / 2) ? 'e' : 'w';\n    };\n    \n})(jQuery);\n"},function(e,t,n){n(3)(n(32))},function(e,t){e.exports="/*!\n * jQuery Form Plugin\n * version: 3.18 (28-SEP-2012)\n * @requires jQuery v1.5 or later\n *\n * Examples and documentation at: http://malsup.com/jquery/form/\n * Project repository: https://github.com/malsup/form\n * Dual licensed under the MIT and GPL licenses:\n *    http://malsup.github.com/mit-license.txt\n *    http://malsup.github.com/gpl-license-v2.txt\n */\n/*global ActiveXObject alert */\n;(function($) {\n\"use strict\";\n\n/*\n    Usage Note:\n    -----------\n    Do not use both ajaxSubmit and ajaxForm on the same form.  These\n    functions are mutually exclusive.  Use ajaxSubmit if you want\n    to bind your own submit handler to the form.  For example,\n\n    $(document).ready(function() {\n        $('#myForm').on('submit', function(e) {\n            e.preventDefault(); // <-- important\n            $(this).ajaxSubmit({\n                target: '#output'\n            });\n        });\n    });\n\n    Use ajaxForm when you want the plugin to manage all the event binding\n    for you.  For example,\n\n    $(document).ready(function() {\n        $('#myForm').ajaxForm({\n            target: '#output'\n        });\n    });\n\n    You can also use ajaxForm with delegation (requires jQuery v1.7+), so the\n    form does not have to exist when you invoke ajaxForm:\n\n    $('#myForm').ajaxForm({\n        delegation: true,\n        target: '#output'\n    });\n\n    When using ajaxForm, the ajaxSubmit function will be invoked for you\n    at the appropriate time.\n*/\n\n/**\n * Feature detection\n */\nvar feature = {};\nfeature.fileapi = $(\"<input type='file'/>\").get(0).files !== undefined;\nfeature.formdata = window.FormData !== undefined;\n\n/**\n * ajaxSubmit() provides a mechanism for immediately submitting\n * an HTML form using AJAX.\n */\n$.fn.ajaxSubmit = function(options) {\n    /*jshint scripturl:true */\n\n    // fast fail if nothing selected (http://dev.jquery.com/ticket/2752)\n    if (!this.length) {\n        log('ajaxSubmit: skipping submit process - no element selected');\n        return this;\n    }\n\n    var method, action, url, $form = this;\n\n    if (typeof options == 'function') {\n        options = { success: options };\n    }\n\n    method = this.attr('method');\n    action = this.attr('action');\n    url = (typeof action === 'string') ? $.trim(action) : '';\n    url = url || window.location.href || '';\n    if (url) {\n        // clean url (don't include hash vaue)\n        url = (url.match(/^([^#]+)/)||[])[1];\n    }\n\n    options = $.extend(true, {\n        url:  url,\n        success: $.ajaxSettings.success,\n        type: method || 'GET',\n        iframeSrc: /^https/i.test(window.location.href || '') ? 'javascript:false' : 'about:blank'\n    }, options);\n\n    // hook for manipulating the form data before it is extracted;\n    // convenient for use with rich editors like tinyMCE or FCKEditor\n    var veto = {};\n    this.trigger('form-pre-serialize', [this, options, veto]);\n    if (veto.veto) {\n        log('ajaxSubmit: submit vetoed via form-pre-serialize trigger');\n        return this;\n    }\n\n    // provide opportunity to alter form data before it is serialized\n    if (options.beforeSerialize && options.beforeSerialize(this, options) === false) {\n        log('ajaxSubmit: submit aborted via beforeSerialize callback');\n        return this;\n    }\n\n    var traditional = options.traditional;\n    if ( traditional === undefined ) {\n        traditional = $.ajaxSettings.traditional;\n    }\n\n    var elements = [];\n    var qx, a = this.formToArray(options.semantic, elements);\n    if (options.data) {\n        options.extraData = options.data;\n        qx = $.param(options.data, traditional);\n    }\n\n    // give pre-submit callback an opportunity to abort the submit\n    if (options.beforeSubmit && options.beforeSubmit(a, this, options) === false) {\n        log('ajaxSubmit: submit aborted via beforeSubmit callback');\n        return this;\n    }\n\n    // fire vetoable 'validate' event\n    this.trigger('form-submit-validate', [a, this, options, veto]);\n    if (veto.veto) {\n        log('ajaxSubmit: submit vetoed via form-submit-validate trigger');\n        return this;\n    }\n\n    var q = $.param(a, traditional);\n    if (qx) {\n        q = ( q ? (q + '&' + qx) : qx );\n    }\n    if (options.type.toUpperCase() == 'GET') {\n        options.url += (options.url.indexOf('?') >= 0 ? '&' : '?') + q;\n        options.data = null;  // data is null for 'get'\n    }\n    else {\n        options.data = q; // data is the query string for 'post'\n    }\n\n    var callbacks = [];\n    if (options.resetForm) {\n        callbacks.push(function() { $form.resetForm(); });\n    }\n    if (options.clearForm) {\n        callbacks.push(function() { $form.clearForm(options.includeHidden); });\n    }\n\n    // perform a load on the target only if dataType is not provided\n    if (!options.dataType && options.target) {\n        var oldSuccess = options.success || function(){};\n        callbacks.push(function(data) {\n            var fn = options.replaceTarget ? 'replaceWith' : 'html';\n            $(options.target)[fn](data).each(oldSuccess, arguments);\n        });\n    }\n    else if (options.success) {\n        callbacks.push(options.success);\n    }\n\n    options.success = function(data, status, xhr) { // jQuery 1.4+ passes xhr as 3rd arg\n        var context = options.context || this ;    // jQuery 1.4+ supports scope context\n        for (var i=0, max=callbacks.length; i < max; i++) {\n            callbacks[i].apply(context, [data, status, xhr || $form, $form]);\n        }\n    };\n\n    // are there files to upload?\n    var fileInputs = $('input:file:enabled[value]', this); // [value] (issue #113)\n    var hasFileInputs = fileInputs.length > 0;\n    var mp = 'multipart/form-data';\n    var multipart = ($form.attr('enctype') == mp || $form.attr('encoding') == mp);\n\n    var fileAPI = feature.fileapi && feature.formdata;\n    log(\"fileAPI :\" + fileAPI);\n    var shouldUseFrame = (hasFileInputs || multipart) && !fileAPI;\n\n    var jqxhr;\n\n    // options.iframe allows user to force iframe mode\n    // 06-NOV-09: now defaulting to iframe mode if file input is detected\n    if (options.iframe !== false && (options.iframe || shouldUseFrame)) {\n        // hack to fix Safari hang (thanks to Tim Molendijk for this)\n        // see:  http://groups.google.com/group/jquery-dev/browse_thread/thread/36395b7ab510dd5d\n        if (options.closeKeepAlive) {\n            $.get(options.closeKeepAlive, function() {\n                jqxhr = fileUploadIframe(a);\n            });\n        }\n        else {\n            jqxhr = fileUploadIframe(a);\n        }\n    }\n    else if ((hasFileInputs || multipart) && fileAPI) {\n        jqxhr = fileUploadXhr(a);\n    }\n    else {\n        jqxhr = $.ajax(options);\n    }\n\n    $form.removeData('jqxhr').data('jqxhr', jqxhr);\n\n    // clear element array\n    for (var k=0; k < elements.length; k++)\n        elements[k] = null;\n\n    // fire 'notify' event\n    this.trigger('form-submit-notify', [this, options]);\n    return this;\n\n    // utility fn for deep serialization\n    function deepSerialize(extraData){\n        var serialized = $.param(extraData).split('&');\n        var len = serialized.length;\n        var result = {};\n        var i, part;\n        for (i=0; i < len; i++) {\n            part = serialized[i].split('=');\n            result[decodeURIComponent(part[0])] = decodeURIComponent(part[1]);\n        }\n        return result;\n    }\n\n     // XMLHttpRequest Level 2 file uploads (big hat tip to francois2metz)\n    function fileUploadXhr(a) {\n        var formdata = new FormData();\n\n        for (var i=0; i < a.length; i++) {\n            formdata.append(a[i].name, a[i].value);\n        }\n\n        if (options.extraData) {\n            var serializedData = deepSerialize(options.extraData);\n            for (var p in serializedData)\n                if (serializedData.hasOwnProperty(p))\n                    formdata.append(p, serializedData[p]);\n        }\n\n        options.data = null;\n\n        var s = $.extend(true, {}, $.ajaxSettings, options, {\n            contentType: false,\n            processData: false,\n            cache: false,\n            type: method || 'POST'\n        });\n\n        if (options.uploadProgress) {\n            // workaround because jqXHR does not expose upload property\n            s.xhr = function() {\n                var xhr = jQuery.ajaxSettings.xhr();\n                if (xhr.upload) {\n                    xhr.upload.onprogress = function(event) {\n                        var percent = 0;\n                        var position = event.loaded || event.position; /*event.position is deprecated*/\n                        var total = event.total;\n                        if (event.lengthComputable) {\n                            percent = Math.ceil(position / total * 100);\n                        }\n                        options.uploadProgress(event, position, total, percent);\n                    };\n                }\n                return xhr;\n            };\n        }\n\n        s.data = null;\n            var beforeSend = s.beforeSend;\n            s.beforeSend = function(xhr, o) {\n                o.data = formdata;\n                if(beforeSend)\n                    beforeSend.call(this, xhr, o);\n        };\n        return $.ajax(s);\n    }\n\n    // private function for handling file uploads (hat tip to YAHOO!)\n    function fileUploadIframe(a) {\n        var form = $form[0], el, i, s, g, id, $io, io, xhr, sub, n, timedOut, timeoutHandle;\n        var useProp = !!$.fn.prop;\n        var deferred = $.Deferred();\n\n        if ($(':input[name=submit],:input[id=submit]', form).length) {\n            // if there is an input with a name or id of 'submit' then we won't be\n            // able to invoke the submit fn on the form (at least not x-browser)\n            alert('Error: Form elements must not have name or id of \"submit\".');\n            deferred.reject();\n            return deferred;\n        }\n\n        if (a) {\n            // ensure that every serialized input is still enabled\n            for (i=0; i < elements.length; i++) {\n                el = $(elements[i]);\n                if ( useProp )\n                    el.prop('disabled', false);\n                else\n                    el.removeAttr('disabled');\n            }\n        }\n\n        s = $.extend(true, {}, $.ajaxSettings, options);\n        s.context = s.context || s;\n        id = 'jqFormIO' + (new Date().getTime());\n        if (s.iframeTarget) {\n            $io = $(s.iframeTarget);\n            n = $io.attr('name');\n            if (!n)\n                 $io.attr('name', id);\n            else\n                id = n;\n        }\n        else {\n            $io = $('<iframe name=\"' + id + '\" src=\"'+ s.iframeSrc +'\" />');\n            $io.css({ position: 'absolute', top: '-1000px', left: '-1000px' });\n        }\n        io = $io[0];\n\n\n        xhr = { // mock object\n            aborted: 0,\n            responseText: null,\n            responseXML: null,\n            status: 0,\n            statusText: 'n/a',\n            getAllResponseHeaders: function() {},\n            getResponseHeader: function() {},\n            setRequestHeader: function() {},\n            abort: function(status) {\n                var e = (status === 'timeout' ? 'timeout' : 'aborted');\n                log('aborting upload... ' + e);\n                this.aborted = 1;\n                // #214\n                if (io.contentWindow.document.execCommand) {\n                    try { // #214\n                        io.contentWindow.document.execCommand('Stop');\n                    } catch(ignore) {}\n                }\n                $io.attr('src', s.iframeSrc); // abort op in progress\n                xhr.error = e;\n                if (s.error)\n                    s.error.call(s.context, xhr, e, status);\n                if (g)\n                    $.event.trigger(\"ajaxError\", [xhr, s, e]);\n                if (s.complete)\n                    s.complete.call(s.context, xhr, e);\n            }\n        };\n\n        g = s.global;\n        // trigger ajax global events so that activity/block indicators work like normal\n        if (g && 0 === $.active++) {\n            $.event.trigger(\"ajaxStart\");\n        }\n        if (g) {\n            $.event.trigger(\"ajaxSend\", [xhr, s]);\n        }\n\n        if (s.beforeSend && s.beforeSend.call(s.context, xhr, s) === false) {\n            if (s.global) {\n                $.active--;\n            }\n            deferred.reject();\n            return deferred;\n        }\n        if (xhr.aborted) {\n            deferred.reject();\n            return deferred;\n        }\n\n        // add submitting element to data if we know it\n        sub = form.clk;\n        if (sub) {\n            n = sub.name;\n            if (n && !sub.disabled) {\n                s.extraData = s.extraData || {};\n                s.extraData[n] = sub.value;\n                if (sub.type == \"image\") {\n                    s.extraData[n+'.x'] = form.clk_x;\n                    s.extraData[n+'.y'] = form.clk_y;\n                }\n            }\n        }\n\n        var CLIENT_TIMEOUT_ABORT = 1;\n        var SERVER_ABORT = 2;\n\n        function getDoc(frame) {\n            var doc = frame.contentWindow ? frame.contentWindow.document : frame.contentDocument ? frame.contentDocument : frame.document;\n            return doc;\n        }\n\n        // Rails CSRF hack (thanks to Yvan Barthelemy)\n        var csrf_token = $('meta[name=csrf-token]').attr('content');\n        var csrf_param = $('meta[name=csrf-param]').attr('content');\n        if (csrf_param && csrf_token) {\n            s.extraData = s.extraData || {};\n            s.extraData[csrf_param] = csrf_token;\n        }\n\n        // take a breath so that pending repaints get some cpu time before the upload starts\n        function doSubmit() {\n            // make sure form attrs are set\n            var t = $form.attr('target'), a = $form.attr('action');\n\n            // update form attrs in IE friendly way\n            form.setAttribute('target',id);\n            if (!method) {\n                form.setAttribute('method', 'POST');\n            }\n            if (a != s.url) {\n                form.setAttribute('action', s.url);\n            }\n\n            // ie borks in some cases when setting encoding\n            if (! s.skipEncodingOverride && (!method || /post/i.test(method))) {\n                $form.attr({\n                    encoding: 'multipart/form-data',\n                    enctype:  'multipart/form-data'\n                });\n            }\n\n            // support timout\n            if (s.timeout) {\n                timeoutHandle = setTimeout(function() { timedOut = true; cb(CLIENT_TIMEOUT_ABORT); }, s.timeout);\n            }\n\n            // look for server aborts\n            function checkState() {\n                try {\n                    var state = getDoc(io).readyState;\n                    log('state = ' + state);\n                    if (state && state.toLowerCase() == 'uninitialized')\n                        setTimeout(checkState,50);\n                }\n                catch(e) {\n                    log('Server abort: ' , e, ' (', e.name, ')');\n                    cb(SERVER_ABORT);\n                    if (timeoutHandle)\n                        clearTimeout(timeoutHandle);\n                    timeoutHandle = undefined;\n                }\n            }\n\n            // add \"extra\" data to form if provided in options\n            var extraInputs = [];\n            try {\n                if (s.extraData) {\n                    for (var n in s.extraData) {\n                        if (s.extraData.hasOwnProperty(n)) {\n                           // if using the $.param format that allows for multiple values with the same name\n                           if($.isPlainObject(s.extraData[n]) && s.extraData[n].hasOwnProperty('name') && s.extraData[n].hasOwnProperty('value')) {\n                               extraInputs.push(\n                               $('<input type=\"hidden\" name=\"'+s.extraData[n].name+'\">').attr('value',s.extraData[n].value)\n                                   .appendTo(form)[0]);\n                           } else {\n                               extraInputs.push(\n                               $('<input type=\"hidden\" name=\"'+n+'\">').attr('value',s.extraData[n])\n                                   .appendTo(form)[0]);\n                           }\n                        }\n                    }\n                }\n\n                if (!s.iframeTarget) {\n                    // add iframe to doc and submit the form\n                    $io.appendTo('body');\n                    if (io.attachEvent)\n                        io.attachEvent('onload', cb);\n                    else\n                        io.addEventListener('load', cb, false);\n                }\n                setTimeout(checkState,15);\n                form.submit();\n            }\n            finally {\n                // reset attrs and remove \"extra\" input elements\n                form.setAttribute('action',a);\n                if(t) {\n                    form.setAttribute('target', t);\n                } else {\n                    $form.removeAttr('target');\n                }\n                $(extraInputs).remove();\n            }\n        }\n\n        if (s.forceSync) {\n            doSubmit();\n        }\n        else {\n            setTimeout(doSubmit, 10); // this lets dom updates render\n        }\n\n        var data, doc, domCheckCount = 50, callbackProcessed;\n\n        function cb(e) {\n            if (xhr.aborted || callbackProcessed) {\n                return;\n            }\n            try {\n                doc = getDoc(io);\n            }\n            catch(ex) {\n                log('cannot access response document: ', ex);\n                e = SERVER_ABORT;\n            }\n            if (e === CLIENT_TIMEOUT_ABORT && xhr) {\n                xhr.abort('timeout');\n                deferred.reject(xhr, 'timeout');\n                return;\n            }\n            else if (e == SERVER_ABORT && xhr) {\n                xhr.abort('server abort');\n                deferred.reject(xhr, 'error', 'server abort');\n                return;\n            }\n\n            if (!doc || doc.location.href == s.iframeSrc) {\n                // response not received yet\n                if (!timedOut)\n                    return;\n            }\n            if (io.detachEvent)\n                io.detachEvent('onload', cb);\n            else\n                io.removeEventListener('load', cb, false);\n\n            var status = 'success', errMsg;\n            try {\n                if (timedOut) {\n                    throw 'timeout';\n                }\n\n                var isXml = s.dataType == 'xml' || doc.XMLDocument || $.isXMLDoc(doc);\n                log('isXml='+isXml);\n                if (!isXml && window.opera && (doc.body === null || !doc.body.innerHTML)) {\n                    if (--domCheckCount) {\n                        // in some browsers (Opera) the iframe DOM is not always traversable when\n                        // the onload callback fires, so we loop a bit to accommodate\n                        log('requeing onLoad callback, DOM not available');\n                        setTimeout(cb, 250);\n                        return;\n                    }\n                    // let this fall through because server response could be an empty document\n                    //log('Could not access iframe DOM after mutiple tries.');\n                    //throw 'DOMException: not available';\n                }\n\n                //log('response detected');\n                var docRoot = doc.body ? doc.body : doc.documentElement;\n                xhr.responseText = docRoot ? docRoot.innerHTML : null;\n                xhr.responseXML = doc.XMLDocument ? doc.XMLDocument : doc;\n                if (isXml)\n                    s.dataType = 'xml';\n                xhr.getResponseHeader = function(header){\n                    var headers = {'content-type': s.dataType};\n                    return headers[header];\n                };\n                // support for XHR 'status' & 'statusText' emulation :\n                if (docRoot) {\n                    xhr.status = Number( docRoot.getAttribute('status') ) || xhr.status;\n                    xhr.statusText = docRoot.getAttribute('statusText') || xhr.statusText;\n                }\n\n                var dt = (s.dataType || '').toLowerCase();\n                var scr = /(json|script|text)/.test(dt);\n                if (scr || s.textarea) {\n                    // see if user embedded response in textarea\n                    var ta = doc.getElementsByTagName('textarea')[0];\n                    if (ta) {\n                        xhr.responseText = ta.value;\n                        // support for XHR 'status' & 'statusText' emulation :\n                        xhr.status = Number( ta.getAttribute('status') ) || xhr.status;\n                        xhr.statusText = ta.getAttribute('statusText') || xhr.statusText;\n                    }\n                    else if (scr) {\n                        // account for browsers injecting pre around json response\n                        var pre = doc.getElementsByTagName('pre')[0];\n                        var b = doc.getElementsByTagName('body')[0];\n                        if (pre) {\n                            xhr.responseText = pre.textContent ? pre.textContent : pre.innerText;\n                        }\n                        else if (b) {\n                            xhr.responseText = b.textContent ? b.textContent : b.innerText;\n                        }\n                    }\n                }\n                else if (dt == 'xml' && !xhr.responseXML && xhr.responseText) {\n                    xhr.responseXML = toXml(xhr.responseText);\n                }\n\n                try {\n                    data = httpData(xhr, dt, s);\n                }\n                catch (e) {\n                    status = 'parsererror';\n                    xhr.error = errMsg = (e || status);\n                }\n            }\n            catch (e) {\n                log('error caught: ',e);\n                status = 'error';\n                xhr.error = errMsg = (e || status);\n            }\n\n            if (xhr.aborted) {\n                log('upload aborted');\n                status = null;\n            }\n\n            if (xhr.status) { // we've set xhr.status\n                status = (xhr.status >= 200 && xhr.status < 300 || xhr.status === 304) ? 'success' : 'error';\n            }\n\n            // ordering of these callbacks/triggers is odd, but that's how $.ajax does it\n            if (status === 'success') {\n                if (s.success)\n                    s.success.call(s.context, data, 'success', xhr);\n                deferred.resolve(xhr.responseText, 'success', xhr);\n                if (g)\n                    $.event.trigger(\"ajaxSuccess\", [xhr, s]);\n            }\n            else if (status) {\n                if (errMsg === undefined)\n                    errMsg = xhr.statusText;\n                if (s.error)\n                    s.error.call(s.context, xhr, status, errMsg);\n                deferred.reject(xhr, 'error', errMsg);\n                if (g)\n                    $.event.trigger(\"ajaxError\", [xhr, s, errMsg]);\n            }\n\n            if (g)\n                $.event.trigger(\"ajaxComplete\", [xhr, s]);\n\n            if (g && ! --$.active) {\n                $.event.trigger(\"ajaxStop\");\n            }\n\n            if (s.complete)\n                s.complete.call(s.context, xhr, status);\n\n            callbackProcessed = true;\n            if (s.timeout)\n                clearTimeout(timeoutHandle);\n\n            // clean up\n            setTimeout(function() {\n                if (!s.iframeTarget)\n                    $io.remove();\n                xhr.responseXML = null;\n            }, 100);\n        }\n\n        var toXml = $.parseXML || function(s, doc) { // use parseXML if available (jQuery 1.5+)\n            if (window.ActiveXObject) {\n                doc = new ActiveXObject('Microsoft.XMLDOM');\n                doc.async = 'false';\n                doc.loadXML(s);\n            }\n            else {\n                doc = (new DOMParser()).parseFromString(s, 'text/xml');\n            }\n            return (doc && doc.documentElement && doc.documentElement.nodeName != 'parsererror') ? doc : null;\n        };\n        var parseJSON = $.parseJSON || function(s) {\n            /*jslint evil:true */\n            return window['eval']('(' + s + ')');\n        };\n\n        var httpData = function( xhr, type, s ) { // mostly lifted from jq1.4.4\n\n            var ct = xhr.getResponseHeader('content-type') || '',\n                xml = type === 'xml' || !type && ct.indexOf('xml') >= 0,\n                data = xml ? xhr.responseXML : xhr.responseText;\n\n            if (xml && data.documentElement.nodeName === 'parsererror') {\n                if ($.error)\n                    $.error('parsererror');\n            }\n            if (s && s.dataFilter) {\n                data = s.dataFilter(data, type);\n            }\n            if (typeof data === 'string') {\n                if (type === 'json' || !type && ct.indexOf('json') >= 0) {\n                    data = parseJSON(data);\n                } else if (type === \"script\" || !type && ct.indexOf(\"javascript\") >= 0) {\n                    $.globalEval(data);\n                }\n            }\n            return data;\n        };\n\n        return deferred;\n    }\n};\n\n/**\n * ajaxForm() provides a mechanism for fully automating form submission.\n *\n * The advantages of using this method instead of ajaxSubmit() are:\n *\n * 1: This method will include coordinates for <input type=\"image\" /> elements (if the element\n *    is used to submit the form).\n * 2. This method will include the submit element's name/value data (for the element that was\n *    used to submit the form).\n * 3. This method binds the submit() method to the form for you.\n *\n * The options argument for ajaxForm works exactly as it does for ajaxSubmit.  ajaxForm merely\n * passes the options argument along after properly binding events for submit elements and\n * the form itself.\n */\n$.fn.ajaxForm = function(options) {\n    options = options || {};\n    options.delegation = options.delegation && $.isFunction($.fn.on);\n\n    // in jQuery 1.3+ we can fix mistakes with the ready state\n    if (!options.delegation && this.length === 0) {\n        var o = { s: this.selector, c: this.context };\n        if (!$.isReady && o.s) {\n            log('DOM not ready, queuing ajaxForm');\n            $(function() {\n                $(o.s,o.c).ajaxForm(options);\n            });\n            return this;\n        }\n        // is your DOM ready?  http://docs.jquery.com/Tutorials:Introducing_$(document).ready()\n        log('terminating; zero elements found by selector' + ($.isReady ? '' : ' (DOM not ready)'));\n        return this;\n    }\n\n    if ( options.delegation ) {\n        $(document)\n            .off('submit.form-plugin', this.selector, doAjaxSubmit)\n            .off('click.form-plugin', this.selector, captureSubmittingElement)\n            .on('submit.form-plugin', this.selector, options, doAjaxSubmit)\n            .on('click.form-plugin', this.selector, options, captureSubmittingElement);\n        return this;\n    }\n\n    return this.ajaxFormUnbind()\n        .bind('submit.form-plugin', options, doAjaxSubmit)\n        .bind('click.form-plugin', options, captureSubmittingElement);\n};\n\n// private event handlers\nfunction doAjaxSubmit(e) {\n    /*jshint validthis:true */\n    var options = e.data;\n    if (!e.isDefaultPrevented()) { // if event has been canceled, don't proceed\n        e.preventDefault();\n        $(this).ajaxSubmit(options);\n    }\n}\n\nfunction captureSubmittingElement(e) {\n    /*jshint validthis:true */\n    var target = e.target;\n    var $el = $(target);\n    if (!($el.is(\":submit,input:image\"))) {\n        // is this a child element of the submit el?  (ex: a span within a button)\n        var t = $el.closest(':submit');\n        if (t.length === 0) {\n            return;\n        }\n        target = t[0];\n    }\n    var form = this;\n    form.clk = target;\n    if (target.type == 'image') {\n        if (e.offsetX !== undefined) {\n            form.clk_x = e.offsetX;\n            form.clk_y = e.offsetY;\n        } else if (typeof $.fn.offset == 'function') {\n            var offset = $el.offset();\n            form.clk_x = e.pageX - offset.left;\n            form.clk_y = e.pageY - offset.top;\n        } else {\n            form.clk_x = e.pageX - target.offsetLeft;\n            form.clk_y = e.pageY - target.offsetTop;\n        }\n    }\n    // clear form vars\n    setTimeout(function() { form.clk = form.clk_x = form.clk_y = null; }, 100);\n}\n\n\n// ajaxFormUnbind unbinds the event handlers that were bound by ajaxForm\n$.fn.ajaxFormUnbind = function() {\n    return this.unbind('submit.form-plugin click.form-plugin');\n};\n\n/**\n * formToArray() gathers form element data into an array of objects that can\n * be passed to any of the following ajax functions: $.get, $.post, or load.\n * Each object in the array has both a 'name' and 'value' property.  An example of\n * an array for a simple login form might be:\n *\n * [ { name: 'username', value: 'jresig' }, { name: 'password', value: 'secret' } ]\n *\n * It is this array that is passed to pre-submit callback functions provided to the\n * ajaxSubmit() and ajaxForm() methods.\n */\n$.fn.formToArray = function(semantic, elements) {\n    var a = [];\n    if (this.length === 0) {\n        return a;\n    }\n\n    var form = this[0];\n    var els = semantic ? form.getElementsByTagName('*') : form.elements;\n    if (!els) {\n        return a;\n    }\n\n    var i,j,n,v,el,max,jmax;\n    for(i=0, max=els.length; i < max; i++) {\n        el = els[i];\n        n = el.name;\n        if (!n) {\n            continue;\n        }\n\n        if (semantic && form.clk && el.type == \"image\") {\n            // handle image inputs on the fly when semantic == true\n            if(!el.disabled && form.clk == el) {\n                a.push({name: n, value: $(el).val(), type: el.type });\n                a.push({name: n+'.x', value: form.clk_x}, {name: n+'.y', value: form.clk_y});\n            }\n            continue;\n        }\n\n        v = $.fieldValue(el, true);\n        if (v && v.constructor == Array) {\n            if (elements)\n                elements.push(el);\n            for(j=0, jmax=v.length; j < jmax; j++) {\n                a.push({name: n, value: v[j]});\n            }\n        }\n        else if (feature.fileapi && el.type == 'file' && !el.disabled) {\n            if (elements)\n                elements.push(el);\n            var files = el.files;\n            if (files.length) {\n                for (j=0; j < files.length; j++) {\n                    a.push({name: n, value: files[j], type: el.type});\n                }\n            }\n            else {\n                // #180\n                a.push({ name: n, value: '', type: el.type });\n            }\n        }\n        else if (v !== null && typeof v != 'undefined') {\n            if (elements)\n                elements.push(el);\n            a.push({name: n, value: v, type: el.type, required: el.required});\n        }\n    }\n\n    if (!semantic && form.clk) {\n        // input type=='image' are not found in elements array! handle it here\n        var $input = $(form.clk), input = $input[0];\n        n = input.name;\n        if (n && !input.disabled && input.type == 'image') {\n            a.push({name: n, value: $input.val()});\n            a.push({name: n+'.x', value: form.clk_x}, {name: n+'.y', value: form.clk_y});\n        }\n    }\n    return a;\n};\n\n/**\n * Serializes form data into a 'submittable' string. This method will return a string\n * in the format: name1=value1&amp;name2=value2\n */\n$.fn.formSerialize = function(semantic) {\n    //hand off to jQuery.param for proper encoding\n    return $.param(this.formToArray(semantic));\n};\n\n/**\n * Serializes all field elements in the jQuery object into a query string.\n * This method will return a string in the format: name1=value1&amp;name2=value2\n */\n$.fn.fieldSerialize = function(successful) {\n    var a = [];\n    this.each(function() {\n        var n = this.name;\n        if (!n) {\n            return;\n        }\n        var v = $.fieldValue(this, successful);\n        if (v && v.constructor == Array) {\n            for (var i=0,max=v.length; i < max; i++) {\n                a.push({name: n, value: v[i]});\n            }\n        }\n        else if (v !== null && typeof v != 'undefined') {\n            a.push({name: this.name, value: v});\n        }\n    });\n    //hand off to jQuery.param for proper encoding\n    return $.param(a);\n};\n\n/**\n * Returns the value(s) of the element in the matched set.  For example, consider the following form:\n *\n *  <form><fieldset>\n *      <input name=\"A\" type=\"text\" />\n *      <input name=\"A\" type=\"text\" />\n *      <input name=\"B\" type=\"checkbox\" value=\"B1\" />\n *      <input name=\"B\" type=\"checkbox\" value=\"B2\"/>\n *      <input name=\"C\" type=\"radio\" value=\"C1\" />\n *      <input name=\"C\" type=\"radio\" value=\"C2\" />\n *  </fieldset></form>\n *\n *  var v = $(':text').fieldValue();\n *  // if no values are entered into the text inputs\n *  v == ['','']\n *  // if values entered into the text inputs are 'foo' and 'bar'\n *  v == ['foo','bar']\n *\n *  var v = $(':checkbox').fieldValue();\n *  // if neither checkbox is checked\n *  v === undefined\n *  // if both checkboxes are checked\n *  v == ['B1', 'B2']\n *\n *  var v = $(':radio').fieldValue();\n *  // if neither radio is checked\n *  v === undefined\n *  // if first radio is checked\n *  v == ['C1']\n *\n * The successful argument controls whether or not the field element must be 'successful'\n * (per http://www.w3.org/TR/html4/interact/forms.html#successful-controls).\n * The default value of the successful argument is true.  If this value is false the value(s)\n * for each element is returned.\n *\n * Note: This method *always* returns an array.  If no valid value can be determined the\n *    array will be empty, otherwise it will contain one or more values.\n */\n$.fn.fieldValue = function(successful) {\n    for (var val=[], i=0, max=this.length; i < max; i++) {\n        var el = this[i];\n        var v = $.fieldValue(el, successful);\n        if (v === null || typeof v == 'undefined' || (v.constructor == Array && !v.length)) {\n            continue;\n        }\n        if (v.constructor == Array)\n            $.merge(val, v);\n        else\n            val.push(v);\n    }\n    return val;\n};\n\n/**\n * Returns the value of the field element.\n */\n$.fieldValue = function(el, successful) {\n    var n = el.name, t = el.type, tag = el.tagName.toLowerCase();\n    if (successful === undefined) {\n        successful = true;\n    }\n\n    if (successful && (!n || el.disabled || t == 'reset' || t == 'button' ||\n        (t == 'checkbox' || t == 'radio') && !el.checked ||\n        (t == 'submit' || t == 'image') && el.form && el.form.clk != el ||\n        tag == 'select' && el.selectedIndex == -1)) {\n            return null;\n    }\n\n    if (tag == 'select') {\n        var index = el.selectedIndex;\n        if (index < 0) {\n            return null;\n        }\n        var a = [], ops = el.options;\n        var one = (t == 'select-one');\n        var max = (one ? index+1 : ops.length);\n        for(var i=(one ? index : 0); i < max; i++) {\n            var op = ops[i];\n            if (op.selected) {\n                var v = op.value;\n                if (!v) { // extra pain for IE...\n                    v = (op.attributes && op.attributes['value'] && !(op.attributes['value'].specified)) ? op.text : op.value;\n                }\n                if (one) {\n                    return v;\n                }\n                a.push(v);\n            }\n        }\n        return a;\n    }\n    return $(el).val();\n};\n\n/**\n * Clears the form data.  Takes the following actions on the form's input fields:\n *  - input text fields will have their 'value' property set to the empty string\n *  - select elements will have their 'selectedIndex' property set to -1\n *  - checkbox and radio inputs will have their 'checked' property set to false\n *  - inputs of type submit, button, reset, and hidden will *not* be effected\n *  - button elements will *not* be effected\n */\n$.fn.clearForm = function(includeHidden) {\n    return this.each(function() {\n        $('input,select,textarea', this).clearFields(includeHidden);\n    });\n};\n\n/**\n * Clears the selected form elements.\n */\n$.fn.clearFields = $.fn.clearInputs = function(includeHidden) {\n    var re = /^(?:color|date|datetime|email|month|number|password|range|search|tel|text|time|url|week)$/i; // 'hidden' is not in this list\n    return this.each(function() {\n        var t = this.type, tag = this.tagName.toLowerCase();\n        if (re.test(t) || tag == 'textarea') {\n            this.value = '';\n        }\n        else if (t == 'checkbox' || t == 'radio') {\n            this.checked = false;\n        }\n        else if (tag == 'select') {\n            this.selectedIndex = -1;\n        }\n        else if (includeHidden) {\n            // includeHidden can be the value true, or it can be a selector string\n            // indicating a special test; for example:\n            //  $('#myForm').clearForm('.special:hidden')\n            // the above would clean hidden inputs that have the class of 'special'\n            if ( (includeHidden === true && /hidden/.test(t)) ||\n                 (typeof includeHidden == 'string' && $(this).is(includeHidden)) )\n                this.value = '';\n        }\n    });\n};\n\n/**\n * Resets the form data.  Causes all form elements to be reset to their original value.\n */\n$.fn.resetForm = function() {\n    return this.each(function() {\n        // guard against an input with the name of 'reset'\n        // note that IE reports the reset function as an 'object'\n        if (typeof this.reset == 'function' || (typeof this.reset == 'object' && !this.reset.nodeType)) {\n            this.reset();\n        }\n    });\n};\n\n/**\n * Enables or disables any matching elements.\n */\n$.fn.enable = function(b) {\n    if (b === undefined) {\n        b = true;\n    }\n    return this.each(function() {\n        this.disabled = !b;\n    });\n};\n\n/**\n * Checks/unchecks any matching checkboxes or radio buttons and\n * selects/deselects and matching option elements.\n */\n$.fn.selected = function(select) {\n    if (select === undefined) {\n        select = true;\n    }\n    return this.each(function() {\n        var t = this.type;\n        if (t == 'checkbox' || t == 'radio') {\n            this.checked = select;\n        }\n        else if (this.tagName.toLowerCase() == 'option') {\n            var $sel = $(this).parent('select');\n            if (select && $sel[0] && $sel[0].type == 'select-one') {\n                // deselect all other options\n                $sel.find('option').selected(false);\n            }\n            this.selected = select;\n        }\n    });\n};\n\n// expose debug var\n$.fn.ajaxSubmit.debug = false;\n\n// helper fn for console logging\nfunction log() {\n    if (!$.fn.ajaxSubmit.debug)\n        return;\n    var msg = '[jquery.form] ' + Array.prototype.join.call(arguments,'');\n    if (window.console && window.console.log) {\n        window.console.log(msg);\n    }\n    else if (window.opera && window.opera.postError) {\n        window.opera.postError(msg);\n    }\n}\n\n})(jQuery);\n";
},function(e,t,n){n(3)(n(34))},function(e,t){e.exports='/*\n AngularJS v1.0.8\n (c) 2010-2012 Google, Inc. http://angularjs.org\n License: MIT\n*/\n(function(P,T,q){\'use strict\';function m(b,a,c){var d;if(b)if(H(b))for(d in b)d!="prototype"&&d!="length"&&d!="name"&&b.hasOwnProperty(d)&&a.call(c,b[d],d);else if(b.forEach&&b.forEach!==m)b.forEach(a,c);else if(!b||typeof b.length!=="number"?0:typeof b.hasOwnProperty!="function"&&typeof b.constructor!="function"||b instanceof L||aa&&b instanceof aa||ma.call(b)!=="[object Object]"||typeof b.callee==="function")for(d=0;d<b.length;d++)a.call(c,b[d],d);else for(d in b)b.hasOwnProperty(d)&&a.call(c,b[d],\nd);return b}function nb(b){var a=[],c;for(c in b)b.hasOwnProperty(c)&&a.push(c);return a.sort()}function hc(b,a,c){for(var d=nb(b),e=0;e<d.length;e++)a.call(c,b[d[e]],d[e]);return d}function ob(b){return function(a,c){b(c,a)}}function xa(){for(var b=Z.length,a;b;){b--;a=Z[b].charCodeAt(0);if(a==57)return Z[b]="A",Z.join("");if(a==90)Z[b]="0";else return Z[b]=String.fromCharCode(a+1),Z.join("")}Z.unshift("0");return Z.join("")}function pb(b,a){a?b.$$hashKey=a:delete b.$$hashKey}function D(b){var a=\nb.$$hashKey;m(arguments,function(a){a!==b&&m(a,function(a,c){b[c]=a})});pb(b,a);return b}function G(b){return parseInt(b,10)}function ya(b,a){return D(new (D(function(){},{prototype:b})),a)}function s(){}function na(b){return b}function I(b){return function(){return b}}function u(b){return typeof b=="undefined"}function v(b){return typeof b!="undefined"}function M(b){return b!=null&&typeof b=="object"}function B(b){return typeof b=="string"}function Ra(b){return typeof b=="number"}function oa(b){return ma.apply(b)==\n"[object Date]"}function E(b){return ma.apply(b)=="[object Array]"}function H(b){return typeof b=="function"}function Sa(b){return ma.apply(b)=="[object RegExp]"}function pa(b){return b&&b.document&&b.location&&b.alert&&b.setInterval}function ic(b){return b&&(b.nodeName||b.bind&&b.find)}function Ta(b,a,c){var d=[];m(b,function(b,g,h){d.push(a.call(c,b,g,h))});return d}function za(b,a){if(b.indexOf)return b.indexOf(a);for(var c=0;c<b.length;c++)if(a===b[c])return c;return-1}function Ua(b,a){var c=\nza(b,a);c>=0&&b.splice(c,1);return a}function U(b,a){if(pa(b)||b&&b.$evalAsync&&b.$watch)throw Error("Can\'t copy Window or Scope");if(a){if(b===a)throw Error("Can\'t copy equivalent objects or arrays");if(E(b))for(var c=a.length=0;c<b.length;c++)a.push(U(b[c]));else{c=a.$$hashKey;m(a,function(b,c){delete a[c]});for(var d in b)a[d]=U(b[d]);pb(a,c)}}else(a=b)&&(E(b)?a=U(b,[]):oa(b)?a=new Date(b.getTime()):Sa(b)?a=RegExp(b.source):M(b)&&(a=U(b,{})));return a}function jc(b,a){var a=a||{},c;for(c in b)b.hasOwnProperty(c)&&\nc.substr(0,2)!=="$$"&&(a[c]=b[c]);return a}function ea(b,a){if(b===a)return!0;if(b===null||a===null)return!1;if(b!==b&&a!==a)return!0;var c=typeof b,d;if(c==typeof a&&c=="object")if(E(b)){if(!E(a))return!1;if((c=b.length)==a.length){for(d=0;d<c;d++)if(!ea(b[d],a[d]))return!1;return!0}}else if(oa(b))return oa(a)&&b.getTime()==a.getTime();else if(Sa(b)&&Sa(a))return b.toString()==a.toString();else{if(b&&b.$evalAsync&&b.$watch||a&&a.$evalAsync&&a.$watch||pa(b)||pa(a)||E(a))return!1;c={};for(d in b)if(!(d.charAt(0)===\n"$"||H(b[d]))){if(!ea(b[d],a[d]))return!1;c[d]=!0}for(d in a)if(!c[d]&&d.charAt(0)!=="$"&&a[d]!==q&&!H(a[d]))return!1;return!0}return!1}function Va(b,a){var c=arguments.length>2?ha.call(arguments,2):[];return H(a)&&!(a instanceof RegExp)?c.length?function(){return arguments.length?a.apply(b,c.concat(ha.call(arguments,0))):a.apply(b,c)}:function(){return arguments.length?a.apply(b,arguments):a.call(b)}:a}function kc(b,a){var c=a;/^\\$+/.test(b)?c=q:pa(a)?c="$WINDOW":a&&T===a?c="$DOCUMENT":a&&a.$evalAsync&&\na.$watch&&(c="$SCOPE");return c}function ba(b,a){return typeof b==="undefined"?q:JSON.stringify(b,kc,a?"  ":null)}function qb(b){return B(b)?JSON.parse(b):b}function Wa(b){b&&b.length!==0?(b=y(""+b),b=!(b=="f"||b=="0"||b=="false"||b=="no"||b=="n"||b=="[]")):b=!1;return b}function qa(b){b=w(b).clone();try{b.html("")}catch(a){}var c=w("<div>").append(b).html();try{return b[0].nodeType===3?y(c):c.match(/^(<[^>]+>)/)[1].replace(/^<([\\w\\-]+)/,function(a,b){return"<"+y(b)})}catch(d){return y(c)}}function rb(b){try{return decodeURIComponent(b)}catch(a){}}\nfunction Xa(b){var a={},c,d;m((b||"").split("&"),function(b){b&&(c=b.split("="),d=rb(c[0]),v(d)&&(a[d]=v(c[1])?rb(c[1]):!0))});return a}function sb(b){var a=[];m(b,function(b,d){a.push(Ya(d,!0)+(b===!0?"":"="+Ya(b,!0)))});return a.length?a.join("&"):""}function Za(b){return Ya(b,!0).replace(/%26/gi,"&").replace(/%3D/gi,"=").replace(/%2B/gi,"+")}function Ya(b,a){return encodeURIComponent(b).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,a?"%20":"+")}\nfunction lc(b,a){function c(a){a&&d.push(a)}var d=[b],e,g,h=["ng:app","ng-app","x-ng-app","data-ng-app"],f=/\\sng[:\\-]app(:\\s*([\\w\\d_]+);?)?\\s/;m(h,function(a){h[a]=!0;c(T.getElementById(a));a=a.replace(":","\\\\:");b.querySelectorAll&&(m(b.querySelectorAll("."+a),c),m(b.querySelectorAll("."+a+"\\\\:"),c),m(b.querySelectorAll("["+a+"]"),c))});m(d,function(a){if(!e){var b=f.exec(" "+a.className+" ");b?(e=a,g=(b[2]||"").replace(/\\s+/g,",")):m(a.attributes,function(b){if(!e&&h[b.name])e=a,g=b.value})}});\ne&&a(e,g?[g]:[])}function tb(b,a){var c=function(){b=w(b);a=a||[];a.unshift(["$provide",function(a){a.value("$rootElement",b)}]);a.unshift("ng");var c=ub(a);c.invoke(["$rootScope","$rootElement","$compile","$injector",function(a,b,c,d){a.$apply(function(){b.data("$injector",d);c(b)(a)})}]);return c},d=/^NG_DEFER_BOOTSTRAP!/;if(P&&!d.test(P.name))return c();P.name=P.name.replace(d,"");$a.resumeBootstrap=function(b){m(b,function(b){a.push(b)});c()}}function ab(b,a){a=a||"_";return b.replace(mc,function(b,\nd){return(d?a:"")+b.toLowerCase()})}function bb(b,a,c){if(!b)throw Error("Argument \'"+(a||"?")+"\' is "+(c||"required"));return b}function ra(b,a,c){c&&E(b)&&(b=b[b.length-1]);bb(H(b),a,"not a function, got "+(b&&typeof b=="object"?b.constructor.name||"Object":typeof b));return b}function cb(b,a,c){if(!a)return b;for(var a=a.split("."),d,e=b,g=a.length,h=0;h<g;h++)d=a[h],b&&(b=(e=b)[d]);return!c&&H(b)?Va(e,b):b}function nc(b){function a(a,b,e){return a[b]||(a[b]=e())}return a(a(b,"angular",Object),\n"module",function(){var b={};return function(d,e,g){e&&b.hasOwnProperty(d)&&(b[d]=null);return a(b,d,function(){function a(c,d,e){return function(){b[e||"push"]([c,d,arguments]);return k}}if(!e)throw Error("No module: "+d);var b=[],c=[],j=a("$injector","invoke"),k={_invokeQueue:b,_runBlocks:c,requires:e,name:d,provider:a("$provide","provider"),factory:a("$provide","factory"),service:a("$provide","service"),value:a("$provide","value"),constant:a("$provide","constant","unshift"),filter:a("$filterProvider",\n"register"),controller:a("$controllerProvider","register"),directive:a("$compileProvider","directive"),config:j,run:function(a){c.push(a);return this}};g&&j(g);return k})}})}function vb(b){return b.replace(oc,function(a,b,d,e){return e?d.toUpperCase():d}).replace(pc,"Moz$1")}function db(b,a,c,d){function e(b){var f;var e=c&&b?[this.filter(b)]:[this],i=a,j,k,l,n,o,p;if(!d||b!=null)for(;e.length;){j=e.shift();k=0;for(l=j.length;k<l;k++){n=w(j[k]);i?n.triggerHandler("$destroy"):i=!i;o=0;for(f=(p=n.children()).length,\nn=f;o<n;o++)e.push(aa(p[o]))}}return g.apply(this,arguments)}var g=aa.fn[b],g=g.$original||g;e.$original=g;aa.fn[b]=e}function L(b){if(b instanceof L)return b;if(!(this instanceof L)){if(B(b)&&b.charAt(0)!="<")throw Error("selectors not implemented");return new L(b)}if(B(b)){var a=T.createElement("div");a.innerHTML="<div>&#160;</div>"+b;a.removeChild(a.firstChild);eb(this,a.childNodes);this.remove()}else eb(this,b)}function fb(b){return b.cloneNode(!0)}function sa(b){wb(b);for(var a=0,b=b.childNodes||\n[];a<b.length;a++)sa(b[a])}function xb(b,a,c){var d=$(b,"events");$(b,"handle")&&(u(a)?m(d,function(a,c){gb(b,c,a);delete d[c]}):u(c)?(gb(b,a,d[a]),delete d[a]):Ua(d[a]||[],c))}function wb(b){var a=b[Aa],c=Ba[a];c&&(c.handle&&(c.events.$destroy&&c.handle({},"$destroy"),xb(b)),delete Ba[a],b[Aa]=q)}function $(b,a,c){var d=b[Aa],d=Ba[d||-1];if(v(c))d||(b[Aa]=d=++qc,d=Ba[d]={}),d[a]=c;else return d&&d[a]}function yb(b,a,c){var d=$(b,"data"),e=v(c),g=!e&&v(a),h=g&&!M(a);!d&&!h&&$(b,"data",d={});if(e)d[a]=\nc;else if(g)if(h)return d&&d[a];else D(d,a);else return d}function Ca(b,a){return(" "+b.className+" ").replace(/[\\n\\t]/g," ").indexOf(" "+a+" ")>-1}function zb(b,a){a&&m(a.split(" "),function(a){b.className=S((" "+b.className+" ").replace(/[\\n\\t]/g," ").replace(" "+S(a)+" "," "))})}function Ab(b,a){a&&m(a.split(" "),function(a){if(!Ca(b,a))b.className=S(b.className+" "+S(a))})}function eb(b,a){if(a)for(var a=!a.nodeName&&v(a.length)&&!pa(a)?a:[a],c=0;c<a.length;c++)b.push(a[c])}function Bb(b,a){return Da(b,\n"$"+(a||"ngController")+"Controller")}function Da(b,a,c){b=w(b);for(b[0].nodeType==9&&(b=b.find("html"));b.length;){if(c=b.data(a))return c;b=b.parent()}}function Cb(b,a){var c=Ea[a.toLowerCase()];return c&&Db[b.nodeName]&&c}function rc(b,a){var c=function(c,e){if(!c.preventDefault)c.preventDefault=function(){c.returnValue=!1};if(!c.stopPropagation)c.stopPropagation=function(){c.cancelBubble=!0};if(!c.target)c.target=c.srcElement||T;if(u(c.defaultPrevented)){var g=c.preventDefault;c.preventDefault=\nfunction(){c.defaultPrevented=!0;g.call(c)};c.defaultPrevented=!1}c.isDefaultPrevented=function(){return c.defaultPrevented};m(a[e||c.type],function(a){a.call(b,c)});V<=8?(c.preventDefault=null,c.stopPropagation=null,c.isDefaultPrevented=null):(delete c.preventDefault,delete c.stopPropagation,delete c.isDefaultPrevented)};c.elem=b;return c}function fa(b){var a=typeof b,c;if(a=="object"&&b!==null)if(typeof(c=b.$$hashKey)=="function")c=b.$$hashKey();else{if(c===q)c=b.$$hashKey=xa()}else c=b;return a+\n":"+c}function Fa(b){m(b,this.put,this)}function hb(){}function Eb(b){var a,c;if(typeof b=="function"){if(!(a=b.$inject))a=[],c=b.toString().replace(sc,""),c=c.match(tc),m(c[1].split(uc),function(b){b.replace(vc,function(b,c,d){a.push(d)})}),b.$inject=a}else E(b)?(c=b.length-1,ra(b[c],"fn"),a=b.slice(0,c)):ra(b,"fn",!0);return a}function ub(b){function a(a){return function(b,c){if(M(b))m(b,ob(a));else return a(b,c)}}function c(a,b){if(H(b)||E(b))b=l.instantiate(b);if(!b.$get)throw Error("Provider "+\na+" must define $get factory method.");return k[a+f]=b}function d(a,b){return c(a,{$get:b})}function e(a){var b=[];m(a,function(a){if(!j.get(a))if(j.put(a,!0),B(a)){var c=ta(a);b=b.concat(e(c.requires)).concat(c._runBlocks);try{for(var d=c._invokeQueue,c=0,f=d.length;c<f;c++){var g=d[c],p=g[0]=="$injector"?l:l.get(g[0]);p[g[1]].apply(p,g[2])}}catch(h){throw h.message&&(h.message+=" from "+a),h;}}else if(H(a))try{b.push(l.invoke(a))}catch(i){throw i.message&&(i.message+=" from "+a),i;}else if(E(a))try{b.push(l.invoke(a))}catch(o){throw o.message&&\n(o.message+=" from "+String(a[a.length-1])),o;}else ra(a,"module")});return b}function g(a,b){function c(d){if(typeof d!=="string")throw Error("Service name expected");if(a.hasOwnProperty(d)){if(a[d]===h)throw Error("Circular dependency: "+i.join(" <- "));return a[d]}else try{return i.unshift(d),a[d]=h,a[d]=b(d)}finally{i.shift()}}function d(a,b,e){var f=[],j=Eb(a),g,h,p;h=0;for(g=j.length;h<g;h++)p=j[h],f.push(e&&e.hasOwnProperty(p)?e[p]:c(p));a.$inject||(a=a[g]);switch(b?-1:f.length){case 0:return a();\ncase 1:return a(f[0]);case 2:return a(f[0],f[1]);case 3:return a(f[0],f[1],f[2]);case 4:return a(f[0],f[1],f[2],f[3]);case 5:return a(f[0],f[1],f[2],f[3],f[4]);case 6:return a(f[0],f[1],f[2],f[3],f[4],f[5]);case 7:return a(f[0],f[1],f[2],f[3],f[4],f[5],f[6]);case 8:return a(f[0],f[1],f[2],f[3],f[4],f[5],f[6],f[7]);case 9:return a(f[0],f[1],f[2],f[3],f[4],f[5],f[6],f[7],f[8]);case 10:return a(f[0],f[1],f[2],f[3],f[4],f[5],f[6],f[7],f[8],f[9]);default:return a.apply(b,f)}}return{invoke:d,instantiate:function(a,\nb){var c=function(){},e;c.prototype=(E(a)?a[a.length-1]:a).prototype;c=new c;e=d(a,c,b);return M(e)?e:c},get:c,annotate:Eb}}var h={},f="Provider",i=[],j=new Fa,k={$provide:{provider:a(c),factory:a(d),service:a(function(a,b){return d(a,["$injector",function(a){return a.instantiate(b)}])}),value:a(function(a,b){return d(a,I(b))}),constant:a(function(a,b){k[a]=b;n[a]=b}),decorator:function(a,b){var c=l.get(a+f),d=c.$get;c.$get=function(){var a=o.invoke(d,c);return o.invoke(b,null,{$delegate:a})}}}},\nl=g(k,function(){throw Error("Unknown provider: "+i.join(" <- "));}),n={},o=n.$injector=g(n,function(a){a=l.get(a+f);return o.invoke(a.$get,a)});m(e(b),function(a){o.invoke(a||s)});return o}function wc(){var b=!0;this.disableAutoScrolling=function(){b=!1};this.$get=["$window","$location","$rootScope",function(a,c,d){function e(a){var b=null;m(a,function(a){!b&&y(a.nodeName)==="a"&&(b=a)});return b}function g(){var b=c.hash(),d;b?(d=h.getElementById(b))?d.scrollIntoView():(d=e(h.getElementsByName(b)))?\nd.scrollIntoView():b==="top"&&a.scrollTo(0,0):a.scrollTo(0,0)}var h=a.document;b&&d.$watch(function(){return c.hash()},function(){d.$evalAsync(g)});return g}]}function xc(b,a,c,d){function e(a){try{a.apply(null,ha.call(arguments,1))}finally{if(p--,p===0)for(;z.length;)try{z.pop()()}catch(b){c.error(b)}}}function g(a,b){(function yc(){m(r,function(a){a()});x=b(yc,a)})()}function h(){N!=f.url()&&(N=f.url(),m(K,function(a){a(f.url())}))}var f=this,i=a[0],j=b.location,k=b.history,l=b.setTimeout,n=b.clearTimeout,\no={};f.isMock=!1;var p=0,z=[];f.$$completeOutstandingRequest=e;f.$$incOutstandingRequestCount=function(){p++};f.notifyWhenNoOutstandingRequests=function(a){m(r,function(a){a()});p===0?a():z.push(a)};var r=[],x;f.addPollFn=function(a){u(x)&&g(100,l);r.push(a);return a};var N=j.href,A=a.find("base"),J=null;f.url=function(a,b){if(a){if(N!=a)return N=a,d.history?b?k.replaceState(null,"",a):(k.pushState(null,"",a),A.attr("href",A.attr("href"))):b?(j.replace(a),J=a):(j.href=a,J=null),f}else return J||j.href.replace(/%27/g,\n"\'")};var K=[],C=!1;f.onUrlChange=function(a){C||(d.history&&w(b).bind("popstate",h),d.hashchange?w(b).bind("hashchange",h):f.addPollFn(h),C=!0);K.push(a);return a};f.baseHref=function(){var a=A.attr("href");return a?a.replace(/^https?\\:\\/\\/[^\\/]*/,""):""};var ga={},Q="",t=f.baseHref();f.cookies=function(a,b){var d,e,f,j;if(a)if(b===q)i.cookie=escape(a)+"=;path="+t+";expires=Thu, 01 Jan 1970 00:00:00 GMT";else{if(B(b))d=(i.cookie=escape(a)+"="+escape(b)+";path="+t).length+1,d>4096&&c.warn("Cookie \'"+\na+"\' possibly not set or overflowed because it was too large ("+d+" > 4096 bytes)!")}else{if(i.cookie!==Q){Q=i.cookie;d=Q.split("; ");ga={};for(f=0;f<d.length;f++)e=d[f],j=e.indexOf("="),j>0&&(a=unescape(e.substring(0,j)),ga[a]===q&&(ga[a]=unescape(e.substring(j+1))))}return ga}};f.defer=function(a,b){var c;p++;c=l(function(){delete o[c];e(a)},b||0);o[c]=!0;return c};f.defer.cancel=function(a){return o[a]?(delete o[a],n(a),e(s),!0):!1}}function zc(){this.$get=["$window","$log","$sniffer","$document",\nfunction(b,a,c,d){return new xc(b,d,a,c)}]}function Ac(){this.$get=function(){function b(b,d){function e(a){if(a!=l){if(n){if(n==a)n=a.n}else n=a;g(a.n,a.p);g(a,l);l=a;l.n=null}}function g(a,b){if(a!=b){if(a)a.p=b;if(b)b.n=a}}if(b in a)throw Error("cacheId "+b+" taken");var h=0,f=D({},d,{id:b}),i={},j=d&&d.capacity||Number.MAX_VALUE,k={},l=null,n=null;return a[b]={put:function(a,b){var c=k[a]||(k[a]={key:a});e(c);u(b)||(a in i||h++,i[a]=b,h>j&&this.remove(n.key))},get:function(a){var b=k[a];if(b)return e(b),\ni[a]},remove:function(a){var b=k[a];if(b){if(b==l)l=b.p;if(b==n)n=b.n;g(b.n,b.p);delete k[a];delete i[a];h--}},removeAll:function(){i={};h=0;k={};l=n=null},destroy:function(){k=f=i=null;delete a[b]},info:function(){return D({},f,{size:h})}}}var a={};b.info=function(){var b={};m(a,function(a,e){b[e]=a.info()});return b};b.get=function(b){return a[b]};return b}}function Bc(){this.$get=["$cacheFactory",function(b){return b("templates")}]}function Fb(b){var a={},c="Directive",d=/^\\s*directive\\:\\s*([\\d\\w\\-_]+)\\s+(.*)$/,\ne=/(([\\d\\w\\-_]+)(?:\\:([^;]+))?;?)/,g="Template must have exactly one root element. was: ",h=/^\\s*(https?|ftp|mailto|file):/;this.directive=function i(d,e){B(d)?(bb(e,"directive"),a.hasOwnProperty(d)||(a[d]=[],b.factory(d+c,["$injector","$exceptionHandler",function(b,c){var e=[];m(a[d],function(a){try{var g=b.invoke(a);if(H(g))g={compile:I(g)};else if(!g.compile&&g.link)g.compile=I(g.link);g.priority=g.priority||0;g.name=g.name||d;g.require=g.require||g.controller&&g.name;g.restrict=g.restrict||"A";\ne.push(g)}catch(h){c(h)}});return e}])),a[d].push(e)):m(d,ob(i));return this};this.urlSanitizationWhitelist=function(a){return v(a)?(h=a,this):h};this.$get=["$injector","$interpolate","$exceptionHandler","$http","$templateCache","$parse","$controller","$rootScope","$document",function(b,j,k,l,n,o,p,z,r){function x(a,b,c){a instanceof w||(a=w(a));m(a,function(b,c){b.nodeType==3&&b.nodeValue.match(/\\S+/)&&(a[c]=w(b).wrap("<span></span>").parent()[0])});var d=A(a,b,a,c);return function(b,c){bb(b,"scope");\nfor(var e=c?va.clone.call(a):a,g=0,j=e.length;g<j;g++){var h=e[g];(h.nodeType==1||h.nodeType==9)&&e.eq(g).data("$scope",b)}N(e,"ng-scope");c&&c(e,b);d&&d(b,e,e);return e}}function N(a,b){try{a.addClass(b)}catch(c){}}function A(a,b,c,d){function e(a,c,d,j){var h,i,k,p,o,l,n,r=[];o=0;for(l=c.length;o<l;o++)r.push(c[o]);n=o=0;for(l=g.length;o<l;n++)i=r[n],c=g[o++],h=g[o++],c?(c.scope?(k=a.$new(M(c.scope)),w(i).data("$scope",k)):k=a,(p=c.transclude)||!j&&b?c(h,k,i,d,function(b){return function(c){var d=\na.$new();d.$$transcluded=!0;return b(d,c).bind("$destroy",Va(d,d.$destroy))}}(p||b)):c(h,k,i,q,j)):h&&h(a,i.childNodes,q,j)}for(var g=[],j,h,i,k=0;k<a.length;k++)h=new ia,j=J(a[k],[],h,d),h=(j=j.length?K(j,a[k],h,b,c):null)&&j.terminal||!a[k].childNodes||!a[k].childNodes.length?null:A(a[k].childNodes,j?j.transclude:b),g.push(j),g.push(h),i=i||j||h;return i?e:null}function J(a,b,c,g){var j=c.$attr,h;switch(a.nodeType){case 1:C(b,ca(Ga(a).toLowerCase()),"E",g);var i,k,o;h=a.attributes;for(var p=0,l=\nh&&h.length;p<l;p++)if(i=h[p],!V||V>=8||i.specified)k=i.name,o=ca(k.toLowerCase()),j[o]=k,c[o]=i=S(V&&k=="href"?decodeURIComponent(a.getAttribute(k,2)):i.value),Cb(a,o)&&(c[o]=!0),R(a,b,i,o),C(b,o,"A",g);a=a.className;if(B(a)&&a!=="")for(;h=e.exec(a);)o=ca(h[2]),C(b,o,"C",g)&&(c[o]=S(h[3])),a=a.substr(h.index+h[0].length);break;case 3:Y(b,a.nodeValue);break;case 8:try{if(h=d.exec(a.nodeValue))o=ca(h[1]),C(b,o,"M",g)&&(c[o]=S(h[2]))}catch(n){}}b.sort(t);return b}function K(a,b,c,d,e){function j(a,\nb){if(a)a.require=t.require,n.push(a);if(b)b.require=t.require,r.push(b)}function h(a,b){var c,d="data",e=!1;if(B(a)){for(;(c=a.charAt(0))=="^"||c=="?";)a=a.substr(1),c=="^"&&(d="inheritedData"),e=e||c=="?";c=b[d]("$"+a+"Controller");if(!c&&!e)throw Error("No controller: "+a);}else E(a)&&(c=[],m(a,function(a){c.push(h(a,b))}));return c}function i(a,d,e,g,j){var l,z,t,F,N;l=b===e?c:jc(c,new ia(w(e),c.$attr));z=l.$$element;if(K){var Cc=/^\\s*([@=&])\\s*(\\w*)\\s*$/,x=d.$parent||d;m(K.scope,function(a,b){var c=\na.match(Cc)||[],e=c[2]||b,c=c[1],g,j,h;d.$$isolateBindings[b]=c+e;switch(c){case "@":l.$observe(e,function(a){d[b]=a});l.$$observers[e].$$scope=x;break;case "=":j=o(l[e]);h=j.assign||function(){g=d[b]=j(x);throw Error(Gb+l[e]+" (directive: "+K.name+")");};g=d[b]=j(x);d.$watch(function(){var a=j(x);a!==d[b]&&(a!==g?g=d[b]=a:h(x,a=g=d[b]));return a});break;case "&":j=o(l[e]);d[b]=function(a){return j(x,a)};break;default:throw Error("Invalid isolate scope definition for directive "+K.name+": "+a);}})}Y&&\nm(Y,function(a){var b={$scope:d,$element:z,$attrs:l,$transclude:j};N=a.controller;N=="@"&&(N=l[a.name]);z.data("$"+a.name+"Controller",p(N,b))});g=0;for(t=n.length;g<t;g++)try{F=n[g],F(d,z,l,F.require&&h(F.require,z))}catch(A){k(A,qa(z))}a&&a(d,e.childNodes,q,j);g=0;for(t=r.length;g<t;g++)try{F=r[g],F(d,z,l,F.require&&h(F.require,z))}catch(Dc){k(Dc,qa(z))}}for(var l=-Number.MAX_VALUE,n=[],r=[],z=null,K=null,A=null,F=c.$$element=w(b),t,C,R,ja,da=d,Y,s,u,D=0,y=a.length;D<y;D++){t=a[D];R=q;if(l>t.priority)break;\nif(u=t.scope)ua("isolated scope",K,t,F),M(u)&&(N(F,"ng-isolate-scope"),K=t),N(F,"ng-scope"),z=z||t;C=t.name;if(u=t.controller)Y=Y||{},ua("\'"+C+"\' controller",Y[C],t,F),Y[C]=t;if(u=t.transclude)ua("transclusion",ja,t,F),ja=t,l=t.priority,u=="element"?(R=w(b),F=c.$$element=w(T.createComment(" "+C+": "+c[C]+" ")),b=F[0],v(e,w(R[0]),b),da=x(R,d,l)):(R=w(fb(b)).contents(),F.html(""),da=x(R,d));if(u=t.template)if(ua("template",A,t,F),A=t,u=Hb(u),t.replace){R=w("<div>"+S(u)+"</div>").contents();b=R[0];if(R.length!=\n1||b.nodeType!==1)throw Error(g+u);v(e,F,b);C={$attr:{}};a=a.concat(J(b,a.splice(D+1,a.length-(D+1)),C));ga(c,C);y=a.length}else F.html(u);if(t.templateUrl)ua("template",A,t,F),A=t,i=Q(a.splice(D,a.length-D),i,F,c,e,t.replace,da),y=a.length;else if(t.compile)try{s=t.compile(F,c,da),H(s)?j(null,s):s&&j(s.pre,s.post)}catch(G){k(G,qa(F))}if(t.terminal)i.terminal=!0,l=Math.max(l,t.priority)}i.scope=z&&z.scope;i.transclude=ja&&da;return i}function C(d,e,g,j){var h=!1;if(a.hasOwnProperty(e))for(var o,e=\nb.get(e+c),l=0,p=e.length;l<p;l++)try{if(o=e[l],(j===q||j>o.priority)&&o.restrict.indexOf(g)!=-1)d.push(o),h=!0}catch(n){k(n)}return h}function ga(a,b){var c=b.$attr,d=a.$attr,e=a.$$element;m(a,function(d,e){e.charAt(0)!="$"&&(b[e]&&(d+=(e==="style"?";":" ")+b[e]),a.$set(e,d,!0,c[e]))});m(b,function(b,g){g=="class"?(N(e,b),a["class"]=(a["class"]?a["class"]+" ":"")+b):g=="style"?e.attr("style",e.attr("style")+";"+b):g.charAt(0)!="$"&&!a.hasOwnProperty(g)&&(a[g]=b,d[g]=c[g])})}function Q(a,b,c,d,e,\nj,h){var i=[],k,o,p=c[0],r=a.shift(),z=D({},r,{controller:null,templateUrl:null,transclude:null,scope:null});c.html("");l.get(r.templateUrl,{cache:n}).success(function(l){var n,r,l=Hb(l);if(j){r=w("<div>"+S(l)+"</div>").contents();n=r[0];if(r.length!=1||n.nodeType!==1)throw Error(g+l);l={$attr:{}};v(e,c,n);J(n,a,l);ga(d,l)}else n=p,c.html(l);a.unshift(z);k=K(a,n,d,h);for(o=A(c[0].childNodes,h);i.length;){var ia=i.pop(),l=i.pop();r=i.pop();var F=i.pop(),t=n;r!==p&&(t=fb(n),v(l,w(r),t));k(function(){b(o,\nF,t,e,ia)},F,t,e,ia)}i=null}).error(function(a,b,c,d){throw Error("Failed to load template: "+d.url);});return function(a,c,d,e,g){i?(i.push(c),i.push(d),i.push(e),i.push(g)):k(function(){b(o,c,d,e,g)},c,d,e,g)}}function t(a,b){return b.priority-a.priority}function ua(a,b,c,d){if(b)throw Error("Multiple directives ["+b.name+", "+c.name+"] asking for "+a+" on: "+qa(d));}function Y(a,b){var c=j(b,!0);c&&a.push({priority:0,compile:I(function(a,b){var d=b.parent(),e=d.data("$binding")||[];e.push(c);N(d.data("$binding",\ne),"ng-binding");a.$watch(c,function(a){b[0].nodeValue=a})})})}function R(a,b,c,d){var e=j(c,!0);e&&b.push({priority:100,compile:I(function(a,b,c){b=c.$$observers||(c.$$observers={});d==="class"&&(e=j(c[d],!0));c[d]=q;(b[d]||(b[d]=[])).$$inter=!0;(c.$$observers&&c.$$observers[d].$$scope||a).$watch(e,function(a){c.$set(d,a)})})})}function v(a,b,c){var d=b[0],e=d.parentNode,g,j;if(a){g=0;for(j=a.length;g<j;g++)if(a[g]==d){a[g]=c;break}}e&&e.replaceChild(c,d);c[w.expando]=d[w.expando];b[0]=c}var ia=\nfunction(a,b){this.$$element=a;this.$attr=b||{}};ia.prototype={$normalize:ca,$set:function(a,b,c,d){var e=Cb(this.$$element[0],a),g=this.$$observers;e&&(this.$$element.prop(a,b),d=e);this[a]=b;d?this.$attr[a]=d:(d=this.$attr[a])||(this.$attr[a]=d=ab(a,"-"));if(Ga(this.$$element[0])==="A"&&a==="href")F.setAttribute("href",b),e=F.href,e!==""&&!e.match(h)&&(this[a]=b="unsafe:"+e);c!==!1&&(b===null||b===q?this.$$element.removeAttr(d):this.$$element.attr(d,b));g&&m(g[a],function(a){try{a(b)}catch(c){k(c)}})},\n$observe:function(a,b){var c=this,d=c.$$observers||(c.$$observers={}),e=d[a]||(d[a]=[]);e.push(b);z.$evalAsync(function(){e.$$inter||b(c[a])});return b}};var F=r[0].createElement("a"),ja=j.startSymbol(),da=j.endSymbol(),Hb=ja=="{{"||da=="}}"?na:function(a){return a.replace(/\\{\\{/g,ja).replace(/}}/g,da)};return x}]}function ca(b){return vb(b.replace(Ec,""))}function Fc(){var b={};this.register=function(a,c){M(a)?D(b,a):b[a]=c};this.$get=["$injector","$window",function(a,c){return function(d,e){if(B(d)){var g=\nd,d=b.hasOwnProperty(g)?b[g]:cb(e.$scope,g,!0)||cb(c,g,!0);ra(d,g,!0)}return a.instantiate(d,e)}}]}function Gc(){this.$get=["$window",function(b){return w(b.document)}]}function Hc(){this.$get=["$log",function(b){return function(a,c){b.error.apply(b,arguments)}}]}function Ic(){var b="{{",a="}}";this.startSymbol=function(a){return a?(b=a,this):b};this.endSymbol=function(b){return b?(a=b,this):a};this.$get=["$parse",function(c){function d(d,f){for(var i,j,k=0,l=[],n=d.length,o=!1,p=[];k<n;)(i=d.indexOf(b,\nk))!=-1&&(j=d.indexOf(a,i+e))!=-1?(k!=i&&l.push(d.substring(k,i)),l.push(k=c(o=d.substring(i+e,j))),k.exp=o,k=j+g,o=!0):(k!=n&&l.push(d.substring(k)),k=n);if(!(n=l.length))l.push(""),n=1;if(!f||o)return p.length=n,k=function(a){for(var b=0,c=n,d;b<c;b++){if(typeof(d=l[b])=="function")d=d(a),d==null||d==q?d="":typeof d!="string"&&(d=ba(d));p[b]=d}return p.join("")},k.exp=d,k.parts=l,k}var e=b.length,g=a.length;d.startSymbol=function(){return b};d.endSymbol=function(){return a};return d}]}function Ib(b){for(var b=\nb.split("/"),a=b.length;a--;)b[a]=Za(b[a]);return b.join("/")}function wa(b,a){var c=Jb.exec(b),c={protocol:c[1],host:c[3],port:G(c[5])||Kb[c[1]]||null,path:c[6]||"/",search:c[8],hash:c[10]};if(a)a.$$protocol=c.protocol,a.$$host=c.host,a.$$port=c.port;return c}function ka(b,a,c){return b+"://"+a+(c==Kb[b]?"":":"+c)}function Jc(b,a,c){var d=wa(b);return decodeURIComponent(d.path)!=a||u(d.hash)||d.hash.indexOf(c)!==0?b:ka(d.protocol,d.host,d.port)+a.substr(0,a.lastIndexOf("/"))+d.hash.substr(c.length)}\nfunction Kc(b,a,c){var d=wa(b);if(decodeURIComponent(d.path)==a&&!u(d.hash)&&d.hash.indexOf(c)===0)return b;else{var e=d.search&&"?"+d.search||"",g=d.hash&&"#"+d.hash||"",h=a.substr(0,a.lastIndexOf("/")),f=d.path.substr(h.length);if(d.path.indexOf(h)!==0)throw Error(\'Invalid url "\'+b+\'", missing path prefix "\'+h+\'" !\');return ka(d.protocol,d.host,d.port)+a+"#"+c+f+e+g}}function ib(b,a,c){a=a||"";this.$$parse=function(b){var c=wa(b,this);if(c.path.indexOf(a)!==0)throw Error(\'Invalid url "\'+b+\'", missing path prefix "\'+\na+\'" !\');this.$$path=decodeURIComponent(c.path.substr(a.length));this.$$search=Xa(c.search);this.$$hash=c.hash&&decodeURIComponent(c.hash)||"";this.$$compose()};this.$$compose=function(){var b=sb(this.$$search),c=this.$$hash?"#"+Za(this.$$hash):"";this.$$url=Ib(this.$$path)+(b?"?"+b:"")+c;this.$$absUrl=ka(this.$$protocol,this.$$host,this.$$port)+a+this.$$url};this.$$rewriteAppUrl=function(a){if(a.indexOf(c)==0)return a};this.$$parse(b)}function Ha(b,a,c){var d;this.$$parse=function(b){var c=wa(b,\nthis);if(c.hash&&c.hash.indexOf(a)!==0)throw Error(\'Invalid url "\'+b+\'", missing hash prefix "\'+a+\'" !\');d=c.path+(c.search?"?"+c.search:"");c=Lc.exec((c.hash||"").substr(a.length));this.$$path=c[1]?(c[1].charAt(0)=="/"?"":"/")+decodeURIComponent(c[1]):"";this.$$search=Xa(c[3]);this.$$hash=c[5]&&decodeURIComponent(c[5])||"";this.$$compose()};this.$$compose=function(){var b=sb(this.$$search),c=this.$$hash?"#"+Za(this.$$hash):"";this.$$url=Ib(this.$$path)+(b?"?"+b:"")+c;this.$$absUrl=ka(this.$$protocol,\nthis.$$host,this.$$port)+d+(this.$$url?"#"+a+this.$$url:"")};this.$$rewriteAppUrl=function(a){if(a.indexOf(c)==0)return a};this.$$parse(b)}function Lb(b,a,c,d){Ha.apply(this,arguments);this.$$rewriteAppUrl=function(b){if(b.indexOf(c)==0)return c+d+"#"+a+b.substr(c.length)}}function Ia(b){return function(){return this[b]}}function Mb(b,a){return function(c){if(u(c))return this[b];this[b]=a(c);this.$$compose();return this}}function Mc(){var b="",a=!1;this.hashPrefix=function(a){return v(a)?(b=a,this):\nb};this.html5Mode=function(b){return v(b)?(a=b,this):a};this.$get=["$rootScope","$browser","$sniffer","$rootElement",function(c,d,e,g){function h(a){c.$broadcast("$locationChangeSuccess",f.absUrl(),a)}var f,i,j,k=d.url(),l=wa(k);a?(i=d.baseHref()||"/",j=i.substr(0,i.lastIndexOf("/")),l=ka(l.protocol,l.host,l.port)+j+"/",f=e.history?new ib(Jc(k,i,b),j,l):new Lb(Kc(k,i,b),b,l,i.substr(j.length+1))):(l=ka(l.protocol,l.host,l.port)+(l.path||"")+(l.search?"?"+l.search:"")+"#"+b+"/",f=new Ha(k,b,l));g.bind("click",\nfunction(a){if(!a.ctrlKey&&!(a.metaKey||a.which==2)){for(var b=w(a.target);y(b[0].nodeName)!=="a";)if(b[0]===g[0]||!(b=b.parent())[0])return;var d=b.prop("href"),e=f.$$rewriteAppUrl(d);d&&!b.attr("target")&&e&&(f.$$parse(e),c.$apply(),a.preventDefault(),P.angular["ff-684208-preventDefault"]=!0)}});f.absUrl()!=k&&d.url(f.absUrl(),!0);d.onUrlChange(function(a){f.absUrl()!=a&&(c.$broadcast("$locationChangeStart",a,f.absUrl()).defaultPrevented?d.url(f.absUrl()):(c.$evalAsync(function(){var b=f.absUrl();\nf.$$parse(a);h(b)}),c.$$phase||c.$digest()))});var n=0;c.$watch(function(){var a=d.url(),b=f.$$replace;if(!n||a!=f.absUrl())n++,c.$evalAsync(function(){c.$broadcast("$locationChangeStart",f.absUrl(),a).defaultPrevented?f.$$parse(a):(d.url(f.absUrl(),b),h(a))});f.$$replace=!1;return n});return f}]}function Nc(){this.$get=["$window",function(b){function a(a){a instanceof Error&&(a.stack?a=a.message&&a.stack.indexOf(a.message)===-1?"Error: "+a.message+"\\n"+a.stack:a.stack:a.sourceURL&&(a=a.message+"\\n"+\na.sourceURL+":"+a.line));return a}function c(c){var e=b.console||{},g=e[c]||e.log||s;return g.apply?function(){var b=[];m(arguments,function(c){b.push(a(c))});return g.apply(e,b)}:function(a,b){g(a,b)}}return{log:c("log"),warn:c("warn"),info:c("info"),error:c("error")}}]}function Oc(b,a){function c(a){return a.indexOf(r)!=-1}function d(){return p+1<b.length?b.charAt(p+1):!1}function e(a){return"0"<=a&&a<="9"}function g(a){return a==" "||a=="\\r"||a=="\\t"||a=="\\n"||a=="\\u000b"||a=="\\u00a0"}function h(a){return"a"<=\na&&a<="z"||"A"<=a&&a<="Z"||"_"==a||a=="$"}function f(a){return a=="-"||a=="+"||e(a)}function i(a,c,d){d=d||p;throw Error("Lexer Error: "+a+" at column"+(v(c)?"s "+c+"-"+p+" ["+b.substring(c,d)+"]":" "+d)+" in expression ["+b+"].");}function j(){for(var a="",c=p;p<b.length;){var g=y(b.charAt(p));if(g=="."||e(g))a+=g;else{var j=d();if(g=="e"&&f(j))a+=g;else if(f(g)&&j&&e(j)&&a.charAt(a.length-1)=="e")a+=g;else if(f(g)&&(!j||!e(j))&&a.charAt(a.length-1)=="e")i("Invalid exponent");else break}p++}a*=1;\nn.push({index:c,text:a,json:!0,fn:function(){return a}})}function k(){for(var c="",d=p,f,j,i,k;p<b.length;){k=b.charAt(p);if(k=="."||h(k)||e(k))k=="."&&(f=p),c+=k;else break;p++}if(f)for(j=p;j<b.length;){k=b.charAt(j);if(k=="("){i=c.substr(f-d+1);c=c.substr(0,f-d);p=j;break}if(g(k))j++;else break}d={index:d,text:c};if(Ja.hasOwnProperty(c))d.fn=d.json=Ja[c];else{var l=Nb(c,a);d.fn=D(function(a,b){return l(a,b)},{assign:function(a,b){return Ob(a,c,b)}})}n.push(d);i&&(n.push({index:f,text:".",json:!1}),\nn.push({index:f+1,text:i,json:!1}))}function l(a){var c=p;p++;for(var d="",e=a,f=!1;p<b.length;){var g=b.charAt(p);e+=g;if(f)g=="u"?(g=b.substring(p+1,p+5),g.match(/[\\da-f]{4}/i)||i("Invalid unicode escape [\\\\u"+g+"]"),p+=4,d+=String.fromCharCode(parseInt(g,16))):(f=Pc[g],d+=f?f:g),f=!1;else if(g=="\\\\")f=!0;else if(g==a){p++;n.push({index:c,text:e,string:d,json:!0,fn:function(){return d}});return}else d+=g;p++}i("Unterminated quote",c)}for(var n=[],o,p=0,z=[],r,x=":";p<b.length;){r=b.charAt(p);if(c("\\"\'"))l(r);\nelse if(e(r)||c(".")&&e(d()))j();else if(h(r)){if(k(),"{,".indexOf(x)!=-1&&z[0]=="{"&&(o=n[n.length-1]))o.json=o.text.indexOf(".")==-1}else if(c("(){}[].,;:"))n.push({index:p,text:r,json:":[,".indexOf(x)!=-1&&c("{[")||c("}]:,")}),c("{[")&&z.unshift(r),c("}]")&&z.shift(),p++;else if(g(r)){p++;continue}else{var m=r+d(),A=Ja[r],J=Ja[m];J?(n.push({index:p,text:m,fn:J}),p+=2):A?(n.push({index:p,text:r,fn:A,json:"[,:".indexOf(x)!=-1&&c("+-")}),p+=1):i("Unexpected next character ",p,p+1)}x=r}return n}function Qc(b,\na,c,d){function e(a,c){throw Error("Syntax Error: Token \'"+c.text+"\' "+a+" at column "+(c.index+1)+" of the expression ["+b+"] starting at ["+b.substring(c.index)+"].");}function g(){if(Q.length===0)throw Error("Unexpected end of expression: "+b);return Q[0]}function h(a,b,c,d){if(Q.length>0){var e=Q[0],f=e.text;if(f==a||f==b||f==c||f==d||!a&&!b&&!c&&!d)return e}return!1}function f(b,c,d,f){return(b=h(b,c,d,f))?(a&&!b.json&&e("is not valid json",b),Q.shift(),b):!1}function i(a){f(a)||e("is unexpected, expecting ["+\na+"]",h())}function j(a,b){return function(c,d){return a(c,d,b)}}function k(a,b,c){return function(d,e){return b(d,e,a,c)}}function l(){for(var a=[];;)if(Q.length>0&&!h("}",")",";","]")&&a.push(v()),!f(";"))return a.length==1?a[0]:function(b,c){for(var d,e=0;e<a.length;e++){var f=a[e];f&&(d=f(b,c))}return d}}function n(){for(var a=f(),b=c(a.text),d=[];;)if(a=f(":"))d.push(t());else{var e=function(a,c,e){for(var e=[e],f=0;f<d.length;f++)e.push(d[f](a,c));return b.apply(a,e)};return function(){return e}}}\nfunction o(){for(var a=p(),b;;)if(b=f("||"))a=k(a,b.fn,p());else return a}function p(){var a=z(),b;if(b=f("&&"))a=k(a,b.fn,p());return a}function z(){var a=r(),b;if(b=f("==","!="))a=k(a,b.fn,z());return a}function r(){var a;a=x();for(var b;b=f("+","-");)a=k(a,b.fn,x());if(b=f("<",">","<=",">="))a=k(a,b.fn,r());return a}function x(){for(var a=m(),b;b=f("*","/","%");)a=k(a,b.fn,m());return a}function m(){var a;return f("+")?A():(a=f("-"))?k(C,a.fn,m()):(a=f("!"))?j(a.fn,m()):A()}function A(){var a;\nif(f("("))a=v(),i(")");else if(f("["))a=J();else if(f("{"))a=K();else{var b=f();(a=b.fn)||e("not a primary expression",b)}for(var c;b=f("(","[",".");)b.text==="("?(a=w(a,c),c=null):b.text==="["?(c=a,a=R(a)):b.text==="."?(c=a,a=Y(a)):e("IMPOSSIBLE");return a}function J(){var a=[];if(g().text!="]"){do a.push(t());while(f(","))}i("]");return function(b,c){for(var d=[],e=0;e<a.length;e++)d.push(a[e](b,c));return d}}function K(){var a=[];if(g().text!="}"){do{var b=f(),b=b.string||b.text;i(":");var c=t();\na.push({key:b,value:c})}while(f(","))}i("}");return function(b,c){for(var d={},e=0;e<a.length;e++){var f=a[e];d[f.key]=f.value(b,c)}return d}}var C=I(0),u,Q=Oc(b,d),t=function(){var a=o(),c,d;return(d=f("="))?(a.assign||e("implies assignment but ["+b.substring(0,d.index)+"] can not be assigned to",d),c=o(),function(b,d){return a.assign(b,c(b,d),d)}):a},w=function(a,b){var c=[];if(g().text!=")"){do c.push(t());while(f(","))}i(")");return function(d,e){for(var f=[],g=b?b(d,e):d,j=0;j<c.length;j++)f.push(c[j](d,\ne));j=a(d,e,g)||s;return j.apply?j.apply(g,f):j(f[0],f[1],f[2],f[3],f[4])}},Y=function(a){var b=f().text,c=Nb(b,d);return D(function(b,d,e){return c(e||a(b,d),d)},{assign:function(c,d,e){return Ob(a(c,e),b,d)}})},R=function(a){var b=t();i("]");return D(function(c,d){var e=a(c,d),f=b(c,d),g;if(!e)return q;if((e=e[f])&&e.then){g=e;if(!("$$v"in e))g.$$v=q,g.then(function(a){g.$$v=a});e=e.$$v}return e},{assign:function(c,d,e){return a(c,e)[b(c,e)]=d}})},v=function(){for(var a=t(),b;;)if(b=f("|"))a=k(a,\nb.fn,n());else return a};a?(t=o,w=Y=R=v=function(){e("is not valid json",{text:b,index:0})},u=A()):u=l();Q.length!==0&&e("is an unexpected token",Q[0]);return u}function Ob(b,a,c){for(var a=a.split("."),d=0;a.length>1;d++){var e=a.shift(),g=b[e];g||(g={},b[e]=g);b=g}return b[a.shift()]=c}function Pb(b,a,c,d,e){return function(g,h){var f=h&&h.hasOwnProperty(b)?h:g,i;if(f===null||f===q)return f;if((f=f[b])&&f.then){if(!("$$v"in f))i=f,i.$$v=q,i.then(function(a){i.$$v=a});f=f.$$v}if(!a||f===null||f===\nq)return f;if((f=f[a])&&f.then){if(!("$$v"in f))i=f,i.$$v=q,i.then(function(a){i.$$v=a});f=f.$$v}if(!c||f===null||f===q)return f;if((f=f[c])&&f.then){if(!("$$v"in f))i=f,i.$$v=q,i.then(function(a){i.$$v=a});f=f.$$v}if(!d||f===null||f===q)return f;if((f=f[d])&&f.then){if(!("$$v"in f))i=f,i.$$v=q,i.then(function(a){i.$$v=a});f=f.$$v}if(!e||f===null||f===q)return f;if((f=f[e])&&f.then){if(!("$$v"in f))i=f,i.$$v=q,i.then(function(a){i.$$v=a});f=f.$$v}return f}}function Nb(b,a){if(jb.hasOwnProperty(b))return jb[b];\nvar c=b.split("."),d=c.length,e;if(a)e=d<6?Pb(c[0],c[1],c[2],c[3],c[4]):function(a,b){var e=0,g;do g=Pb(c[e++],c[e++],c[e++],c[e++],c[e++])(a,b),b=q,a=g;while(e<d);return g};else{var g="var l, fn, p;\\n";m(c,function(a,b){g+="if(s === null || s === undefined) return s;\\nl=s;\\ns="+(b?"s":\'((k&&k.hasOwnProperty("\'+a+\'"))?k:s)\')+\'["\'+a+\'"];\\nif (s && s.then) {\\n if (!("$$v" in s)) {\\n p=s;\\n p.$$v = undefined;\\n p.then(function(v) {p.$$v=v;});\\n}\\n s=s.$$v\\n}\\n\'});g+="return s;";e=Function("s","k",g);\ne.toString=function(){return g}}return jb[b]=e}function Rc(){var b={};this.$get=["$filter","$sniffer",function(a,c){return function(d){switch(typeof d){case "string":return b.hasOwnProperty(d)?b[d]:b[d]=Qc(d,!1,a,c.csp);case "function":return d;default:return s}}}]}function Sc(){this.$get=["$rootScope","$exceptionHandler",function(b,a){return Tc(function(a){b.$evalAsync(a)},a)}]}function Tc(b,a){function c(a){return a}function d(a){return h(a)}var e=function(){var f=[],i,j;return j={resolve:function(a){if(f){var c=\nf;f=q;i=g(a);c.length&&b(function(){for(var a,b=0,d=c.length;b<d;b++)a=c[b],i.then(a[0],a[1])})}},reject:function(a){j.resolve(h(a))},promise:{then:function(b,g){var j=e(),h=function(d){try{j.resolve((b||c)(d))}catch(e){j.reject(e),a(e)}},p=function(b){try{j.resolve((g||d)(b))}catch(c){j.reject(c),a(c)}};f?f.push([h,p]):i.then(h,p);return j.promise}}}},g=function(a){return a&&a.then?a:{then:function(c){var d=e();b(function(){d.resolve(c(a))});return d.promise}}},h=function(a){return{then:function(c,\ng){var h=e();b(function(){h.resolve((g||d)(a))});return h.promise}}};return{defer:e,reject:h,when:function(f,i,j){var k=e(),l,n=function(b){try{return(i||c)(b)}catch(d){return a(d),h(d)}},o=function(b){try{return(j||d)(b)}catch(c){return a(c),h(c)}};b(function(){g(f).then(function(a){l||(l=!0,k.resolve(g(a).then(n,o)))},function(a){l||(l=!0,k.resolve(o(a)))})});return k.promise},all:function(a){var b=e(),c=a.length,d=[];c?m(a,function(a,e){g(a).then(function(a){e in d||(d[e]=a,--c||b.resolve(d))},\nfunction(a){e in d||b.reject(a)})}):b.resolve(d);return b.promise}}}function Uc(){var b={};this.when=function(a,c){b[a]=D({reloadOnSearch:!0},c);if(a){var d=a[a.length-1]=="/"?a.substr(0,a.length-1):a+"/";b[d]={redirectTo:a}}return this};this.otherwise=function(a){this.when(null,a);return this};this.$get=["$rootScope","$location","$routeParams","$q","$injector","$http","$templateCache",function(a,c,d,e,g,h,f){function i(a,b){for(var b="^"+b.replace(/[-\\/\\\\^$*+?.()|[\\]{}]/g,"\\\\$&")+"$",c="",d=[],e=\n{},f=/:(\\w+)/g,g,j=0;(g=f.exec(b))!==null;)c+=b.slice(j,g.index),c+="([^\\\\/]*)",d.push(g[1]),j=f.lastIndex;c+=b.substr(j);var h=a.match(RegExp(c));h&&m(d,function(a,b){e[a]=h[b+1]});return h?e:null}function j(){var b=k(),j=o.current;if(b&&j&&b.$$route===j.$$route&&ea(b.pathParams,j.pathParams)&&!b.reloadOnSearch&&!n)j.params=b.params,U(j.params,d),a.$broadcast("$routeUpdate",j);else if(b||j)n=!1,a.$broadcast("$routeChangeStart",b,j),(o.current=b)&&b.redirectTo&&(B(b.redirectTo)?c.path(l(b.redirectTo,\nb.params)).search(b.params).replace():c.url(b.redirectTo(b.pathParams,c.path(),c.search())).replace()),e.when(b).then(function(){if(b){var a=[],c=[],d;m(b.resolve||{},function(b,d){a.push(d);c.push(B(b)?g.get(b):g.invoke(b))});if(!v(d=b.template))if(v(d=b.templateUrl))d=h.get(d,{cache:f}).then(function(a){return a.data});v(d)&&(a.push("$template"),c.push(d));return e.all(c).then(function(b){var c={};m(b,function(b,d){c[a[d]]=b});return c})}}).then(function(c){if(b==o.current){if(b)b.locals=c,U(b.params,\nd);a.$broadcast("$routeChangeSuccess",b,j)}},function(c){b==o.current&&a.$broadcast("$routeChangeError",b,j,c)})}function k(){var a,d;m(b,function(b,e){if(!d&&(a=i(c.path(),e)))d=ya(b,{params:D({},c.search(),a),pathParams:a}),d.$$route=b});return d||b[null]&&ya(b[null],{params:{},pathParams:{}})}function l(a,b){var c=[];m((a||"").split(":"),function(a,d){if(d==0)c.push(a);else{var e=a.match(/(\\w+)(.*)/),f=e[1];c.push(b[f]);c.push(e[2]||"");delete b[f]}});return c.join("")}var n=!1,o={routes:b,reload:function(){n=\n!0;a.$evalAsync(j)}};a.$on("$locationChangeSuccess",j);return o}]}function Vc(){this.$get=I({})}function Wc(){var b=10;this.digestTtl=function(a){arguments.length&&(b=a);return b};this.$get=["$injector","$exceptionHandler","$parse",function(a,c,d){function e(){this.$id=xa();this.$$phase=this.$parent=this.$$watchers=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=null;this["this"]=this.$root=this;this.$$destroyed=!1;this.$$asyncQueue=[];this.$$listeners={};this.$$isolateBindings=\n{}}function g(a){if(i.$$phase)throw Error(i.$$phase+" already in progress");i.$$phase=a}function h(a,b){var c=d(a);ra(c,b);return c}function f(){}e.prototype={$new:function(a){if(H(a))throw Error("API-CHANGE: Use $controller to instantiate controllers.");a?(a=new e,a.$root=this.$root):(a=function(){},a.prototype=this,a=new a,a.$id=xa());a["this"]=a;a.$$listeners={};a.$parent=this;a.$$asyncQueue=[];a.$$watchers=a.$$nextSibling=a.$$childHead=a.$$childTail=null;a.$$prevSibling=this.$$childTail;this.$$childHead?\nthis.$$childTail=this.$$childTail.$$nextSibling=a:this.$$childHead=this.$$childTail=a;return a},$watch:function(a,b,c){var d=h(a,"watch"),e=this.$$watchers,g={fn:b,last:f,get:d,exp:a,eq:!!c};if(!H(b)){var i=h(b||s,"listener");g.fn=function(a,b,c){i(c)}}if(!e)e=this.$$watchers=[];e.unshift(g);return function(){Ua(e,g)}},$digest:function(){var a,d,e,h,o,p,m,r=b,x,q=[],A,J;g("$digest");do{m=!1;x=this;do{for(o=x.$$asyncQueue;o.length;)try{x.$eval(o.shift())}catch(K){c(K)}if(h=x.$$watchers)for(p=h.length;p--;)try{if((a=\nh[p])&&(d=a.get(x))!==(e=a.last)&&!(a.eq?ea(d,e):typeof d=="number"&&typeof e=="number"&&isNaN(d)&&isNaN(e)))m=!0,a.last=a.eq?U(d):d,a.fn(d,e===f?d:e,x),r<5&&(A=4-r,q[A]||(q[A]=[]),J=H(a.exp)?"fn: "+(a.exp.name||a.exp.toString()):a.exp,J+="; newVal: "+ba(d)+"; oldVal: "+ba(e),q[A].push(J))}catch(C){c(C)}if(!(h=x.$$childHead||x!==this&&x.$$nextSibling))for(;x!==this&&!(h=x.$$nextSibling);)x=x.$parent}while(x=h);if(m&&!r--)throw i.$$phase=null,Error(b+" $digest() iterations reached. Aborting!\\nWatchers fired in the last 5 iterations: "+\nba(q));}while(m||o.length);i.$$phase=null},$destroy:function(){if(!(i==this||this.$$destroyed)){var a=this.$parent;this.$broadcast("$destroy");this.$$destroyed=!0;if(a.$$childHead==this)a.$$childHead=this.$$nextSibling;if(a.$$childTail==this)a.$$childTail=this.$$prevSibling;if(this.$$prevSibling)this.$$prevSibling.$$nextSibling=this.$$nextSibling;if(this.$$nextSibling)this.$$nextSibling.$$prevSibling=this.$$prevSibling;this.$parent=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=\nnull}},$eval:function(a,b){return d(a)(this,b)},$evalAsync:function(a){this.$$asyncQueue.push(a)},$apply:function(a){try{return g("$apply"),this.$eval(a)}catch(b){c(b)}finally{i.$$phase=null;try{i.$digest()}catch(d){throw c(d),d;}}},$on:function(a,b){var c=this.$$listeners[a];c||(this.$$listeners[a]=c=[]);c.push(b);return function(){c[za(c,b)]=null}},$emit:function(a,b){var d=[],e,f=this,g=!1,h={name:a,targetScope:f,stopPropagation:function(){g=!0},preventDefault:function(){h.defaultPrevented=!0},\ndefaultPrevented:!1},i=[h].concat(ha.call(arguments,1)),m,q;do{e=f.$$listeners[a]||d;h.currentScope=f;m=0;for(q=e.length;m<q;m++)if(e[m])try{if(e[m].apply(null,i),g)return h}catch(A){c(A)}else e.splice(m,1),m--,q--;f=f.$parent}while(f);return h},$broadcast:function(a,b){var d=this,e=this,f={name:a,targetScope:this,preventDefault:function(){f.defaultPrevented=!0},defaultPrevented:!1},g=[f].concat(ha.call(arguments,1)),h,i;do{d=e;f.currentScope=d;e=d.$$listeners[a]||[];h=0;for(i=e.length;h<i;h++)if(e[h])try{e[h].apply(null,\ng)}catch(m){c(m)}else e.splice(h,1),h--,i--;if(!(e=d.$$childHead||d!==this&&d.$$nextSibling))for(;d!==this&&!(e=d.$$nextSibling);)d=d.$parent}while(d=e);return f}};var i=new e;return i}]}function Xc(){this.$get=["$window",function(b){var a={},c=G((/android (\\d+)/.exec(y(b.navigator.userAgent))||[])[1]);return{history:!(!b.history||!b.history.pushState||c<4),hashchange:"onhashchange"in b&&(!b.document.documentMode||b.document.documentMode>7),hasEvent:function(c){if(c=="input"&&V==9)return!1;if(u(a[c])){var e=\nb.document.createElement("div");a[c]="on"+c in e}return a[c]},csp:!1}}]}function Yc(){this.$get=I(P)}function Qb(b){var a={},c,d,e;if(!b)return a;m(b.split("\\n"),function(b){e=b.indexOf(":");c=y(S(b.substr(0,e)));d=S(b.substr(e+1));c&&(a[c]?a[c]+=", "+d:a[c]=d)});return a}function Rb(b){var a=M(b)?b:q;return function(c){a||(a=Qb(b));return c?a[y(c)]||null:a}}function Sb(b,a,c){if(H(c))return c(b,a);m(c,function(c){b=c(b,a)});return b}function Zc(){var b=/^\\s*(\\[|\\{[^\\{])/,a=/[\\}\\]]\\s*$/,c=/^\\)\\]\\}\',?\\n/,\nd=this.defaults={transformResponse:[function(d){B(d)&&(d=d.replace(c,""),b.test(d)&&a.test(d)&&(d=qb(d,!0)));return d}],transformRequest:[function(a){return M(a)&&ma.apply(a)!=="[object File]"?ba(a):a}],headers:{common:{Accept:"application/json, text/plain, */*","X-Requested-With":"XMLHttpRequest"},post:{"Content-Type":"application/json;charset=utf-8"},put:{"Content-Type":"application/json;charset=utf-8"}}},e=this.responseInterceptors=[];this.$get=["$httpBackend","$browser","$cacheFactory","$rootScope",\n"$q","$injector",function(a,b,c,i,j,k){function l(a){function c(a){var b=D({},a,{data:Sb(a.data,a.headers,f)});return 200<=a.status&&a.status<300?b:j.reject(b)}a.method=la(a.method);var e=a.transformRequest||d.transformRequest,f=a.transformResponse||d.transformResponse,g=D({},a.headers),i=D({"X-XSRF-TOKEN":b.cookies()["XSRF-TOKEN"]},d.headers.common,d.headers[y(a.method)]),k,l,o,p;a:for(k in i){l=y(k);for(o in a.headers)if(y(o)===l)continue a;g[k]=i[k]}if(u(a.data))for(var q in g)if(y(q)==="content-type"){delete g[q];\nbreak}e=Sb(a.data,Rb(g),e);p=n(a,e,g);p=p.then(c,c);m(z,function(a){p=a(p)});p.success=function(b){p.then(function(c){b(c.data,c.status,c.headers,a)});return p};p.error=function(b){p.then(null,function(c){b(c.data,c.status,c.headers,a)});return p};return p}function n(b,c,d){function e(a,b,c){m&&(200<=a&&a<300?m.put(q,[a,b,Qb(c)]):m.remove(q));f(b,a,c);i.$apply()}function f(a,c,d){c=Math.max(c,0);(200<=c&&c<300?k.resolve:k.reject)({data:a,status:c,headers:Rb(d),config:b})}function h(){var a=za(l.pendingRequests,\nb);a!==-1&&l.pendingRequests.splice(a,1)}var k=j.defer(),n=k.promise,m,t,q=o(b.url,b.params);l.pendingRequests.push(b);n.then(h,h);b.cache&&b.method=="GET"&&(m=M(b.cache)?b.cache:p);if(m)if(t=m.get(q))if(t.then)return t.then(h,h),t;else E(t)?f(t[1],t[0],U(t[2])):f(t,200,{});else m.put(q,n);t||a(b.method,q,c,e,d,b.timeout,b.withCredentials);return n}function o(a,b){if(!b)return a;var c=[];hc(b,function(a,b){a==null||a==q||(M(a)&&(a=ba(a)),c.push(encodeURIComponent(b)+"="+encodeURIComponent(a)))});\nreturn a+(a.indexOf("?")==-1?"?":"&")+c.join("&")}var p=c("$http"),z=[];m(e,function(a){z.push(B(a)?k.get(a):k.invoke(a))});l.pendingRequests=[];(function(a){m(arguments,function(a){l[a]=function(b,c){return l(D(c||{},{method:a,url:b}))}})})("get","delete","head","jsonp");(function(a){m(arguments,function(a){l[a]=function(b,c,d){return l(D(d||{},{method:a,url:b,data:c}))}})})("post","put");l.defaults=d;return l}]}function $c(){this.$get=["$browser","$window","$document",function(b,a,c){return ad(b,\nbd,b.defer,a.angular.callbacks,c[0],a.location.protocol.replace(":",""))}]}function ad(b,a,c,d,e,g){function h(a,b){var c=e.createElement("script"),d=function(){e.body.removeChild(c);b&&b()};c.type="text/javascript";c.src=a;V?c.onreadystatechange=function(){/loaded|complete/.test(c.readyState)&&d()}:c.onload=c.onerror=d;e.body.appendChild(c)}return function(e,i,j,k,l,n,o){function p(a,c,d,e){c=(i.match(Jb)||["",g])[1]=="file"?d?200:404:c;a(c==1223?204:c,d,e);b.$$completeOutstandingRequest(s)}b.$$incOutstandingRequestCount();\ni=i||b.url();if(y(e)=="jsonp"){var q="_"+(d.counter++).toString(36);d[q]=function(a){d[q].data=a};h(i.replace("JSON_CALLBACK","angular.callbacks."+q),function(){d[q].data?p(k,200,d[q].data):p(k,-2);delete d[q]})}else{var r=new a;r.open(e,i,!0);m(l,function(a,b){a&&r.setRequestHeader(b,a)});var x;r.onreadystatechange=function(){if(r.readyState==4){var a=r.getAllResponseHeaders(),b=["Cache-Control","Content-Language","Content-Type","Expires","Last-Modified","Pragma"];a||(a="",m(b,function(b){var c=\nr.getResponseHeader(b);c&&(a+=b+": "+c+"\\n")}));p(k,x||r.status,r.responseText,a)}};if(o)r.withCredentials=!0;r.send(j||"");n>0&&c(function(){x=-1;r.abort()},n)}}}function cd(){this.$get=function(){return{id:"en-us",NUMBER_FORMATS:{DECIMAL_SEP:".",GROUP_SEP:",",PATTERNS:[{minInt:1,minFrac:0,maxFrac:3,posPre:"",posSuf:"",negPre:"-",negSuf:"",gSize:3,lgSize:3},{minInt:1,minFrac:2,maxFrac:2,posPre:"\\u00a4",posSuf:"",negPre:"(\\u00a4",negSuf:")",gSize:3,lgSize:3}],CURRENCY_SYM:"$"},DATETIME_FORMATS:{MONTH:"January,February,March,April,May,June,July,August,September,October,November,December".split(","),\nSHORTMONTH:"Jan,Feb,Mar,Apr,May,Jun,Jul,Aug,Sep,Oct,Nov,Dec".split(","),DAY:"Sunday,Monday,Tuesday,Wednesday,Thursday,Friday,Saturday".split(","),SHORTDAY:"Sun,Mon,Tue,Wed,Thu,Fri,Sat".split(","),AMPMS:["AM","PM"],medium:"MMM d, y h:mm:ss a","short":"M/d/yy h:mm a",fullDate:"EEEE, MMMM d, y",longDate:"MMMM d, y",mediumDate:"MMM d, y",shortDate:"M/d/yy",mediumTime:"h:mm:ss a",shortTime:"h:mm a"},pluralCat:function(b){return b===1?"one":"other"}}}}function dd(){this.$get=["$rootScope","$browser","$q",\n"$exceptionHandler",function(b,a,c,d){function e(e,f,i){var j=c.defer(),k=j.promise,l=v(i)&&!i,f=a.defer(function(){try{j.resolve(e())}catch(a){j.reject(a),d(a)}finally{delete g[k.$$timeoutId]}l||b.$apply()},f);k.$$timeoutId=f;g[f]=j;return k}var g={};e.cancel=function(b){return b&&b.$$timeoutId in g?(g[b.$$timeoutId].reject("canceled"),delete g[b.$$timeoutId],a.defer.cancel(b.$$timeoutId)):!1};return e}]}function Tb(b){function a(a,e){return b.factory(a+c,e)}var c="Filter";this.register=a;this.$get=\n["$injector",function(a){return function(b){return a.get(b+c)}}];a("currency",Ub);a("date",Vb);a("filter",ed);a("json",fd);a("limitTo",gd);a("lowercase",hd);a("number",Wb);a("orderBy",Xb);a("uppercase",id)}function ed(){return function(b,a){if(!E(b))return b;var c=[];c.check=function(a){for(var b=0;b<c.length;b++)if(!c[b](a))return!1;return!0};var d=function(a,b){if(b.charAt(0)==="!")return!d(a,b.substr(1));switch(typeof a){case "boolean":case "number":case "string":return(""+a).toLowerCase().indexOf(b)>\n-1;case "object":for(var c in a)if(c.charAt(0)!=="$"&&d(a[c],b))return!0;return!1;case "array":for(c=0;c<a.length;c++)if(d(a[c],b))return!0;return!1;default:return!1}};switch(typeof a){case "boolean":case "number":case "string":a={$:a};case "object":for(var e in a)e=="$"?function(){var b=(""+a[e]).toLowerCase();b&&c.push(function(a){return d(a,b)})}():function(){var b=e,f=(""+a[e]).toLowerCase();f&&c.push(function(a){return d(cb(a,b),f)})}();break;case "function":c.push(a);break;default:return b}for(var g=\n[],h=0;h<b.length;h++){var f=b[h];c.check(f)&&g.push(f)}return g}}function Ub(b){var a=b.NUMBER_FORMATS;return function(b,d){if(u(d))d=a.CURRENCY_SYM;return Yb(b,a.PATTERNS[1],a.GROUP_SEP,a.DECIMAL_SEP,2).replace(/\\u00A4/g,d)}}function Wb(b){var a=b.NUMBER_FORMATS;return function(b,d){return Yb(b,a.PATTERNS[0],a.GROUP_SEP,a.DECIMAL_SEP,d)}}function Yb(b,a,c,d,e){if(isNaN(b)||!isFinite(b))return"";var g=b<0,b=Math.abs(b),h=b+"",f="",i=[],j=!1;if(h.indexOf("e")!==-1){var k=h.match(/([\\d\\.]+)e(-?)(\\d+)/);\nk&&k[2]=="-"&&k[3]>e+1?h="0":(f=h,j=!0)}if(j)e>0&&b>-1&&b<1&&(f=b.toFixed(e));else{h=(h.split(Zb)[1]||"").length;u(e)&&(e=Math.min(Math.max(a.minFrac,h),a.maxFrac));var h=Math.pow(10,e),b=Math.round(b*h)/h,b=(""+b).split(Zb),h=b[0],b=b[1]||"",j=0,k=a.lgSize,l=a.gSize;if(h.length>=k+l)for(var j=h.length-k,n=0;n<j;n++)(j-n)%l===0&&n!==0&&(f+=c),f+=h.charAt(n);for(n=j;n<h.length;n++)(h.length-n)%k===0&&n!==0&&(f+=c),f+=h.charAt(n);for(;b.length<e;)b+="0";e&&e!=="0"&&(f+=d+b.substr(0,e))}i.push(g?a.negPre:\na.posPre);i.push(f);i.push(g?a.negSuf:a.posSuf);return i.join("")}function kb(b,a,c){var d="";b<0&&(d="-",b=-b);for(b=""+b;b.length<a;)b="0"+b;c&&(b=b.substr(b.length-a));return d+b}function O(b,a,c,d){c=c||0;return function(e){e=e["get"+b]();if(c>0||e>-c)e+=c;e===0&&c==-12&&(e=12);return kb(e,a,d)}}function Ka(b,a){return function(c,d){var e=c["get"+b](),g=la(a?"SHORT"+b:b);return d[g][e]}}function Vb(b){function a(a){var b;if(b=a.match(c)){var a=new Date(0),g=0,h=0;b[9]&&(g=G(b[9]+b[10]),h=G(b[9]+\nb[11]));a.setUTCFullYear(G(b[1]),G(b[2])-1,G(b[3]));a.setUTCHours(G(b[4]||0)-g,G(b[5]||0)-h,G(b[6]||0),G(b[7]||0))}return a}var c=/^(\\d{4})-?(\\d\\d)-?(\\d\\d)(?:T(\\d\\d)(?::?(\\d\\d)(?::?(\\d\\d)(?:\\.(\\d+))?)?)?(Z|([+-])(\\d\\d):?(\\d\\d))?)?$/;return function(c,e){var g="",h=[],f,i,e=e||"mediumDate",e=b.DATETIME_FORMATS[e]||e;B(c)&&(c=jd.test(c)?G(c):a(c));Ra(c)&&(c=new Date(c));if(!oa(c))return c;for(;e;)(i=kd.exec(e))?(h=h.concat(ha.call(i,1)),e=h.pop()):(h.push(e),e=null);m(h,function(a){f=ld[a];g+=f?f(c,\nb.DATETIME_FORMATS):a.replace(/(^\'|\'$)/g,"").replace(/\'\'/g,"\'")});return g}}function fd(){return function(b){return ba(b,!0)}}function gd(){return function(b,a){if(!(b instanceof Array))return b;var a=G(a),c=[],d,e;if(!b||!(b instanceof Array))return c;a>b.length?a=b.length:a<-b.length&&(a=-b.length);a>0?(d=0,e=a):(d=b.length+a,e=b.length);for(;d<e;d++)c.push(b[d]);return c}}function Xb(b){return function(a,c,d){function e(a,b){return Wa(b)?function(b,c){return a(c,b)}:a}if(!E(a))return a;if(!c)return a;\nfor(var c=E(c)?c:[c],c=Ta(c,function(a){var c=!1,d=a||na;if(B(a)){if(a.charAt(0)=="+"||a.charAt(0)=="-")c=a.charAt(0)=="-",a=a.substring(1);d=b(a)}return e(function(a,b){var c;c=d(a);var e=d(b),f=typeof c,g=typeof e;f==g?(f=="string"&&(c=c.toLowerCase(),e=e.toLowerCase()),c=c===e?0:c<e?-1:1):c=f<g?-1:1;return c},c)}),g=[],h=0;h<a.length;h++)g.push(a[h]);return g.sort(e(function(a,b){for(var d=0;d<c.length;d++){var e=c[d](a,b);if(e!==0)return e}return 0},d))}}function W(b){H(b)&&(b={link:b});b.restrict=\nb.restrict||"AC";return I(b)}function $b(b,a){function c(a,c){c=c?"-"+ab(c,"-"):"";b.removeClass((a?La:Ma)+c).addClass((a?Ma:La)+c)}var d=this,e=b.parent().controller("form")||Na,g=0,h=d.$error={};d.$name=a.name||a.ngForm;d.$dirty=!1;d.$pristine=!0;d.$valid=!0;d.$invalid=!1;e.$addControl(d);b.addClass(Oa);c(!0);d.$addControl=function(a){a.$name&&!d.hasOwnProperty(a.$name)&&(d[a.$name]=a)};d.$removeControl=function(a){a.$name&&d[a.$name]===a&&delete d[a.$name];m(h,function(b,c){d.$setValidity(c,!0,\na)})};d.$setValidity=function(a,b,j){var k=h[a];if(b){if(k&&(Ua(k,j),!k.length)){g--;if(!g)c(b),d.$valid=!0,d.$invalid=!1;h[a]=!1;c(!0,a);e.$setValidity(a,!0,d)}}else{g||c(b);if(k){if(za(k,j)!=-1)return}else h[a]=k=[],g++,c(!1,a),e.$setValidity(a,!1,d);k.push(j);d.$valid=!1;d.$invalid=!0}};d.$setDirty=function(){b.removeClass(Oa).addClass(ac);d.$dirty=!0;d.$pristine=!1;e.$setDirty()}}function X(b){return u(b)||b===""||b===null||b!==b}function Pa(b,a,c,d,e,g){var h=function(){var c=S(a.val());d.$viewValue!==\nc&&b.$apply(function(){d.$setViewValue(c)})};if(e.hasEvent("input"))a.bind("input",h);else{var f,i=function(){f||(f=g.defer(function(){h();f=null}))};a.bind("keydown",function(a){a=a.keyCode;a===91||15<a&&a<19||37<=a&&a<=40||i()});a.bind("change",h);e.hasEvent("paste")&&a.bind("paste cut",i)}d.$render=function(){a.val(X(d.$viewValue)?"":d.$viewValue)};var j=c.ngPattern,k=function(a,b){return X(b)||a.test(b)?(d.$setValidity("pattern",!0),b):(d.$setValidity("pattern",!1),q)};j&&(j.match(/^\\/(.*)\\/$/)?\n(j=RegExp(j.substr(1,j.length-2)),e=function(a){return k(j,a)}):e=function(a){var c=b.$eval(j);if(!c||!c.test)throw Error("Expected "+j+" to be a RegExp but was "+c);return k(c,a)},d.$formatters.push(e),d.$parsers.push(e));if(c.ngMinlength){var l=G(c.ngMinlength),e=function(a){return!X(a)&&a.length<l?(d.$setValidity("minlength",!1),q):(d.$setValidity("minlength",!0),a)};d.$parsers.push(e);d.$formatters.push(e)}if(c.ngMaxlength){var n=G(c.ngMaxlength),c=function(a){return!X(a)&&a.length>n?(d.$setValidity("maxlength",\n!1),q):(d.$setValidity("maxlength",!0),a)};d.$parsers.push(c);d.$formatters.push(c)}}function lb(b,a){b="ngClass"+b;return W(function(c,d,e){function g(b){if(a===!0||c.$index%2===a)i&&!ea(b,i)&&h(i),f(b);i=U(b)}function h(a){M(a)&&!E(a)&&(a=Ta(a,function(a,b){if(a)return b}));d.removeClass(E(a)?a.join(" "):a)}function f(a){M(a)&&!E(a)&&(a=Ta(a,function(a,b){if(a)return b}));a&&d.addClass(E(a)?a.join(" "):a)}var i=q;c.$watch(e[b],g,!0);e.$observe("class",function(){var a=c.$eval(e[b]);g(a,a)});b!==\n"ngClass"&&c.$watch("$index",function(d,g){var i=d&1;i!==g&1&&(i===a?f(c.$eval(e[b])):h(c.$eval(e[b])))})})}var y=function(b){return B(b)?b.toLowerCase():b},la=function(b){return B(b)?b.toUpperCase():b},V=G((/msie (\\d+)/.exec(y(navigator.userAgent))||[])[1]),w,aa,ha=[].slice,Qa=[].push,ma=Object.prototype.toString,$a=P.angular||(P.angular={}),ta,Ga,Z=["0","0","0"];s.$inject=[];na.$inject=[];var S=function(){return!String.prototype.trim?function(b){return B(b)?b.replace(/^\\s*/,"").replace(/\\s*$/,""):\nb}:function(b){return B(b)?b.trim():b}}();Ga=V<9?function(b){b=b.nodeName?b:b[0];return b.scopeName&&b.scopeName!="HTML"?la(b.scopeName+":"+b.nodeName):b.nodeName}:function(b){return b.nodeName?b.nodeName:b[0].nodeName};var mc=/[A-Z]/g,md={full:"1.0.8",major:1,minor:0,dot:8,codeName:"bubble-burst"},Ba=L.cache={},Aa=L.expando="ng-"+(new Date).getTime(),qc=1,bc=P.document.addEventListener?function(b,a,c){b.addEventListener(a,c,!1)}:function(b,a,c){b.attachEvent("on"+a,c)},gb=P.document.removeEventListener?\nfunction(b,a,c){b.removeEventListener(a,c,!1)}:function(b,a,c){b.detachEvent("on"+a,c)},oc=/([\\:\\-\\_]+(.))/g,pc=/^moz([A-Z])/,va=L.prototype={ready:function(b){function a(){c||(c=!0,b())}var c=!1;this.bind("DOMContentLoaded",a);L(P).bind("load",a)},toString:function(){var b=[];m(this,function(a){b.push(""+a)});return"["+b.join(", ")+"]"},eq:function(b){return b>=0?w(this[b]):w(this[this.length+b])},length:0,push:Qa,sort:[].sort,splice:[].splice},Ea={};m("multiple,selected,checked,disabled,readOnly,required".split(","),\nfunction(b){Ea[y(b)]=b});var Db={};m("input,select,option,textarea,button,form".split(","),function(b){Db[la(b)]=!0});m({data:yb,inheritedData:Da,scope:function(b){return Da(b,"$scope")},controller:Bb,injector:function(b){return Da(b,"$injector")},removeAttr:function(b,a){b.removeAttribute(a)},hasClass:Ca,css:function(b,a,c){a=vb(a);if(v(c))b.style[a]=c;else{var d;V<=8&&(d=b.currentStyle&&b.currentStyle[a],d===""&&(d="auto"));d=d||b.style[a];V<=8&&(d=d===""?q:d);return d}},attr:function(b,a,c){var d=\ny(a);if(Ea[d])if(v(c))c?(b[a]=!0,b.setAttribute(a,d)):(b[a]=!1,b.removeAttribute(d));else return b[a]||(b.attributes.getNamedItem(a)||s).specified?d:q;else if(v(c))b.setAttribute(a,c);else if(b.getAttribute)return b=b.getAttribute(a,2),b===null?q:b},prop:function(b,a,c){if(v(c))b[a]=c;else return b[a]},text:D(V<9?function(b,a){if(b.nodeType==1){if(u(a))return b.innerText;b.innerText=a}else{if(u(a))return b.nodeValue;b.nodeValue=a}}:function(b,a){if(u(a))return b.textContent;b.textContent=a},{$dv:""}),\nval:function(b,a){if(u(a)){if(Ga(b)==="SELECT"&&b.multiple){var c=[];m(b.options,function(a){a.selected&&c.push(a.value||a.text)});return c.length===0?null:c}return b.value}b.value=a},html:function(b,a){if(u(a))return b.innerHTML;for(var c=0,d=b.childNodes;c<d.length;c++)sa(d[c]);b.innerHTML=a}},function(b,a){L.prototype[a]=function(a,d){var e,g;if((b.length==2&&b!==Ca&&b!==Bb?a:d)===q)if(M(a)){for(e=0;e<this.length;e++)if(b===yb)b(this[e],a);else for(g in a)b(this[e],g,a[g]);return this}else{if(this.length)return b(this[0],\na,d)}else{for(e=0;e<this.length;e++)b(this[e],a,d);return this}return b.$dv}});m({removeData:wb,dealoc:sa,bind:function a(c,d,e){var g=$(c,"events"),h=$(c,"handle");g||$(c,"events",g={});h||$(c,"handle",h=rc(c,g));m(d.split(" "),function(d){var i=g[d];if(!i){if(d=="mouseenter"||d=="mouseleave"){var j=T.body.contains||T.body.compareDocumentPosition?function(a,c){var d=a.nodeType===9?a.documentElement:a,e=c&&c.parentNode;return a===e||!(!e||!(e.nodeType===1&&(d.contains?d.contains(e):a.compareDocumentPosition&&\na.compareDocumentPosition(e)&16)))}:function(a,c){if(c)for(;c=c.parentNode;)if(c===a)return!0;return!1};g[d]=[];a(c,{mouseleave:"mouseout",mouseenter:"mouseover"}[d],function(a){var c=a.relatedTarget;(!c||c!==this&&!j(this,c))&&h(a,d)})}else bc(c,d,h),g[d]=[];i=g[d]}i.push(e)})},unbind:xb,replaceWith:function(a,c){var d,e=a.parentNode;sa(a);m(new L(c),function(c){d?e.insertBefore(c,d.nextSibling):e.replaceChild(c,a);d=c})},children:function(a){var c=[];m(a.childNodes,function(a){a.nodeType===1&&c.push(a)});\nreturn c},contents:function(a){return a.childNodes||[]},append:function(a,c){m(new L(c),function(c){a.nodeType===1&&a.appendChild(c)})},prepend:function(a,c){if(a.nodeType===1){var d=a.firstChild;m(new L(c),function(c){a.insertBefore(c,d)})}},wrap:function(a,c){var c=w(c)[0],d=a.parentNode;d&&d.replaceChild(c,a);c.appendChild(a)},remove:function(a){sa(a);var c=a.parentNode;c&&c.removeChild(a)},after:function(a,c){var d=a,e=a.parentNode;m(new L(c),function(a){e.insertBefore(a,d.nextSibling);d=a})},\naddClass:Ab,removeClass:zb,toggleClass:function(a,c,d){u(d)&&(d=!Ca(a,c));(d?Ab:zb)(a,c)},parent:function(a){return(a=a.parentNode)&&a.nodeType!==11?a:null},next:function(a){if(a.nextElementSibling)return a.nextElementSibling;for(a=a.nextSibling;a!=null&&a.nodeType!==1;)a=a.nextSibling;return a},find:function(a,c){return a.getElementsByTagName(c)},clone:fb,triggerHandler:function(a,c){var d=($(a,"events")||{})[c];m(d,function(c){c.call(a,null)})}},function(a,c){L.prototype[c]=function(c,e){for(var g,\nh=0;h<this.length;h++)g==q?(g=a(this[h],c,e),g!==q&&(g=w(g))):eb(g,a(this[h],c,e));return g==q?this:g}});Fa.prototype={put:function(a,c){this[fa(a)]=c},get:function(a){return this[fa(a)]},remove:function(a){var c=this[a=fa(a)];delete this[a];return c}};hb.prototype={push:function(a,c){var d=this[a=fa(a)];d?d.push(c):this[a]=[c]},shift:function(a){var c=this[a=fa(a)];if(c)return c.length==1?(delete this[a],c[0]):c.shift()},peek:function(a){if(a=this[fa(a)])return a[0]}};var tc=/^function\\s*[^\\(]*\\(\\s*([^\\)]*)\\)/m,\nuc=/,/,vc=/^\\s*(_?)(\\S+?)\\1\\s*$/,sc=/((\\/\\/.*$)|(\\/\\*[\\s\\S]*?\\*\\/))/mg,Gb="Non-assignable model expression: ";Fb.$inject=["$provide"];var Ec=/^(x[\\:\\-_]|data[\\:\\-_])/i,Jb=/^([^:]+):\\/\\/(\\w+:{0,1}\\w*@)?(\\{?[\\w\\.-]*\\}?)(:([0-9]+))?(\\/[^\\?#]*)?(\\?([^#]*))?(#(.*))?$/,cc=/^([^\\?#]*)?(\\?([^#]*))?(#(.*))?$/,Lc=cc,Kb={http:80,https:443,ftp:21};ib.prototype={$$replace:!1,absUrl:Ia("$$absUrl"),url:function(a,c){if(u(a))return this.$$url;var d=cc.exec(a);d[1]&&this.path(decodeURIComponent(d[1]));if(d[2]||d[1])this.search(d[3]||\n"");this.hash(d[5]||"",c);return this},protocol:Ia("$$protocol"),host:Ia("$$host"),port:Ia("$$port"),path:Mb("$$path",function(a){return a.charAt(0)=="/"?a:"/"+a}),search:function(a,c){if(u(a))return this.$$search;v(c)?c===null?delete this.$$search[a]:this.$$search[a]=c:this.$$search=B(a)?Xa(a):a;this.$$compose();return this},hash:Mb("$$hash",na),replace:function(){this.$$replace=!0;return this}};Ha.prototype=ya(ib.prototype);Lb.prototype=ya(Ha.prototype);var Ja={"null":function(){return null},"true":function(){return!0},\n"false":function(){return!1},undefined:s,"+":function(a,c,d,e){d=d(a,c);e=e(a,c);return v(d)?v(e)?d+e:d:v(e)?e:q},"-":function(a,c,d,e){d=d(a,c);e=e(a,c);return(v(d)?d:0)-(v(e)?e:0)},"*":function(a,c,d,e){return d(a,c)*e(a,c)},"/":function(a,c,d,e){return d(a,c)/e(a,c)},"%":function(a,c,d,e){return d(a,c)%e(a,c)},"^":function(a,c,d,e){return d(a,c)^e(a,c)},"=":s,"==":function(a,c,d,e){return d(a,c)==e(a,c)},"!=":function(a,c,d,e){return d(a,c)!=e(a,c)},"<":function(a,c,d,e){return d(a,c)<e(a,c)},\n">":function(a,c,d,e){return d(a,c)>e(a,c)},"<=":function(a,c,d,e){return d(a,c)<=e(a,c)},">=":function(a,c,d,e){return d(a,c)>=e(a,c)},"&&":function(a,c,d,e){return d(a,c)&&e(a,c)},"||":function(a,c,d,e){return d(a,c)||e(a,c)},"&":function(a,c,d,e){return d(a,c)&e(a,c)},"|":function(a,c,d,e){return e(a,c)(a,c,d(a,c))},"!":function(a,c,d){return!d(a,c)}},Pc={n:"\\n",f:"\\u000c",r:"\\r",t:"\\t",v:"\\u000b","\'":"\'",\'"\':\'"\'},jb={},bd=P.XMLHttpRequest||function(){try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(a){}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(c){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(d){}throw Error("This browser does not support XMLHttpRequest.");\n};Tb.$inject=["$provide"];Ub.$inject=["$locale"];Wb.$inject=["$locale"];var Zb=".",ld={yyyy:O("FullYear",4),yy:O("FullYear",2,0,!0),y:O("FullYear",1),MMMM:Ka("Month"),MMM:Ka("Month",!0),MM:O("Month",2,1),M:O("Month",1,1),dd:O("Date",2),d:O("Date",1),HH:O("Hours",2),H:O("Hours",1),hh:O("Hours",2,-12),h:O("Hours",1,-12),mm:O("Minutes",2),m:O("Minutes",1),ss:O("Seconds",2),s:O("Seconds",1),EEEE:Ka("Day"),EEE:Ka("Day",!0),a:function(a,c){return a.getHours()<12?c.AMPMS[0]:c.AMPMS[1]},Z:function(a){var a=\n-1*a.getTimezoneOffset(),c=a>=0?"+":"";c+=kb(Math[a>0?"floor":"ceil"](a/60),2)+kb(Math.abs(a%60),2);return c}},kd=/((?:[^yMdHhmsaZE\']+)|(?:\'(?:[^\']|\'\')*\')|(?:E+|y+|M+|d+|H+|h+|m+|s+|a|Z))(.*)/,jd=/^\\d+$/;Vb.$inject=["$locale"];var hd=I(y),id=I(la);Xb.$inject=["$parse"];var nd=I({restrict:"E",compile:function(a,c){V<=8&&(!c.href&&!c.name&&c.$set("href",""),a.append(T.createComment("IE fix")));return function(a,c){c.bind("click",function(a){c.attr("href")||a.preventDefault()})}}}),mb={};m(Ea,function(a,\nc){var d=ca("ng-"+c);mb[d]=function(){return{priority:100,compile:function(){return function(a,g,h){a.$watch(h[d],function(a){h.$set(c,!!a)})}}}}});m(["src","href"],function(a){var c=ca("ng-"+a);mb[c]=function(){return{priority:99,link:function(d,e,g){g.$observe(c,function(c){c&&(g.$set(a,c),V&&e.prop(a,g[a]))})}}}});var Na={$addControl:s,$removeControl:s,$setValidity:s,$setDirty:s};$b.$inject=["$element","$attrs","$scope"];var Qa=function(a){return["$timeout",function(c){var d={name:"form",restrict:"E",\ncontroller:$b,compile:function(){return{pre:function(a,d,h,f){if(!h.action){var i=function(a){a.preventDefault?a.preventDefault():a.returnValue=!1};bc(d[0],"submit",i);d.bind("$destroy",function(){c(function(){gb(d[0],"submit",i)},0,!1)})}var j=d.parent().controller("form"),k=h.name||h.ngForm;k&&(a[k]=f);j&&d.bind("$destroy",function(){j.$removeControl(f);k&&(a[k]=q);D(f,Na)})}}}};return a?D(U(d),{restrict:"EAC"}):d}]},od=Qa(),pd=Qa(!0),qd=/^(ftp|http|https):\\/\\/(\\w+:{0,1}\\w*@)?(\\S+)(:[0-9]+)?(\\/|\\/([\\w#!:.?+=&%@!\\-\\/]))?$/,\nrd=/^[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\\.[A-Za-z]{2,6}$/,sd=/^\\s*(\\-|\\+)?(\\d+|(\\d*(\\.\\d*)))\\s*$/,dc={text:Pa,number:function(a,c,d,e,g,h){Pa(a,c,d,e,g,h);e.$parsers.push(function(a){var c=X(a);return c||sd.test(a)?(e.$setValidity("number",!0),a===""?null:c?a:parseFloat(a)):(e.$setValidity("number",!1),q)});e.$formatters.push(function(a){return X(a)?"":""+a});if(d.min){var f=parseFloat(d.min),a=function(a){return!X(a)&&a<f?(e.$setValidity("min",!1),q):(e.$setValidity("min",!0),a)};e.$parsers.push(a);\ne.$formatters.push(a)}if(d.max){var i=parseFloat(d.max),d=function(a){return!X(a)&&a>i?(e.$setValidity("max",!1),q):(e.$setValidity("max",!0),a)};e.$parsers.push(d);e.$formatters.push(d)}e.$formatters.push(function(a){return X(a)||Ra(a)?(e.$setValidity("number",!0),a):(e.$setValidity("number",!1),q)})},url:function(a,c,d,e,g,h){Pa(a,c,d,e,g,h);a=function(a){return X(a)||qd.test(a)?(e.$setValidity("url",!0),a):(e.$setValidity("url",!1),q)};e.$formatters.push(a);e.$parsers.push(a)},email:function(a,\nc,d,e,g,h){Pa(a,c,d,e,g,h);a=function(a){return X(a)||rd.test(a)?(e.$setValidity("email",!0),a):(e.$setValidity("email",!1),q)};e.$formatters.push(a);e.$parsers.push(a)},radio:function(a,c,d,e){u(d.name)&&c.attr("name",xa());c.bind("click",function(){c[0].checked&&a.$apply(function(){e.$setViewValue(d.value)})});e.$render=function(){c[0].checked=d.value==e.$viewValue};d.$observe("value",e.$render)},checkbox:function(a,c,d,e){var g=d.ngTrueValue,h=d.ngFalseValue;B(g)||(g=!0);B(h)||(h=!1);c.bind("click",\nfunction(){a.$apply(function(){e.$setViewValue(c[0].checked)})});e.$render=function(){c[0].checked=e.$viewValue};e.$formatters.push(function(a){return a===g});e.$parsers.push(function(a){return a?g:h})},hidden:s,button:s,submit:s,reset:s},ec=["$browser","$sniffer",function(a,c){return{restrict:"E",require:"?ngModel",link:function(d,e,g,h){h&&(dc[y(g.type)]||dc.text)(d,e,g,h,c,a)}}}],Ma="ng-valid",La="ng-invalid",Oa="ng-pristine",ac="ng-dirty",td=["$scope","$exceptionHandler","$attrs","$element","$parse",\nfunction(a,c,d,e,g){function h(a,c){c=c?"-"+ab(c,"-"):"";e.removeClass((a?La:Ma)+c).addClass((a?Ma:La)+c)}this.$modelValue=this.$viewValue=Number.NaN;this.$parsers=[];this.$formatters=[];this.$viewChangeListeners=[];this.$pristine=!0;this.$dirty=!1;this.$valid=!0;this.$invalid=!1;this.$name=d.name;var f=g(d.ngModel),i=f.assign;if(!i)throw Error(Gb+d.ngModel+" ("+qa(e)+")");this.$render=s;var j=e.inheritedData("$formController")||Na,k=0,l=this.$error={};e.addClass(Oa);h(!0);this.$setValidity=function(a,\nc){if(l[a]!==!c){if(c){if(l[a]&&k--,!k)h(!0),this.$valid=!0,this.$invalid=!1}else h(!1),this.$invalid=!0,this.$valid=!1,k++;l[a]=!c;h(c,a);j.$setValidity(a,c,this)}};this.$setViewValue=function(d){this.$viewValue=d;if(this.$pristine)this.$dirty=!0,this.$pristine=!1,e.removeClass(Oa).addClass(ac),j.$setDirty();m(this.$parsers,function(a){d=a(d)});if(this.$modelValue!==d)this.$modelValue=d,i(a,d),m(this.$viewChangeListeners,function(a){try{a()}catch(d){c(d)}})};var n=this;a.$watch(function(){var c=\nf(a);if(n.$modelValue!==c){var d=n.$formatters,e=d.length;for(n.$modelValue=c;e--;)c=d[e](c);if(n.$viewValue!==c)n.$viewValue=c,n.$render()}})}],ud=function(){return{require:["ngModel","^?form"],controller:td,link:function(a,c,d,e){var g=e[0],h=e[1]||Na;h.$addControl(g);c.bind("$destroy",function(){h.$removeControl(g)})}}},vd=I({require:"ngModel",link:function(a,c,d,e){e.$viewChangeListeners.push(function(){a.$eval(d.ngChange)})}}),fc=function(){return{require:"?ngModel",link:function(a,c,d,e){if(e){d.required=\n!0;var g=function(a){if(d.required&&(X(a)||a===!1))e.$setValidity("required",!1);else return e.$setValidity("required",!0),a};e.$formatters.push(g);e.$parsers.unshift(g);d.$observe("required",function(){g(e.$viewValue)})}}}},wd=function(){return{require:"ngModel",link:function(a,c,d,e){var g=(a=/\\/(.*)\\//.exec(d.ngList))&&RegExp(a[1])||d.ngList||",";e.$parsers.push(function(a){var c=[];a&&m(a.split(g),function(a){a&&c.push(S(a))});return c});e.$formatters.push(function(a){return E(a)?a.join(", "):\nq})}}},xd=/^(true|false|\\d+)$/,yd=function(){return{priority:100,compile:function(a,c){return xd.test(c.ngValue)?function(a,c,g){g.$set("value",a.$eval(g.ngValue))}:function(a,c,g){a.$watch(g.ngValue,function(a){g.$set("value",a)})}}}},zd=W(function(a,c,d){c.addClass("ng-binding").data("$binding",d.ngBind);a.$watch(d.ngBind,function(a){c.text(a==q?"":a)})}),Ad=["$interpolate",function(a){return function(c,d,e){c=a(d.attr(e.$attr.ngBindTemplate));d.addClass("ng-binding").data("$binding",c);e.$observe("ngBindTemplate",\nfunction(a){d.text(a)})}}],Bd=[function(){return function(a,c,d){c.addClass("ng-binding").data("$binding",d.ngBindHtmlUnsafe);a.$watch(d.ngBindHtmlUnsafe,function(a){c.html(a||"")})}}],Cd=lb("",!0),Dd=lb("Odd",0),Ed=lb("Even",1),Fd=W({compile:function(a,c){c.$set("ngCloak",q);a.removeClass("ng-cloak")}}),Gd=[function(){return{scope:!0,controller:"@"}}],Hd=["$sniffer",function(a){return{priority:1E3,compile:function(){a.csp=!0}}}],gc={};m("click dblclick mousedown mouseup mouseover mouseout mousemove mouseenter mouseleave submit".split(" "),\nfunction(a){var c=ca("ng-"+a);gc[c]=["$parse",function(d){return function(e,g,h){var f=d(h[c]);g.bind(y(a),function(a){e.$apply(function(){f(e,{$event:a})})})}}]});var Id=["$http","$templateCache","$anchorScroll","$compile",function(a,c,d,e){return{restrict:"ECA",terminal:!0,compile:function(g,h){var f=h.ngInclude||h.src,i=h.onload||"",j=h.autoscroll;return function(g,h){var n=0,o,p=function(){o&&(o.$destroy(),o=null);h.html("")};g.$watch(f,function(f){var m=++n;f?a.get(f,{cache:c}).success(function(a){m===\nn&&(o&&o.$destroy(),o=g.$new(),h.html(a),e(h.contents())(o),v(j)&&(!j||g.$eval(j))&&d(),o.$emit("$includeContentLoaded"),g.$eval(i))}).error(function(){m===n&&p()}):p()})}}}}],Jd=W({compile:function(){return{pre:function(a,c,d){a.$eval(d.ngInit)}}}}),Kd=W({terminal:!0,priority:1E3}),Ld=["$locale","$interpolate",function(a,c){var d=/{}/g;return{restrict:"EA",link:function(e,g,h){var f=h.count,i=g.attr(h.$attr.when),j=h.offset||0,k=e.$eval(i),l={},n=c.startSymbol(),o=c.endSymbol();m(k,function(a,e){l[e]=\nc(a.replace(d,n+f+"-"+j+o))});e.$watch(function(){var c=parseFloat(e.$eval(f));return isNaN(c)?"":(c in k||(c=a.pluralCat(c-j)),l[c](e,g,!0))},function(a){g.text(a)})}}}],Md=W({transclude:"element",priority:1E3,terminal:!0,compile:function(a,c,d){return function(a,c,h){var f=h.ngRepeat,h=f.match(/^\\s*(.+)\\s+in\\s+(.*)\\s*$/),i,j,k;if(!h)throw Error("Expected ngRepeat in form of \'_item_ in _collection_\' but got \'"+f+"\'.");f=h[1];i=h[2];h=f.match(/^(?:([\\$\\w]+)|\\(([\\$\\w]+)\\s*,\\s*([\\$\\w]+)\\))$/);if(!h)throw Error("\'item\' in \'item in collection\' should be identifier or (key, value) but got \'"+\nf+"\'.");j=h[3]||h[1];k=h[2];var l=new hb;a.$watch(function(a){var e,f,h=a.$eval(i),m=c,q=new hb,u,A,w,v,C,s;if(E(h))C=h||[];else{C=[];for(w in h)h.hasOwnProperty(w)&&w.charAt(0)!="$"&&C.push(w);C.sort()}u=C.length-1;e=0;for(f=C.length;e<f;e++){w=h===C?e:C[e];v=h[w];if(s=l.shift(v)){A=s.scope;q.push(v,s);if(e!==s.index)s.index=e,m.after(s.element);m=s.element}else A=a.$new();A[j]=v;k&&(A[k]=w);A.$index=e;A.$first=e===0;A.$last=e===u;A.$middle=!(A.$first||A.$last);s||d(A,function(a){m.after(a);s={scope:A,\nelement:m=a,index:e};q.push(v,s)})}for(w in l)if(l.hasOwnProperty(w))for(C=l[w];C.length;)v=C.pop(),v.element.remove(),v.scope.$destroy();l=q})}}}),Nd=W(function(a,c,d){a.$watch(d.ngShow,function(a){c.css("display",Wa(a)?"":"none")})}),Od=W(function(a,c,d){a.$watch(d.ngHide,function(a){c.css("display",Wa(a)?"none":"")})}),Pd=W(function(a,c,d){a.$watch(d.ngStyle,function(a,d){d&&a!==d&&m(d,function(a,d){c.css(d,"")});a&&c.css(a)},!0)}),Qd=I({restrict:"EA",require:"ngSwitch",controller:["$scope",function(){this.cases=\n{}}],link:function(a,c,d,e){var g,h,f;a.$watch(d.ngSwitch||d.on,function(i){h&&(f.$destroy(),h.remove(),h=f=null);if(g=e.cases["!"+i]||e.cases["?"])a.$eval(d.change),f=a.$new(),g(f,function(a){h=a;c.append(a)})})}}),Rd=W({transclude:"element",priority:500,require:"^ngSwitch",compile:function(a,c,d){return function(a,g,h,f){f.cases["!"+c.ngSwitchWhen]=d}}}),Sd=W({transclude:"element",priority:500,require:"^ngSwitch",compile:function(a,c,d){return function(a,c,h,f){f.cases["?"]=d}}}),Td=W({controller:["$transclude",\n"$element",function(a,c){a(function(a){c.append(a)})}]}),Ud=["$http","$templateCache","$route","$anchorScroll","$compile","$controller",function(a,c,d,e,g,h){return{restrict:"ECA",terminal:!0,link:function(a,c,j){function k(){var j=d.current&&d.current.locals,k=j&&j.$template;if(k){c.html(k);l&&(l.$destroy(),l=null);var k=g(c.contents()),m=d.current;l=m.scope=a.$new();if(m.controller)j.$scope=l,j=h(m.controller,j),c.children().data("$ngControllerController",j);k(l);l.$emit("$viewContentLoaded");l.$eval(n);\ne()}else c.html(""),l&&(l.$destroy(),l=null)}var l,n=j.onload||"";a.$on("$routeChangeSuccess",k);k()}}}],Vd=["$templateCache",function(a){return{restrict:"E",terminal:!0,compile:function(c,d){d.type=="text/ng-template"&&a.put(d.id,c[0].text)}}}],Wd=I({terminal:!0}),Xd=["$compile","$parse",function(a,c){var d=/^\\s*(.*?)(?:\\s+as\\s+(.*?))?(?:\\s+group\\s+by\\s+(.*))?\\s+for\\s+(?:([\\$\\w][\\$\\w\\d]*)|(?:\\(\\s*([\\$\\w][\\$\\w\\d]*)\\s*,\\s*([\\$\\w][\\$\\w\\d]*)\\s*\\)))\\s+in\\s+(.*)$/,e={$setViewValue:s};return{restrict:"E",\nrequire:["select","?ngModel"],controller:["$element","$scope","$attrs",function(a,c,d){var i=this,j={},k=e,l;i.databound=d.ngModel;i.init=function(a,c,d){k=a;l=d};i.addOption=function(c){j[c]=!0;k.$viewValue==c&&(a.val(c),l.parent()&&l.remove())};i.removeOption=function(a){this.hasOption(a)&&(delete j[a],k.$viewValue==a&&this.renderUnknownOption(a))};i.renderUnknownOption=function(c){c="? "+fa(c)+" ?";l.val(c);a.prepend(l);a.val(c);l.prop("selected",!0)};i.hasOption=function(a){return j.hasOwnProperty(a)};\nc.$on("$destroy",function(){i.renderUnknownOption=s})}],link:function(e,h,f,i){function j(a,c,d,e){d.$render=function(){var a=d.$viewValue;e.hasOption(a)?(y.parent()&&y.remove(),c.val(a),a===""&&x.prop("selected",!0)):u(a)&&x?c.val(""):e.renderUnknownOption(a)};c.bind("change",function(){a.$apply(function(){y.parent()&&y.remove();d.$setViewValue(c.val())})})}function k(a,c,d){var e;d.$render=function(){var a=new Fa(d.$viewValue);m(c.find("option"),function(c){c.selected=v(a.get(c.value))})};a.$watch(function(){ea(e,\nd.$viewValue)||(e=U(d.$viewValue),d.$render())});c.bind("change",function(){a.$apply(function(){var a=[];m(c.find("option"),function(c){c.selected&&a.push(c.value)});d.$setViewValue(a)})})}function l(e,f,g){function h(){var a={"":[]},c=[""],d,i,s,v,u;s=g.$modelValue;v=o(e)||[];var x=l?nb(v):v,C,y,z;y={};u=!1;var B,E;p&&(u=new Fa(s));for(z=0;C=x.length,z<C;z++){y[k]=v[l?y[l]=x[z]:z];d=m(e,y)||"";if(!(i=a[d]))i=a[d]=[],c.push(d);p?d=u.remove(n(e,y))!=q:(d=s===n(e,y),u=u||d);B=j(e,y);B=B===q?"":B;i.push({id:l?\nx[z]:z,label:B,selected:d})}p||(r||s===null?a[""].unshift({id:"",label:"",selected:!u}):u||a[""].unshift({id:"?",label:"",selected:!0}));y=0;for(x=c.length;y<x;y++){d=c[y];i=a[d];if(w.length<=y)s={element:A.clone().attr("label",d),label:i.label},v=[s],w.push(v),f.append(s.element);else if(v=w[y],s=v[0],s.label!=d)s.element.attr("label",s.label=d);B=null;z=0;for(C=i.length;z<C;z++)if(d=i[z],u=v[z+1]){B=u.element;if(u.label!==d.label)B.text(u.label=d.label);if(u.id!==d.id)B.val(u.id=d.id);if(B[0].selected!==\nd.selected)B.prop("selected",u.selected=d.selected)}else d.id===""&&r?E=r:(E=D.clone()).val(d.id).attr("selected",d.selected).text(d.label),v.push({element:E,label:d.label,id:d.id,selected:d.selected}),B?B.after(E):s.element.append(E),B=E;for(z++;v.length>z;)v.pop().element.remove()}for(;w.length>y;)w.pop()[0].element.remove()}var i;if(!(i=s.match(d)))throw Error("Expected ngOptions in form of \'_select_ (as _label_)? for (_key_,)?_value_ in _collection_\' but got \'"+s+"\'.");var j=c(i[2]||i[1]),k=i[4]||\ni[6],l=i[5],m=c(i[3]||""),n=c(i[2]?i[1]:k),o=c(i[7]),w=[[{element:f,label:""}]];r&&(a(r)(e),r.removeClass("ng-scope"),r.remove());f.html("");f.bind("change",function(){e.$apply(function(){var a,c=o(e)||[],d={},h,i,j,m,r,s;if(p){i=[];m=0;for(s=w.length;m<s;m++){a=w[m];j=1;for(r=a.length;j<r;j++)if((h=a[j].element)[0].selected)h=h.val(),l&&(d[l]=h),d[k]=c[h],i.push(n(e,d))}}else h=f.val(),h=="?"?i=q:h==""?i=null:(d[k]=c[h],l&&(d[l]=h),i=n(e,d));g.$setViewValue(i)})});g.$render=h;e.$watch(h)}if(i[1]){for(var n=\ni[0],o=i[1],p=f.multiple,s=f.ngOptions,r=!1,x,D=w(T.createElement("option")),A=w(T.createElement("optgroup")),y=D.clone(),i=0,B=h.children(),C=B.length;i<C;i++)if(B[i].value==""){x=r=B.eq(i);break}n.init(o,r,y);if(p&&(f.required||f.ngRequired)){var E=function(a){o.$setValidity("required",!f.required||a&&a.length);return a};o.$parsers.push(E);o.$formatters.unshift(E);f.$observe("required",function(){E(o.$viewValue)})}s?l(e,h,o):p?k(e,h,o):j(e,h,o,n)}}}}],Yd=["$interpolate",function(a){var c={addOption:s,\nremoveOption:s};return{restrict:"E",priority:100,compile:function(d,e){if(u(e.value)){var g=a(d.text(),!0);g||e.$set("value",d.text())}return function(a,d,e){var j=d.parent(),k=j.data("$selectController")||j.parent().data("$selectController");k&&k.databound?d.prop("selected",!1):k=c;g?a.$watch(g,function(a,c){e.$set("value",a);a!==c&&k.removeOption(c);k.addOption(a)}):k.addOption(e.value);d.bind("$destroy",function(){k.removeOption(e.value)})}}}}],Zd=I({restrict:"E",terminal:!0});(aa=P.jQuery)?(w=\naa,D(aa.fn,{scope:va.scope,controller:va.controller,injector:va.injector,inheritedData:va.inheritedData}),db("remove",!0,!0,!1),db("empty",!1,!1,!1),db("html",!1,!1,!0)):w=L;$a.element=w;(function(a){D(a,{bootstrap:tb,copy:U,extend:D,equals:ea,element:w,forEach:m,injector:ub,noop:s,bind:Va,toJson:ba,fromJson:qb,identity:na,isUndefined:u,isDefined:v,isString:B,isFunction:H,isObject:M,isNumber:Ra,isElement:ic,isArray:E,version:md,isDate:oa,lowercase:y,uppercase:la,callbacks:{counter:0}});ta=nc(P);try{ta("ngLocale")}catch(c){ta("ngLocale",\n[]).provider("$locale",cd)}ta("ng",["ngLocale"],["$provide",function(a){a.provider("$compile",Fb).directive({a:nd,input:ec,textarea:ec,form:od,script:Vd,select:Xd,style:Zd,option:Yd,ngBind:zd,ngBindHtmlUnsafe:Bd,ngBindTemplate:Ad,ngClass:Cd,ngClassEven:Ed,ngClassOdd:Dd,ngCsp:Hd,ngCloak:Fd,ngController:Gd,ngForm:pd,ngHide:Od,ngInclude:Id,ngInit:Jd,ngNonBindable:Kd,ngPluralize:Ld,ngRepeat:Md,ngShow:Nd,ngStyle:Pd,ngSwitch:Qd,ngSwitchWhen:Rd,ngSwitchDefault:Sd,ngOptions:Wd,ngView:Ud,ngTransclude:Td,ngModel:ud,\nngList:wd,ngChange:vd,required:fc,ngRequired:fc,ngValue:yd}).directive(mb).directive(gc);a.provider({$anchorScroll:wc,$browser:zc,$cacheFactory:Ac,$controller:Fc,$document:Gc,$exceptionHandler:Hc,$filter:Tb,$interpolate:Ic,$http:Zc,$httpBackend:$c,$location:Mc,$log:Nc,$parse:Rc,$route:Uc,$routeParams:Vc,$rootScope:Wc,$q:Sc,$sniffer:Xc,$templateCache:Bc,$timeout:dd,$window:Yc})}])})($a);w(T).ready(function(){lc(T,tb)})})(window,document);angular.element(document).find("head").append(\'<style type="text/css">@charset "UTF-8";[ng\\\\:cloak],[ng-cloak],[data-ng-cloak],[x-ng-cloak],.ng-cloak,.x-ng-cloak{display:none !important;}ng\\\\:form{display:block;}</style>\');\n';
},function(e,t,n){n(3)(n(36))},function(e,t){e.exports='/*\r\n *  Base64 encode / decode\r\n *  http://www.webtoolkit.info/\r\n */\r\n \r\nvar Base64 = {\r\n \r\n  // private property\r\n  _keyStr : "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",\r\n  \r\n  is_encoded: function(input) {\r\n   return String(input).match(/^([A-Za-z0-9+/]{4})*([A-Za-z0-9+/]{4}|[A-Za-z0-9+/]{3}=|[A-Za-z0-9+/]{2}==)$/g) !== null;    \r\n  },\r\n \r\n  // public method for encoding\r\n  encode : function (input) {\r\n    var output = "";\r\n    var chr1, chr2, chr3, enc1, enc2, enc3, enc4;\r\n    var i = 0;\r\n \r\n    input = Base64._utf8_encode(input);\r\n \r\n    while (i < input.length) {\r\n \r\n      chr1 = input.charCodeAt(i++);\r\n      chr2 = input.charCodeAt(i++);\r\n      chr3 = input.charCodeAt(i++);\r\n \r\n      enc1 = chr1 >> 2;\r\n      enc2 = ((chr1 & 3) << 4) | (chr2 >> 4);\r\n      enc3 = ((chr2 & 15) << 2) | (chr3 >> 6);\r\n      enc4 = chr3 & 63;\r\n \r\n      if (isNaN(chr2)) {\r\n        enc3 = enc4 = 64;\r\n      } else if (isNaN(chr3)) {\r\n        enc4 = 64;\r\n      }\r\n \r\n      output = output +\r\n      this._keyStr.charAt(enc1) + this._keyStr.charAt(enc2) +\r\n      this._keyStr.charAt(enc3) + this._keyStr.charAt(enc4);\r\n \r\n    }\r\n \r\n    return output;\r\n  },\r\n \r\n  // public method for decoding\r\n  decode : function (input) {\r\n    var output = "";\r\n    var chr1, chr2, chr3;\r\n    var enc1, enc2, enc3, enc4;\r\n    var i = 0;\r\n \r\n    input = input.replace(/[^A-Za-z0-9\\+\\/\\=]/g, "");\r\n \r\n    while (i < input.length) {\r\n \r\n      enc1 = this._keyStr.indexOf(input.charAt(i++));\r\n      enc2 = this._keyStr.indexOf(input.charAt(i++));\r\n      enc3 = this._keyStr.indexOf(input.charAt(i++));\r\n      enc4 = this._keyStr.indexOf(input.charAt(i++));\r\n \r\n      chr1 = (enc1 << 2) | (enc2 >> 4);\r\n      chr2 = ((enc2 & 15) << 4) | (enc3 >> 2);\r\n      chr3 = ((enc3 & 3) << 6) | enc4;\r\n \r\n      output = output + String.fromCharCode(chr1);\r\n \r\n      if (enc3 != 64) {\r\n        output = output + String.fromCharCode(chr2);\r\n      }\r\n      if (enc4 != 64) {\r\n        output = output + String.fromCharCode(chr3);\r\n      }\r\n \r\n    }\r\n \r\n    output = Base64._utf8_decode(output);\r\n \r\n    return output;\r\n \r\n  },\r\n \r\n  // private method for UTF-8 encoding\r\n  _utf8_encode : function (string) {\r\n    string = string.replace(/\\r\\n/g,"\\n");\r\n    var utftext = "";\r\n \r\n    for (var n = 0; n < string.length; n++) {\r\n \r\n      var c = string.charCodeAt(n);\r\n \r\n      if (c < 128) {\r\n        utftext += String.fromCharCode(c);\r\n      }\r\n      else if((c > 127) && (c < 2048)) {\r\n        utftext += String.fromCharCode((c >> 6) | 192);\r\n        utftext += String.fromCharCode((c & 63) | 128);\r\n      }\r\n      else {\r\n        utftext += String.fromCharCode((c >> 12) | 224);\r\n        utftext += String.fromCharCode(((c >> 6) & 63) | 128);\r\n        utftext += String.fromCharCode((c & 63) | 128);\r\n      }\r\n \r\n    }\r\n \r\n    return utftext;\r\n  },\r\n \r\n  // private method for UTF-8 decoding\r\n  _utf8_decode : function (utftext) {\r\n    var string = "";\r\n    var i = 0;\r\n    var c = c1 = c2 = 0;\r\n \r\n    while ( i < utftext.length ) {\r\n \r\n      c = utftext.charCodeAt(i);\r\n \r\n      if (c < 128) {\r\n        string += String.fromCharCode(c);\r\n        i++;\r\n      }\r\n      else if((c > 191) && (c < 224)) {\r\n        c2 = utftext.charCodeAt(i+1);\r\n        string += String.fromCharCode(((c & 31) << 6) | (c2 & 63));\r\n        i += 2;\r\n      }\r\n      else {\r\n        c2 = utftext.charCodeAt(i+1);\r\n        c3 = utftext.charCodeAt(i+2);\r\n        string += String.fromCharCode(((c & 15) << 12) | ((c2 & 63) << 6) | (c3 & 63));\r\n        i += 3;\r\n      }\r\n \r\n    }\r\n \r\n    return string;\r\n  }\r\n \r\n}'},function(e,t,n){n(3)(n(38))},function(e,t){e.exports="\n/*\nLightbox v2.51\nby Lokesh Dhakar - http://www.lokeshdhakar.com\n\nFor more information, visit:\nhttp://lokeshdhakar.com/projects/lightbox2/\n\nLicensed under the Creative Commons Attribution 2.5 License - http://creativecommons.org/licenses/by/2.5/\n- free for use in both personal and commercial projects\n- attribution requires leaving author name, author link, and the license info intact\n\nThanks\n- Scott Upton(uptonic.com), Peter-Paul Koch(quirksmode.com), and Thomas Fuchs(mir.aculo.us) for ideas, libs, and snippets.\n- Artemy Tregubenko (arty.name) for cleanup and help in updating to latest proto-aculous in v2.05.\n\n\nTable of Contents\n=================\nLightboxOptions\n\nLightbox\n- constructor\n- init\n- enable\n- build\n- start\n- changeImage\n- sizeContainer\n- showImage\n- updateNav\n- updateDetails\n- preloadNeigbhoringImages\n- enableKeyboardNav\n- disableKeyboardNav\n- keyboardAction\n- end\n\noptions = new LightboxOptions\nlightbox = new Lightbox options\n\nPatch Log\n=========\n- Updated to work with jQuery 1.10.2 - R.U.\n-- https://api.jquery.com/after/\n-- the .after() method was updated to not work with elements without a root so the original build function was not working\n-- updated build to first append the overlay div to body and then append the lightbox div after the overlay\n*/\n\n(function() {\n  var $, Lightbox, LightboxOptions;\n\n  $ = jQuery;\n\n  LightboxOptions = (function() {\n\n    function LightboxOptions() {\n      this.fileLoadingImage = '/sites/all/themes/schoology_theme/images/ajax-loader.gif';\n      this.fileCloseImage = '/sites/all/misc/lightbox-2.51/images/close.png';\n      this.resizeDuration = 700;\n      this.fadeDuration = 500;\n      this.labelImage = \"Image\";\n      this.labelOf = \"of\";\n      this.preloadInPlace = true;\n    }\n\n    return LightboxOptions;\n\n  })();\n\n  Lightbox = (function() {\n\n    function Lightbox(options) {\n      this.options = options;\n      this.album = [];\n      this.currentImageIndex = void 0;\n      this.init();\n    }\n\n    Lightbox.prototype.init = function() {\n      this.enable();\n      return this.build();\n    };\n\n    Lightbox.prototype.enable = function() {\n      var _this = this;\n      return $('body').on('click', 'a[rel^=lightbox], area[rel^=lightbox]', function(e) {\n        _this.start($(e.currentTarget));\n        return false;\n      });\n    };\n\n    Lightbox.prototype.build = function() {\n      var $lightbox,\n        _this = this;\n      \n      $(\"<div>\", {\n        id: 'lightboxOverlay'\n      }).appendTo($('body')).after($('<div/>', {\n        id: 'lightbox'\n      }).append($('<div/>', {\n        \"class\": 'lb-outerContainer'\n      }).append($('<div/>', {\n        \"class\": 'lb-container'\n      }).append($('<img/>', {\n        \"class\": 'lb-image',\n        \"alt\": ''\n      }), $('<div/>', {\n        \"class\": 'lb-nav'\n      }).append($('<a/>', {\n        \"class\": 'lb-prev'\n      }), $('<a/>', {\n        \"class\": 'lb-next'\n      })), $('<div/>', {\n        \"class\": 'lb-loader'\n      }).append($('<a/>', {\n        \"class\": 'lb-cancel'\n      }).append($('<img/>', {\n        src: this.options.fileLoadingImage,\n        alt: 'Loading'\n      }))))), $('<div/>', {\n        \"class\": 'lb-dataContainer'\n      }).append($('<div/>', {\n        \"class\": 'lb-data'\n      }).append($('<div/>', {\n        \"class\": 'lb-details'\n      }).append($('<span/>', {\n        \"class\": 'lb-caption'\n      }), $('<span/>', {\n        \"class\": 'lb-number'\n      })), $('<div/>', {\n        \"class\": 'lb-closeContainer'\n      }).append($('<a/>', {\n        \"class\": 'lb-close'\n      }))))));\n      $('#lightboxOverlay').hide().on('click', function(e) {\n        _this.end();\n        return false;\n      });\n      $lightbox = $('#lightbox');\n      $lightbox.hide().on('click', function(e) {\n        if ($(e.target).attr('id') === 'lightbox') _this.end();\n        return false;\n      });\n      $lightbox.find('.lb-outerContainer').on('click', function(e) {\n        if ($(e.target).attr('id') === 'lightbox') _this.end();\n        return false;\n      });\n      $lightbox.find('.lb-prev').on('click', function(e) {\n        _this.changeImage(_this.currentImageIndex - 1);\n        return false;\n      });\n      $lightbox.find('.lb-next').on('click', function(e) {\n        _this.changeImage(_this.currentImageIndex + 1);\n        return false;\n      });\n      $lightbox.find('.lb-loader, .lb-close').on('click', function(e) {\n        _this.end();\n        return false;\n      });\n    };\n\n    Lightbox.prototype.start = function($link) {\n      var $lightbox, $window, a, i, imageNumber, left, top, _len, _ref;\n      $(window).on(\"resize\", this.sizeOverlay);\n      $('select, object, embed').css({\n        visibility: \"hidden\"\n      });\n      $('#lightboxOverlay').width($(document).width()).height($(document).height()).fadeIn(this.options.fadeDuration);\n      this.album = [];\n      imageNumber = 0;\n      if ($link.attr('rel') === 'lightbox') {\n        this.album.push({\n          link: $link.attr('href'),\n          title: $link.attr('title'),\n          caption_href: $link.attr('caption_href')\n        });\n      } else {\n        _ref = $($link.prop(\"tagName\") + '[rel=\"' + $link.attr('rel') + '\"]');\n        for (i = 0, _len = _ref.length; i < _len; i++) {\n          a = _ref[i];\n          this.album.push({\n            link: $(a).attr('href'),\n            title: $(a).attr('title'),\n            caption_href: $(a).attr('caption_href')\n          });\n          if ($(a).attr('href') === $link.attr('href')) imageNumber = i;\n        }\n      }\n      $window = $(window);\n      top = $window.scrollTop() + $window.height() / 10;\n      left = $window.scrollLeft();\n      $lightbox = $('#lightbox');\n      $lightbox.css({\n        top: top + 'px',\n        left: left + 'px'\n      }).fadeIn(this.options.fadeDuration);\n      this.changeImage(imageNumber);\n    };\n\n    Lightbox.prototype.changeImage = function(imageNumber) {\n      var $image, $lightbox, preloader,\n        _this = this;\n      this.disableKeyboardNav();\n      $lightbox = $('#lightbox');\n      $lightbox.find('.lb-loader').show();\n      $image = $lightbox.find('.lb-image');\n      this.sizeOverlay();\n      $('#lightboxOverlay').fadeIn(this.options.fadeDuration);\n      $('.loader').fadeIn('slow');\n      $lightbox.find('.lb-image, .lb-nav, .lb-prev, .lb-next, .lb-dataContainer, .lb-numbers, .lb-caption').hide();\n      $lightbox.find('.lb-outerContainer').addClass('animating');\n      if(this.options.preloadInPlace){\n        // preloading the image in place to avoid multiple requests if it takes too long\n        $image.hide();\n        $image.attr('src', _this.album[imageNumber].link);\n        if(_this.newHeight){\n          _this.sizeContainer(800, _this.newHeight);\n        }\n        else {\n          $image.unbind('load.jqlightbox').bind('load.jqlightbox', function(){\n            // don't copy ratio if the image is too short\n            var newHeight = Math.min($image.height(), $image.height() / ($image.width()/800));\n            _this.sizeContainer(800, newHeight);\n            _this.newHeight = newHeight;\n          });\n        }\n      }\n      else{\n        // using a javascript object to preload the image\n        preloader = new Image;\n        preloader.onload = function() {\n          $image.attr('src', _this.album[imageNumber].link);\n          $image.width = preloader.width;\n          $image.height = preloader.height;\n          _this.sizeContainer(800, preloader.height / (preloader.width/800));\n        };\n        preloader.src = this.album[imageNumber].link;\n      }\n      this.currentImageIndex = imageNumber;\n    };\n\n    Lightbox.prototype.sizeOverlay = function() {\n      return $('#lightboxOverlay').width($(document).width()).height($(document).height());\n    };\n\n    Lightbox.prototype.sizeContainer = function(imageWidth, imageHeight) {\n      var $container, $lightbox, $outerContainer, containerBottomPadding, containerLeftPadding, containerRightPadding, containerTopPadding, newHeight, newWidth, oldHeight, oldWidth,\n        _this = this;\n      $lightbox = $('#lightbox');\n      $outerContainer = $lightbox.find('.lb-outerContainer');\n      oldWidth = $outerContainer.outerWidth();\n      oldHeight = $outerContainer.outerHeight();\n      $container = $lightbox.find('.lb-container');\n      containerTopPadding = parseInt($container.css('padding-top'), 10);\n      containerRightPadding = parseInt($container.css('padding-right'), 10);\n      containerBottomPadding = parseInt($container.css('padding-bottom'), 10);\n      containerLeftPadding = parseInt($container.css('padding-left'), 10);\n      newWidth = imageWidth + containerLeftPadding + containerRightPadding;\n      newHeight = imageHeight + containerTopPadding + containerBottomPadding;\n      if (newWidth !== oldWidth && newHeight !== oldHeight) {\n        $outerContainer.animate({\n          width: newWidth,\n          height: newHeight\n        }, this.options.resizeDuration, 'swing');\n      } else if (newWidth !== oldWidth) {\n        $outerContainer.animate({\n          width: newWidth\n        }, this.options.resizeDuration, 'swing');\n      } else if (newHeight !== oldHeight) {\n        $outerContainer.animate({\n          height: newHeight\n        }, this.options.resizeDuration, 'swing');\n      }\n      setTimeout(function() {\n        $lightbox.find('.lb-dataContainer').width(newWidth);\n        $lightbox.find('.lb-prevLink').height(newHeight);\n        $lightbox.find('.lb-nextLink').height(newHeight);\n        _this.showImage();\n      }, this.options.resizeDuration);\n    };\n\n    Lightbox.prototype.showImage = function() {\n      var $lightbox;\n      $lightbox = $('#lightbox');\n      $lightbox.find('.lb-loader').hide();\n      $lightbox.find('.lb-image').fadeIn('slow');\n      this.updateNav();\n      this.updateDetails();\n      this.preloadNeighboringImages();\n      this.disableKeyboardNav();\n      this.enableKeyboardNav();\n    };\n\n    Lightbox.prototype.updateNav = function() {\n      var $lightbox;\n      $lightbox = $('#lightbox');\n      $lightbox.find('.lb-nav').show();\n      if (this.currentImageIndex > 0) $lightbox.find('.lb-prev').show();\n      if (this.currentImageIndex < this.album.length - 1) {\n        $lightbox.find('.lb-next').show();\n      }\n    };\n\n    Lightbox.prototype.updateDetails = function() {\n      var $lightbox,\n        _this = this;\n      $lightbox = $('#lightbox');\n      if (typeof this.album[this.currentImageIndex].title !== 'undefined' && this.album[this.currentImageIndex].title !== \"\") {\n        var caption_title = String(this.album[this.currentImageIndex].title);\n        var caption = $('<span>' + caption_title + '</span>' );\n        var caption_href = String(this.album[this.currentImageIndex].caption_href);\n        if( caption_href != '' ){\n          caption = $('<span class=\"clickable\" href=\"'+caption_href+'\">'+caption_title+'</span>');\n          caption.bind('click',function(){\n            _this.end();\n            window.location.href = $(this).attr('href');\n          });\n        }\n        $lightbox.find('.lb-caption').empty().append( caption ).fadeIn('fast');\n      }\n      if (this.album.length > 1) {\n        $lightbox.find('.lb-number').html(this.options.labelImage + ' ' + (this.currentImageIndex + 1) + ' ' + this.options.labelOf + '  ' + this.album.length).fadeIn('fast');\n      } else {\n        $lightbox.find('.lb-number').hide();\n      }\n      $lightbox.find('.lb-outerContainer').removeClass('animating');\n      $lightbox.find('.lb-dataContainer').fadeIn(this.resizeDuration, function() {\n        return _this.sizeOverlay();\n      });\n    };\n\n    Lightbox.prototype.preloadNeighboringImages = function() {\n      var preloadNext, preloadPrev;\n      if (this.album.length > this.currentImageIndex + 1) {\n        preloadNext = new Image;\n        preloadNext.src = this.album[this.currentImageIndex + 1].link;\n      }\n      if (this.currentImageIndex > 0) {\n        preloadPrev = new Image;\n        preloadPrev.src = this.album[this.currentImageIndex - 1].link;\n      }\n    };\n\n    Lightbox.prototype.enableKeyboardNav = function() {\n      $(document).on('keyup.keyboard', $.proxy(this.keyboardAction, this));\n    };\n\n    Lightbox.prototype.disableKeyboardNav = function() {\n      $(document).off('.keyboard');\n    };\n\n    Lightbox.prototype.keyboardAction = function(event) {\n      var KEYCODE_ESC, KEYCODE_LEFTARROW, KEYCODE_RIGHTARROW, key, keycode;\n      KEYCODE_ESC = 27;\n      KEYCODE_LEFTARROW = 37;\n      KEYCODE_RIGHTARROW = 39;\n      keycode = event.keyCode;\n      key = String.fromCharCode(keycode).toLowerCase();\n      if (keycode === KEYCODE_ESC || key.match(/x|o|c/)) {\n        this.end();\n      } else if (key === 'p' || keycode === KEYCODE_LEFTARROW) {\n        if (this.currentImageIndex !== 0) {\n          this.changeImage(this.currentImageIndex - 1);\n        }\n      } else if (key === 'n' || keycode === KEYCODE_RIGHTARROW) {\n        if (this.currentImageIndex !== this.album.length - 1) {\n          this.changeImage(this.currentImageIndex + 1);\n        }\n      }\n    };\n\n    Lightbox.prototype.end = function() {\n      this.disableKeyboardNav();\n      $(window).off(\"resize\", this.sizeOverlay);\n      $('#lightbox').fadeOut(this.options.fadeDuration);\n      $('#lightboxOverlay').fadeOut(this.options.fadeDuration);\n      return $('select, object, embed').css({\n        visibility: \"visible\"\n      });\n    };\n\n    return Lightbox;\n\n  })();\n\n  $(function() {\n    var lightbox, options;\n    options = new LightboxOptions;\n    return lightbox = new Lightbox(options);\n  });\n\n}).call(this);\n"},function(e,t,n){n(3)(n(40))},function(e,t){e.exports='/*\tSWFObject v2.2 <http://code.google.com/p/swfobject/> \n\tis released under the MIT License <http://www.opensource.org/licenses/mit-license.php> \n*/\nvar swfobject=function(){var D="undefined",r="object",S="Shockwave Flash",W="ShockwaveFlash.ShockwaveFlash",q="application/x-shockwave-flash",R="SWFObjectExprInst",x="onreadystatechange",O=window,j=document,t=navigator,T=false,U=[h],o=[],N=[],I=[],l,Q,E,B,J=false,a=false,n,G,m=true,M=function(){var aa=typeof j.getElementById!=D&&typeof j.getElementsByTagName!=D&&typeof j.createElement!=D,ah=t.userAgent.toLowerCase(),Y=t.platform.toLowerCase(),ae=Y?/win/.test(Y):/win/.test(ah),ac=Y?/mac/.test(Y):/mac/.test(ah),af=/webkit/.test(ah)?parseFloat(ah.replace(/^.*webkit\\/(\\d+(\\.\\d+)?).*$/,"$1")):false,X=!+"\\v1",ag=[0,0,0],ab=null;if(typeof t.plugins!=D&&typeof t.plugins[S]==r){ab=t.plugins[S].description;if(ab&&!(typeof t.mimeTypes!=D&&t.mimeTypes[q]&&!t.mimeTypes[q].enabledPlugin)){T=true;X=false;ab=ab.replace(/^.*\\s+(\\S+\\s+\\S+$)/,"$1");ag[0]=parseInt(ab.replace(/^(.*)\\..*$/,"$1"),10);ag[1]=parseInt(ab.replace(/^.*\\.(.*)\\s.*$/,"$1"),10);ag[2]=/[a-zA-Z]/.test(ab)?parseInt(ab.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0}}else{if(typeof O.ActiveXObject!=D){try{var ad=new ActiveXObject(W);if(ad){ab=ad.GetVariable("$version");if(ab){X=true;ab=ab.split(" ")[1].split(",");ag=[parseInt(ab[0],10),parseInt(ab[1],10),parseInt(ab[2],10)]}}}catch(Z){}}}return{w3:aa,pv:ag,wk:af,ie:X,win:ae,mac:ac}}(),k=function(){if(!M.w3){return}if((typeof j.readyState!=D&&j.readyState=="complete")||(typeof j.readyState==D&&(j.getElementsByTagName("body")[0]||j.body))){f()}if(!J){if(typeof j.addEventListener!=D){j.addEventListener("DOMContentLoaded",f,false)}if(M.ie&&M.win){j.attachEvent(x,function(){if(j.readyState=="complete"){j.detachEvent(x,arguments.callee);f()}});if(O==top){(function(){if(J){return}try{j.documentElement.doScroll("left")}catch(X){setTimeout(arguments.callee,0);return}f()})()}}if(M.wk){(function(){if(J){return}if(!/loaded|complete/.test(j.readyState)){setTimeout(arguments.callee,0);return}f()})()}s(f)}}();function f(){if(J){return}try{var Z=j.getElementsByTagName("body")[0].appendChild(C("span"));Z.parentNode.removeChild(Z)}catch(aa){return}J=true;var X=U.length;for(var Y=0;Y<X;Y++){U[Y]()}}function K(X){if(J){X()}else{U[U.length]=X}}function s(Y){if(typeof O.addEventListener!=D){O.addEventListener("load",Y,false)}else{if(typeof j.addEventListener!=D){j.addEventListener("load",Y,false)}else{if(typeof O.attachEvent!=D){i(O,"onload",Y)}else{if(typeof O.onload=="function"){var X=O.onload;O.onload=function(){X();Y()}}else{O.onload=Y}}}}}function h(){if(T){V()}else{H()}}function V(){var X=j.getElementsByTagName("body")[0];var aa=C(r);aa.setAttribute("type",q);var Z=X.appendChild(aa);if(Z){var Y=0;(function(){if(typeof Z.GetVariable!=D){var ab=Z.GetVariable("$version");if(ab){ab=ab.split(" ")[1].split(",");M.pv=[parseInt(ab[0],10),parseInt(ab[1],10),parseInt(ab[2],10)]}}else{if(Y<10){Y++;setTimeout(arguments.callee,10);return}}X.removeChild(aa);Z=null;H()})()}else{H()}}function H(){var ag=o.length;if(ag>0){for(var af=0;af<ag;af++){var Y=o[af].id;var ab=o[af].callbackFn;var aa={success:false,id:Y};if(M.pv[0]>0){var ae=c(Y);if(ae){if(F(o[af].swfVersion)&&!(M.wk&&M.wk<312)){w(Y,true);if(ab){aa.success=true;aa.ref=z(Y);ab(aa)}}else{if(o[af].expressInstall&&A()){var ai={};ai.data=o[af].expressInstall;ai.width=ae.getAttribute("width")||"0";ai.height=ae.getAttribute("height")||"0";if(ae.getAttribute("class")){ai.styleclass=ae.getAttribute("class")}if(ae.getAttribute("align")){ai.align=ae.getAttribute("align")}var ah={};var X=ae.getElementsByTagName("param");var ac=X.length;for(var ad=0;ad<ac;ad++){if(X[ad].getAttribute("name").toLowerCase()!="movie"){ah[X[ad].getAttribute("name")]=X[ad].getAttribute("value")}}P(ai,ah,Y,ab)}else{p(ae);if(ab){ab(aa)}}}}}else{w(Y,true);if(ab){var Z=z(Y);if(Z&&typeof Z.SetVariable!=D){aa.success=true;aa.ref=Z}ab(aa)}}}}}function z(aa){var X=null;var Y=c(aa);if(Y&&Y.nodeName=="OBJECT"){if(typeof Y.SetVariable!=D){X=Y}else{var Z=Y.getElementsByTagName(r)[0];if(Z){X=Z}}}return X}function A(){return !a&&F("6.0.65")&&(M.win||M.mac)&&!(M.wk&&M.wk<312)}function P(aa,ab,X,Z){a=true;E=Z||null;B={success:false,id:X};var ae=c(X);if(ae){if(ae.nodeName=="OBJECT"){l=g(ae);Q=null}else{l=ae;Q=X}aa.id=R;if(typeof aa.width==D||(!/%$/.test(aa.width)&&parseInt(aa.width,10)<310)){aa.width="310"}if(typeof aa.height==D||(!/%$/.test(aa.height)&&parseInt(aa.height,10)<137)){aa.height="137"}j.title=j.title.slice(0,47)+" - Flash Player Installation";var ad=M.ie&&M.win?"ActiveX":"PlugIn",ac="MMredirectURL="+O.location.toString().replace(/&/g,"%26")+"&MMplayerType="+ad+"&MMdoctitle="+j.title;if(typeof ab.flashvars!=D){ab.flashvars+="&"+ac}else{ab.flashvars=ac}if(M.ie&&M.win&&ae.readyState!=4){var Y=C("div");X+="SWFObjectNew";Y.setAttribute("id",X);ae.parentNode.insertBefore(Y,ae);ae.style.display="none";(function(){if(ae.readyState==4){ae.parentNode.removeChild(ae)}else{setTimeout(arguments.callee,10)}})()}u(aa,ab,X)}}function p(Y){if(M.ie&&M.win&&Y.readyState!=4){var X=C("div");Y.parentNode.insertBefore(X,Y);X.parentNode.replaceChild(g(Y),X);Y.style.display="none";(function(){if(Y.readyState==4){Y.parentNode.removeChild(Y)}else{setTimeout(arguments.callee,10)}})()}else{Y.parentNode.replaceChild(g(Y),Y)}}function g(ab){var aa=C("div");if(M.win&&M.ie){aa.innerHTML=ab.innerHTML}else{var Y=ab.getElementsByTagName(r)[0];if(Y){var ad=Y.childNodes;if(ad){var X=ad.length;for(var Z=0;Z<X;Z++){if(!(ad[Z].nodeType==1&&ad[Z].nodeName=="PARAM")&&!(ad[Z].nodeType==8)){aa.appendChild(ad[Z].cloneNode(true))}}}}}return aa}function u(ai,ag,Y){var X,aa=c(Y);if(M.wk&&M.wk<312){return X}if(aa){if(typeof ai.id==D){ai.id=Y}if(M.ie&&M.win){var ah="";for(var ae in ai){if(ai[ae]!=Object.prototype[ae]){if(ae.toLowerCase()=="data"){ag.movie=ai[ae]}else{if(ae.toLowerCase()=="styleclass"){ah+=\' class="\'+ai[ae]+\'"\'}else{if(ae.toLowerCase()!="classid"){ah+=" "+ae+\'="\'+ai[ae]+\'"\'}}}}}var af="";for(var ad in ag){if(ag[ad]!=Object.prototype[ad]){af+=\'<param name="\'+ad+\'" value="\'+ag[ad]+\'" />\'}}aa.outerHTML=\'<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"\'+ah+">"+af+"</object>";N[N.length]=ai.id;X=c(ai.id)}else{var Z=C(r);Z.setAttribute("type",q);for(var ac in ai){if(ai[ac]!=Object.prototype[ac]){if(ac.toLowerCase()=="styleclass"){Z.setAttribute("class",ai[ac])}else{if(ac.toLowerCase()!="classid"){Z.setAttribute(ac,ai[ac])}}}}for(var ab in ag){if(ag[ab]!=Object.prototype[ab]&&ab.toLowerCase()!="movie"){e(Z,ab,ag[ab])}}aa.parentNode.replaceChild(Z,aa);X=Z}}return X}function e(Z,X,Y){var aa=C("param");aa.setAttribute("name",X);aa.setAttribute("value",Y);Z.appendChild(aa)}function y(Y){var X=c(Y);if(X&&X.nodeName=="OBJECT"){if(M.ie&&M.win){X.style.display="none";(function(){if(X.readyState==4){b(Y)}else{setTimeout(arguments.callee,10)}})()}else{X.parentNode.removeChild(X)}}}function b(Z){var Y=c(Z);if(Y){for(var X in Y){if(typeof Y[X]=="function"){Y[X]=null}}Y.parentNode.removeChild(Y)}}function c(Z){var X=null;try{X=j.getElementById(Z)}catch(Y){}return X}function C(X){return j.createElement(X)}function i(Z,X,Y){Z.attachEvent(X,Y);I[I.length]=[Z,X,Y]}function F(Z){var Y=M.pv,X=Z.split(".");X[0]=parseInt(X[0],10);X[1]=parseInt(X[1],10)||0;X[2]=parseInt(X[2],10)||0;return(Y[0]>X[0]||(Y[0]==X[0]&&Y[1]>X[1])||(Y[0]==X[0]&&Y[1]==X[1]&&Y[2]>=X[2]))?true:false}function v(ac,Y,ad,ab){if(M.ie&&M.mac){return}var aa=j.getElementsByTagName("head")[0];if(!aa){return}var X=(ad&&typeof ad=="string")?ad:"screen";if(ab){n=null;G=null}if(!n||G!=X){var Z=C("style");Z.setAttribute("type","text/css");Z.setAttribute("media",X);n=aa.appendChild(Z);if(M.ie&&M.win&&typeof j.styleSheets!=D&&j.styleSheets.length>0){n=j.styleSheets[j.styleSheets.length-1]}G=X}if(M.ie&&M.win){if(n&&typeof n.addRule==r){n.addRule(ac,Y)}}else{if(n&&typeof j.createTextNode!=D){n.appendChild(j.createTextNode(ac+" {"+Y+"}"))}}}function w(Z,X){if(!m){return}var Y=X?"visible":"hidden";if(J&&c(Z)){c(Z).style.visibility=Y}else{v("#"+Z,"visibility:"+Y)}}function L(Y){var Z=/[\\\\\\"<>\\.;]/;var X=Z.exec(Y)!=null;return X&&typeof encodeURIComponent!=D?encodeURIComponent(Y):Y}var d=function(){if(M.ie&&M.win){window.attachEvent("onunload",function(){var ac=I.length;for(var ab=0;ab<ac;ab++){I[ab][0].detachEvent(I[ab][1],I[ab][2])}var Z=N.length;for(var aa=0;aa<Z;aa++){y(N[aa])}for(var Y in M){M[Y]=null}M=null;for(var X in swfobject){swfobject[X]=null}swfobject=null})}}();return{registerObject:function(ab,X,aa,Z){if(M.w3&&ab&&X){var Y={};Y.id=ab;Y.swfVersion=X;Y.expressInstall=aa;Y.callbackFn=Z;o[o.length]=Y;w(ab,false)}else{if(Z){Z({success:false,id:ab})}}},getObjectById:function(X){if(M.w3){return z(X)}},embedSWF:function(ab,ah,ae,ag,Y,aa,Z,ad,af,ac){var X={success:false,id:ah};if(M.w3&&!(M.wk&&M.wk<312)&&ab&&ah&&ae&&ag&&Y){w(ah,false);K(function(){ae+="";ag+="";var aj={};if(af&&typeof af===r){for(var al in af){aj[al]=af[al]}}aj.data=ab;aj.width=ae;aj.height=ag;var am={};if(ad&&typeof ad===r){for(var ak in ad){am[ak]=ad[ak]}}if(Z&&typeof Z===r){for(var ai in Z){if(typeof am.flashvars!=D){am.flashvars+="&"+ai+"="+Z[ai]}else{am.flashvars=ai+"="+Z[ai]}}}if(F(Y)){var an=u(aj,am,ah);if(aj.id==ah){w(ah,true)}X.success=true;X.ref=an}else{if(aa&&A()){aj.data=aa;P(aj,am,ah,ac);return}else{w(ah,true)}}if(ac){ac(X)}})}else{if(ac){ac(X)}}},switchOffAutoHideShow:function(){m=false},ua:M,getFlashPlayerVersion:function(){return{major:M.pv[0],minor:M.pv[1],release:M.pv[2]}},hasFlashPlayerVersion:F,createSWF:function(Z,Y,X){if(M.w3){return u(Z,Y,X)}else{return undefined}},showExpressInstall:function(Z,aa,X,Y){if(M.w3&&A()){P(Z,aa,X,Y)}},removeSWF:function(X){if(M.w3){y(X)}},createCSS:function(aa,Z,Y,X){if(M.w3){v(aa,Z,Y,X)}},addDomLoadEvent:K,addLoadEvent:s,getQueryParamValue:function(aa){var Z=j.location.search||j.location.hash;if(Z){if(/\\?/.test(Z)){Z=Z.split("?")[1]}if(aa==null){return L(Z)}var Y=Z.split("&");for(var X=0;X<Y.length;X++){if(Y[X].substring(0,Y[X].indexOf("="))==aa){return L(Y[X].substring((Y[X].indexOf("=")+1)))}}}return""},expressInstallCallback:function(){if(a){var X=c(R);if(X&&l){X.parentNode.replaceChild(l,X);if(Q){w(Q,true);if(M.ie&&M.win){l.style.display="block"}}if(E){E(B)}}a=false}}}}();'},function(e,t,n){n(3)(n(42))},function(e,t){e.exports='/**\r\n * SWFUpload: http://www.swfupload.org, http://swfupload.googlecode.com\r\n *\r\n * mmSWFUpload 1.0: Flash upload dialog - http://profandesign.se/swfupload/,  http://www.vinterwebb.se/\r\n *\r\n * SWFUpload is (c) 2006-2007 Lars Huring, Olov Nilzn and Mammon Media and is released under the MIT License:\r\n * http://www.opensource.org/licenses/mit-license.php\r\n *\r\n * SWFUpload 2 is (c) 2007-2008 Jake Roberts and is released under the MIT License:\r\n * http://www.opensource.org/licenses/mit-license.php\r\n *\r\n */\r\n\r\n\r\n/* ******************* */\r\n/* Constructor & Init  */\r\n/* ******************* */\r\nvar SWFUpload;\r\n\r\nif (SWFUpload == undefined) {\r\n\tSWFUpload = function (settings) {\r\n\t\tthis.initSWFUpload(settings);\r\n\t};\r\n}\r\n\r\nSWFUpload.prototype.initSWFUpload = function (settings) {\r\n\ttry {\r\n\t\tthis.customSettings = {};\t// A container where developers can place their own settings associated with this instance.\r\n\t\tthis.settings = settings;\r\n\t\tthis.eventQueue = [];\r\n\t\tthis.movieName = "SWFUpload_" + SWFUpload.movieCount++;\r\n\t\tthis.movieElement = null;\r\n\r\n\r\n\t\t// Setup global control tracking\r\n\t\tSWFUpload.instances[this.movieName] = this;\r\n\r\n\t\t// Load the settings.  Load the Flash movie.\r\n\t\tthis.initSettings();\r\n\t\tthis.loadFlash();\r\n\t\tthis.displayDebugInfo();\r\n\t} catch (ex) {\r\n\t\tdelete SWFUpload.instances[this.movieName];\r\n\t\tthrow ex;\r\n\t}\r\n};\r\n\r\n/* *************** */\r\n/* Static Members  */\r\n/* *************** */\r\nSWFUpload.instances = {};\r\nSWFUpload.movieCount = 0;\r\nSWFUpload.version = "2.2.0 2009-03-25";\r\nSWFUpload.QUEUE_ERROR = {\r\n\tQUEUE_LIMIT_EXCEEDED\t  \t\t: -100,\r\n\tFILE_EXCEEDS_SIZE_LIMIT  \t\t: -110,\r\n\tZERO_BYTE_FILE\t\t\t  \t\t: -120,\r\n\tINVALID_FILETYPE\t\t  \t\t: -130\r\n};\r\nSWFUpload.UPLOAD_ERROR = {\r\n\tHTTP_ERROR\t\t\t\t  \t\t: -200,\r\n\tMISSING_UPLOAD_URL\t      \t\t: -210,\r\n\tIO_ERROR\t\t\t\t  \t\t: -220,\r\n\tSECURITY_ERROR\t\t\t  \t\t: -230,\r\n\tUPLOAD_LIMIT_EXCEEDED\t  \t\t: -240,\r\n\tUPLOAD_FAILED\t\t\t  \t\t: -250,\r\n\tSPECIFIED_FILE_ID_NOT_FOUND\t\t: -260,\r\n\tFILE_VALIDATION_FAILED\t  \t\t: -270,\r\n\tFILE_CANCELLED\t\t\t  \t\t: -280,\r\n\tUPLOAD_STOPPED\t\t\t\t\t: -290\r\n};\r\nSWFUpload.FILE_STATUS = {\r\n\tQUEUED\t\t : -1,\r\n\tIN_PROGRESS\t : -2,\r\n\tERROR\t\t : -3,\r\n\tCOMPLETE\t : -4,\r\n\tCANCELLED\t : -5\r\n};\r\nSWFUpload.BUTTON_ACTION = {\r\n\tSELECT_FILE  : -100,\r\n\tSELECT_FILES : -110,\r\n\tSTART_UPLOAD : -120\r\n};\r\nSWFUpload.CURSOR = {\r\n\tARROW : -1,\r\n\tHAND : -2\r\n};\r\nSWFUpload.WINDOW_MODE = {\r\n\tWINDOW : "window",\r\n\tTRANSPARENT : "transparent",\r\n\tOPAQUE : "opaque"\r\n};\r\n\r\n// Private: takes a URL, determines if it is relative and converts to an absolute URL\r\n// using the current site. Only processes the URL if it can, otherwise returns the URL untouched\r\nSWFUpload.completeURL = function(url) {\r\n\tif (typeof(url) !== "string" || url.match(/^https?:\\/\\//i) || url.match(/^\\//)) {\r\n\t\treturn url;\r\n\t}\r\n\t\r\n\tvar currentURL = window.location.protocol + "//" + window.location.hostname + (window.location.port ? ":" + window.location.port : "");\r\n\t\r\n\tvar indexSlash = window.location.pathname.lastIndexOf("/");\r\n\tif (indexSlash <= 0) {\r\n\t\tpath = "/";\r\n\t} else {\r\n\t\tpath = window.location.pathname.substr(0, indexSlash) + "/";\r\n\t}\r\n\t\r\n\treturn /*currentURL +*/ path + url;\r\n\t\r\n};\r\n\r\n\r\n/* ******************** */\r\n/* Instance Members  */\r\n/* ******************** */\r\n\r\n// Private: initSettings ensures that all the\r\n// settings are set, getting a default value if one was not assigned.\r\nSWFUpload.prototype.initSettings = function () {\r\n\tthis.ensureDefault = function (settingName, defaultValue) {\r\n\t\tthis.settings[settingName] = (this.settings[settingName] == undefined) ? defaultValue : this.settings[settingName];\r\n\t};\r\n\t\r\n\t// Upload backend settings\r\n\tthis.ensureDefault("upload_url", "");\r\n\tthis.ensureDefault("preserve_relative_urls", false);\r\n\tthis.ensureDefault("file_post_name", "Filedata");\r\n\tthis.ensureDefault("post_params", {});\r\n\tthis.ensureDefault("use_query_string", false);\r\n\tthis.ensureDefault("requeue_on_error", false);\r\n\tthis.ensureDefault("http_success", []);\r\n\tthis.ensureDefault("assume_success_timeout", 0);\r\n\t\r\n\t// File Settings\r\n\tthis.ensureDefault("file_types", "*.*");\r\n\tthis.ensureDefault("file_types_description", "All Files");\r\n\tthis.ensureDefault("file_size_limit", 0);\t// Default zero means "unlimited"\r\n\tthis.ensureDefault("file_upload_limit", 0);\r\n\tthis.ensureDefault("file_queue_limit", 0);\r\n\r\n\t// Flash Settings\r\n\tthis.ensureDefault("flash_url", "swfupload.swf");\r\n\tthis.ensureDefault("prevent_swf_caching", true);\r\n\t\r\n\t// Button Settings\r\n\tthis.ensureDefault("button_image_url", "");\r\n\tthis.ensureDefault("button_width", 1);\r\n\tthis.ensureDefault("button_height", 1);\r\n\tthis.ensureDefault("button_text", "");\r\n\tthis.ensureDefault("button_text_style", "color: #000000; font-size: 16pt;");\r\n\tthis.ensureDefault("button_text_top_padding", 0);\r\n\tthis.ensureDefault("button_text_left_padding", 0);\r\n\tthis.ensureDefault("button_action", SWFUpload.BUTTON_ACTION.SELECT_FILES);\r\n\tthis.ensureDefault("button_disabled", false);\r\n\tthis.ensureDefault("button_placeholder_id", "");\r\n\tthis.ensureDefault("button_placeholder", null);\r\n\tthis.ensureDefault("button_cursor", SWFUpload.CURSOR.ARROW);\r\n\tthis.ensureDefault("button_window_mode", SWFUpload.WINDOW_MODE.WINDOW);\r\n\t\r\n\t// Debug Settings\r\n\tthis.ensureDefault("debug", false);\r\n\tthis.settings.debug_enabled = this.settings.debug;\t// Here to maintain v2 API\r\n\t\r\n\t// Event Handlers\r\n\tthis.settings.return_upload_start_handler = this.returnUploadStart;\r\n\tthis.ensureDefault("swfupload_loaded_handler", null);\r\n\tthis.ensureDefault("file_dialog_start_handler", null);\r\n\tthis.ensureDefault("file_queued_handler", null);\r\n\tthis.ensureDefault("file_queue_error_handler", null);\r\n\tthis.ensureDefault("file_dialog_complete_handler", null);\r\n\t\r\n\tthis.ensureDefault("upload_start_handler", null);\r\n\tthis.ensureDefault("upload_progress_handler", null);\r\n\tthis.ensureDefault("upload_error_handler", null);\r\n\tthis.ensureDefault("upload_success_handler", null);\r\n\tthis.ensureDefault("upload_complete_handler", null);\r\n\t\r\n\tthis.ensureDefault("debug_handler", this.debugMessage);\r\n\r\n\tthis.ensureDefault("custom_settings", {});\r\n\r\n\t// Other settings\r\n\tthis.customSettings = this.settings.custom_settings;\r\n\t\r\n\t// Update the flash url if needed\r\n\tif (!!this.settings.prevent_swf_caching) {\r\n\t\tthis.settings.flash_url = this.settings.flash_url + (this.settings.flash_url.indexOf("?") < 0 ? "?" : "&") + "preventswfcaching=" + new Date().getTime();\r\n\t}\r\n\t\r\n\tif (!this.settings.preserve_relative_urls) {\r\n\t\t//this.settings.flash_url = SWFUpload.completeURL(this.settings.flash_url);\t// Don\'t need to do this one since flash doesn\'t look at it\r\n\t\tthis.settings.upload_url = SWFUpload.completeURL(this.settings.upload_url);\r\n\t\tthis.settings.button_image_url = SWFUpload.completeURL(this.settings.button_image_url);\r\n\t}\r\n\t\r\n\tdelete this.ensureDefault;\r\n};\r\n\r\n// Private: loadFlash replaces the button_placeholder element with the flash movie.\r\nSWFUpload.prototype.loadFlash = function () {\r\n\tvar targetElement, tempParent;\r\n\r\n\t// Make sure an element with the ID we are going to use doesn\'t already exist\r\n\tif (document.getElementById(this.movieName) !== null) {\r\n\t\tthrow "ID " + this.movieName + " is already in use. The Flash Object could not be added";\r\n\t}\r\n\r\n\t// Get the element where we will be placing the flash movie\r\n\ttargetElement = document.getElementById(this.settings.button_placeholder_id) || this.settings.button_placeholder;\r\n\r\n\tif (targetElement == undefined) {\r\n\t\tthrow "Could not find the placeholder element: " + this.settings.button_placeholder_id;\r\n\t}\r\n\r\n\t// Append the container and load the flash\r\n\ttempParent = document.createElement("div");\r\n\ttempParent.innerHTML = this.getFlashHTML();\t// Using innerHTML is non-standard but the only sensible way to dynamically add Flash in IE (and maybe other browsers)\r\n\ttargetElement.parentNode.replaceChild(tempParent.firstChild, targetElement);\r\n\r\n\t// Fix IE Flash/Form bug\r\n\tif (window[this.movieName] == undefined) {\r\n\t\twindow[this.movieName] = this.getMovieElement();\r\n\t}\r\n\t\r\n};\r\n\r\n// Private: getFlashHTML generates the object tag needed to embed the flash in to the document\r\nSWFUpload.prototype.getFlashHTML = function () {\r\n\t// Flash Satay object syntax: http://www.alistapart.com/articles/flashsatay\r\n\treturn [\'<object id="\', this.movieName, \'" type="application/x-shockwave-flash" data="\', this.settings.flash_url, \'" width="\', this.settings.button_width, \'" height="\', this.settings.button_height, \'" class="swfupload">\',\r\n\t\t\t\t\'<param name="wmode" value="\', this.settings.button_window_mode, \'" />\',\r\n\t\t\t\t\'<param name="movie" value="\', this.settings.flash_url, \'" />\',\r\n\t\t\t\t\'<param name="quality" value="high" />\',\r\n\t\t\t\t\'<param name="menu" value="false" />\',\r\n\t\t\t\t\'<param name="allowScriptAccess" value="always" />\',\r\n\t\t\t\t\'<param name="flashvars" value="\' + this.getFlashVars() + \'" />\',\r\n\t\t\t\t\'</object>\'].join("");\r\n};\r\n\r\n// Private: getFlashVars builds the parameter string that will be passed\r\n// to flash in the flashvars param.\r\nSWFUpload.prototype.getFlashVars = function () {\r\n\t// Build a string from the post param object\r\n\tvar paramString = this.buildParamString();\r\n\tvar httpSuccessString = this.settings.http_success.join(",");\r\n\t\r\n\t// Build the parameter string\r\n\treturn ["movieName=", encodeURIComponent(this.movieName),\r\n\t\t\t"&amp;uploadURL=", encodeURIComponent(this.settings.upload_url),\r\n\t\t\t"&amp;useQueryString=", encodeURIComponent(this.settings.use_query_string),\r\n\t\t\t"&amp;requeueOnError=", encodeURIComponent(this.settings.requeue_on_error),\r\n\t\t\t"&amp;httpSuccess=", encodeURIComponent(httpSuccessString),\r\n\t\t\t"&amp;assumeSuccessTimeout=", encodeURIComponent(this.settings.assume_success_timeout),\r\n\t\t\t"&amp;params=", encodeURIComponent(paramString),\r\n\t\t\t"&amp;filePostName=", encodeURIComponent(this.settings.file_post_name),\r\n\t\t\t"&amp;fileTypes=", encodeURIComponent(this.settings.file_types),\r\n\t\t\t"&amp;fileTypesDescription=", encodeURIComponent(this.settings.file_types_description),\r\n\t\t\t"&amp;fileSizeLimit=", encodeURIComponent(this.settings.file_size_limit),\r\n\t\t\t"&amp;fileUploadLimit=", encodeURIComponent(this.settings.file_upload_limit),\r\n\t\t\t"&amp;fileQueueLimit=", encodeURIComponent(this.settings.file_queue_limit),\r\n\t\t\t"&amp;debugEnabled=", encodeURIComponent(this.settings.debug_enabled),\r\n\t\t\t"&amp;buttonImageURL=", encodeURIComponent(this.settings.button_image_url),\r\n\t\t\t"&amp;buttonWidth=", encodeURIComponent(this.settings.button_width),\r\n\t\t\t"&amp;buttonHeight=", encodeURIComponent(this.settings.button_height),\r\n\t\t\t"&amp;buttonText=", encodeURIComponent(this.settings.button_text),\r\n\t\t\t"&amp;buttonTextTopPadding=", encodeURIComponent(this.settings.button_text_top_padding),\r\n\t\t\t"&amp;buttonTextLeftPadding=", encodeURIComponent(this.settings.button_text_left_padding),\r\n\t\t\t"&amp;buttonTextStyle=", encodeURIComponent(this.settings.button_text_style),\r\n\t\t\t"&amp;buttonAction=", encodeURIComponent(this.settings.button_action),\r\n\t\t\t"&amp;buttonDisabled=", encodeURIComponent(this.settings.button_disabled),\r\n\t\t\t"&amp;buttonCursor=", encodeURIComponent(this.settings.button_cursor)\r\n\t\t].join("");\r\n};\r\n\r\n// Public: getMovieElement retrieves the DOM reference to the Flash element added by SWFUpload\r\n// The element is cached after the first lookup\r\nSWFUpload.prototype.getMovieElement = function () {\r\n\tif (this.movieElement == undefined) {\r\n\t\tthis.movieElement = document.getElementById(this.movieName);\r\n\t}\r\n\r\n\tif (this.movieElement === null) {\r\n\t\tthrow "Could not find Flash element";\r\n\t}\r\n\t\r\n\treturn this.movieElement;\r\n};\r\n\r\n// Private: buildParamString takes the name/value pairs in the post_params setting object\r\n// and joins them up in to a string formatted "name=value&amp;name=value"\r\nSWFUpload.prototype.buildParamString = function () {\r\n\tvar postParams = this.settings.post_params; \r\n\tvar paramStringPairs = [];\r\n\r\n\tif (typeof(postParams) === "object") {\r\n\t\tfor (var name in postParams) {\r\n\t\t\tif (postParams.hasOwnProperty(name)) {\r\n\t\t\t\tparamStringPairs.push(encodeURIComponent(name.toString()) + "=" + encodeURIComponent(postParams[name].toString()));\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\treturn paramStringPairs.join("&amp;");\r\n};\r\n\r\n// Public: Used to remove a SWFUpload instance from the page. This method strives to remove\r\n// all references to the SWF, and other objects so memory is properly freed.\r\n// Returns true if everything was destroyed. Returns a false if a failure occurs leaving SWFUpload in an inconsistant state.\r\n// Credits: Major improvements provided by steffen\r\nSWFUpload.prototype.destroy = function () {\r\n\ttry {\r\n\t\t// Make sure Flash is done before we try to remove it\r\n\t\tthis.cancelUpload(null, false);\r\n\t\t\r\n\r\n\t\t// Remove the SWFUpload DOM nodes\r\n\t\tvar movieElement = null;\r\n\t\tmovieElement = this.getMovieElement();\r\n\t\t\r\n\t\tif (movieElement && typeof(movieElement.CallFunction) === "unknown") { // We only want to do this in IE\r\n\t\t\t// Loop through all the movie\'s properties and remove all function references (DOM/JS IE 6/7 memory leak workaround)\r\n\t\t\tfor (var i in movieElement) {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tif (typeof(movieElement[i]) === "function") {\r\n\t\t\t\t\t\tmovieElement[i] = null;\r\n\t\t\t\t\t}\r\n\t\t\t\t} catch (ex1) {}\r\n\t\t\t}\r\n\r\n\t\t\t// Remove the Movie Element from the page\r\n\t\t\ttry {\r\n\t\t\t\tmovieElement.parentNode.removeChild(movieElement);\r\n\t\t\t} catch (ex) {}\r\n\t\t}\r\n\t\t\r\n\t\t// Remove IE form fix reference\r\n\t\twindow[this.movieName] = null;\r\n\r\n\t\t// Destroy other references\r\n\t\tSWFUpload.instances[this.movieName] = null;\r\n\t\tdelete SWFUpload.instances[this.movieName];\r\n\r\n\t\tthis.movieElement = null;\r\n\t\tthis.settings = null;\r\n\t\tthis.customSettings = null;\r\n\t\tthis.eventQueue = null;\r\n\t\tthis.movieName = null;\r\n\t\t\r\n\t\t\r\n\t\treturn true;\r\n\t} catch (ex2) {\r\n\t\treturn false;\r\n\t}\r\n};\r\n\r\n\r\n// Public: displayDebugInfo prints out settings and configuration\r\n// information about this SWFUpload instance.\r\n// This function (and any references to it) can be deleted when placing\r\n// SWFUpload in production.\r\nSWFUpload.prototype.displayDebugInfo = function () {\r\n\tthis.debug(\r\n\t\t[\r\n\t\t\t"---SWFUpload Instance Info---\\n",\r\n\t\t\t"Version: ", SWFUpload.version, "\\n",\r\n\t\t\t"Movie Name: ", this.movieName, "\\n",\r\n\t\t\t"Settings:\\n",\r\n\t\t\t"\\t", "upload_url:               ", this.settings.upload_url, "\\n",\r\n\t\t\t"\\t", "flash_url:                ", this.settings.flash_url, "\\n",\r\n\t\t\t"\\t", "use_query_string:         ", this.settings.use_query_string.toString(), "\\n",\r\n\t\t\t"\\t", "requeue_on_error:         ", this.settings.requeue_on_error.toString(), "\\n",\r\n\t\t\t"\\t", "http_success:             ", this.settings.http_success.join(", "), "\\n",\r\n\t\t\t"\\t", "assume_success_timeout:   ", this.settings.assume_success_timeout, "\\n",\r\n\t\t\t"\\t", "file_post_name:           ", this.settings.file_post_name, "\\n",\r\n\t\t\t"\\t", "post_params:              ", this.settings.post_params.toString(), "\\n",\r\n\t\t\t"\\t", "file_types:               ", this.settings.file_types, "\\n",\r\n\t\t\t"\\t", "file_types_description:   ", this.settings.file_types_description, "\\n",\r\n\t\t\t"\\t", "file_size_limit:          ", this.settings.file_size_limit, "\\n",\r\n\t\t\t"\\t", "file_upload_limit:        ", this.settings.file_upload_limit, "\\n",\r\n\t\t\t"\\t", "file_queue_limit:         ", this.settings.file_queue_limit, "\\n",\r\n\t\t\t"\\t", "debug:                    ", this.settings.debug.toString(), "\\n",\r\n\r\n\t\t\t"\\t", "prevent_swf_caching:      ", this.settings.prevent_swf_caching.toString(), "\\n",\r\n\r\n\t\t\t"\\t", "button_placeholder_id:    ", this.settings.button_placeholder_id.toString(), "\\n",\r\n\t\t\t"\\t", "button_placeholder:       ", (this.settings.button_placeholder ? "Set" : "Not Set"), "\\n",\r\n\t\t\t"\\t", "button_image_url:         ", this.settings.button_image_url.toString(), "\\n",\r\n\t\t\t"\\t", "button_width:             ", this.settings.button_width.toString(), "\\n",\r\n\t\t\t"\\t", "button_height:            ", this.settings.button_height.toString(), "\\n",\r\n\t\t\t"\\t", "button_text:              ", this.settings.button_text.toString(), "\\n",\r\n\t\t\t"\\t", "button_text_style:        ", this.settings.button_text_style.toString(), "\\n",\r\n\t\t\t"\\t", "button_text_top_padding:  ", this.settings.button_text_top_padding.toString(), "\\n",\r\n\t\t\t"\\t", "button_text_left_padding: ", this.settings.button_text_left_padding.toString(), "\\n",\r\n\t\t\t"\\t", "button_action:            ", this.settings.button_action.toString(), "\\n",\r\n\t\t\t"\\t", "button_disabled:          ", this.settings.button_disabled.toString(), "\\n",\r\n\r\n\t\t\t"\\t", "custom_settings:          ", this.settings.custom_settings.toString(), "\\n",\r\n\t\t\t"Event Handlers:\\n",\r\n\t\t\t"\\t", "swfupload_loaded_handler assigned:  ", (typeof this.settings.swfupload_loaded_handler === "function").toString(), "\\n",\r\n\t\t\t"\\t", "file_dialog_start_handler assigned: ", (typeof this.settings.file_dialog_start_handler === "function").toString(), "\\n",\r\n\t\t\t"\\t", "file_queued_handler assigned:       ", (typeof this.settings.file_queued_handler === "function").toString(), "\\n",\r\n\t\t\t"\\t", "file_queue_error_handler assigned:  ", (typeof this.settings.file_queue_error_handler === "function").toString(), "\\n",\r\n\t\t\t"\\t", "upload_start_handler assigned:      ", (typeof this.settings.upload_start_handler === "function").toString(), "\\n",\r\n\t\t\t"\\t", "upload_progress_handler assigned:   ", (typeof this.settings.upload_progress_handler === "function").toString(), "\\n",\r\n\t\t\t"\\t", "upload_error_handler assigned:      ", (typeof this.settings.upload_error_handler === "function").toString(), "\\n",\r\n\t\t\t"\\t", "upload_success_handler assigned:    ", (typeof this.settings.upload_success_handler === "function").toString(), "\\n",\r\n\t\t\t"\\t", "upload_complete_handler assigned:   ", (typeof this.settings.upload_complete_handler === "function").toString(), "\\n",\r\n\t\t\t"\\t", "debug_handler assigned:             ", (typeof this.settings.debug_handler === "function").toString(), "\\n"\r\n\t\t].join("")\r\n\t);\r\n};\r\n\r\n/* Note: addSetting and getSetting are no longer used by SWFUpload but are included\r\n\tthe maintain v2 API compatibility\r\n*/\r\n// Public: (Deprecated) addSetting adds a setting value. If the value given is undefined or null then the default_value is used.\r\nSWFUpload.prototype.addSetting = function (name, value, default_value) {\r\n    if (value == undefined) {\r\n        return (this.settings[name] = default_value);\r\n    } else {\r\n        return (this.settings[name] = value);\r\n\t}\r\n};\r\n\r\n// Public: (Deprecated) getSetting gets a setting. Returns an empty string if the setting was not found.\r\nSWFUpload.prototype.getSetting = function (name) {\r\n    if (this.settings[name] != undefined) {\r\n        return this.settings[name];\r\n\t}\r\n\r\n    return "";\r\n};\r\n\r\n\r\n\r\n// Private: callFlash handles function calls made to the Flash element.\r\n// Calls are made with a setTimeout for some functions to work around\r\n// bugs in the ExternalInterface library.\r\nSWFUpload.prototype.callFlash = function (functionName, argumentArray) {\r\n\targumentArray = argumentArray || [];\r\n\t\r\n\tvar movieElement = this.getMovieElement();\r\n\tvar returnValue, returnString;\r\n\r\n\t// Flash\'s method if calling ExternalInterface methods (code adapted from MooTools).\r\n\ttry {\r\n\t\treturnString = movieElement.CallFunction(\'<invoke name="\' + functionName + \'" returntype="javascript">\' + __flash__argumentsToXML(argumentArray, 0) + \'</invoke>\');\r\n\t\treturnValue = eval(returnString);\r\n\t} catch (ex) {\r\n\t\tthrow "Call to " + functionName + " failed";\r\n\t}\r\n\t\r\n\t// Unescape file post param values\r\n\tif (returnValue != undefined && typeof returnValue.post === "object") {\r\n\t\treturnValue = this.unescapeFilePostParams(returnValue);\r\n\t}\r\n\r\n\treturn returnValue;\r\n};\r\n\r\n/* *****************************\r\n\t-- Flash control methods --\r\n\tYour UI should use these\r\n\tto operate SWFUpload\r\n   ***************************** */\r\n\r\n// WARNING: this function does not work in Flash Player 10\r\n// Public: selectFile causes a File Selection Dialog window to appear.  This\r\n// dialog only allows 1 file to be selected.\r\nSWFUpload.prototype.selectFile = function () {\r\n\tthis.callFlash("SelectFile");\r\n};\r\n\r\n// WARNING: this function does not work in Flash Player 10\r\n// Public: selectFiles causes a File Selection Dialog window to appear/ This\r\n// dialog allows the user to select any number of files\r\n// Flash Bug Warning: Flash limits the number of selectable files based on the combined length of the file names.\r\n// If the selection name length is too long the dialog will fail in an unpredictable manner.  There is no work-around\r\n// for this bug.\r\nSWFUpload.prototype.selectFiles = function () {\r\n\tthis.callFlash("SelectFiles");\r\n};\r\n\r\n\r\n// Public: startUpload starts uploading the first file in the queue unless\r\n// the optional parameter \'fileID\' specifies the ID \r\nSWFUpload.prototype.startUpload = function (fileID) {\r\n\tthis.callFlash("StartUpload", [fileID]);\r\n};\r\n\r\n// Public: cancelUpload cancels any queued file.  The fileID parameter may be the file ID or index.\r\n// If you do not specify a fileID the current uploading file or first file in the queue is cancelled.\r\n// If you do not want the uploadError event to trigger you can specify false for the triggerErrorEvent parameter.\r\nSWFUpload.prototype.cancelUpload = function (fileID, triggerErrorEvent) {\r\n\tif (triggerErrorEvent !== false) {\r\n\t\ttriggerErrorEvent = true;\r\n\t}\r\n\tthis.callFlash("CancelUpload", [fileID, triggerErrorEvent]);\r\n};\r\n\r\n// Public: stopUpload stops the current upload and requeues the file at the beginning of the queue.\r\n// If nothing is currently uploading then nothing happens.\r\nSWFUpload.prototype.stopUpload = function () {\r\n\tthis.callFlash("StopUpload");\r\n};\r\n\r\n/* ************************\r\n * Settings methods\r\n *   These methods change the SWFUpload settings.\r\n *   SWFUpload settings should not be changed directly on the settings object\r\n *   since many of the settings need to be passed to Flash in order to take\r\n *   effect.\r\n * *********************** */\r\n\r\n// Public: getStats gets the file statistics object.\r\nSWFUpload.prototype.getStats = function () {\r\n\treturn this.callFlash("GetStats");\r\n};\r\n\r\n// Public: setStats changes the SWFUpload statistics.  You shouldn\'t need to \r\n// change the statistics but you can.  Changing the statistics does not\r\n// affect SWFUpload accept for the successful_uploads count which is used\r\n// by the upload_limit setting to determine how many files the user may upload.\r\nSWFUpload.prototype.setStats = function (statsObject) {\r\n\tthis.callFlash("SetStats", [statsObject]);\r\n};\r\n\r\n// Public: getFile retrieves a File object by ID or Index.  If the file is\r\n// not found then \'null\' is returned.\r\nSWFUpload.prototype.getFile = function (fileID) {\r\n\tif (typeof(fileID) === "number") {\r\n\t\treturn this.callFlash("GetFileByIndex", [fileID]);\r\n\t} else {\r\n\t\treturn this.callFlash("GetFile", [fileID]);\r\n\t}\r\n};\r\n\r\n// Public: addFileParam sets a name/value pair that will be posted with the\r\n// file specified by the Files ID.  If the name already exists then the\r\n// exiting value will be overwritten.\r\nSWFUpload.prototype.addFileParam = function (fileID, name, value) {\r\n\treturn this.callFlash("AddFileParam", [fileID, name, value]);\r\n};\r\n\r\n// Public: removeFileParam removes a previously set (by addFileParam) name/value\r\n// pair from the specified file.\r\nSWFUpload.prototype.removeFileParam = function (fileID, name) {\r\n\tthis.callFlash("RemoveFileParam", [fileID, name]);\r\n};\r\n\r\n// Public: setUploadUrl changes the upload_url setting.\r\nSWFUpload.prototype.setUploadURL = function (url) {\r\n\tthis.settings.upload_url = url.toString();\r\n\tthis.callFlash("SetUploadURL", [url]);\r\n};\r\n\r\n// Public: setPostParams changes the post_params setting\r\nSWFUpload.prototype.setPostParams = function (paramsObject) {\r\n\tthis.settings.post_params = paramsObject;\r\n\tthis.callFlash("SetPostParams", [paramsObject]);\r\n};\r\n\r\n// Public: addPostParam adds post name/value pair.  Each name can have only one value.\r\nSWFUpload.prototype.addPostParam = function (name, value) {\r\n\tthis.settings.post_params[name] = value;\r\n\tthis.callFlash("SetPostParams", [this.settings.post_params]);\r\n};\r\n\r\n// Public: removePostParam deletes post name/value pair.\r\nSWFUpload.prototype.removePostParam = function (name) {\r\n\tdelete this.settings.post_params[name];\r\n\tthis.callFlash("SetPostParams", [this.settings.post_params]);\r\n};\r\n\r\n// Public: setFileTypes changes the file_types setting and the file_types_description setting\r\nSWFUpload.prototype.setFileTypes = function (types, description) {\r\n\tthis.settings.file_types = types;\r\n\tthis.settings.file_types_description = description;\r\n\tthis.callFlash("SetFileTypes", [types, description]);\r\n};\r\n\r\n// Public: setFileSizeLimit changes the file_size_limit setting\r\nSWFUpload.prototype.setFileSizeLimit = function (fileSizeLimit) {\r\n\tthis.settings.file_size_limit = fileSizeLimit;\r\n\tthis.callFlash("SetFileSizeLimit", [fileSizeLimit]);\r\n};\r\n\r\n// Public: setFileUploadLimit changes the file_upload_limit setting\r\nSWFUpload.prototype.setFileUploadLimit = function (fileUploadLimit) {\r\n\tthis.settings.file_upload_limit = fileUploadLimit;\r\n\tthis.callFlash("SetFileUploadLimit", [fileUploadLimit]);\r\n};\r\n\r\n// Public: setFileQueueLimit changes the file_queue_limit setting\r\nSWFUpload.prototype.setFileQueueLimit = function (fileQueueLimit) {\r\n\tthis.settings.file_queue_limit = fileQueueLimit;\r\n\tthis.callFlash("SetFileQueueLimit", [fileQueueLimit]);\r\n};\r\n\r\n// Public: setFilePostName changes the file_post_name setting\r\nSWFUpload.prototype.setFilePostName = function (filePostName) {\r\n\tthis.settings.file_post_name = filePostName;\r\n\tthis.callFlash("SetFilePostName", [filePostName]);\r\n};\r\n\r\n// Public: setUseQueryString changes the use_query_string setting\r\nSWFUpload.prototype.setUseQueryString = function (useQueryString) {\r\n\tthis.settings.use_query_string = useQueryString;\r\n\tthis.callFlash("SetUseQueryString", [useQueryString]);\r\n};\r\n\r\n// Public: setRequeueOnError changes the requeue_on_error setting\r\nSWFUpload.prototype.setRequeueOnError = function (requeueOnError) {\r\n\tthis.settings.requeue_on_error = requeueOnError;\r\n\tthis.callFlash("SetRequeueOnError", [requeueOnError]);\r\n};\r\n\r\n// Public: setHTTPSuccess changes the http_success setting\r\nSWFUpload.prototype.setHTTPSuccess = function (http_status_codes) {\r\n\tif (typeof http_status_codes === "string") {\r\n\t\thttp_status_codes = http_status_codes.replace(" ", "").split(",");\r\n\t}\r\n\t\r\n\tthis.settings.http_success = http_status_codes;\r\n\tthis.callFlash("SetHTTPSuccess", [http_status_codes]);\r\n};\r\n\r\n// Public: setHTTPSuccess changes the http_success setting\r\nSWFUpload.prototype.setAssumeSuccessTimeout = function (timeout_seconds) {\r\n\tthis.settings.assume_success_timeout = timeout_seconds;\r\n\tthis.callFlash("SetAssumeSuccessTimeout", [timeout_seconds]);\r\n};\r\n\r\n// Public: setDebugEnabled changes the debug_enabled setting\r\nSWFUpload.prototype.setDebugEnabled = function (debugEnabled) {\r\n\tthis.settings.debug_enabled = debugEnabled;\r\n\tthis.callFlash("SetDebugEnabled", [debugEnabled]);\r\n};\r\n\r\n// Public: setButtonImageURL loads a button image sprite\r\nSWFUpload.prototype.setButtonImageURL = function (buttonImageURL) {\r\n\tif (buttonImageURL == undefined) {\r\n\t\tbuttonImageURL = "";\r\n\t}\r\n\t\r\n\tthis.settings.button_image_url = buttonImageURL;\r\n\tthis.callFlash("SetButtonImageURL", [buttonImageURL]);\r\n};\r\n\r\n// Public: setButtonDimensions resizes the Flash Movie and button\r\nSWFUpload.prototype.setButtonDimensions = function (width, height) {\r\n\tthis.settings.button_width = width;\r\n\tthis.settings.button_height = height;\r\n\t\r\n\tvar movie = this.getMovieElement();\r\n\tif (movie != undefined) {\r\n\t\tmovie.style.width = width + "px";\r\n\t\tmovie.style.height = height + "px";\r\n\t}\r\n\t\r\n\tthis.callFlash("SetButtonDimensions", [width, height]);\r\n};\r\n// Public: setButtonText Changes the text overlaid on the button\r\nSWFUpload.prototype.setButtonText = function (html) {\r\n\tthis.settings.button_text = html;\r\n\tthis.callFlash("SetButtonText", [html]);\r\n};\r\n// Public: setButtonTextPadding changes the top and left padding of the text overlay\r\nSWFUpload.prototype.setButtonTextPadding = function (left, top) {\r\n\tthis.settings.button_text_top_padding = top;\r\n\tthis.settings.button_text_left_padding = left;\r\n\tthis.callFlash("SetButtonTextPadding", [left, top]);\r\n};\r\n\r\n// Public: setButtonTextStyle changes the CSS used to style the HTML/Text overlaid on the button\r\nSWFUpload.prototype.setButtonTextStyle = function (css) {\r\n\tthis.settings.button_text_style = css;\r\n\tthis.callFlash("SetButtonTextStyle", [css]);\r\n};\r\n// Public: setButtonDisabled disables/enables the button\r\nSWFUpload.prototype.setButtonDisabled = function (isDisabled) {\r\n\tthis.settings.button_disabled = isDisabled;\r\n\tthis.callFlash("SetButtonDisabled", [isDisabled]);\r\n};\r\n// Public: setButtonAction sets the action that occurs when the button is clicked\r\nSWFUpload.prototype.setButtonAction = function (buttonAction) {\r\n\tthis.settings.button_action = buttonAction;\r\n\tthis.callFlash("SetButtonAction", [buttonAction]);\r\n};\r\n\r\n// Public: setButtonCursor changes the mouse cursor displayed when hovering over the button\r\nSWFUpload.prototype.setButtonCursor = function (cursor) {\r\n\tthis.settings.button_cursor = cursor;\r\n\tthis.callFlash("SetButtonCursor", [cursor]);\r\n};\r\n\r\n/* *******************************\r\n\tFlash Event Interfaces\r\n\tThese functions are used by Flash to trigger the various\r\n\tevents.\r\n\t\r\n\tAll these functions a Private.\r\n\t\r\n\tBecause the ExternalInterface library is buggy the event calls\r\n\tare added to a queue and the queue then executed by a setTimeout.\r\n\tThis ensures that events are executed in a determinate order and that\r\n\tthe ExternalInterface bugs are avoided.\r\n******************************* */\r\n\r\nSWFUpload.prototype.queueEvent = function (handlerName, argumentArray) {\r\n\t// Warning: Don\'t call this.debug inside here or you\'ll create an infinite loop\r\n\t\r\n\tif (argumentArray == undefined) {\r\n\t\targumentArray = [];\r\n\t} else if (!(argumentArray instanceof Array)) {\r\n\t\targumentArray = [argumentArray];\r\n\t}\r\n\t\r\n\tvar self = this;\r\n\tif (typeof this.settings[handlerName] === "function") {\r\n\t\t// Queue the event\r\n\t\tthis.eventQueue.push(function () {\r\n\t\t\tthis.settings[handlerName].apply(this, argumentArray);\r\n\t\t});\r\n\t\t\r\n\t\t// Execute the next queued event\r\n\t\tsetTimeout(function () {\r\n\t\t\tself.executeNextEvent();\r\n\t\t}, 0);\r\n\t\t\r\n\t} else if (this.settings[handlerName] !== null) {\r\n\t\tthrow "Event handler " + handlerName + " is unknown or is not a function";\r\n\t}\r\n};\r\n\r\n// Private: Causes the next event in the queue to be executed.  Since events are queued using a setTimeout\r\n// we must queue them in order to garentee that they are executed in order.\r\nSWFUpload.prototype.executeNextEvent = function () {\r\n\t// Warning: Don\'t call this.debug inside here or you\'ll create an infinite loop\r\n\r\n\tvar  f = this.eventQueue ? this.eventQueue.shift() : null;\r\n\tif (typeof(f) === "function") {\r\n\t\tf.apply(this);\r\n\t}\r\n};\r\n\r\n// Private: unescapeFileParams is part of a workaround for a flash bug where objects passed through ExternalInterface cannot have\r\n// properties that contain characters that are not valid for JavaScript identifiers. To work around this\r\n// the Flash Component escapes the parameter names and we must unescape again before passing them along.\r\nSWFUpload.prototype.unescapeFilePostParams = function (file) {\r\n\tvar reg = /[$]([0-9a-f]{4})/i;\r\n\tvar unescapedPost = {};\r\n\tvar uk;\r\n\r\n\tif (file != undefined) {\r\n\t\tfor (var k in file.post) {\r\n\t\t\tif (file.post.hasOwnProperty(k)) {\r\n\t\t\t\tuk = k;\r\n\t\t\t\tvar match;\r\n\t\t\t\twhile ((match = reg.exec(uk)) !== null) {\r\n\t\t\t\t\tuk = uk.replace(match[0], String.fromCharCode(parseInt("0x" + match[1], 16)));\r\n\t\t\t\t}\r\n\t\t\t\tunescapedPost[uk] = file.post[k];\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfile.post = unescapedPost;\r\n\t}\r\n\r\n\treturn file;\r\n};\r\n\r\n// Private: Called by Flash to see if JS can call in to Flash (test if External Interface is working)\r\nSWFUpload.prototype.testExternalInterface = function () {\r\n\ttry {\r\n\t\treturn this.callFlash("TestExternalInterface");\r\n\t} catch (ex) {\r\n\t\treturn false;\r\n\t}\r\n};\r\n\r\n// Private: This event is called by Flash when it has finished loading. Don\'t modify this.\r\n// Use the swfupload_loaded_handler event setting to execute custom code when SWFUpload has loaded.\r\nSWFUpload.prototype.flashReady = function () {\r\n\t// Check that the movie element is loaded correctly with its ExternalInterface methods defined\r\n\tvar movieElement = this.getMovieElement();\r\n\r\n\tif (!movieElement) {\r\n\t\tthis.debug("Flash called back ready but the flash movie can\'t be found.");\r\n\t\treturn;\r\n\t}\r\n\r\n\tthis.cleanUp(movieElement);\r\n\t\r\n\tthis.queueEvent("swfupload_loaded_handler");\r\n};\r\n\r\n// Private: removes Flash added fuctions to the DOM node to prevent memory leaks in IE.\r\n// This function is called by Flash each time the ExternalInterface functions are created.\r\nSWFUpload.prototype.cleanUp = function (movieElement) {\r\n\t// Pro-actively unhook all the Flash functions\r\n\ttry {\r\n\t\tif (this.movieElement && typeof(movieElement.CallFunction) === "unknown") { // We only want to do this in IE\r\n\t\t\tthis.debug("Removing Flash functions hooks (this should only run in IE and should prevent memory leaks)");\r\n\t\t\tfor (var key in movieElement) {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tif (typeof(movieElement[key]) === "function") {\r\n\t\t\t\t\t\tmovieElement[key] = null;\r\n\t\t\t\t\t}\r\n\t\t\t\t} catch (ex) {\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t} catch (ex1) {\r\n\t\r\n\t}\r\n\r\n\t// Fix Flashes own cleanup code so if the SWFMovie was removed from the page\r\n\t// it doesn\'t display errors.\r\n\twindow["__flash__removeCallback"] = function (instance, name) {\r\n\t\ttry {\r\n\t\t\tif (instance) {\r\n\t\t\t\tinstance[name] = null;\r\n\t\t\t}\r\n\t\t} catch (flashEx) {\r\n\t\t\r\n\t\t}\r\n\t};\r\n\r\n};\r\n\r\n\r\n/* This is a chance to do something before the browse window opens */\r\nSWFUpload.prototype.fileDialogStart = function () {\r\n\tthis.queueEvent("file_dialog_start_handler");\r\n};\r\n\r\n\r\n/* Called when a file is successfully added to the queue. */\r\nSWFUpload.prototype.fileQueued = function (file) {\r\n\tfile = this.unescapeFilePostParams(file);\r\n\tthis.queueEvent("file_queued_handler", file);\r\n};\r\n\r\n\r\n/* Handle errors that occur when an attempt to queue a file fails. */\r\nSWFUpload.prototype.fileQueueError = function (file, errorCode, message) {\r\n\tfile = this.unescapeFilePostParams(file);\r\n\tthis.queueEvent("file_queue_error_handler", [file, errorCode, message]);\r\n};\r\n\r\n/* Called after the file dialog has closed and the selected files have been queued.\r\n\tYou could call startUpload here if you want the queued files to begin uploading immediately. */\r\nSWFUpload.prototype.fileDialogComplete = function (numFilesSelected, numFilesQueued, numFilesInQueue) {\r\n\tthis.queueEvent("file_dialog_complete_handler", [numFilesSelected, numFilesQueued, numFilesInQueue]);\r\n};\r\n\r\nSWFUpload.prototype.uploadStart = function (file) {\r\n\tfile = this.unescapeFilePostParams(file);\r\n\tthis.queueEvent("return_upload_start_handler", file);\r\n};\r\n\r\nSWFUpload.prototype.returnUploadStart = function (file) {\r\n\tvar returnValue;\r\n\tif (typeof this.settings.upload_start_handler === "function") {\r\n\t\tfile = this.unescapeFilePostParams(file);\r\n\t\treturnValue = this.settings.upload_start_handler.call(this, file);\r\n\t} else if (this.settings.upload_start_handler != undefined) {\r\n\t\tthrow "upload_start_handler must be a function";\r\n\t}\r\n\r\n\t// Convert undefined to true so if nothing is returned from the upload_start_handler it is\r\n\t// interpretted as \'true\'.\r\n\tif (returnValue === undefined) {\r\n\t\treturnValue = true;\r\n\t}\r\n\t\r\n\treturnValue = !!returnValue;\r\n\t\r\n\tthis.callFlash("ReturnUploadStart", [returnValue]);\r\n};\r\n\r\n\r\n\r\nSWFUpload.prototype.uploadProgress = function (file, bytesComplete, bytesTotal) {\r\n\tfile = this.unescapeFilePostParams(file);\r\n\tthis.queueEvent("upload_progress_handler", [file, bytesComplete, bytesTotal]);\r\n};\r\n\r\nSWFUpload.prototype.uploadError = function (file, errorCode, message) {\r\n\tfile = this.unescapeFilePostParams(file);\r\n\tthis.queueEvent("upload_error_handler", [file, errorCode, message]);\r\n};\r\n\r\nSWFUpload.prototype.uploadSuccess = function (file, serverData, responseReceived) {\r\n\tfile = this.unescapeFilePostParams(file);\r\n\tthis.queueEvent("upload_success_handler", [file, serverData, responseReceived]);\r\n};\r\n\r\nSWFUpload.prototype.uploadComplete = function (file) {\r\n\tfile = this.unescapeFilePostParams(file);\r\n\tthis.queueEvent("upload_complete_handler", file);\r\n};\r\n\r\n/* Called by SWFUpload JavaScript and Flash functions when debug is enabled. By default it writes messages to the\r\n   internal debug console.  You can override this event and have messages written where you want. */\r\nSWFUpload.prototype.debug = function (message) {\r\n\tthis.queueEvent("debug_handler", message);\r\n};\r\n\r\n\r\n/* **********************************\r\n\tDebug Console\r\n\tThe debug console is a self contained, in page location\r\n\tfor debug message to be sent.  The Debug Console adds\r\n\titself to the body if necessary.\r\n\r\n\tThe console is automatically scrolled as messages appear.\r\n\t\r\n\tIf you are using your own debug handler or when you deploy to production and\r\n\thave debug disabled you can remove these functions to reduce the file size\r\n\tand complexity.\r\n********************************** */\r\n   \r\n// Private: debugMessage is the default debug_handler.  If you want to print debug messages\r\n// call the debug() function.  When overriding the function your own function should\r\n// check to see if the debug setting is true before outputting debug information.\r\nSWFUpload.prototype.debugMessage = function (message) {\r\n\tif (this.settings.debug) {\r\n\t\tvar exceptionMessage, exceptionValues = [];\r\n\r\n\t\t// Check for an exception object and print it nicely\r\n\t\tif (typeof message === "object" && typeof message.name === "string" && typeof message.message === "string") {\r\n\t\t\tfor (var key in message) {\r\n\t\t\t\tif (message.hasOwnProperty(key)) {\r\n\t\t\t\t\texceptionValues.push(key + ": " + message[key]);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\texceptionMessage = exceptionValues.join("\\n") || "";\r\n\t\t\texceptionValues = exceptionMessage.split("\\n");\r\n\t\t\texceptionMessage = "EXCEPTION: " + exceptionValues.join("\\nEXCEPTION: ");\r\n\t\t\tSWFUpload.Console.writeLine(exceptionMessage);\r\n\t\t} else {\r\n\t\t\tSWFUpload.Console.writeLine(message);\r\n\t\t}\r\n\t}\r\n};\r\n\r\nSWFUpload.Console = {};\r\nSWFUpload.Console.writeLine = function (message) {\r\n\tvar console, documentForm;\r\n\r\n\ttry {\r\n\t\tconsole = document.getElementById("SWFUpload_Console");\r\n\r\n\t\tif (!console) {\r\n\t\t\tdocumentForm = document.createElement("form");\r\n\t\t\tdocument.getElementsByTagName("body")[0].appendChild(documentForm);\r\n\r\n\t\t\tconsole = document.createElement("textarea");\r\n\t\t\tconsole.id = "SWFUpload_Console";\r\n\t\t\tconsole.style.fontFamily = "monospace";\r\n\t\t\tconsole.setAttribute("wrap", "off");\r\n\t\t\tconsole.wrap = "off";\r\n\t\t\tconsole.style.overflow = "auto";\r\n\t\t\tconsole.style.width = "700px";\r\n\t\t\tconsole.style.height = "350px";\r\n\t\t\tconsole.style.margin = "5px";\r\n\t\t\tdocumentForm.appendChild(console);\r\n\t\t}\r\n\r\n\t\tconsole.value += message + "\\n";\r\n\r\n\t\tconsole.scrollTop = console.scrollHeight - console.clientHeight;\r\n\t} catch (ex) {\r\n\t\talert("Exception: " + ex.name + " Message: " + ex.message);\r\n\t}\r\n};\r\n';
},function(e,t,n){n(3)(n(44))},function(e,t){e.exports='/*\r\n\tQueue Plug-in\r\n\t\r\n\tFeatures:\r\n\t\t*Adds a cancelQueue() method for cancelling the entire queue.\r\n\t\t*All queued files are uploaded when startUpload() is called.\r\n\t\t*If false is returned from uploadComplete then the queue upload is stopped.\r\n\t\t If false is not returned (strict comparison) then the queue upload is continued.\r\n\t\t*Adds a QueueComplete event that is fired when all the queued files have finished uploading.\r\n\t\t Set the event handler with the queue_complete_handler setting.\r\n\t\t\r\n\t*/\r\n\r\nvar SWFUpload;\r\nif (typeof(SWFUpload) === "function") {\r\n\tSWFUpload.queue = {};\r\n\t\r\n\tSWFUpload.prototype.initSettings = (function (oldInitSettings) {\r\n\t\treturn function () {\r\n\t\t\tif (typeof(oldInitSettings) === "function") {\r\n\t\t\t\toldInitSettings.call(this);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tthis.queueSettings = {};\r\n\t\t\t\r\n\t\t\tthis.queueSettings.queue_cancelled_flag = false;\r\n\t\t\tthis.queueSettings.queue_upload_count = 0;\r\n\t\t\t\r\n\t\t\tthis.queueSettings.user_upload_complete_handler = this.settings.upload_complete_handler;\r\n\t\t\tthis.queueSettings.user_upload_start_handler = this.settings.upload_start_handler;\r\n\t\t\tthis.settings.upload_complete_handler = SWFUpload.queue.uploadCompleteHandler;\r\n\t\t\tthis.settings.upload_start_handler = SWFUpload.queue.uploadStartHandler;\r\n\t\t\t\r\n\t\t\tthis.settings.queue_complete_handler = this.settings.queue_complete_handler || null;\r\n\t\t};\r\n\t})(SWFUpload.prototype.initSettings);\r\n\r\n\tSWFUpload.prototype.startUpload = function (fileID) {\r\n\t\tthis.queueSettings.queue_cancelled_flag = false;\r\n\t\tthis.callFlash("StartUpload", [fileID]);\r\n\t};\r\n\r\n\tSWFUpload.prototype.cancelQueue = function () {\r\n\t\tthis.queueSettings.queue_cancelled_flag = true;\r\n\t\tthis.stopUpload();\r\n\t\t\r\n\t\tvar stats = this.getStats();\r\n\t\twhile (stats.files_queued > 0) {\r\n\t\t\tthis.cancelUpload();\r\n\t\t\tstats = this.getStats();\r\n\t\t}\r\n\t};\r\n\t\r\n\tSWFUpload.queue.uploadStartHandler = function (file) {\r\n\t\tvar returnValue;\r\n\t\tif (typeof(this.queueSettings.user_upload_start_handler) === "function") {\r\n\t\t\treturnValue = this.queueSettings.user_upload_start_handler.call(this, file);\r\n\t\t}\r\n\t\t\r\n\t\t// To prevent upload a real "FALSE" value must be returned, otherwise default to a real "TRUE" value.\r\n\t\treturnValue = (returnValue === false) ? false : true;\r\n\t\t\r\n\t\tthis.queueSettings.queue_cancelled_flag = !returnValue;\r\n\r\n\t\treturn returnValue;\r\n\t};\r\n\t\r\n\tSWFUpload.queue.uploadCompleteHandler = function (file) {\r\n\t\tvar user_upload_complete_handler = this.queueSettings.user_upload_complete_handler;\r\n\t\tvar continueUpload;\r\n\t\t\r\n\t\tif (file.filestatus === SWFUpload.FILE_STATUS.COMPLETE) {\r\n\t\t\tthis.queueSettings.queue_upload_count++;\r\n\t\t}\r\n\r\n\t\tif (typeof(user_upload_complete_handler) === "function") {\r\n\t\t\tcontinueUpload = (user_upload_complete_handler.call(this, file) === false) ? false : true;\r\n\t\t} else if (file.filestatus === SWFUpload.FILE_STATUS.QUEUED) {\r\n\t\t\t// If the file was stopped and re-queued don\'t restart the upload\r\n\t\t\tcontinueUpload = false;\r\n\t\t} else {\r\n\t\t\tcontinueUpload = true;\r\n\t\t}\r\n\t\t\r\n\t\tif (continueUpload) {\r\n\t\t\tvar stats = this.getStats();\r\n\t\t\tif (stats.files_queued > 0 && this.queueSettings.queue_cancelled_flag === false) {\r\n\t\t\t\tthis.startUpload();\r\n\t\t\t} else if (this.queueSettings.queue_cancelled_flag === false) {\r\n\t\t\t\tthis.queueEvent("queue_complete_handler", [this.queueSettings.queue_upload_count]);\r\n\t\t\t\tthis.queueSettings.queue_upload_count = 0;\r\n\t\t\t} else {\r\n\t\t\t\tthis.queueSettings.queue_cancelled_flag = false;\r\n\t\t\t\tthis.queueSettings.queue_upload_count = 0;\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n}'},function(e,t,n){n(3)(n(46))},function(e,t){e.exports='/*\r\n\tCookie Plug-in\r\n\t\r\n\tThis plug in automatically gets all the cookies for this site and adds them to the post_params.\r\n\tCookies are loaded only on initialization.  The refreshCookies function can be called to update the post_params.\r\n\tThe cookies will override any other post params with the same name.\r\n*/\r\n\r\nvar SWFUpload;\r\nif (typeof(SWFUpload) === "function") {\r\n\tSWFUpload.prototype.initSettings = function (oldInitSettings) {\r\n\t\treturn function () {\r\n\t\t\tif (typeof(oldInitSettings) === "function") {\r\n\t\t\t\toldInitSettings.call(this);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tthis.refreshCookies(false);\t// The false parameter must be sent since SWFUpload has not initialzed at this point\r\n\t\t};\r\n\t}(SWFUpload.prototype.initSettings);\r\n\t\r\n\t// refreshes the post_params and updates SWFUpload.  The sendToFlash parameters is optional and defaults to True\r\n\tSWFUpload.prototype.refreshCookies = function (sendToFlash) {\r\n\t\tif (sendToFlash === undefined) {\r\n\t\t\tsendToFlash = true;\r\n\t\t}\r\n\t\tsendToFlash = !!sendToFlash;\r\n\t\t\r\n\t\t// Get the post_params object\r\n\t\tvar postParams = this.settings.post_params;\r\n\t\t\r\n\t\t// Get the cookies\r\n\t\tvar i, cookieArray = document.cookie.split(\';\'), caLength = cookieArray.length, c, eqIndex, name, value;\r\n\t\tfor (i = 0; i < caLength; i++) {\r\n\t\t\tc = cookieArray[i];\r\n\t\t\t\r\n\t\t\t// Left Trim spaces\r\n\t\t\twhile (c.charAt(0) === " ") {\r\n\t\t\t\tc = c.substring(1, c.length);\r\n\t\t\t}\r\n\t\t\teqIndex = c.indexOf("=");\r\n\t\t\tif (eqIndex > 0) {\r\n\t\t\t\tname = c.substring(0, eqIndex);\r\n\t\t\t\tvalue = c.substring(eqIndex + 1);\r\n\t\t\t\tpostParams[name] = value;\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tif (sendToFlash) {\r\n\t\t\tthis.setPostParams(postParams);\r\n\t\t}\r\n\t};\r\n\r\n}\r\n'},function(e,t,n){n(3)(n(48))},function(e,t){e.exports='/*\nCopyright 2012 Igor Vaynberg\n\nVersion: 3.5.1 Timestamp: Tue Jul 22 18:58:56 EDT 2014\n\nThis software is licensed under the Apache License, Version 2.0 (the "Apache License") or the GNU\nGeneral Public License version 2 (the "GPL License"). You may choose either license to govern your\nuse of this software only upon the condition that you accept all of the terms of either the Apache\nLicense or the GPL License.\n\nYou may obtain a copy of the Apache License and the GPL License at:\n\n    http://www.apache.org/licenses/LICENSE-2.0\n    http://www.gnu.org/licenses/gpl-2.0.html\n\nUnless required by applicable law or agreed to in writing, software distributed under the\nApache License or the GPL License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR\nCONDITIONS OF ANY KIND, either express or implied. See the Apache License and the GPL License for\nthe specific language governing permissions and limitations under the Apache License and the GPL License.\n*/\n(function ($) {\n    if(typeof $.fn.each2 == "undefined") {\n        $.extend($.fn, {\n            /*\n            * 4-10 times faster .each replacement\n            * use it carefully, as it overrides jQuery context of element on each iteration\n            */\n            each2 : function (c) {\n                var j = $([0]), i = -1, l = this.length;\n                while (\n                    ++i < l\n                    && (j.context = j[0] = this[i])\n                    && c.call(j[0], i, j) !== false //"this"=DOM, i=index, j=jQuery object\n                );\n                return this;\n            }\n        });\n    }\n})(jQuery);\n\n(function ($, undefined) {\n    "use strict";\n    /*global document, window, jQuery, console */\n\n    if (window.Select2 !== undefined) {\n        return;\n    }\n\n    var KEY, AbstractSelect2, SingleSelect2, MultiSelect2, nextUid, sizer,\n        lastMousePosition={x:0,y:0}, $document, scrollBarDimensions,\n\n    KEY = {\n        TAB: 9,\n        ENTER: 13,\n        ESC: 27,\n        SPACE: 32,\n        LEFT: 37,\n        UP: 38,\n        RIGHT: 39,\n        DOWN: 40,\n        SHIFT: 16,\n        CTRL: 17,\n        ALT: 18,\n        PAGE_UP: 33,\n        PAGE_DOWN: 34,\n        HOME: 36,\n        END: 35,\n        BACKSPACE: 8,\n        DELETE: 46,\n        isArrow: function (k) {\n            k = k.which ? k.which : k;\n            switch (k) {\n            case KEY.LEFT:\n            case KEY.RIGHT:\n            case KEY.UP:\n            case KEY.DOWN:\n                return true;\n            }\n            return false;\n        },\n        isControl: function (e) {\n            var k = e.which;\n            switch (k) {\n            case KEY.SHIFT:\n            case KEY.CTRL:\n            case KEY.ALT:\n                return true;\n            }\n\n            if (e.metaKey) return true;\n\n            return false;\n        },\n        isFunctionKey: function (k) {\n            k = k.which ? k.which : k;\n            return k >= 112 && k <= 123;\n        }\n    },\n    MEASURE_SCROLLBAR_TEMPLATE = "<div class=\'select2-measure-scrollbar\'></div>",\n\n    DIACRITICS = {"\\u24B6":"A","\\uFF21":"A","\\u00C0":"A","\\u00C1":"A","\\u00C2":"A","\\u1EA6":"A","\\u1EA4":"A","\\u1EAA":"A","\\u1EA8":"A","\\u00C3":"A","\\u0100":"A","\\u0102":"A","\\u1EB0":"A","\\u1EAE":"A","\\u1EB4":"A","\\u1EB2":"A","\\u0226":"A","\\u01E0":"A","\\u00C4":"A","\\u01DE":"A","\\u1EA2":"A","\\u00C5":"A","\\u01FA":"A","\\u01CD":"A","\\u0200":"A","\\u0202":"A","\\u1EA0":"A","\\u1EAC":"A","\\u1EB6":"A","\\u1E00":"A","\\u0104":"A","\\u023A":"A","\\u2C6F":"A","\\uA732":"AA","\\u00C6":"AE","\\u01FC":"AE","\\u01E2":"AE","\\uA734":"AO","\\uA736":"AU","\\uA738":"AV","\\uA73A":"AV","\\uA73C":"AY","\\u24B7":"B","\\uFF22":"B","\\u1E02":"B","\\u1E04":"B","\\u1E06":"B","\\u0243":"B","\\u0182":"B","\\u0181":"B","\\u24B8":"C","\\uFF23":"C","\\u0106":"C","\\u0108":"C","\\u010A":"C","\\u010C":"C","\\u00C7":"C","\\u1E08":"C","\\u0187":"C","\\u023B":"C","\\uA73E":"C","\\u24B9":"D","\\uFF24":"D","\\u1E0A":"D","\\u010E":"D","\\u1E0C":"D","\\u1E10":"D","\\u1E12":"D","\\u1E0E":"D","\\u0110":"D","\\u018B":"D","\\u018A":"D","\\u0189":"D","\\uA779":"D","\\u01F1":"DZ","\\u01C4":"DZ","\\u01F2":"Dz","\\u01C5":"Dz","\\u24BA":"E","\\uFF25":"E","\\u00C8":"E","\\u00C9":"E","\\u00CA":"E","\\u1EC0":"E","\\u1EBE":"E","\\u1EC4":"E","\\u1EC2":"E","\\u1EBC":"E","\\u0112":"E","\\u1E14":"E","\\u1E16":"E","\\u0114":"E","\\u0116":"E","\\u00CB":"E","\\u1EBA":"E","\\u011A":"E","\\u0204":"E","\\u0206":"E","\\u1EB8":"E","\\u1EC6":"E","\\u0228":"E","\\u1E1C":"E","\\u0118":"E","\\u1E18":"E","\\u1E1A":"E","\\u0190":"E","\\u018E":"E","\\u24BB":"F","\\uFF26":"F","\\u1E1E":"F","\\u0191":"F","\\uA77B":"F","\\u24BC":"G","\\uFF27":"G","\\u01F4":"G","\\u011C":"G","\\u1E20":"G","\\u011E":"G","\\u0120":"G","\\u01E6":"G","\\u0122":"G","\\u01E4":"G","\\u0193":"G","\\uA7A0":"G","\\uA77D":"G","\\uA77E":"G","\\u24BD":"H","\\uFF28":"H","\\u0124":"H","\\u1E22":"H","\\u1E26":"H","\\u021E":"H","\\u1E24":"H","\\u1E28":"H","\\u1E2A":"H","\\u0126":"H","\\u2C67":"H","\\u2C75":"H","\\uA78D":"H","\\u24BE":"I","\\uFF29":"I","\\u00CC":"I","\\u00CD":"I","\\u00CE":"I","\\u0128":"I","\\u012A":"I","\\u012C":"I","\\u0130":"I","\\u00CF":"I","\\u1E2E":"I","\\u1EC8":"I","\\u01CF":"I","\\u0208":"I","\\u020A":"I","\\u1ECA":"I","\\u012E":"I","\\u1E2C":"I","\\u0197":"I","\\u24BF":"J","\\uFF2A":"J","\\u0134":"J","\\u0248":"J","\\u24C0":"K","\\uFF2B":"K","\\u1E30":"K","\\u01E8":"K","\\u1E32":"K","\\u0136":"K","\\u1E34":"K","\\u0198":"K","\\u2C69":"K","\\uA740":"K","\\uA742":"K","\\uA744":"K","\\uA7A2":"K","\\u24C1":"L","\\uFF2C":"L","\\u013F":"L","\\u0139":"L","\\u013D":"L","\\u1E36":"L","\\u1E38":"L","\\u013B":"L","\\u1E3C":"L","\\u1E3A":"L","\\u0141":"L","\\u023D":"L","\\u2C62":"L","\\u2C60":"L","\\uA748":"L","\\uA746":"L","\\uA780":"L","\\u01C7":"LJ","\\u01C8":"Lj","\\u24C2":"M","\\uFF2D":"M","\\u1E3E":"M","\\u1E40":"M","\\u1E42":"M","\\u2C6E":"M","\\u019C":"M","\\u24C3":"N","\\uFF2E":"N","\\u01F8":"N","\\u0143":"N","\\u00D1":"N","\\u1E44":"N","\\u0147":"N","\\u1E46":"N","\\u0145":"N","\\u1E4A":"N","\\u1E48":"N","\\u0220":"N","\\u019D":"N","\\uA790":"N","\\uA7A4":"N","\\u01CA":"NJ","\\u01CB":"Nj","\\u24C4":"O","\\uFF2F":"O","\\u00D2":"O","\\u00D3":"O","\\u00D4":"O","\\u1ED2":"O","\\u1ED0":"O","\\u1ED6":"O","\\u1ED4":"O","\\u00D5":"O","\\u1E4C":"O","\\u022C":"O","\\u1E4E":"O","\\u014C":"O","\\u1E50":"O","\\u1E52":"O","\\u014E":"O","\\u022E":"O","\\u0230":"O","\\u00D6":"O","\\u022A":"O","\\u1ECE":"O","\\u0150":"O","\\u01D1":"O","\\u020C":"O","\\u020E":"O","\\u01A0":"O","\\u1EDC":"O","\\u1EDA":"O","\\u1EE0":"O","\\u1EDE":"O","\\u1EE2":"O","\\u1ECC":"O","\\u1ED8":"O","\\u01EA":"O","\\u01EC":"O","\\u00D8":"O","\\u01FE":"O","\\u0186":"O","\\u019F":"O","\\uA74A":"O","\\uA74C":"O","\\u01A2":"OI","\\uA74E":"OO","\\u0222":"OU","\\u24C5":"P","\\uFF30":"P","\\u1E54":"P","\\u1E56":"P","\\u01A4":"P","\\u2C63":"P","\\uA750":"P","\\uA752":"P","\\uA754":"P","\\u24C6":"Q","\\uFF31":"Q","\\uA756":"Q","\\uA758":"Q","\\u024A":"Q","\\u24C7":"R","\\uFF32":"R","\\u0154":"R","\\u1E58":"R","\\u0158":"R","\\u0210":"R","\\u0212":"R","\\u1E5A":"R","\\u1E5C":"R","\\u0156":"R","\\u1E5E":"R","\\u024C":"R","\\u2C64":"R","\\uA75A":"R","\\uA7A6":"R","\\uA782":"R","\\u24C8":"S","\\uFF33":"S","\\u1E9E":"S","\\u015A":"S","\\u1E64":"S","\\u015C":"S","\\u1E60":"S","\\u0160":"S","\\u1E66":"S","\\u1E62":"S","\\u1E68":"S","\\u0218":"S","\\u015E":"S","\\u2C7E":"S","\\uA7A8":"S","\\uA784":"S","\\u24C9":"T","\\uFF34":"T","\\u1E6A":"T","\\u0164":"T","\\u1E6C":"T","\\u021A":"T","\\u0162":"T","\\u1E70":"T","\\u1E6E":"T","\\u0166":"T","\\u01AC":"T","\\u01AE":"T","\\u023E":"T","\\uA786":"T","\\uA728":"TZ","\\u24CA":"U","\\uFF35":"U","\\u00D9":"U","\\u00DA":"U","\\u00DB":"U","\\u0168":"U","\\u1E78":"U","\\u016A":"U","\\u1E7A":"U","\\u016C":"U","\\u00DC":"U","\\u01DB":"U","\\u01D7":"U","\\u01D5":"U","\\u01D9":"U","\\u1EE6":"U","\\u016E":"U","\\u0170":"U","\\u01D3":"U","\\u0214":"U","\\u0216":"U","\\u01AF":"U","\\u1EEA":"U","\\u1EE8":"U","\\u1EEE":"U","\\u1EEC":"U","\\u1EF0":"U","\\u1EE4":"U","\\u1E72":"U","\\u0172":"U","\\u1E76":"U","\\u1E74":"U","\\u0244":"U","\\u24CB":"V","\\uFF36":"V","\\u1E7C":"V","\\u1E7E":"V","\\u01B2":"V","\\uA75E":"V","\\u0245":"V","\\uA760":"VY","\\u24CC":"W","\\uFF37":"W","\\u1E80":"W","\\u1E82":"W","\\u0174":"W","\\u1E86":"W","\\u1E84":"W","\\u1E88":"W","\\u2C72":"W","\\u24CD":"X","\\uFF38":"X","\\u1E8A":"X","\\u1E8C":"X","\\u24CE":"Y","\\uFF39":"Y","\\u1EF2":"Y","\\u00DD":"Y","\\u0176":"Y","\\u1EF8":"Y","\\u0232":"Y","\\u1E8E":"Y","\\u0178":"Y","\\u1EF6":"Y","\\u1EF4":"Y","\\u01B3":"Y","\\u024E":"Y","\\u1EFE":"Y","\\u24CF":"Z","\\uFF3A":"Z","\\u0179":"Z","\\u1E90":"Z","\\u017B":"Z","\\u017D":"Z","\\u1E92":"Z","\\u1E94":"Z","\\u01B5":"Z","\\u0224":"Z","\\u2C7F":"Z","\\u2C6B":"Z","\\uA762":"Z","\\u24D0":"a","\\uFF41":"a","\\u1E9A":"a","\\u00E0":"a","\\u00E1":"a","\\u00E2":"a","\\u1EA7":"a","\\u1EA5":"a","\\u1EAB":"a","\\u1EA9":"a","\\u00E3":"a","\\u0101":"a","\\u0103":"a","\\u1EB1":"a","\\u1EAF":"a","\\u1EB5":"a","\\u1EB3":"a","\\u0227":"a","\\u01E1":"a","\\u00E4":"a","\\u01DF":"a","\\u1EA3":"a","\\u00E5":"a","\\u01FB":"a","\\u01CE":"a","\\u0201":"a","\\u0203":"a","\\u1EA1":"a","\\u1EAD":"a","\\u1EB7":"a","\\u1E01":"a","\\u0105":"a","\\u2C65":"a","\\u0250":"a","\\uA733":"aa","\\u00E6":"ae","\\u01FD":"ae","\\u01E3":"ae","\\uA735":"ao","\\uA737":"au","\\uA739":"av","\\uA73B":"av","\\uA73D":"ay","\\u24D1":"b","\\uFF42":"b","\\u1E03":"b","\\u1E05":"b","\\u1E07":"b","\\u0180":"b","\\u0183":"b","\\u0253":"b","\\u24D2":"c","\\uFF43":"c","\\u0107":"c","\\u0109":"c","\\u010B":"c","\\u010D":"c","\\u00E7":"c","\\u1E09":"c","\\u0188":"c","\\u023C":"c","\\uA73F":"c","\\u2184":"c","\\u24D3":"d","\\uFF44":"d","\\u1E0B":"d","\\u010F":"d","\\u1E0D":"d","\\u1E11":"d","\\u1E13":"d","\\u1E0F":"d","\\u0111":"d","\\u018C":"d","\\u0256":"d","\\u0257":"d","\\uA77A":"d","\\u01F3":"dz","\\u01C6":"dz","\\u24D4":"e","\\uFF45":"e","\\u00E8":"e","\\u00E9":"e","\\u00EA":"e","\\u1EC1":"e","\\u1EBF":"e","\\u1EC5":"e","\\u1EC3":"e","\\u1EBD":"e","\\u0113":"e","\\u1E15":"e","\\u1E17":"e","\\u0115":"e","\\u0117":"e","\\u00EB":"e","\\u1EBB":"e","\\u011B":"e","\\u0205":"e","\\u0207":"e","\\u1EB9":"e","\\u1EC7":"e","\\u0229":"e","\\u1E1D":"e","\\u0119":"e","\\u1E19":"e","\\u1E1B":"e","\\u0247":"e","\\u025B":"e","\\u01DD":"e","\\u24D5":"f","\\uFF46":"f","\\u1E1F":"f","\\u0192":"f","\\uA77C":"f","\\u24D6":"g","\\uFF47":"g","\\u01F5":"g","\\u011D":"g","\\u1E21":"g","\\u011F":"g","\\u0121":"g","\\u01E7":"g","\\u0123":"g","\\u01E5":"g","\\u0260":"g","\\uA7A1":"g","\\u1D79":"g","\\uA77F":"g","\\u24D7":"h","\\uFF48":"h","\\u0125":"h","\\u1E23":"h","\\u1E27":"h","\\u021F":"h","\\u1E25":"h","\\u1E29":"h","\\u1E2B":"h","\\u1E96":"h","\\u0127":"h","\\u2C68":"h","\\u2C76":"h","\\u0265":"h","\\u0195":"hv","\\u24D8":"i","\\uFF49":"i","\\u00EC":"i","\\u00ED":"i","\\u00EE":"i","\\u0129":"i","\\u012B":"i","\\u012D":"i","\\u00EF":"i","\\u1E2F":"i","\\u1EC9":"i","\\u01D0":"i","\\u0209":"i","\\u020B":"i","\\u1ECB":"i","\\u012F":"i","\\u1E2D":"i","\\u0268":"i","\\u0131":"i","\\u24D9":"j","\\uFF4A":"j","\\u0135":"j","\\u01F0":"j","\\u0249":"j","\\u24DA":"k","\\uFF4B":"k","\\u1E31":"k","\\u01E9":"k","\\u1E33":"k","\\u0137":"k","\\u1E35":"k","\\u0199":"k","\\u2C6A":"k","\\uA741":"k","\\uA743":"k","\\uA745":"k","\\uA7A3":"k","\\u24DB":"l","\\uFF4C":"l","\\u0140":"l","\\u013A":"l","\\u013E":"l","\\u1E37":"l","\\u1E39":"l","\\u013C":"l","\\u1E3D":"l","\\u1E3B":"l","\\u017F":"l","\\u0142":"l","\\u019A":"l","\\u026B":"l","\\u2C61":"l","\\uA749":"l","\\uA781":"l","\\uA747":"l","\\u01C9":"lj","\\u24DC":"m","\\uFF4D":"m","\\u1E3F":"m","\\u1E41":"m","\\u1E43":"m","\\u0271":"m","\\u026F":"m","\\u24DD":"n","\\uFF4E":"n","\\u01F9":"n","\\u0144":"n","\\u00F1":"n","\\u1E45":"n","\\u0148":"n","\\u1E47":"n","\\u0146":"n","\\u1E4B":"n","\\u1E49":"n","\\u019E":"n","\\u0272":"n","\\u0149":"n","\\uA791":"n","\\uA7A5":"n","\\u01CC":"nj","\\u24DE":"o","\\uFF4F":"o","\\u00F2":"o","\\u00F3":"o","\\u00F4":"o","\\u1ED3":"o","\\u1ED1":"o","\\u1ED7":"o","\\u1ED5":"o","\\u00F5":"o","\\u1E4D":"o","\\u022D":"o","\\u1E4F":"o","\\u014D":"o","\\u1E51":"o","\\u1E53":"o","\\u014F":"o","\\u022F":"o","\\u0231":"o","\\u00F6":"o","\\u022B":"o","\\u1ECF":"o","\\u0151":"o","\\u01D2":"o","\\u020D":"o","\\u020F":"o","\\u01A1":"o","\\u1EDD":"o","\\u1EDB":"o","\\u1EE1":"o","\\u1EDF":"o","\\u1EE3":"o","\\u1ECD":"o","\\u1ED9":"o","\\u01EB":"o","\\u01ED":"o","\\u00F8":"o","\\u01FF":"o","\\u0254":"o","\\uA74B":"o","\\uA74D":"o","\\u0275":"o","\\u01A3":"oi","\\u0223":"ou","\\uA74F":"oo","\\u24DF":"p","\\uFF50":"p","\\u1E55":"p","\\u1E57":"p","\\u01A5":"p","\\u1D7D":"p","\\uA751":"p","\\uA753":"p","\\uA755":"p","\\u24E0":"q","\\uFF51":"q","\\u024B":"q","\\uA757":"q","\\uA759":"q","\\u24E1":"r","\\uFF52":"r","\\u0155":"r","\\u1E59":"r","\\u0159":"r","\\u0211":"r","\\u0213":"r","\\u1E5B":"r","\\u1E5D":"r","\\u0157":"r","\\u1E5F":"r","\\u024D":"r","\\u027D":"r","\\uA75B":"r","\\uA7A7":"r","\\uA783":"r","\\u24E2":"s","\\uFF53":"s","\\u00DF":"s","\\u015B":"s","\\u1E65":"s","\\u015D":"s","\\u1E61":"s","\\u0161":"s","\\u1E67":"s","\\u1E63":"s","\\u1E69":"s","\\u0219":"s","\\u015F":"s","\\u023F":"s","\\uA7A9":"s","\\uA785":"s","\\u1E9B":"s","\\u24E3":"t","\\uFF54":"t","\\u1E6B":"t","\\u1E97":"t","\\u0165":"t","\\u1E6D":"t","\\u021B":"t","\\u0163":"t","\\u1E71":"t","\\u1E6F":"t","\\u0167":"t","\\u01AD":"t","\\u0288":"t","\\u2C66":"t","\\uA787":"t","\\uA729":"tz","\\u24E4":"u","\\uFF55":"u","\\u00F9":"u","\\u00FA":"u","\\u00FB":"u","\\u0169":"u","\\u1E79":"u","\\u016B":"u","\\u1E7B":"u","\\u016D":"u","\\u00FC":"u","\\u01DC":"u","\\u01D8":"u","\\u01D6":"u","\\u01DA":"u","\\u1EE7":"u","\\u016F":"u","\\u0171":"u","\\u01D4":"u","\\u0215":"u","\\u0217":"u","\\u01B0":"u","\\u1EEB":"u","\\u1EE9":"u","\\u1EEF":"u","\\u1EED":"u","\\u1EF1":"u","\\u1EE5":"u","\\u1E73":"u","\\u0173":"u","\\u1E77":"u","\\u1E75":"u","\\u0289":"u","\\u24E5":"v","\\uFF56":"v","\\u1E7D":"v","\\u1E7F":"v","\\u028B":"v","\\uA75F":"v","\\u028C":"v","\\uA761":"vy","\\u24E6":"w","\\uFF57":"w","\\u1E81":"w","\\u1E83":"w","\\u0175":"w","\\u1E87":"w","\\u1E85":"w","\\u1E98":"w","\\u1E89":"w","\\u2C73":"w","\\u24E7":"x","\\uFF58":"x","\\u1E8B":"x","\\u1E8D":"x","\\u24E8":"y","\\uFF59":"y","\\u1EF3":"y","\\u00FD":"y","\\u0177":"y","\\u1EF9":"y","\\u0233":"y","\\u1E8F":"y","\\u00FF":"y","\\u1EF7":"y","\\u1E99":"y","\\u1EF5":"y","\\u01B4":"y","\\u024F":"y","\\u1EFF":"y","\\u24E9":"z","\\uFF5A":"z","\\u017A":"z","\\u1E91":"z","\\u017C":"z","\\u017E":"z","\\u1E93":"z","\\u1E95":"z","\\u01B6":"z","\\u0225":"z","\\u0240":"z","\\u2C6C":"z","\\uA763":"z","\\u0386":"\\u0391","\\u0388":"\\u0395","\\u0389":"\\u0397","\\u038A":"\\u0399","\\u03AA":"\\u0399","\\u038C":"\\u039F","\\u038E":"\\u03A5","\\u03AB":"\\u03A5","\\u038F":"\\u03A9","\\u03AC":"\\u03B1","\\u03AD":"\\u03B5","\\u03AE":"\\u03B7","\\u03AF":"\\u03B9","\\u03CA":"\\u03B9","\\u0390":"\\u03B9","\\u03CC":"\\u03BF","\\u03CD":"\\u03C5","\\u03CB":"\\u03C5","\\u03B0":"\\u03C5","\\u03C9":"\\u03C9","\\u03C2":"\\u03C3"};\n\n    $document = $(document);\n\n    nextUid=(function() { var counter=1; return function() { return counter++; }; }());\n\n\n    function reinsertElement(element) {\n        var placeholder = $(document.createTextNode(\'\'));\n\n        element.before(placeholder);\n        placeholder.before(element);\n        placeholder.remove();\n    }\n\n    function stripDiacritics(str) {\n        // Used \'uni range + named function\' from http://jsperf.com/diacritics/18\n        function match(a) {\n            return DIACRITICS[a] || a;\n        }\n\n        return str.replace(/[^\\u0000-\\u007E]/g, match);\n    }\n\n    function indexOf(value, array) {\n        var i = 0, l = array.length;\n        for (; i < l; i = i + 1) {\n            if (equal(value, array[i])) return i;\n        }\n        return -1;\n    }\n\n    function measureScrollbar () {\n        var $template = $( MEASURE_SCROLLBAR_TEMPLATE );\n        $template.appendTo(\'body\');\n\n        var dim = {\n            width: $template.width() - $template[0].clientWidth,\n            height: $template.height() - $template[0].clientHeight\n        };\n        $template.remove();\n\n        return dim;\n    }\n\n    /**\n     * Compares equality of a and b\n     * @param a\n     * @param b\n     */\n    function equal(a, b) {\n        if (a === b) return true;\n        if (a === undefined || b === undefined) return false;\n        if (a === null || b === null) return false;\n        // Check whether \'a\' or \'b\' is a string (primitive or object).\n        // The concatenation of an empty string (+\'\') converts its argument to a string\'s primitive.\n        if (a.constructor === String) return a+\'\' === b+\'\'; // a+\'\' - in case \'a\' is a String object\n        if (b.constructor === String) return b+\'\' === a+\'\'; // b+\'\' - in case \'b\' is a String object\n        return false;\n    }\n\n    /**\n     * Splits the string into an array of values, trimming each value. An empty array is returned for nulls or empty\n     * strings\n     * @param string\n     * @param separator\n     */\n    function splitVal(string, separator) {\n        var val, i, l;\n        if (string === null || string.length < 1) return [];\n        val = string.split(separator);\n        for (i = 0, l = val.length; i < l; i = i + 1) val[i] = $.trim(val[i]);\n        return val;\n    }\n\n    function getSideBorderPadding(element) {\n        return element.outerWidth(false) - element.width();\n    }\n\n    function installKeyUpChangeEvent(element) {\n        var key="keyup-change-value";\n        element.on("keydown", function () {\n            if ($.data(element, key) === undefined) {\n                $.data(element, key, element.val());\n            }\n        });\n        element.on("keyup", function () {\n            var val= $.data(element, key);\n            if (val !== undefined && element.val() !== val) {\n                $.removeData(element, key);\n                element.trigger("keyup-change");\n            }\n        });\n    }\n\n\n    /**\n     * filters mouse events so an event is fired only if the mouse moved.\n     *\n     * filters out mouse events that occur when mouse is stationary but\n     * the elements under the pointer are scrolled.\n     */\n    function installFilteredMouseMove(element) {\n        element.on("mousemove", function (e) {\n            var lastpos = lastMousePosition;\n            if (lastpos === undefined || lastpos.x !== e.pageX || lastpos.y !== e.pageY) {\n                $(e.target).trigger("mousemove-filtered", e);\n            }\n        });\n    }\n\n    /**\n     * Debounces a function. Returns a function that calls the original fn function only if no invocations have been made\n     * within the last quietMillis milliseconds.\n     *\n     * @param quietMillis number of milliseconds to wait before invoking fn\n     * @param fn function to be debounced\n     * @param ctx object to be used as this reference within fn\n     * @return debounced version of fn\n     */\n    function debounce(quietMillis, fn, ctx) {\n        ctx = ctx || undefined;\n        var timeout;\n        return function () {\n            var args = arguments;\n            window.clearTimeout(timeout);\n            timeout = window.setTimeout(function() {\n                fn.apply(ctx, args);\n            }, quietMillis);\n        };\n    }\n\n    function installDebouncedScroll(threshold, element) {\n        var notify = debounce(threshold, function (e) { element.trigger("scroll-debounced", e);});\n        element.on("scroll", function (e) {\n            if (indexOf(e.target, element.get()) >= 0) notify(e);\n        });\n    }\n\n    function focus($el) {\n        if ($el[0] === document.activeElement) return;\n\n        /* set the focus in a 0 timeout - that way the focus is set after the processing\n            of the current event has finished - which seems like the only reliable way\n            to set focus */\n        window.setTimeout(function() {\n            var el=$el[0], pos=$el.val().length, range;\n\n            $el.focus();\n\n            /* make sure el received focus so we do not error out when trying to manipulate the caret.\n                sometimes modals or others listeners may steal it after its set */\n            var isVisible = (el.offsetWidth > 0 || el.offsetHeight > 0);\n            if (isVisible && el === document.activeElement) {\n\n                /* after the focus is set move the caret to the end, necessary when we val()\n                    just before setting focus */\n                if(el.setSelectionRange)\n                {\n                    el.setSelectionRange(pos, pos);\n                }\n                else if (el.createTextRange) {\n                    range = el.createTextRange();\n                    range.collapse(false);\n                    range.select();\n                }\n            }\n        }, 0);\n    }\n\n    function getCursorInfo(el) {\n        el = $(el)[0];\n        var offset = 0;\n        var length = 0;\n        if (\'selectionStart\' in el) {\n            offset = el.selectionStart;\n            length = el.selectionEnd - offset;\n        } else if (\'selection\' in document) {\n            el.focus();\n            var sel = document.selection.createRange();\n            length = document.selection.createRange().text.length;\n            sel.moveStart(\'character\', -el.value.length);\n            offset = sel.text.length - length;\n        }\n        return { offset: offset, length: length };\n    }\n\n    function killEvent(event) {\n        event.preventDefault();\n        event.stopPropagation();\n    }\n    function killEventImmediately(event) {\n        event.preventDefault();\n        event.stopImmediatePropagation();\n    }\n\n    function measureTextWidth(e) {\n        if (!sizer){\n            var style = e[0].currentStyle || window.getComputedStyle(e[0], null);\n            sizer = $(document.createElement("div")).css({\n                position: "absolute",\n                left: "-10000px",\n                top: "-10000px",\n                display: "none",\n                fontSize: style.fontSize,\n                fontFamily: style.fontFamily,\n                fontStyle: style.fontStyle,\n                fontWeight: style.fontWeight,\n                letterSpacing: style.letterSpacing,\n                textTransform: style.textTransform,\n                whiteSpace: "nowrap"\n            });\n            sizer.attr("class","select2-sizer");\n            $("body").append(sizer);\n        }\n        sizer.text(e.val());\n        return sizer.width();\n    }\n\n    function syncCssClasses(dest, src, adapter) {\n        var classes, replacements = [], adapted;\n\n        classes = $.trim(dest.attr("class"));\n\n        if (classes) {\n            classes = \'\' + classes; // for IE which returns object\n\n            $(classes.split(/\\s+/)).each2(function() {\n                if (this.indexOf("select2-") === 0) {\n                    replacements.push(this);\n                }\n            });\n        }\n\n        classes = $.trim(src.attr("class"));\n\n        if (classes) {\n            classes = \'\' + classes; // for IE which returns object\n\n            $(classes.split(/\\s+/)).each2(function() {\n                if (this.indexOf("select2-") !== 0) {\n                    adapted = adapter(this);\n\n                    if (adapted) {\n                        replacements.push(adapted);\n                    }\n                }\n            });\n        }\n\n        dest.attr("class", replacements.join(" "));\n    }\n\n\n    function markMatch(text, term, markup, escapeMarkup) {\n        var match=stripDiacritics(text.toUpperCase()).indexOf(stripDiacritics(term.toUpperCase())),\n            tl=term.length;\n\n        if (match<0) {\n            markup.push(escapeMarkup(text));\n            return;\n        }\n\n        markup.push(escapeMarkup(text.substring(0, match)));\n        markup.push("<span class=\'select2-match\'>");\n        markup.push(escapeMarkup(text.substring(match, match + tl)));\n        markup.push("</span>");\n        markup.push(escapeMarkup(text.substring(match + tl, text.length)));\n    }\n\n    function defaultEscapeMarkup(markup) {\n        var replace_map = {\n            \'\\\\\': \'&#92;\',\n            \'&\': \'&amp;\',\n            \'<\': \'&lt;\',\n            \'>\': \'&gt;\',\n            \'"\': \'&quot;\',\n            "\'": \'&#39;\',\n            "/": \'&#47;\'\n        };\n\n        return String(markup).replace(/[&<>"\'\\/\\\\]/g, function (match) {\n            return replace_map[match];\n        });\n    }\n\n    /**\n     * Produces an ajax-based query function\n     *\n     * @param options object containing configuration parameters\n     * @param options.params parameter map for the transport ajax call, can contain such options as cache, jsonpCallback, etc. see $.ajax\n     * @param options.transport function that will be used to execute the ajax request. must be compatible with parameters supported by $.ajax\n     * @param options.url url for the data\n     * @param options.data a function(searchTerm, pageNumber, context) that should return an object containing query string parameters for the above url.\n     * @param options.dataType request data type: ajax, jsonp, other datatypes supported by jQuery\'s $.ajax function or the transport function if specified\n     * @param options.quietMillis (optional) milliseconds to wait before making the ajaxRequest, helps debounce the ajax function if invoked too often\n     * @param options.results a function(remoteData, pageNumber, query) that converts data returned form the remote request to the format expected by Select2.\n     *      The expected format is an object containing the following keys:\n     *      results array of objects that will be used as choices\n     *      more (optional) boolean indicating whether there are more results available\n     *      Example: {results:[{id:1, text:\'Red\'},{id:2, text:\'Blue\'}], more:true}\n     */\n    function ajax(options) {\n        var timeout, // current scheduled but not yet executed request\n            handler = null,\n            quietMillis = options.quietMillis || 100,\n            ajaxUrl = options.url,\n            self = this;\n\n        return function (query) {\n            window.clearTimeout(timeout);\n            timeout = window.setTimeout(function () {\n                var data = options.data, // ajax data function\n                    url = ajaxUrl, // ajax url string or function\n                    transport = options.transport || $.fn.select2.ajaxDefaults.transport,\n                    // deprecated - to be removed in 4.0  - use params instead\n                    deprecated = {\n                        type: options.type || \'GET\', // set type of request (GET or POST)\n                        cache: options.cache || false,\n                        jsonpCallback: options.jsonpCallback||undefined,\n                        dataType: options.dataType||"json"\n                    },\n                    params = $.extend({}, $.fn.select2.ajaxDefaults.params, deprecated);\n\n                data = data ? data.call(self, query.term, query.page, query.context) : null;\n                url = (typeof url === \'function\') ? url.call(self, query.term, query.page, query.context) : url;\n\n                if (handler && typeof handler.abort === "function") { handler.abort(); }\n\n                if (options.params) {\n                    if ($.isFunction(options.params)) {\n                        $.extend(params, options.params.call(self));\n                    } else {\n                        $.extend(params, options.params);\n                    }\n                }\n\n                $.extend(params, {\n                    url: url,\n                    dataType: options.dataType,\n                    data: data,\n                    success: function (data) {\n                        // TODO - replace query.page with query so users have access to term, page, etc.\n                        // added query as third paramter to keep backwards compatibility\n                        var results = options.results(data, query.page, query);\n                        query.callback(results);\n                    },\n                    error: function(jqXHR, textStatus, errorThrown){\n                        var results = {\n                            hasError: true,\n                            jqXHR: jqXHR,\n                            textStatus: textStatus,\n                            errorThrown: errorThrown,\n                        };\n\n                        query.callback(results);\n                    }\n                });\n                handler = transport.call(self, params);\n            }, quietMillis);\n        };\n    }\n\n    /**\n     * Produces a query function that works with a local array\n     *\n     * @param options object containing configuration parameters. The options parameter can either be an array or an\n     * object.\n     *\n     * If the array form is used it is assumed that it contains objects with \'id\' and \'text\' keys.\n     *\n     * If the object form is used it is assumed that it contains \'data\' and \'text\' keys. The \'data\' key should contain\n     * an array of objects that will be used as choices. These objects must contain at least an \'id\' key. The \'text\'\n     * key can either be a String in which case it is expected that each element in the \'data\' array has a key with the\n     * value of \'text\' which will be used to match choices. Alternatively, text can be a function(item) that can extract\n     * the text.\n     */\n    function local(options) {\n        var data = options, // data elements\n            dataText,\n            tmp,\n            text = function (item) { return ""+item.text; }; // function used to retrieve the text portion of a data item that is matched against the search\n\n         if ($.isArray(data)) {\n            tmp = data;\n            data = { results: tmp };\n        }\n\n         if ($.isFunction(data) === false) {\n            tmp = data;\n            data = function() { return tmp; };\n        }\n\n        var dataItem = data();\n        if (dataItem.text) {\n            text = dataItem.text;\n            // if text is not a function we assume it to be a key name\n            if (!$.isFunction(text)) {\n                dataText = dataItem.text; // we need to store this in a separate variable because in the next step data gets reset and data.text is no longer available\n                text = function (item) { return item[dataText]; };\n            }\n        }\n\n        return function (query) {\n            var t = query.term, filtered = { results: [] }, process;\n            if (t === "") {\n                query.callback(data());\n                return;\n            }\n\n            process = function(datum, collection) {\n                var group, attr;\n                datum = datum[0];\n                if (datum.children) {\n                    group = {};\n                    for (attr in datum) {\n                        if (datum.hasOwnProperty(attr)) group[attr]=datum[attr];\n                    }\n                    group.children=[];\n                    $(datum.children).each2(function(i, childDatum) { process(childDatum, group.children); });\n                    if (group.children.length || query.matcher(t, text(group), datum)) {\n                        collection.push(group);\n                    }\n                } else {\n                    if (query.matcher(t, text(datum), datum)) {\n                        collection.push(datum);\n                    }\n                }\n            };\n\n            $(data().results).each2(function(i, datum) { process(datum, filtered.results); });\n            query.callback(filtered);\n        };\n    }\n\n    // TODO javadoc\n    function tags(data) {\n        var isFunc = $.isFunction(data);\n        return function (query) {\n            var t = query.term, filtered = {results: []};\n            var result = isFunc ? data(query) : data;\n            if ($.isArray(result)) {\n                $(result).each(function () {\n                    var isObject = this.text !== undefined,\n                        text = isObject ? this.text : this;\n                    if (t === "" || query.matcher(t, text)) {\n                        filtered.results.push(isObject ? this : {id: this, text: this});\n                    }\n                });\n                query.callback(filtered);\n            }\n        };\n    }\n\n    /**\n     * Checks if the formatter function should be used.\n     *\n     * Throws an error if it is not a function. Returns true if it should be used,\n     * false if no formatting should be performed.\n     *\n     * @param formatter\n     */\n    function checkFormatter(formatter, formatterName) {\n        if ($.isFunction(formatter)) return true;\n        if (!formatter) return false;\n        if (typeof(formatter) === \'string\') return true;\n        throw new Error(formatterName +" must be a string, function, or falsy value");\n    }\n\n  /**\n   * Returns a given value\n   * If given a function, returns its output\n   *\n   * @param val string|function\n   * @param context value of "this" to be passed to function\n   * @returns {*}\n   */\n    function evaluate(val, context) {\n        if ($.isFunction(val)) {\n            var args = Array.prototype.slice.call(arguments, 2);\n            return val.apply(context, args);\n        }\n        return val;\n    }\n\n    function countResults(results) {\n        var count = 0;\n        $.each(results, function(i, item) {\n            if (item.children) {\n                count += countResults(item.children);\n            } else {\n                count++;\n            }\n        });\n        return count;\n    }\n\n    /**\n     * Default tokenizer. This function uses breaks the input on substring match of any string from the\n     * opts.tokenSeparators array and uses opts.createSearchChoice to create the choice object. Both of those\n     * two options have to be defined in order for the tokenizer to work.\n     *\n     * @param input text user has typed so far or pasted into the search field\n     * @param selection currently selected choices\n     * @param selectCallback function(choice) callback tho add the choice to selection\n     * @param opts select2\'s opts\n     * @return undefined/null to leave the current input unchanged, or a string to change the input to the returned value\n     */\n    function defaultTokenizer(input, selection, selectCallback, opts) {\n        var original = input, // store the original so we can compare and know if we need to tell the search to update its text\n            dupe = false, // check for whether a token we extracted represents a duplicate selected choice\n            token, // token\n            index, // position at which the separator was found\n            i, l, // looping variables\n            separator; // the matched separator\n\n        if (!opts.createSearchChoice || !opts.tokenSeparators || opts.tokenSeparators.length < 1) return undefined;\n\n        while (true) {\n            index = -1;\n\n            for (i = 0, l = opts.tokenSeparators.length; i < l; i++) {\n                separator = opts.tokenSeparators[i];\n                index = input.indexOf(separator);\n                if (index >= 0) break;\n            }\n\n            if (index < 0) break; // did not find any token separator in the input string, bail\n\n            token = input.substring(0, index);\n            input = input.substring(index + separator.length);\n\n            if (token.length > 0) {\n                token = opts.createSearchChoice.call(this, token, selection);\n                if (token !== undefined && token !== null && opts.id(token) !== undefined && opts.id(token) !== null) {\n                    dupe = false;\n                    for (i = 0, l = selection.length; i < l; i++) {\n                        if (equal(opts.id(token), opts.id(selection[i]))) {\n                            dupe = true; break;\n                        }\n                    }\n\n                    if (!dupe) selectCallback(token);\n                }\n            }\n        }\n\n        if (original!==input) return input;\n    }\n\n    function cleanupJQueryElements() {\n        var self = this;\n\n        $.each(arguments, function (i, element) {\n            self[element].remove();\n            self[element] = null;\n        });\n    }\n\n    /**\n     * Creates a new class\n     *\n     * @param superClass\n     * @param methods\n     */\n    function clazz(SuperClass, methods) {\n        var constructor = function () {};\n        constructor.prototype = new SuperClass;\n        constructor.prototype.constructor = constructor;\n        constructor.prototype.parent = SuperClass.prototype;\n        constructor.prototype = $.extend(constructor.prototype, methods);\n        return constructor;\n    }\n\n    AbstractSelect2 = clazz(Object, {\n\n        // abstract\n        bind: function (func) {\n            var self = this;\n            return function () {\n                func.apply(self, arguments);\n            };\n        },\n\n        // abstract\n        init: function (opts) {\n            var results, search, resultsSelector = ".select2-results";\n\n            // prepare options\n            this.opts = opts = this.prepareOpts(opts);\n\n            this.id=opts.id;\n\n            // destroy if called on an existing component\n            if (opts.element.data("select2") !== undefined &&\n                opts.element.data("select2") !== null) {\n                opts.element.data("select2").destroy();\n            }\n\n            this.container = this.createContainer();\n\n            this.liveRegion = $("<span>", {\n                    role: "status",\n                    "aria-live": "polite"\n                })\n                .addClass("select2-hidden-accessible")\n                .appendTo(document.body);\n\n            this.containerId="s2id_"+(opts.element.attr("id") || "autogen"+nextUid());\n            this.containerEventName= this.containerId\n                .replace(/([.])/g, \'_\')\n                .replace(/([;&,\\-\\.\\+\\*\\~\':"\\!\\^#$%@\\[\\]\\(\\)=>\\|])/g, \'\\\\$1\');\n            this.container.attr("id", this.containerId);\n\n            this.container.attr("title", opts.element.attr("title"));\n\n            this.body = $("body");\n\n            syncCssClasses(this.container, this.opts.element, this.opts.adaptContainerCssClass);\n\n            this.container.attr("style", opts.element.attr("style"));\n            this.container.css(evaluate(opts.containerCss, this.opts.element));\n            this.container.addClass(evaluate(opts.containerCssClass, this.opts.element));\n\n            this.elementTabIndex = this.opts.element.attr("tabindex");\n\n            // swap container for the element\n            this.opts.element\n                .data("select2", this)\n                .attr("tabindex", "-1")\n                .before(this.container)\n                .on("click.select2", killEvent); // do not leak click events\n\n            this.container.data("select2", this);\n\n            this.dropdown = this.container.find(".select2-drop");\n\n            syncCssClasses(this.dropdown, this.opts.element, this.opts.adaptDropdownCssClass);\n\n            this.dropdown.addClass(evaluate(opts.dropdownCssClass, this.opts.element));\n            this.dropdown.data("select2", this);\n            this.dropdown.on("click", killEvent);\n\n            this.results = results = this.container.find(resultsSelector);\n            this.search = search = this.container.find("input.select2-input");\n\n            this.queryCount = 0;\n            this.resultsPage = 0;\n            this.context = null;\n\n            // initialize the container\n            this.initContainer();\n\n            this.container.on("click", killEvent);\n\n            installFilteredMouseMove(this.results);\n\n            this.dropdown.on("mousemove-filtered", resultsSelector, this.bind(this.highlightUnderEvent));\n            this.dropdown.on("touchstart touchmove touchend", resultsSelector, this.bind(function (event) {\n                this._touchEvent = true;\n                this.highlightUnderEvent(event);\n            }));\n            this.dropdown.on("touchmove", resultsSelector, this.bind(this.touchMoved));\n            this.dropdown.on("touchstart touchend", resultsSelector, this.bind(this.clearTouchMoved));\n\n            // Waiting for a click event on touch devices to select option and hide dropdown\n            // otherwise click will be triggered on an underlying element\n            this.dropdown.on(\'click\', this.bind(function (event) {\n                if (this._touchEvent) {\n                    this._touchEvent = false;\n                    this.selectHighlighted();\n                }\n            }));\n\n            installDebouncedScroll(80, this.results);\n            this.dropdown.on("scroll-debounced", resultsSelector, this.bind(this.loadMoreIfNeeded));\n\n            // do not propagate change event from the search field out of the component\n            $(this.container).on("change", ".select2-input", function(e) {e.stopPropagation();});\n            $(this.dropdown).on("change", ".select2-input", function(e) {e.stopPropagation();});\n\n            // if jquery.mousewheel plugin is installed we can prevent out-of-bounds scrolling of results via mousewheel\n            if ($.fn.mousewheel) {\n                results.mousewheel(function (e, delta, deltaX, deltaY) {\n                    var top = results.scrollTop();\n                    if (deltaY > 0 && top - deltaY <= 0) {\n                        results.scrollTop(0);\n                        killEvent(e);\n                    } else if (deltaY < 0 && results.get(0).scrollHeight - results.scrollTop() + deltaY <= results.height()) {\n                        results.scrollTop(results.get(0).scrollHeight - results.height());\n                        killEvent(e);\n                    }\n                });\n            }\n\n            installKeyUpChangeEvent(search);\n            search.on("keyup-change input paste", this.bind(this.updateResults));\n            search.on("focus", function () { search.addClass("select2-focused"); });\n            search.on("blur", function () { search.removeClass("select2-focused");});\n\n            this.dropdown.on("mouseup", resultsSelector, this.bind(function (e) {\n                if ($(e.target).closest(".select2-result-selectable").length > 0) {\n                    this.highlightUnderEvent(e);\n                    this.selectHighlighted(e);\n                }\n            }));\n\n            // trap all mouse events from leaving the dropdown. sometimes there may be a modal that is listening\n            // for mouse events outside of itself so it can close itself. since the dropdown is now outside the select2\'s\n            // dom it will trigger the popup close, which is not what we want\n            // focusin can cause focus wars between modals and select2 since the dropdown is outside the modal.\n            this.dropdown.on("click mouseup mousedown touchstart touchend focusin", function (e) { e.stopPropagation(); });\n\n            this.nextSearchTerm = undefined;\n\n            if ($.isFunction(this.opts.initSelection)) {\n                // initialize selection based on the current value of the source element\n                this.initSelection();\n\n                // if the user has provided a function that can set selection based on the value of the source element\n                // we monitor the change event on the element and trigger it, allowing for two way synchronization\n                this.monitorSource();\n            }\n\n            if (opts.maximumInputLength !== null) {\n                this.search.attr("maxlength", opts.maximumInputLength);\n            }\n\n            var disabled = opts.element.prop("disabled");\n            if (disabled === undefined) disabled = false;\n            this.enable(!disabled);\n\n            var readonly = opts.element.prop("readonly");\n            if (readonly === undefined) readonly = false;\n            this.readonly(readonly);\n\n            // Calculate size of scrollbar\n            scrollBarDimensions = scrollBarDimensions || measureScrollbar();\n\n            this.autofocus = opts.element.prop("autofocus");\n            opts.element.prop("autofocus", false);\n            if (this.autofocus) this.focus();\n\n            this.search.attr("placeholder", opts.searchInputPlaceholder);\n        },\n\n        // abstract\n        destroy: function () {\n            var element=this.opts.element, select2 = element.data("select2"), self = this;\n\n            this.close();\n\n            if (element.length && element[0].detachEvent) {\n                element.each(function () {\n                    this.detachEvent("onpropertychange", self._sync);\n                });\n            }\n            if (this.propertyObserver) {\n                this.propertyObserver.disconnect();\n                this.propertyObserver = null;\n            }\n            this._sync = null;\n\n            if (select2 !== undefined) {\n                select2.container.remove();\n                select2.liveRegion.remove();\n                select2.dropdown.remove();\n                element\n                    .removeClass("select2-offscreen")\n                    .removeData("select2")\n                    .off(".select2")\n                    .prop("autofocus", this.autofocus || false);\n                if (this.elementTabIndex) {\n                    element.attr({tabindex: this.elementTabIndex});\n                } else {\n                    element.removeAttr("tabindex");\n                }\n                element.show();\n            }\n\n            cleanupJQueryElements.call(this,\n                "container",\n                "liveRegion",\n                "dropdown",\n                "results",\n                "search"\n            );\n        },\n\n        // abstract\n        optionToData: function(element) {\n            if (element.is("option")) {\n                return {\n                    id:element.prop("value"),\n                    text:element.text(),\n                    element: element.get(),\n                    css: element.attr("class"),\n                    disabled: element.prop("disabled"),\n                    locked: equal(element.attr("locked"), "locked") || equal(element.data("locked"), true)\n                };\n            } else if (element.is("optgroup")) {\n                return {\n                    text:element.attr("label"),\n                    children:[],\n                    element: element.get(),\n                    css: element.attr("class")\n                };\n            }\n        },\n\n        // abstract\n        prepareOpts: function (opts) {\n            var element, select, idKey, ajaxUrl, self = this;\n\n            element = opts.element;\n\n            if (element.get(0).tagName.toLowerCase() === "select") {\n                this.select = select = opts.element;\n            }\n\n            if (select) {\n                // these options are not allowed when attached to a select because they are picked up off the element itself\n                $.each(["id", "multiple", "ajax", "query", "createSearchChoice", "initSelection", "data", "tags"], function () {\n                    if (this in opts) {\n                        throw new Error("Option \'" + this + "\' is not allowed for Select2 when attached to a <select> element.");\n                    }\n                });\n            }\n\n            opts = $.extend({}, {\n                populateResults: function(container, results, query) {\n                    var populate, id=this.opts.id, liveRegion=this.liveRegion;\n\n                    populate=function(results, container, depth) {\n\n                        var i, l, result, selectable, disabled, compound, node, label, innerContainer, formatted;\n\n                        results = opts.sortResults(results, container, query);\n\n                        // collect the created nodes for bulk append\n                        var nodes = [];\n                        for (i = 0, l = results.length; i < l; i = i + 1) {\n\n                            result=results[i];\n\n                            disabled = (result.disabled === true);\n                            selectable = (!disabled) && (id(result) !== undefined);\n\n                            compound=result.children && result.children.length > 0;\n\n                            node=$("<li></li>");\n                            node.addClass("select2-results-dept-"+depth);\n                            node.addClass("select2-result");\n                            node.addClass(selectable ? "select2-result-selectable" : "select2-result-unselectable");\n                            if (disabled) { node.addClass("select2-disabled"); }\n                            if (compound) { node.addClass("select2-result-with-children"); }\n                            node.addClass(self.opts.formatResultCssClass(result));\n                            node.attr("role", "presentation");\n\n                            label=$(document.createElement("div"));\n                            label.addClass("select2-result-label");\n                            label.attr("id", "select2-result-label-" + nextUid());\n                            label.attr("role", "option");\n\n                            formatted=opts.formatResult(result, label, query, self.opts.escapeMarkup);\n                            if (formatted!==undefined) {\n                                label.html(formatted);\n                                node.append(label);\n                            }\n\n\n                            if (compound) {\n\n                                innerContainer=$("<ul></ul>");\n                                innerContainer.addClass("select2-result-sub");\n                                populate(result.children, innerContainer, depth+1);\n                                node.append(innerContainer);\n                            }\n\n                            node.data("select2-data", result);\n                            nodes.push(node[0]);\n                        }\n\n                        // bulk append the created nodes\n                        container.append(nodes);\n                        liveRegion.text(opts.formatMatches(results.length));\n                    };\n\n                    populate(results, container, 0);\n                }\n            }, $.fn.select2.defaults, opts);\n\n            if (typeof(opts.id) !== "function") {\n                idKey = opts.id;\n                opts.id = function (e) { return e[idKey]; };\n            }\n\n            if ($.isArray(opts.element.data("select2Tags"))) {\n                if ("tags" in opts) {\n                    throw "tags specified as both an attribute \'data-select2-tags\' and in options of Select2 " + opts.element.attr("id");\n                }\n                opts.tags=opts.element.data("select2Tags");\n            }\n\n            if (select) {\n                opts.query = this.bind(function (query) {\n                    var data = { results: [], more: false },\n                        term = query.term,\n                        children, placeholderOption, process;\n\n                    process=function(element, collection) {\n                        var group;\n                        if (element.is("option")) {\n                            if (query.matcher(term, element.text(), element)) {\n                                collection.push(self.optionToData(element));\n                            }\n                        } else if (element.is("optgroup")) {\n                            group=self.optionToData(element);\n                            element.children().each2(function(i, elm) { process(elm, group.children); });\n                            if (group.children.length>0) {\n                                collection.push(group);\n                            }\n                        }\n                    };\n\n                    children=element.children();\n\n                    // ignore the placeholder option if there is one\n                    if (this.getPlaceholder() !== undefined && children.length > 0) {\n                        placeholderOption = this.getPlaceholderOption();\n                        if (placeholderOption) {\n                            children=children.not(placeholderOption);\n                        }\n                    }\n\n                    children.each2(function(i, elm) { process(elm, data.results); });\n\n                    query.callback(data);\n                });\n                // this is needed because inside val() we construct choices from options and their id is hardcoded\n                opts.id=function(e) { return e.id; };\n            } else {\n                if (!("query" in opts)) {\n\n                    if ("ajax" in opts) {\n                        ajaxUrl = opts.element.data("ajax-url");\n                        if (ajaxUrl && ajaxUrl.length > 0) {\n                            opts.ajax.url = ajaxUrl;\n                        }\n                        opts.query = ajax.call(opts.element, opts.ajax);\n                    } else if ("data" in opts) {\n                        opts.query = local(opts.data);\n                    } else if ("tags" in opts) {\n                        opts.query = tags(opts.tags);\n                        if (opts.createSearchChoice === undefined) {\n                            opts.createSearchChoice = function (term) { return {id: $.trim(term), text: $.trim(term)}; };\n                        }\n                        if (opts.initSelection === undefined) {\n                            opts.initSelection = function (element, callback) {\n                                var data = [];\n                                $(splitVal(element.val(), opts.separator)).each(function () {\n                                    var obj = { id: this, text: this },\n                                        tags = opts.tags;\n                                    if ($.isFunction(tags)) tags=tags();\n                                    $(tags).each(function() { if (equal(this.id, obj.id)) { obj = this; return false; } });\n                                    data.push(obj);\n                                });\n\n                                callback(data);\n                            };\n                        }\n                    }\n                }\n            }\n            if (typeof(opts.query) !== "function") {\n                throw "query function not defined for Select2 " + opts.element.attr("id");\n            }\n\n            if (opts.createSearchChoicePosition === \'top\') {\n                opts.createSearchChoicePosition = function(list, item) { list.unshift(item); };\n            }\n            else if (opts.createSearchChoicePosition === \'bottom\') {\n                opts.createSearchChoicePosition = function(list, item) { list.push(item); };\n            }\n            else if (typeof(opts.createSearchChoicePosition) !== "function")  {\n                throw "invalid createSearchChoicePosition option must be \'top\', \'bottom\' or a custom function";\n            }\n\n            return opts;\n        },\n\n        /**\n         * Monitor the original element for changes and update select2 accordingly\n         */\n        // abstract\n        monitorSource: function () {\n            var el = this.opts.element, observer, self = this;\n\n            el.on("change.select2", this.bind(function (e) {\n                if (this.opts.element.data("select2-change-triggered") !== true) {\n                    this.initSelection();\n                }\n            }));\n\n            this._sync = this.bind(function () {\n\n                // sync enabled state\n                var disabled = el.prop("disabled");\n                if (disabled === undefined) disabled = false;\n                this.enable(!disabled);\n\n                var readonly = el.prop("readonly");\n                if (readonly === undefined) readonly = false;\n                this.readonly(readonly);\n\n                syncCssClasses(this.container, this.opts.element, this.opts.adaptContainerCssClass);\n                this.container.addClass(evaluate(this.opts.containerCssClass, this.opts.element));\n\n                syncCssClasses(this.dropdown, this.opts.element, this.opts.adaptDropdownCssClass);\n                this.dropdown.addClass(evaluate(this.opts.dropdownCssClass, this.opts.element));\n\n            });\n\n            // IE8-10 (IE9/10 won\'t fire propertyChange via attachEventListener)\n            if (el.length && el[0].attachEvent) {\n                el.each(function() {\n                    this.attachEvent("onpropertychange", self._sync);\n                });\n            }\n\n            // safari, chrome, firefox, IE11\n            observer = window.MutationObserver || window.WebKitMutationObserver|| window.MozMutationObserver;\n            if (observer !== undefined) {\n                if (this.propertyObserver) { delete this.propertyObserver; this.propertyObserver = null; }\n                this.propertyObserver = new observer(function (mutations) {\n                    $.each(mutations, self._sync);\n                });\n                this.propertyObserver.observe(el.get(0), { attributes:true, subtree:false });\n            }\n        },\n\n        // abstract\n        triggerSelect: function(data) {\n            var evt = $.Event("select2-selecting", { val: this.id(data), object: data, choice: data });\n            this.opts.element.trigger(evt);\n            return !evt.isDefaultPrevented();\n        },\n\n        /**\n         * Triggers the change event on the source element\n         */\n        // abstract\n        triggerChange: function (details) {\n\n            details = details || {};\n            details= $.extend({}, details, { type: "change", val: this.val() });\n            // prevents recursive triggering\n            this.opts.element.data("select2-change-triggered", true);\n            this.opts.element.trigger(details);\n            this.opts.element.data("select2-change-triggered", false);\n\n            // some validation frameworks ignore the change event and listen instead to keyup, click for selects\n            // so here we trigger the click event manually\n            this.opts.element.click();\n\n            // ValidationEngine ignores the change event and listens instead to blur\n            // so here we trigger the blur event manually if so desired\n            if (this.opts.blurOnChange)\n                this.opts.element.blur();\n        },\n\n        //abstract\n        isInterfaceEnabled: function()\n        {\n            return this.enabledInterface === true;\n        },\n\n        // abstract\n        enableInterface: function() {\n            var enabled = this._enabled && !this._readonly,\n                disabled = !enabled;\n\n            if (enabled === this.enabledInterface) return false;\n\n            this.container.toggleClass("select2-container-disabled", disabled);\n            this.close();\n            this.enabledInterface = enabled;\n\n            return true;\n        },\n\n        // abstract\n        enable: function(enabled) {\n            if (enabled === undefined) enabled = true;\n            if (this._enabled === enabled) return;\n            this._enabled = enabled;\n\n            this.opts.element.prop("disabled", !enabled);\n            this.enableInterface();\n        },\n\n        // abstract\n        disable: function() {\n            this.enable(false);\n        },\n\n        // abstract\n        readonly: function(enabled) {\n            if (enabled === undefined) enabled = false;\n            if (this._readonly === enabled) return;\n            this._readonly = enabled;\n\n            this.opts.element.prop("readonly", enabled);\n            this.enableInterface();\n        },\n\n        // abstract\n        opened: function () {\n            return (this.container) ? this.container.hasClass("select2-dropdown-open") : false;\n        },\n\n        // abstract\n        positionDropdown: function() {\n            var $dropdown = this.dropdown,\n                offset = this.container.offset(),\n                height = this.container.outerHeight(false),\n                width = this.container.outerWidth(false),\n                dropHeight = $dropdown.outerHeight(false),\n                $window = $(window),\n                windowWidth = $window.width(),\n                windowHeight = $window.height(),\n                viewPortRight = $window.scrollLeft() + windowWidth,\n                viewportBottom = $window.scrollTop() + windowHeight,\n                dropTop = offset.top + height,\n                dropLeft = offset.left,\n                enoughRoomBelow = dropTop + dropHeight <= viewportBottom,\n                enoughRoomAbove = (offset.top - dropHeight) >= $window.scrollTop(),\n                dropWidth = $dropdown.outerWidth(false),\n                enoughRoomOnRight = dropLeft + dropWidth <= viewPortRight,\n                aboveNow = $dropdown.hasClass("select2-drop-above"),\n                bodyOffset,\n                above,\n                changeDirection,\n                css,\n                resultsListNode;\n\n            // always prefer the current above/below alignment, unless there is not enough room\n            if (aboveNow) {\n                above = true;\n                if (!enoughRoomAbove && enoughRoomBelow) {\n                    changeDirection = true;\n                    above = false;\n                }\n            } else {\n                above = false;\n                if (!enoughRoomBelow && enoughRoomAbove) {\n                    changeDirection = true;\n                    above = true;\n                }\n            }\n\n            //if we are changing direction we need to get positions when dropdown is hidden;\n            if (changeDirection) {\n                $dropdown.hide();\n                offset = this.container.offset();\n                height = this.container.outerHeight(false);\n                width = this.container.outerWidth(false);\n                dropHeight = $dropdown.outerHeight(false);\n                viewPortRight = $window.scrollLeft() + windowWidth;\n                viewportBottom = $window.scrollTop() + windowHeight;\n                dropTop = offset.top + height;\n                dropLeft = offset.left;\n                dropWidth = $dropdown.outerWidth(false);\n                enoughRoomOnRight = dropLeft + dropWidth <= viewPortRight;\n                $dropdown.show();\n\n                // fix so the cursor does not move to the left within the search-textbox in IE\n                this.focusSearch();\n            }\n\n            if (this.opts.dropdownAutoWidth) {\n                resultsListNode = $(\'.select2-results\', $dropdown)[0];\n                $dropdown.addClass(\'select2-drop-auto-width\');\n                $dropdown.css(\'width\', \'\');\n                // Add scrollbar width to dropdown if vertical scrollbar is present\n                dropWidth = $dropdown.outerWidth(false) + (resultsListNode.scrollHeight === resultsListNode.clientHeight ? 0 : scrollBarDimensions.width);\n                dropWidth > width ? width = dropWidth : dropWidth = width;\n                dropHeight = $dropdown.outerHeight(false);\n                enoughRoomOnRight = dropLeft + dropWidth <= viewPortRight;\n            }\n            else {\n                this.container.removeClass(\'select2-drop-auto-width\');\n            }\n\n            //console.log("below/ droptop:", dropTop, "dropHeight", dropHeight, "sum", (dropTop+dropHeight)+" viewport bottom", viewportBottom, "enough?", enoughRoomBelow);\n            //console.log("above/ offset.top", offset.top, "dropHeight", dropHeight, "top", (offset.top-dropHeight), "scrollTop", this.body.scrollTop(), "enough?", enoughRoomAbove);\n\n            // fix positioning when body has an offset and is not position: static\n            if (this.body.css(\'position\') !== \'static\') {\n                bodyOffset = this.body.offset();\n                dropTop -= bodyOffset.top;\n                dropLeft -= bodyOffset.left;\n            }\n\n            if (!enoughRoomOnRight) {\n                dropLeft = offset.left + this.container.outerWidth(false) - dropWidth;\n            }\n\n            css =  {\n                left: dropLeft,\n                width: width\n            };\n\n            if (above) {\n                css.top = offset.top - dropHeight;\n                css.bottom = \'auto\';\n                this.container.addClass("select2-drop-above");\n                $dropdown.addClass("select2-drop-above");\n            }\n            else {\n                css.top = dropTop;\n                css.bottom = \'auto\';\n                this.container.removeClass("select2-drop-above");\n                $dropdown.removeClass("select2-drop-above");\n            }\n            css = $.extend(css, evaluate(this.opts.dropdownCss, this.opts.element));\n\n            $dropdown.css(css);\n        },\n\n        // abstract\n        shouldOpen: function() {\n            var event;\n\n            if (this.opened()) return false;\n\n            if (this._enabled === false || this._readonly === true) return false;\n\n            event = $.Event("select2-opening");\n            this.opts.element.trigger(event);\n            return !event.isDefaultPrevented();\n        },\n\n        // abstract\n        clearDropdownAlignmentPreference: function() {\n            // clear the classes used to figure out the preference of where the dropdown should be opened\n            this.container.removeClass("select2-drop-above");\n            this.dropdown.removeClass("select2-drop-above");\n        },\n\n        /**\n         * Opens the dropdown\n         *\n         * @return {Boolean} whether or not dropdown was opened. This method will return false if, for example,\n         * the dropdown is already open, or if the \'open\' event listener on the element called preventDefault().\n         */\n        // abstract\n        open: function () {\n\n            if (!this.shouldOpen()) return false;\n\n            this.opening();\n\n            // Only bind the document mousemove when the dropdown is visible\n            $document.on("mousemove.select2Event", function (e) {\n                lastMousePosition.x = e.pageX;\n                lastMousePosition.y = e.pageY;\n            });\n\n            return true;\n        },\n\n        /**\n         * Performs the opening of the dropdown\n         */\n        // abstract\n        opening: function() {\n            var cid = this.containerEventName,\n                scroll = "scroll." + cid,\n                resize = "resize."+cid,\n                orient = "orientationchange."+cid,\n                mask;\n\n            this.container.addClass("select2-dropdown-open").addClass("select2-container-active");\n\n            this.clearDropdownAlignmentPreference();\n\n            if(this.dropdown[0] !== this.body.children().last()[0]) {\n                this.dropdown.detach().appendTo(this.body);\n            }\n\n            // create the dropdown mask if doesn\'t already exist\n            mask = $("#select2-drop-mask");\n            if (mask.length == 0) {\n                mask = $(document.createElement("div"));\n                mask.attr("id","select2-drop-mask").attr("class","select2-drop-mask");\n                mask.hide();\n                mask.appendTo(this.body);\n                mask.on("mousedown touchstart click", function (e) {\n                    // Prevent IE from generating a click event on the body\n                    reinsertElement(mask);\n\n                    var dropdown = $("#select2-drop"), self;\n                    if (dropdown.length > 0) {\n                        self=dropdown.data("select2");\n                        if (self.opts.selectOnBlur) {\n                            self.selectHighlighted({noFocus: true});\n                        }\n                        self.close();\n                        e.preventDefault();\n                        e.stopPropagation();\n                    }\n                });\n            }\n\n            // ensure the mask is always right before the dropdown\n            if (this.dropdown.prev()[0] !== mask[0]) {\n                this.dropdown.before(mask);\n            }\n\n            // move the global id to the correct dropdown\n            $("#select2-drop").removeAttr("id");\n            this.dropdown.attr("id", "select2-drop");\n\n            // show the elements\n            mask.show();\n\n            this.positionDropdown();\n            this.dropdown.show();\n            this.positionDropdown();\n\n            this.dropdown.addClass("select2-drop-active");\n\n            // attach listeners to events that can change the position of the container and thus require\n            // the position of the dropdown to be updated as well so it does not come unglued from the container\n            var that = this;\n            this.container.parents().add(window).each(function () {\n                $(this).on(resize+" "+scroll+" "+orient, function (e) {\n                    if (that.opened()) that.positionDropdown();\n                });\n            });\n\n\n        },\n\n        // abstract\n        close: function () {\n            if (!this.opened()) return;\n\n            var cid = this.containerEventName,\n                scroll = "scroll." + cid,\n                resize = "resize."+cid,\n                orient = "orientationchange."+cid;\n\n            // unbind event listeners\n            this.container.parents().add(window).each(function () { $(this).off(scroll).off(resize).off(orient); });\n\n            this.clearDropdownAlignmentPreference();\n\n            $("#select2-drop-mask").hide();\n            this.dropdown.removeAttr("id"); // only the active dropdown has the select2-drop id\n            this.dropdown.hide();\n            this.container.removeClass("select2-dropdown-open").removeClass("select2-container-active");\n            this.results.empty();\n\n            // Now that the dropdown is closed, unbind the global document mousemove event\n            $document.off("mousemove.select2Event");\n\n            this.clearSearch();\n            this.search.removeClass("select2-active");\n            this.opts.element.trigger($.Event("select2-close"));\n        },\n\n        /**\n         * Opens control, sets input value, and updates results.\n         */\n        // abstract\n        externalSearch: function (term) {\n            this.open();\n            this.search.val(term);\n            this.updateResults(false);\n        },\n\n        // abstract\n        clearSearch: function () {\n\n        },\n\n        //abstract\n        getMaximumSelectionSize: function() {\n            return evaluate(this.opts.maximumSelectionSize, this.opts.element);\n        },\n\n        // abstract\n        ensureHighlightVisible: function () {\n            var results = this.results, children, index, child, hb, rb, y, more, topOffset;\n\n            index = this.highlight();\n\n            if (index < 0) return;\n\n            if (index == 0) {\n\n                // if the first element is highlighted scroll all the way to the top,\n                // that way any unselectable headers above it will also be scrolled\n                // into view\n\n                results.scrollTop(0);\n                return;\n            }\n\n            children = this.findHighlightableChoices().find(\'.select2-result-label\');\n\n            child = $(children[index]);\n\n            topOffset = (child.offset() || {}).top || 0;\n\n            hb = topOffset + child.outerHeight(true);\n\n            // if this is the last child lets also make sure select2-more-results is visible\n            if (index === children.length - 1) {\n                more = results.find("li.select2-more-results");\n                if (more.length > 0) {\n                    hb = more.offset().top + more.outerHeight(true);\n                }\n            }\n\n            rb = results.offset().top + results.outerHeight(true);\n            if (hb > rb) {\n                results.scrollTop(results.scrollTop() + (hb - rb));\n            }\n            y = topOffset - results.offset().top;\n\n            // make sure the top of the element is visible\n            if (y < 0 && child.css(\'display\') != \'none\' ) {\n                results.scrollTop(results.scrollTop() + y); // y is negative\n            }\n        },\n\n        // abstract\n        findHighlightableChoices: function() {\n            return this.results.find(".select2-result-selectable:not(.select2-disabled):not(.select2-selected)");\n        },\n\n        // abstract\n        moveHighlight: function (delta) {\n            var choices = this.findHighlightableChoices(),\n                index = this.highlight();\n\n            while (index > -1 && index < choices.length) {\n                index += delta;\n                var choice = $(choices[index]);\n                if (choice.hasClass("select2-result-selectable") && !choice.hasClass("select2-disabled") && !choice.hasClass("select2-selected")) {\n                    this.highlight(index);\n                    break;\n                }\n            }\n        },\n\n        // abstract\n        highlight: function (index) {\n            var choices = this.findHighlightableChoices(),\n                choice,\n                data;\n\n            if (arguments.length === 0) {\n                return indexOf(choices.filter(".select2-highlighted")[0], choices.get());\n            }\n\n            if (index >= choices.length) index = choices.length - 1;\n            if (index < 0) index = 0;\n\n            this.removeHighlight();\n\n            choice = $(choices[index]);\n            choice.addClass("select2-highlighted");\n\n            // ensure assistive technology can determine the active choice\n            this.search.attr("aria-activedescendant", choice.find(".select2-result-label").attr("id"));\n\n            this.ensureHighlightVisible();\n\n            this.liveRegion.text(choice.text());\n\n            data = choice.data("select2-data");\n            if (data) {\n                this.opts.element.trigger({ type: "select2-highlight", val: this.id(data), choice: data });\n            }\n        },\n\n        removeHighlight: function() {\n            this.results.find(".select2-highlighted").removeClass("select2-highlighted");\n        },\n\n        touchMoved: function() {\n            this._touchMoved = true;\n        },\n\n        clearTouchMoved: function() {\n          this._touchMoved = false;\n        },\n\n        // abstract\n        countSelectableResults: function() {\n            return this.findHighlightableChoices().length;\n        },\n\n        // abstract\n        highlightUnderEvent: function (event) {\n            var el = $(event.target).closest(".select2-result-selectable");\n            if (el.length > 0 && !el.is(".select2-highlighted")) {\n                var choices = this.findHighlightableChoices();\n                this.highlight(choices.index(el));\n            } else if (el.length == 0) {\n                // if we are over an unselectable item remove all highlights\n                this.removeHighlight();\n            }\n        },\n\n        // abstract\n        loadMoreIfNeeded: function () {\n            var results = this.results,\n                more = results.find("li.select2-more-results"),\n                below, // pixels the element is below the scroll fold, below==0 is when the element is starting to be visible\n                page = this.resultsPage + 1,\n                self=this,\n                term=this.search.val(),\n                context=this.context;\n\n            if (more.length === 0) return;\n            below = more.offset().top - results.offset().top - results.height();\n\n            if (below <= this.opts.loadMorePadding) {\n                more.addClass("select2-active");\n                this.opts.query({\n                        element: this.opts.element,\n                        term: term,\n                        page: page,\n                        context: context,\n                        matcher: this.opts.matcher,\n                        callback: this.bind(function (data) {\n\n                    // ignore a response if the select2 has been closed before it was received\n                    if (!self.opened()) return;\n\n\n                    self.opts.populateResults.call(this, results, data.results, {term: term, page: page, context:context});\n                    self.postprocessResults(data, false, false);\n\n                    if (data.more===true) {\n                        more.detach().appendTo(results).text(evaluate(self.opts.formatLoadMore, self.opts.element, page+1));\n                        window.setTimeout(function() { self.loadMoreIfNeeded(); }, 10);\n                    } else {\n                        more.remove();\n                    }\n                    self.positionDropdown();\n                    self.resultsPage = page;\n                    self.context = data.context;\n                    this.opts.element.trigger({ type: "select2-loaded", items: data });\n                })});\n            }\n        },\n\n        /**\n         * Default tokenizer function which does nothing\n         */\n        tokenize: function() {\n\n        },\n\n        /**\n         * @param initial whether or not this is the call to this method right after the dropdown has been opened\n         */\n        // abstract\n        updateResults: function (initial) {\n            var search = this.search,\n                results = this.results,\n                opts = this.opts,\n                data,\n                self = this,\n                input,\n                term = search.val(),\n                lastTerm = $.data(this.container, "select2-last-term"),\n                // sequence number used to drop out-of-order responses\n                queryNumber;\n\n            // prevent duplicate queries against the same term\n            if (initial !== true && lastTerm && equal(term, lastTerm)) return;\n\n            $.data(this.container, "select2-last-term", term);\n\n            // if the search is currently hidden we do not alter the results\n            if (initial !== true && (this.showSearchInput === false || !this.opened())) {\n                return;\n            }\n\n            function postRender() {\n                search.removeClass("select2-active");\n                self.positionDropdown();\n                if (results.find(\'.select2-no-results,.select2-selection-limit,.select2-searching\').length) {\n                    self.liveRegion.text(results.text());\n                }\n                else {\n                    self.liveRegion.text(self.opts.formatMatches(results.find(\'.select2-result-selectable\').length));\n                }\n            }\n\n            function render(html) {\n                results.html(html);\n                postRender();\n            }\n\n            queryNumber = ++this.queryCount;\n\n            var maxSelSize = this.getMaximumSelectionSize();\n            if (maxSelSize >=1) {\n                data = this.data();\n                if ($.isArray(data) && data.length >= maxSelSize && checkFormatter(opts.formatSelectionTooBig, "formatSelectionTooBig")) {\n                    render("<li class=\'select2-selection-limit\'>" + evaluate(opts.formatSelectionTooBig, opts.element, maxSelSize) + "</li>");\n                    return;\n                }\n            }\n\n            if (search.val().length < opts.minimumInputLength) {\n                if (checkFormatter(opts.formatInputTooShort, "formatInputTooShort")) {\n                    render("<li class=\'select2-no-results\'>" + evaluate(opts.formatInputTooShort, opts.element, search.val(), opts.minimumInputLength) + "</li>");\n                } else {\n                    render("");\n                }\n                if (initial && this.showSearch) this.showSearch(true);\n                return;\n            }\n\n            if (opts.maximumInputLength && search.val().length > opts.maximumInputLength) {\n                if (checkFormatter(opts.formatInputTooLong, "formatInputTooLong")) {\n                    render("<li class=\'select2-no-results\'>" + evaluate(opts.formatInputTooLong, opts.element, search.val(), opts.maximumInputLength) + "</li>");\n                } else {\n                    render("");\n                }\n                return;\n            }\n\n            if (opts.formatSearching && this.findHighlightableChoices().length === 0) {\n                render("<li class=\'select2-searching\'>" + evaluate(opts.formatSearching, opts.element) + "</li>");\n            }\n\n            search.addClass("select2-active");\n\n            this.removeHighlight();\n\n            // give the tokenizer a chance to pre-process the input\n            input = this.tokenize();\n            if (input != undefined && input != null) {\n                search.val(input);\n            }\n\n            this.resultsPage = 1;\n\n            opts.query({\n                element: opts.element,\n                    term: search.val(),\n                    page: this.resultsPage,\n                    context: null,\n                    matcher: opts.matcher,\n                    callback: this.bind(function (data) {\n                var def; // default choice\n\n                // ignore old responses\n                if (queryNumber != this.queryCount) {\n                  return;\n                }\n\n                // ignore a response if the select2 has been closed before it was received\n                if (!this.opened()) {\n                    this.search.removeClass("select2-active");\n                    return;\n                }\n\n                // handle ajax error\n                if(data.hasError !== undefined && checkFormatter(opts.formatAjaxError, "formatAjaxError")) {\n                    render("<li class=\'select2-ajax-error\'>" + evaluate(opts.formatAjaxError, opts.element, data.jqXHR, data.textStatus, data.errorThrown) + "</li>");\n                    return;\n                }\n\n                // save context, if any\n                this.context = (data.context===undefined) ? null : data.context;\n                // create a default choice and prepend it to the list\n                if (this.opts.createSearchChoice && search.val() !== "") {\n                    def = this.opts.createSearchChoice.call(self, search.val(), data.results);\n                    if (def !== undefined && def !== null && self.id(def) !== undefined && self.id(def) !== null) {\n                        if ($(data.results).filter(\n                            function () {\n                                return equal(self.id(this), self.id(def));\n                            }).length === 0) {\n                            this.opts.createSearchChoicePosition(data.results, def);\n                        }\n                    }\n                }\n\n                if (data.results.length === 0 && checkFormatter(opts.formatNoMatches, "formatNoMatches")) {\n                    render("<li class=\'select2-no-results\'>" + evaluate(opts.formatNoMatches, opts.element, search.val()) + "</li>");\n                    return;\n                }\n\n                results.empty();\n                self.opts.populateResults.call(this, results, data.results, {term: search.val(), page: this.resultsPage, context:null});\n\n                if (data.more === true && checkFormatter(opts.formatLoadMore, "formatLoadMore")) {\n                    results.append("<li class=\'select2-more-results\'>" + opts.escapeMarkup(evaluate(opts.formatLoadMore, opts.element, this.resultsPage)) + "</li>");\n                    window.setTimeout(function() { self.loadMoreIfNeeded(); }, 10);\n                }\n\n                this.postprocessResults(data, initial);\n\n                postRender();\n\n                this.opts.element.trigger({ type: "select2-loaded", items: data });\n            })});\n        },\n\n        // abstract\n        cancel: function () {\n            this.close();\n        },\n\n        // abstract\n        blur: function () {\n            // if selectOnBlur == true, select the currently highlighted option\n            if (this.opts.selectOnBlur)\n                this.selectHighlighted({noFocus: true});\n\n            this.close();\n            this.container.removeClass("select2-container-active");\n            // synonymous to .is(\':focus\'), which is available in jquery >= 1.6\n            if (this.search[0] === document.activeElement) { this.search.blur(); }\n            this.clearSearch();\n            this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus");\n        },\n\n        // abstract\n        focusSearch: function () {\n            focus(this.search);\n        },\n\n        // abstract\n        selectHighlighted: function (options) {\n            if (this._touchMoved) {\n              this.clearTouchMoved();\n              return;\n            }\n            var index=this.highlight(),\n                highlighted=this.results.find(".select2-highlighted"),\n                data = highlighted.closest(\'.select2-result\').data("select2-data");\n\n            if (data) {\n                this.highlight(index);\n                this.onSelect(data, options);\n            } else if (options && options.noFocus) {\n                this.close();\n            }\n        },\n\n        // abstract\n        getPlaceholder: function () {\n            var placeholderOption;\n            return this.opts.element.attr("placeholder") ||\n                this.opts.element.attr("data-placeholder") || // jquery 1.4 compat\n                this.opts.element.data("placeholder") ||\n                this.opts.placeholder ||\n                ((placeholderOption = this.getPlaceholderOption()) !== undefined ? placeholderOption.text() : undefined);\n        },\n\n        // abstract\n        getPlaceholderOption: function() {\n            if (this.select) {\n                var firstOption = this.select.children(\'option\').first();\n                if (this.opts.placeholderOption !== undefined ) {\n                    //Determine the placeholder option based on the specified placeholderOption setting\n                    return (this.opts.placeholderOption === "first" && firstOption) ||\n                           (typeof this.opts.placeholderOption === "function" && this.opts.placeholderOption(this.select));\n                } else if ($.trim(firstOption.text()) === "" && firstOption.val() === "") {\n                    //No explicit placeholder option specified, use the first if it\'s blank\n                    return firstOption;\n                }\n            }\n        },\n\n        /**\n         * Get the desired width for the container element.  This is\n         * derived first from option `width` passed to select2, then\n         * the inline \'style\' on the original element, and finally\n         * falls back to the jQuery calculated element width.\n         */\n        // abstract\n        initContainerWidth: function () {\n            function resolveContainerWidth() {\n                var style, attrs, matches, i, l, attr;\n\n                if (this.opts.width === "off") {\n                    return null;\n                } else if (this.opts.width === "element"){\n                    return this.opts.element.outerWidth(false) === 0 ? \'auto\' : this.opts.element.outerWidth(false) + \'px\';\n                } else if (this.opts.width === "copy" || this.opts.width === "resolve") {\n                    // check if there is inline style on the element that contains width\n                    style = this.opts.element.attr(\'style\');\n                    if (style !== undefined) {\n                        attrs = style.split(\';\');\n                        for (i = 0, l = attrs.length; i < l; i = i + 1) {\n                            attr = attrs[i].replace(/\\s/g, \'\');\n                            matches = attr.match(/^width:(([-+]?([0-9]*\\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/i);\n                            if (matches !== null && matches.length >= 1)\n                                return matches[1];\n                        }\n                    }\n\n                    if (this.opts.width === "resolve") {\n                        // next check if css(\'width\') can resolve a width that is percent based, this is sometimes possible\n                        // when attached to input type=hidden or elements hidden via css\n                        style = this.opts.element.css(\'width\');\n                        if (style.indexOf("%") > 0) return style;\n\n                        // finally, fallback on the calculated width of the element\n                        return (this.opts.element.outerWidth(false) === 0 ? \'auto\' : this.opts.element.outerWidth(false) + \'px\');\n                    }\n\n                    return null;\n                } else if ($.isFunction(this.opts.width)) {\n                    return this.opts.width();\n                } else {\n                    return this.opts.width;\n               }\n            };\n\n            var width = resolveContainerWidth.call(this);\n            if (width !== null) {\n                this.container.css("width", width);\n            }\n        }\n    });\n\n    SingleSelect2 = clazz(AbstractSelect2, {\n\n        // single\n\n        createContainer: function () {\n            var container = $(document.createElement("div")).attr({\n                "class": "select2-container"\n            }).html([\n                "<a href=\'javascript:void(0)\' class=\'select2-choice\' tabindex=\'-1\'>",\n                "   <span class=\'select2-chosen\'>&#160;</span><abbr class=\'select2-search-choice-close\'></abbr>",\n                "   <span class=\'select2-arrow\' role=\'presentation\'><b role=\'presentation\'></b></span>",\n                "</a>",\n                "<label for=\'\' class=\'select2-offscreen\'></label>",\n                "<input class=\'select2-focusser select2-offscreen\' type=\'text\' aria-haspopup=\'true\' role=\'button\' />",\n                "<div class=\'select2-drop select2-display-none\'>",\n                "   <div class=\'select2-search\'>",\n                "       <label for=\'\' class=\'select2-offscreen\'></label>",\n                "       <input type=\'text\' autocomplete=\'off\' autocorrect=\'off\' autocapitalize=\'off\' spellcheck=\'false\' class=\'select2-input\' role=\'combobox\' aria-expanded=\'true\'",\n                "       aria-autocomplete=\'list\' />",\n                "   </div>",\n                "   <ul class=\'select2-results\' role=\'listbox\'>",\n                "   </ul>",\n                "</div>"].join(""));\n            return container;\n        },\n\n        // single\n        enableInterface: function() {\n            if (this.parent.enableInterface.apply(this, arguments)) {\n                this.focusser.prop("disabled", !this.isInterfaceEnabled());\n            }\n        },\n\n        // single\n        opening: function () {\n            var el, range, len;\n\n            if (this.opts.minimumResultsForSearch >= 0) {\n                this.showSearch(true);\n            }\n\n            this.parent.opening.apply(this, arguments);\n\n            if (this.showSearchInput !== false) {\n                // IE appends focusser.val() at the end of field :/ so we manually insert it at the beginning using a range\n                // all other browsers handle this just fine\n\n                this.search.val(this.focusser.val());\n            }\n            if (this.opts.shouldFocusInput(this)) {\n                this.search.focus();\n                // move the cursor to the end after focussing, otherwise it will be at the beginning and\n                // new text will appear *before* focusser.val()\n                el = this.search.get(0);\n                if (el.createTextRange) {\n                    range = el.createTextRange();\n                    range.collapse(false);\n                    range.select();\n                } else if (el.setSelectionRange) {\n                    len = this.search.val().length;\n                    el.setSelectionRange(len, len);\n                }\n            }\n\n            // initializes search\'s value with nextSearchTerm (if defined by user)\n            // ignore nextSearchTerm if the dropdown is opened by the user pressing a letter\n            if(this.search.val() === "") {\n                if(this.nextSearchTerm != undefined){\n                    this.search.val(this.nextSearchTerm);\n                    this.search.select();\n                }\n            }\n\n            this.focusser.prop("disabled", true).val("");\n            this.updateResults(true);\n            this.opts.element.trigger($.Event("select2-open"));\n        },\n\n        // single\n        close: function () {\n            if (!this.opened()) return;\n            this.parent.close.apply(this, arguments);\n\n            this.focusser.prop("disabled", false);\n\n            if (this.opts.shouldFocusInput(this)) {\n                this.focusser.focus();\n            }\n        },\n\n        // single\n        focus: function () {\n            if (this.opened()) {\n                this.close();\n            } else {\n                this.focusser.prop("disabled", false);\n                if (this.opts.shouldFocusInput(this)) {\n                    this.focusser.focus();\n                }\n            }\n        },\n\n        // single\n        isFocused: function () {\n            return this.container.hasClass("select2-container-active");\n        },\n\n        // single\n        cancel: function () {\n            this.parent.cancel.apply(this, arguments);\n            this.focusser.prop("disabled", false);\n\n            if (this.opts.shouldFocusInput(this)) {\n                this.focusser.focus();\n            }\n        },\n\n        // single\n        destroy: function() {\n            $("label[for=\'" + this.focusser.attr(\'id\') + "\']")\n                .attr(\'for\', this.opts.element.attr("id"));\n            this.parent.destroy.apply(this, arguments);\n\n            cleanupJQueryElements.call(this,\n                "selection",\n                "focusser"\n            );\n        },\n\n        // single\n        initContainer: function () {\n\n            var selection,\n                container = this.container,\n                dropdown = this.dropdown,\n                idSuffix = nextUid(),\n                elementLabel;\n\n            if (this.opts.minimumResultsForSearch < 0) {\n                this.showSearch(false);\n            } else {\n                this.showSearch(true);\n            }\n\n            this.selection = selection = container.find(".select2-choice");\n\n            this.focusser = container.find(".select2-focusser");\n\n            // add aria associations\n            selection.find(".select2-chosen").attr("id", "select2-chosen-"+idSuffix);\n            this.focusser.attr("aria-labelledby", "select2-chosen-"+idSuffix);\n            this.results.attr("id", "select2-results-"+idSuffix);\n            this.search.attr("aria-owns", "select2-results-"+idSuffix);\n\n            // rewrite labels from original element to focusser\n            this.focusser.attr("id", "s2id_autogen"+idSuffix);\n\n            elementLabel = $("label[for=\'" + this.opts.element.attr("id") + "\']");\n\n            this.focusser.prev()\n                .text(elementLabel.text())\n                .attr(\'for\', this.focusser.attr(\'id\'));\n\n            // Ensure the original element retains an accessible name\n            var originalTitle = this.opts.element.attr("title");\n            this.opts.element.attr("title", (originalTitle || elementLabel.text()));\n\n            this.focusser.attr("tabindex", this.elementTabIndex);\n\n            // write label for search field using the label from the focusser element\n            this.search.attr("id", this.focusser.attr(\'id\') + \'_search\');\n\n            this.search.prev()\n                .text($("label[for=\'" + this.focusser.attr(\'id\') + "\']").text())\n                .attr(\'for\', this.search.attr(\'id\'));\n\n            this.search.on("keydown", this.bind(function (e) {\n                if (!this.isInterfaceEnabled()) return;\n\n                // filter 229 keyCodes (input method editor is processing key input)\n                if (229 == e.keyCode) return;\n\n                if (e.which === KEY.PAGE_UP || e.which === KEY.PAGE_DOWN) {\n                    // prevent the page from scrolling\n                    killEvent(e);\n                    return;\n                }\n\n                switch (e.which) {\n                    case KEY.UP:\n                    case KEY.DOWN:\n                        this.moveHighlight((e.which === KEY.UP) ? -1 : 1);\n                        killEvent(e);\n                        return;\n                    case KEY.ENTER:\n                        this.selectHighlighted();\n                        killEvent(e);\n                        return;\n                    case KEY.TAB:\n                        this.selectHighlighted({noFocus: true});\n                        return;\n                    case KEY.ESC:\n                        this.cancel(e);\n                        killEvent(e);\n                        return;\n                }\n            }));\n\n            this.search.on("blur", this.bind(function(e) {\n                // a workaround for chrome to keep the search field focussed when the scroll bar is used to scroll the dropdown.\n                // without this the search field loses focus which is annoying\n                if (document.activeElement === this.body.get(0)) {\n                    window.setTimeout(this.bind(function() {\n                        if (this.opened()) {\n                            this.search.focus();\n                        }\n                    }), 0);\n                }\n            }));\n\n            this.focusser.on("keydown", this.bind(function (e) {\n                if (!this.isInterfaceEnabled()) return;\n\n                if (e.which === KEY.TAB || KEY.isControl(e) || KEY.isFunctionKey(e) || e.which === KEY.ESC) {\n                    return;\n                }\n\n                if (this.opts.openOnEnter === false && e.which === KEY.ENTER) {\n                    killEvent(e);\n                    return;\n                }\n\n                if (e.which == KEY.DOWN || e.which == KEY.UP\n                    || (e.which == KEY.ENTER && this.opts.openOnEnter)) {\n\n                    if (e.altKey || e.ctrlKey || e.shiftKey || e.metaKey) return;\n\n                    this.open();\n                    killEvent(e);\n                    return;\n                }\n\n                if (e.which == KEY.DELETE || e.which == KEY.BACKSPACE) {\n                    if (this.opts.allowClear) {\n                        this.clear();\n                    }\n                    killEvent(e);\n                    return;\n                }\n            }));\n\n\n            installKeyUpChangeEvent(this.focusser);\n            this.focusser.on("keyup-change input", this.bind(function(e) {\n                if (this.opts.minimumResultsForSearch >= 0) {\n                    e.stopPropagation();\n                    if (this.opened()) return;\n                    this.open();\n                }\n            }));\n\n            selection.on("mousedown touchstart", "abbr", this.bind(function (e) {\n                if (!this.isInterfaceEnabled()) return;\n                this.clear();\n                killEventImmediately(e);\n                this.close();\n                this.selection.focus();\n            }));\n\n            selection.on("mousedown touchstart", this.bind(function (e) {\n                // Prevent IE from generating a click event on the body\n                reinsertElement(selection);\n\n                if (!this.container.hasClass("select2-container-active")) {\n                    this.opts.element.trigger($.Event("select2-focus"));\n                }\n\n                if (this.opened()) {\n                    this.close();\n                } else if (this.isInterfaceEnabled()) {\n                    this.open();\n                }\n\n                killEvent(e);\n            }));\n\n            dropdown.on("mousedown touchstart", this.bind(function() {\n                if (this.opts.shouldFocusInput(this)) {\n                    this.search.focus();\n                }\n            }));\n\n            selection.on("focus", this.bind(function(e) {\n                killEvent(e);\n            }));\n\n            this.focusser.on("focus", this.bind(function(){\n                if (!this.container.hasClass("select2-container-active")) {\n                    this.opts.element.trigger($.Event("select2-focus"));\n                }\n                this.container.addClass("select2-container-active");\n            })).on("blur", this.bind(function() {\n                if (!this.opened()) {\n                    this.container.removeClass("select2-container-active");\n                    this.opts.element.trigger($.Event("select2-blur"));\n                }\n            }));\n            this.search.on("focus", this.bind(function(){\n                if (!this.container.hasClass("select2-container-active")) {\n                    this.opts.element.trigger($.Event("select2-focus"));\n                }\n                this.container.addClass("select2-container-active");\n            }));\n\n            this.initContainerWidth();\n            this.opts.element.addClass("select2-offscreen");\n            this.setPlaceholder();\n\n        },\n\n        // single\n        clear: function(triggerChange) {\n            var data=this.selection.data("select2-data");\n            if (data) { // guard against queued quick consecutive clicks\n                var evt = $.Event("select2-clearing");\n                this.opts.element.trigger(evt);\n                if (evt.isDefaultPrevented()) {\n                    return;\n                }\n                var placeholderOption = this.getPlaceholderOption();\n                this.opts.element.val(placeholderOption ? placeholderOption.val() : "");\n                this.selection.find(".select2-chosen").empty();\n                this.selection.removeData("select2-data");\n                this.setPlaceholder();\n\n                if (triggerChange !== false){\n                    this.opts.element.trigger({ type: "select2-removed", val: this.id(data), choice: data });\n                    this.triggerChange({removed:data});\n                }\n            }\n        },\n\n        /**\n         * Sets selection based on source element\'s value\n         */\n        // single\n        initSelection: function () {\n            var selected;\n            if (this.isPlaceholderOptionSelected()) {\n                this.updateSelection(null);\n                this.close();\n                this.setPlaceholder();\n            } else {\n                var self = this;\n                this.opts.initSelection.call(null, this.opts.element, function(selected){\n                    if (selected !== undefined && selected !== null) {\n                        self.updateSelection(selected);\n                        self.close();\n                        self.setPlaceholder();\n                        self.nextSearchTerm = self.opts.nextSearchTerm(selected, self.search.val());\n                    }\n                });\n            }\n        },\n\n        isPlaceholderOptionSelected: function() {\n            var placeholderOption;\n            if (this.getPlaceholder() === undefined) return false; // no placeholder specified so no option should be considered\n            return ((placeholderOption = this.getPlaceholderOption()) !== undefined && placeholderOption.prop("selected"))\n                || (this.opts.element.val() === "")\n                || (this.opts.element.val() === undefined)\n                || (this.opts.element.val() === null);\n        },\n\n        // single\n        prepareOpts: function () {\n            var opts = this.parent.prepareOpts.apply(this, arguments),\n                self=this;\n\n            if (opts.element.get(0).tagName.toLowerCase() === "select") {\n                // install the selection initializer\n                opts.initSelection = function (element, callback) {\n                    var selected = element.find("option").filter(function() { return this.selected && !this.disabled });\n                    // a single select box always has a value, no need to null check \'selected\'\n                    callback(self.optionToData(selected));\n                };\n            } else if ("data" in opts) {\n                // install default initSelection when applied to hidden input and data is local\n                opts.initSelection = opts.initSelection || function (element, callback) {\n                    var id = element.val();\n                    //search in data by id, storing the actual matching item\n                    var match = null;\n                    opts.query({\n                        matcher: function(term, text, el){\n                            var is_match = equal(id, opts.id(el));\n                            if (is_match) {\n                                match = el;\n                            }\n                            return is_match;\n                        },\n                        callback: !$.isFunction(callback) ? $.noop : function() {\n                            callback(match);\n                        }\n                    });\n                };\n            }\n\n            return opts;\n        },\n\n        // single\n        getPlaceholder: function() {\n            // if a placeholder is specified on a single select without a valid placeholder option ignore it\n            if (this.select) {\n                if (this.getPlaceholderOption() === undefined) {\n                    return undefined;\n                }\n            }\n\n            return this.parent.getPlaceholder.apply(this, arguments);\n        },\n\n        // single\n        setPlaceholder: function () {\n            var placeholder = this.getPlaceholder();\n\n            if (this.isPlaceholderOptionSelected() && placeholder !== undefined) {\n\n                // check for a placeholder option if attached to a select\n                if (this.select && this.getPlaceholderOption() === undefined) return;\n\n                this.selection.find(".select2-chosen").html(this.opts.escapeMarkup(placeholder));\n\n                this.selection.addClass("select2-default");\n\n                this.container.removeClass("select2-allowclear");\n            }\n        },\n\n        // single\n        postprocessResults: function (data, initial, noHighlightUpdate) {\n            var selected = 0, self = this, showSearchInput = true;\n\n            // find the selected element in the result list\n\n            this.findHighlightableChoices().each2(function (i, elm) {\n                if (equal(self.id(elm.data("select2-data")), self.opts.element.val())) {\n                    selected = i;\n                    return false;\n                }\n            });\n\n            // and highlight it\n            if (noHighlightUpdate !== false) {\n                if (initial === true && selected >= 0) {\n                    this.highlight(selected);\n                } else {\n                    this.highlight(0);\n                }\n            }\n\n            // hide the search box if this is the first we got the results and there are enough of them for search\n\n            if (initial === true) {\n                var min = this.opts.minimumResultsForSearch;\n                if (min >= 0) {\n                    this.showSearch(countResults(data.results) >= min);\n                }\n            }\n        },\n\n        // single\n        showSearch: function(showSearchInput) {\n            if (this.showSearchInput === showSearchInput) return;\n\n            this.showSearchInput = showSearchInput;\n\n            this.dropdown.find(".select2-search").toggleClass("select2-search-hidden", !showSearchInput);\n            this.dropdown.find(".select2-search").toggleClass("select2-offscreen", !showSearchInput);\n            //add "select2-with-searchbox" to the container if search box is shown\n            $(this.dropdown, this.container).toggleClass("select2-with-searchbox", showSearchInput);\n        },\n\n        // single\n        onSelect: function (data, options) {\n\n            if (!this.triggerSelect(data)) { return; }\n\n            var old = this.opts.element.val(),\n                oldData = this.data();\n\n            this.opts.element.val(this.id(data));\n            this.updateSelection(data);\n\n            this.opts.element.trigger({ type: "select2-selected", val: this.id(data), choice: data });\n\n            this.nextSearchTerm = this.opts.nextSearchTerm(data, this.search.val());\n            this.close();\n\n            if ((!options || !options.noFocus) && this.opts.shouldFocusInput(this)) {\n                this.focusser.focus();\n            }\n\n            if (!equal(old, this.id(data))) {\n                this.triggerChange({ added: data, removed: oldData });\n            }\n        },\n\n        // single\n        updateSelection: function (data) {\n\n            var container=this.selection.find(".select2-chosen"), formatted, cssClass;\n\n            this.selection.data("select2-data", data);\n\n            container.empty();\n            if (data !== null) {\n                formatted=this.opts.formatSelection(data, container, this.opts.escapeMarkup);\n            }\n            if (formatted !== undefined) {\n                container.append(formatted);\n            }\n            cssClass=this.opts.formatSelectionCssClass(data, container);\n            if (cssClass !== undefined) {\n                container.addClass(cssClass);\n            }\n\n            this.selection.removeClass("select2-default");\n\n            if (this.opts.allowClear && this.getPlaceholder() !== undefined) {\n                this.container.addClass("select2-allowclear");\n            }\n        },\n\n        // single\n        val: function () {\n            var val,\n                triggerChange = false,\n                data = null,\n                self = this,\n                oldData = this.data();\n\n            if (arguments.length === 0) {\n                return this.opts.element.val();\n            }\n\n            val = arguments[0];\n\n            if (arguments.length > 1) {\n                triggerChange = arguments[1];\n            }\n\n            if (this.select) {\n                this.select\n                    .val(val)\n                    .find("option").filter(function() { return this.selected }).each2(function (i, elm) {\n                        data = self.optionToData(elm);\n                        return false;\n                    });\n                this.updateSelection(data);\n                this.setPlaceholder();\n                if (triggerChange) {\n                    this.triggerChange({added: data, removed:oldData});\n                }\n            } else {\n                // val is an id. !val is true for [undefined,null,\'\',0] - 0 is legal\n                if (!val && val !== 0) {\n                    this.clear(triggerChange);\n                    return;\n                }\n                if (this.opts.initSelection === undefined) {\n                    throw new Error("cannot call val() if initSelection() is not defined");\n                }\n                this.opts.element.val(val);\n                this.opts.initSelection(this.opts.element, function(data){\n                    self.opts.element.val(!data ? "" : self.id(data));\n                    self.updateSelection(data);\n                    self.setPlaceholder();\n                    if (triggerChange) {\n                        self.triggerChange({added: data, removed:oldData});\n                    }\n                });\n            }\n        },\n\n        // single\n        clearSearch: function () {\n            this.search.val("");\n            this.focusser.val("");\n        },\n\n        // single\n        data: function(value) {\n            var data,\n                triggerChange = false;\n\n            if (arguments.length === 0) {\n                data = this.selection.data("select2-data");\n                if (data == undefined) data = null;\n                return data;\n            } else {\n                if (arguments.length > 1) {\n                    triggerChange = arguments[1];\n                }\n                if (!value) {\n                    this.clear(triggerChange);\n                } else {\n                    data = this.data();\n                    this.opts.element.val(!value ? "" : this.id(value));\n                    this.updateSelection(value);\n                    if (triggerChange) {\n                        this.triggerChange({added: value, removed:data});\n                    }\n                }\n            }\n        }\n    });\n\n    MultiSelect2 = clazz(AbstractSelect2, {\n\n        // multi\n        createContainer: function () {\n            var container = $(document.createElement("div")).attr({\n                "class": "select2-container select2-container-multi"\n            }).html([\n                "<ul class=\'select2-choices\'>",\n                "  <li class=\'select2-search-field\'>",\n                "    <label for=\'\' class=\'select2-offscreen\'></label>",\n                "    <input type=\'text\' autocomplete=\'off\' autocorrect=\'off\' autocapitalize=\'off\' spellcheck=\'false\' class=\'select2-input\'>",\n                "  </li>",\n                "</ul>",\n                "<div class=\'select2-drop select2-drop-multi select2-display-none\'>",\n                "   <ul class=\'select2-results\'>",\n                "   </ul>",\n                "</div>"].join(""));\n            return container;\n        },\n\n        // multi\n        prepareOpts: function () {\n            var opts = this.parent.prepareOpts.apply(this, arguments),\n                self=this;\n\n            // TODO validate placeholder is a string if specified\n\n            if (opts.element.get(0).tagName.toLowerCase() === "select") {\n                // install the selection initializer\n                opts.initSelection = function (element, callback) {\n\n                    var data = [];\n\n                    element.find("option").filter(function() { return this.selected && !this.disabled }).each2(function (i, elm) {\n                        data.push(self.optionToData(elm));\n                    });\n                    callback(data);\n                };\n            } else if ("data" in opts) {\n                // install default initSelection when applied to hidden input and data is local\n                opts.initSelection = opts.initSelection || function (element, callback) {\n                    var ids = splitVal(element.val(), opts.separator);\n                    //search in data by array of ids, storing matching items in a list\n                    var matches = [];\n                    opts.query({\n                        matcher: function(term, text, el){\n                            var is_match = $.grep(ids, function(id) {\n                                return equal(id, opts.id(el));\n                            }).length;\n                            if (is_match) {\n                                matches.push(el);\n                            }\n                            return is_match;\n                        },\n                        callback: !$.isFunction(callback) ? $.noop : function() {\n                            // reorder matches based on the order they appear in the ids array because right now\n                            // they are in the order in which they appear in data array\n                            var ordered = [];\n                            for (var i = 0; i < ids.length; i++) {\n                                var id = ids[i];\n                                for (var j = 0; j < matches.length; j++) {\n                                    var match = matches[j];\n                                    if (equal(id, opts.id(match))) {\n                                        ordered.push(match);\n                                        matches.splice(j, 1);\n                                        break;\n                                    }\n                                }\n                            }\n                            callback(ordered);\n                        }\n                    });\n                };\n            }\n\n            return opts;\n        },\n\n        // multi\n        selectChoice: function (choice) {\n\n            var selected = this.container.find(".select2-search-choice-focus");\n            if (selected.length && choice && choice[0] == selected[0]) {\n\n            } else {\n                if (selected.length) {\n                    this.opts.element.trigger("choice-deselected", selected);\n                }\n                selected.removeClass("select2-search-choice-focus");\n                if (choice && choice.length) {\n                    this.close();\n                    choice.addClass("select2-search-choice-focus");\n                    this.opts.element.trigger("choice-selected", choice);\n                }\n            }\n        },\n\n        // multi\n        destroy: function() {\n            $("label[for=\'" + this.search.attr(\'id\') + "\']")\n                .attr(\'for\', this.opts.element.attr("id"));\n            this.parent.destroy.apply(this, arguments);\n\n            cleanupJQueryElements.call(this,\n                "searchContainer",\n                "selection"\n            );\n        },\n\n        // multi\n        initContainer: function () {\n\n            var selector = ".select2-choices", selection;\n\n            this.searchContainer = this.container.find(".select2-search-field");\n            this.selection = selection = this.container.find(selector);\n\n            var _this = this;\n            this.selection.on("click", ".select2-search-choice:not(.select2-locked)", function (e) {\n                //killEvent(e);\n                _this.search[0].focus();\n                _this.selectChoice($(this));\n            });\n\n            // rewrite labels from original element to focusser\n            this.search.attr("id", "s2id_autogen"+nextUid());\n\n            this.search.prev()\n                .text($("label[for=\'" + this.opts.element.attr("id") + "\']").text())\n                .attr(\'for\', this.search.attr(\'id\'));\n\n            this.search.on("input paste", this.bind(function() {\n                if (this.search.attr(\'placeholder\') && this.search.val().length == 0) return;\n                if (!this.isInterfaceEnabled()) return;\n                if (!this.opened()) {\n                    this.open();\n                }\n            }));\n\n            this.search.attr("tabindex", this.elementTabIndex);\n\n            this.keydowns = 0;\n            this.search.on("keydown", this.bind(function (e) {\n                if (!this.isInterfaceEnabled()) return;\n\n                ++this.keydowns;\n                var selected = selection.find(".select2-search-choice-focus");\n                var prev = selected.prev(".select2-search-choice:not(.select2-locked)");\n                var next = selected.next(".select2-search-choice:not(.select2-locked)");\n                var pos = getCursorInfo(this.search);\n\n                if (selected.length &&\n                    (e.which == KEY.LEFT || e.which == KEY.RIGHT || e.which == KEY.BACKSPACE || e.which == KEY.DELETE || e.which == KEY.ENTER)) {\n                    var selectedChoice = selected;\n                    if (e.which == KEY.LEFT && prev.length) {\n                        selectedChoice = prev;\n                    }\n                    else if (e.which == KEY.RIGHT) {\n                        selectedChoice = next.length ? next : null;\n                    }\n                    else if (e.which === KEY.BACKSPACE) {\n                        if (this.unselect(selected.first())) {\n                            this.search.width(10);\n                            selectedChoice = prev.length ? prev : next;\n                        }\n                    } else if (e.which == KEY.DELETE) {\n                        if (this.unselect(selected.first())) {\n                            this.search.width(10);\n                            selectedChoice = next.length ? next : null;\n                        }\n                    } else if (e.which == KEY.ENTER) {\n                        selectedChoice = null;\n                    }\n\n                    this.selectChoice(selectedChoice);\n                    killEvent(e);\n                    if (!selectedChoice || !selectedChoice.length) {\n                        this.open();\n                    }\n                    return;\n                } else if (((e.which === KEY.BACKSPACE && this.keydowns == 1)\n                    || e.which == KEY.LEFT) && (pos.offset == 0 && !pos.length)) {\n\n                    this.selectChoice(selection.find(".select2-search-choice:not(.select2-locked)").last());\n                    killEvent(e);\n                    return;\n                } else {\n                    this.selectChoice(null);\n                }\n\n                if (this.opened()) {\n                    switch (e.which) {\n                    case KEY.UP:\n                    case KEY.DOWN:\n                        this.moveHighlight((e.which === KEY.UP) ? -1 : 1);\n                        killEvent(e);\n                        return;\n                    case KEY.ENTER:\n                        this.selectHighlighted();\n                        killEvent(e);\n                        return;\n                    case KEY.TAB:\n                        this.selectHighlighted({noFocus:true});\n                        this.close();\n                        return;\n                    case KEY.ESC:\n                        this.cancel(e);\n                        killEvent(e);\n                        return;\n                    }\n                }\n\n                if (e.which === KEY.TAB || KEY.isControl(e) || KEY.isFunctionKey(e)\n                 || e.which === KEY.BACKSPACE || e.which === KEY.ESC) {\n                    return;\n                }\n\n                if (e.which === KEY.ENTER) {\n                    if (this.opts.openOnEnter === false) {\n                        return;\n                    } else if (e.altKey || e.ctrlKey || e.shiftKey || e.metaKey) {\n                        return;\n                    }\n                }\n\n                this.open();\n\n                if (e.which === KEY.PAGE_UP || e.which === KEY.PAGE_DOWN) {\n                    // prevent the page from scrolling\n                    killEvent(e);\n                }\n\n                if (e.which === KEY.ENTER) {\n                    // prevent form from being submitted\n                    killEvent(e);\n                }\n\n            }));\n\n            this.search.on("keyup", this.bind(function (e) {\n                this.keydowns = 0;\n                this.resizeSearch();\n            })\n            );\n\n            this.search.on("blur", this.bind(function(e) {\n                this.container.removeClass("select2-container-active");\n                this.search.removeClass("select2-focused");\n                this.selectChoice(null);\n                if (!this.opened()) this.clearSearch();\n                e.stopImmediatePropagation();\n                this.opts.element.trigger($.Event("select2-blur"));\n            }));\n\n            this.container.on("click", selector, this.bind(function (e) {\n                if (!this.isInterfaceEnabled()) return;\n                if ($(e.target).closest(".select2-search-choice").length > 0) {\n                    // clicked inside a select2 search choice, do not open\n                    return;\n                }\n                this.selectChoice(null);\n                this.clearPlaceholder();\n                if (!this.container.hasClass("select2-container-active")) {\n                    this.opts.element.trigger($.Event("select2-focus"));\n                }\n                this.open();\n                this.focusSearch();\n                e.preventDefault();\n            }));\n\n            this.container.on("focus", selector, this.bind(function () {\n                if (!this.isInterfaceEnabled()) return;\n                if (!this.container.hasClass("select2-container-active")) {\n                    this.opts.element.trigger($.Event("select2-focus"));\n                }\n                this.container.addClass("select2-container-active");\n                this.dropdown.addClass("select2-drop-active");\n                this.clearPlaceholder();\n            }));\n\n            this.initContainerWidth();\n            this.opts.element.addClass("select2-offscreen");\n\n            // set the placeholder if necessary\n            this.clearSearch();\n        },\n\n        // multi\n        enableInterface: function() {\n            if (this.parent.enableInterface.apply(this, arguments)) {\n                this.search.prop("disabled", !this.isInterfaceEnabled());\n            }\n        },\n\n        // multi\n        initSelection: function () {\n            var data;\n            if (this.opts.element.val() === "" && this.opts.element.text() === "") {\n                this.updateSelection([]);\n                this.close();\n                // set the placeholder if necessary\n                this.clearSearch();\n            }\n            if (this.select || this.opts.element.val() !== "") {\n                var self = this;\n                this.opts.initSelection.call(null, this.opts.element, function(data){\n                    if (data !== undefined && data !== null) {\n                        self.updateSelection(data);\n                        self.close();\n                        // set the placeholder if necessary\n                        self.clearSearch();\n                    }\n                });\n            }\n        },\n\n        // multi\n        clearSearch: function () {\n            var placeholder = this.getPlaceholder(),\n                maxWidth = this.getMaxSearchWidth();\n\n            if (placeholder !== undefined  && this.getVal().length === 0 && this.search.hasClass("select2-focused") === false) {\n                this.search.val(placeholder).addClass("select2-default");\n                // stretch the search box to full width of the container so as much of the placeholder is visible as possible\n                // we could call this.resizeSearch(), but we do not because that requires a sizer and we do not want to create one so early because of a firefox bug, see #944\n                this.search.width(maxWidth > 0 ? maxWidth : this.container.css("width"));\n            } else {\n                this.search.val("").width(10);\n            }\n        },\n\n        // multi\n        clearPlaceholder: function () {\n            if (this.search.hasClass("select2-default")) {\n                this.search.val("").removeClass("select2-default");\n            }\n        },\n\n        // multi\n        opening: function () {\n            this.clearPlaceholder(); // should be done before super so placeholder is not used to search\n            this.resizeSearch();\n\n            this.parent.opening.apply(this, arguments);\n\n            this.focusSearch();\n\n            // initializes search\'s value with nextSearchTerm (if defined by user)\n            // ignore nextSearchTerm if the dropdown is opened by the user pressing a letter\n            if(this.search.val() === "") {\n                if(this.nextSearchTerm != undefined){\n                    this.search.val(this.nextSearchTerm);\n                    this.search.select();\n                }\n            }\n\n            this.updateResults(true);\n            if (this.opts.shouldFocusInput(this)) {\n                this.search.focus();\n            }\n            this.opts.element.trigger($.Event("select2-open"));\n        },\n\n        // multi\n        close: function () {\n            if (!this.opened()) return;\n            this.parent.close.apply(this, arguments);\n        },\n\n        // multi\n        focus: function () {\n            this.close();\n            this.search.focus();\n        },\n\n        // multi\n        isFocused: function () {\n            return this.search.hasClass("select2-focused");\n        },\n\n        // multi\n        updateSelection: function (data) {\n            var ids = [], filtered = [], self = this;\n\n            // filter out duplicates\n            $(data).each(function () {\n                if (indexOf(self.id(this), ids) < 0) {\n                    ids.push(self.id(this));\n                    filtered.push(this);\n                }\n            });\n            data = filtered;\n\n            this.selection.find(".select2-search-choice").remove();\n            $(data).each(function () {\n                self.addSelectedChoice(this);\n            });\n            self.postprocessResults();\n        },\n\n        // multi\n        tokenize: function() {\n            var input = this.search.val();\n            input = this.opts.tokenizer.call(this, input, this.data(), this.bind(this.onSelect), this.opts);\n            if (input != null && input != undefined) {\n                this.search.val(input);\n                if (input.length > 0) {\n                    this.open();\n                }\n            }\n\n        },\n\n        // multi\n        onSelect: function (data, options) {\n\n            if (!this.triggerSelect(data) || data.text === "") { return; }\n\n            this.addSelectedChoice(data);\n\n            this.opts.element.trigger({ type: "selected", val: this.id(data), choice: data });\n\n            // keep track of the search\'s value before it gets cleared\n            this.nextSearchTerm = this.opts.nextSearchTerm(data, this.search.val());\n\n            this.clearSearch();\n            this.updateResults();\n\n            if (this.select || !this.opts.closeOnSelect) this.postprocessResults(data, false, this.opts.closeOnSelect===true);\n\n            if (this.opts.closeOnSelect) {\n                this.close();\n                this.search.width(10);\n            } else {\n                if (this.countSelectableResults()>0) {\n                    this.search.width(10);\n                    this.resizeSearch();\n                    if (this.getMaximumSelectionSize() > 0 && this.val().length >= this.getMaximumSelectionSize()) {\n                        // if we reached max selection size repaint the results so choices\n                        // are replaced with the max selection reached message\n                        this.updateResults(true);\n                    } else {\n                        // initializes search\'s value with nextSearchTerm and update search result\n                        if(this.nextSearchTerm != undefined){\n                            this.search.val(this.nextSearchTerm);\n                            this.updateResults();\n                            this.search.select();\n                        }\n                    }\n                    this.positionDropdown();\n                } else {\n                    // if nothing left to select close\n                    this.close();\n                    this.search.width(10);\n                }\n            }\n\n            // since its not possible to select an element that has already been\n            // added we do not need to check if this is a new element before firing change\n            this.triggerChange({ added: data });\n\n            if (!options || !options.noFocus)\n                this.focusSearch();\n        },\n\n        // multi\n        cancel: function () {\n            this.close();\n            this.focusSearch();\n        },\n\n        addSelectedChoice: function (data) {\n            var enableChoice = !data.locked,\n                enabledItem = $(\n                    "<li class=\'select2-search-choice\'>" +\n                    "    <div></div>" +\n                    "    <a href=\'#\' class=\'select2-search-choice-close\' tabindex=\'-1\'></a>" +\n                    "</li>"),\n                disabledItem = $(\n                    "<li class=\'select2-search-choice select2-locked\'>" +\n                    "<div></div>" +\n                    "</li>");\n            var choice = enableChoice ? enabledItem : disabledItem,\n                id = this.id(data),\n                val = this.getVal(),\n                formatted,\n                cssClass;\n\n            formatted=this.opts.formatSelection(data, choice.find("div"), this.opts.escapeMarkup);\n            if (formatted != undefined) {\n                choice.find("div").replaceWith("<div>"+formatted+"</div>");\n            }\n            cssClass=this.opts.formatSelectionCssClass(data, choice.find("div"));\n            if (cssClass != undefined) {\n                choice.addClass(cssClass);\n            }\n\n            if(enableChoice){\n              choice.find(".select2-search-choice-close")\n                  .on("mousedown", killEvent)\n                  .on("click dblclick", this.bind(function (e) {\n                  if (!this.isInterfaceEnabled()) return;\n\n                  this.unselect($(e.target));\n                  this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus");\n                  killEvent(e);\n                  this.close();\n                  this.focusSearch();\n              })).on("focus", this.bind(function () {\n                  if (!this.isInterfaceEnabled()) return;\n                  this.container.addClass("select2-container-active");\n                  this.dropdown.addClass("select2-drop-active");\n              }));\n            }\n\n            choice.data("select2-data", data);\n            choice.insertBefore(this.searchContainer);\n\n            val.push(id);\n            this.setVal(val);\n        },\n\n        // multi\n        unselect: function (selected) {\n            var val = this.getVal(),\n                data,\n                index;\n            selected = selected.closest(".select2-search-choice");\n\n            if (selected.length === 0) {\n                throw "Invalid argument: " + selected + ". Must be .select2-search-choice";\n            }\n\n            data = selected.data("select2-data");\n\n            if (!data) {\n                // prevent a race condition when the \'x\' is clicked really fast repeatedly the event can be queued\n                // and invoked on an element already removed\n                return;\n            }\n\n            var evt = $.Event("select2-removing");\n            evt.val = this.id(data);\n            evt.choice = data;\n            this.opts.element.trigger(evt);\n\n            if (evt.isDefaultPrevented()) {\n                return false;\n            }\n\n            while((index = indexOf(this.id(data), val)) >= 0) {\n                val.splice(index, 1);\n                this.setVal(val);\n                if (this.select) this.postprocessResults();\n            }\n\n            selected.remove();\n\n            this.opts.element.trigger({ type: "select2-removed", val: this.id(data), choice: data });\n            this.triggerChange({ removed: data });\n\n            return true;\n        },\n\n        // multi\n        postprocessResults: function (data, initial, noHighlightUpdate) {\n            var val = this.getVal(),\n                choices = this.results.find(".select2-result"),\n                compound = this.results.find(".select2-result-with-children"),\n                self = this;\n\n            choices.each2(function (i, choice) {\n                var id = self.id(choice.data("select2-data"));\n                if (indexOf(id, val) >= 0) {\n                    choice.addClass("select2-selected");\n                    // mark all children of the selected parent as selected\n                    choice.find(".select2-result-selectable").addClass("select2-selected");\n                }\n            });\n\n            compound.each2(function(i, choice) {\n                // hide an optgroup if it doesn\'t have any selectable children\n                if (!choice.is(\'.select2-result-selectable\')\n                    && choice.find(".select2-result-selectable:not(.select2-selected)").length === 0) {\n                    choice.addClass("select2-selected");\n                }\n            });\n\n            if (this.highlight() == -1 && noHighlightUpdate !== false){\n                self.highlight(0);\n            }\n\n            //If all results are chosen render formatNoMatches\n            if(!this.opts.createSearchChoice && !choices.filter(\'.select2-result:not(.select2-selected)\').length > 0){\n                if(!data || data && !data.more && this.results.find(".select2-no-results").length === 0) {\n                    if (checkFormatter(self.opts.formatNoMatches, "formatNoMatches")) {\n                        this.results.append("<li class=\'select2-no-results\'>" + evaluate(self.opts.formatNoMatches, self.opts.element, self.search.val()) + "</li>");\n                    }\n                }\n            }\n\n        },\n\n        // multi\n        getMaxSearchWidth: function() {\n            return this.selection.width() - getSideBorderPadding(this.search);\n        },\n\n        // multi\n        resizeSearch: function () {\n            var minimumWidth, left, maxWidth, containerLeft, searchWidth,\n                sideBorderPadding = getSideBorderPadding(this.search);\n\n            minimumWidth = measureTextWidth(this.search) + 10;\n\n            left = this.search.offset().left;\n\n            maxWidth = this.selection.width();\n            containerLeft = this.selection.offset().left;\n\n            searchWidth = maxWidth - (left - containerLeft) - sideBorderPadding;\n\n            if (searchWidth < minimumWidth) {\n                searchWidth = maxWidth - sideBorderPadding;\n            }\n\n            if (searchWidth < 40) {\n                searchWidth = maxWidth - sideBorderPadding;\n            }\n\n            if (searchWidth <= 0) {\n              searchWidth = minimumWidth;\n            }\n\n            this.search.width(Math.floor(searchWidth));\n        },\n\n        // multi\n        getVal: function () {\n            var val;\n            if (this.select) {\n                val = this.select.val();\n                return val === null ? [] : val;\n            } else {\n                val = this.opts.element.val();\n                return splitVal(val, this.opts.separator);\n            }\n        },\n\n        // multi\n        setVal: function (val) {\n            var unique;\n            if (this.select) {\n                this.select.val(val);\n            } else {\n                unique = [];\n                // filter out duplicates\n                $(val).each(function () {\n                    if (indexOf(this, unique) < 0) unique.push(this);\n                });\n                this.opts.element.val(unique.length === 0 ? "" : unique.join(this.opts.separator));\n            }\n        },\n\n        // multi\n        buildChangeDetails: function (old, current) {\n            var current = current.slice(0),\n                old = old.slice(0);\n\n            // remove intersection from each array\n            for (var i = 0; i < current.length; i++) {\n                for (var j = 0; j < old.length; j++) {\n                    if (equal(this.opts.id(current[i]), this.opts.id(old[j]))) {\n                        current.splice(i, 1);\n                        if(i>0){\n                        \ti--;\n                        }\n                        old.splice(j, 1);\n                        j--;\n                    }\n                }\n            }\n\n            return {added: current, removed: old};\n        },\n\n\n        // multi\n        val: function (val, triggerChange) {\n            var oldData, self=this;\n\n            if (arguments.length === 0) {\n                return this.getVal();\n            }\n\n            oldData=this.data();\n            if (!oldData.length) oldData=[];\n\n            // val is an id. !val is true for [undefined,null,\'\',0] - 0 is legal\n            if (!val && val !== 0) {\n                this.opts.element.val("");\n                this.updateSelection([]);\n                this.clearSearch();\n                if (triggerChange) {\n                    this.triggerChange({added: this.data(), removed: oldData});\n                }\n                return;\n            }\n\n            // val is a list of ids\n            this.setVal(val);\n\n            if (this.select) {\n                this.opts.initSelection(this.select, this.bind(this.updateSelection));\n                if (triggerChange) {\n                    this.triggerChange(this.buildChangeDetails(oldData, this.data()));\n                }\n            } else {\n                if (this.opts.initSelection === undefined) {\n                    throw new Error("val() cannot be called if initSelection() is not defined");\n                }\n\n                this.opts.initSelection(this.opts.element, function(data){\n                    var ids=$.map(data, self.id);\n                    self.setVal(ids);\n                    self.updateSelection(data);\n                    self.clearSearch();\n                    if (triggerChange) {\n                        self.triggerChange(self.buildChangeDetails(oldData, self.data()));\n                    }\n                });\n            }\n            this.clearSearch();\n        },\n\n        // multi\n        onSortStart: function() {\n            if (this.select) {\n                throw new Error("Sorting of elements is not supported when attached to <select>. Attach to <input type=\'hidden\'/> instead.");\n            }\n\n            // collapse search field into 0 width so its container can be collapsed as well\n            this.search.width(0);\n            // hide the container\n            this.searchContainer.hide();\n        },\n\n        // multi\n        onSortEnd:function() {\n\n            var val=[], self=this;\n\n            // show search and move it to the end of the list\n            this.searchContainer.show();\n            // make sure the search container is the last item in the list\n            this.searchContainer.appendTo(this.searchContainer.parent());\n            // since we collapsed the width in dragStarted, we resize it here\n            this.resizeSearch();\n\n            // update selection\n            this.selection.find(".select2-search-choice").each(function() {\n                val.push(self.opts.id($(this).data("select2-data")));\n            });\n            this.setVal(val);\n            this.triggerChange();\n        },\n\n        // multi\n        data: function(values, triggerChange) {\n            var self=this, ids, old;\n            if (arguments.length === 0) {\n                 return this.selection\n                     .children(".select2-search-choice")\n                     .map(function() { return $(this).data("select2-data"); })\n                     .get();\n            } else {\n                old = this.data();\n                if (!values) { values = []; }\n                ids = $.map(values, function(e) { return self.opts.id(e); });\n                this.setVal(ids);\n                this.updateSelection(values);\n                this.clearSearch();\n                if (triggerChange) {\n                    this.triggerChange(this.buildChangeDetails(old, this.data()));\n                }\n            }\n        }\n    });\n\n    $.fn.select2 = function () {\n\n        var args = Array.prototype.slice.call(arguments, 0),\n            opts,\n            select2,\n            method, value, multiple,\n            allowedMethods = ["val", "destroy", "opened", "open", "close", "focus", "isFocused", "container", "dropdown", "onSortStart", "onSortEnd", "enable", "disable", "readonly", "positionDropdown", "data", "search"],\n            valueMethods = ["opened", "isFocused", "container", "dropdown"],\n            propertyMethods = ["val", "data"],\n            methodsMap = { search: "externalSearch" };\n\n        this.each(function () {\n            if (args.length === 0 || typeof(args[0]) === "object") {\n                opts = args.length === 0 ? {} : $.extend({}, args[0]);\n                opts.element = $(this);\n\n                if (opts.element.get(0).tagName.toLowerCase() === "select") {\n                    multiple = opts.element.prop("multiple");\n                } else {\n                    multiple = opts.multiple || false;\n                    if ("tags" in opts) {opts.multiple = multiple = true;}\n                }\n\n                select2 = multiple ? new window.Select2["class"].multi() : new window.Select2["class"].single();\n                select2.init(opts);\n            } else if (typeof(args[0]) === "string") {\n\n                if (indexOf(args[0], allowedMethods) < 0) {\n                    throw "Unknown method: " + args[0];\n                }\n\n                value = undefined;\n                select2 = $(this).data("select2");\n                if (select2 === undefined) return;\n\n                method=args[0];\n\n                if (method === "container") {\n                    value = select2.container;\n                } else if (method === "dropdown") {\n                    value = select2.dropdown;\n                } else {\n                    if (methodsMap[method]) method = methodsMap[method];\n\n                    value = select2[method].apply(select2, args.slice(1));\n                }\n                if (indexOf(args[0], valueMethods) >= 0\n                    || (indexOf(args[0], propertyMethods) >= 0 && args.length == 1)) {\n                    return false; // abort the iteration, ready to return first matched value\n                }\n            } else {\n                throw "Invalid arguments to select2 plugin: " + args;\n            }\n        });\n        return (value === undefined) ? this : value;\n    };\n\n    // plugin defaults, accessible to users\n    $.fn.select2.defaults = {\n        width: "copy",\n        loadMorePadding: 0,\n        closeOnSelect: true,\n        openOnEnter: true,\n        containerCss: {},\n        dropdownCss: {},\n        containerCssClass: "",\n        dropdownCssClass: "",\n        formatResult: function(result, container, query, escapeMarkup) {\n            var markup=[];\n            markMatch(result.text, query.term, markup, escapeMarkup);\n            return markup.join("");\n        },\n        formatSelection: function (data, container, escapeMarkup) {\n            return data ? escapeMarkup(data.text) : undefined;\n        },\n        sortResults: function (results, container, query) {\n            return results;\n        },\n        formatResultCssClass: function(data) {return data.css;},\n        formatSelectionCssClass: function(data, container) {return undefined;},\n        minimumResultsForSearch: 0,\n        minimumInputLength: 0,\n        maximumInputLength: null,\n        maximumSelectionSize: 0,\n        id: function (e) { return e == undefined ? null : e.id; },\n        matcher: function(term, text) {\n            return stripDiacritics(\'\'+text).toUpperCase().indexOf(stripDiacritics(\'\'+term).toUpperCase()) >= 0;\n        },\n        separator: ",",\n        tokenSeparators: [],\n        tokenizer: defaultTokenizer,\n        escapeMarkup: defaultEscapeMarkup,\n        blurOnChange: false,\n        selectOnBlur: false,\n        adaptContainerCssClass: function(c) { return c; },\n        adaptDropdownCssClass: function(c) { return null; },\n        nextSearchTerm: function(selectedObject, currentSearchTerm) { return undefined; },\n        searchInputPlaceholder: \'\',\n        createSearchChoicePosition: \'top\',\n        shouldFocusInput: function (instance) {\n            // Attempt to detect touch devices\n            var supportsTouchEvents = ((\'ontouchstart\' in window) ||\n                                       (navigator.msMaxTouchPoints > 0));\n\n            // Only devices which support touch events should be special cased\n            if (!supportsTouchEvents) {\n                return true;\n            }\n\n            // Never focus the input if search is disabled\n            if (instance.opts.minimumResultsForSearch < 0) {\n                return false;\n            }\n\n            return true;\n        }\n    };\n\n    $.fn.select2.locales = [];\n\n    $.fn.select2.locales[\'en\'] = {\n         formatMatches: function (matches) { if (matches === 1) { return "One result is available, press enter to select it."; } return matches + " results are available, use up and down arrow keys to navigate."; },\n         formatNoMatches: function () { return "No matches found"; },\n         formatAjaxError: function (jqXHR, textStatus, errorThrown) { return "Loading failed"; },\n         formatInputTooShort: function (input, min) { var n = min - input.length; return "Please enter " + n + " or more character" + (n == 1 ? "" : "s"); },\n         formatInputTooLong: function (input, max) { var n = input.length - max; return "Please delete " + n + " character" + (n == 1 ? "" : "s"); },\n         formatSelectionTooBig: function (limit) { return "You can only select " + limit + " item" + (limit == 1 ? "" : "s"); },\n         formatLoadMore: function (pageNumber) { return "Loading more results"; },\n         formatSearching: function () { return "Searching"; },\n    };\n\n    $.extend($.fn.select2.defaults, $.fn.select2.locales[\'en\']);\n\n    $.fn.select2.ajaxDefaults = {\n        transport: $.ajax,\n        params: {\n            type: "GET",\n            cache: false,\n            dataType: "json"\n        }\n    };\n\n    // exports\n    window.Select2 = {\n        query: {\n            ajax: ajax,\n            local: local,\n            tags: tags\n        }, util: {\n            debounce: debounce,\n            markMatch: markMatch,\n            escapeMarkup: defaultEscapeMarkup,\n            stripDiacritics: stripDiacritics\n        }, "class": {\n            "abstract": AbstractSelect2,\n            "single": SingleSelect2,\n            "multi": MultiSelect2\n        }\n    };\n\n}(jQuery));\n';
},function(e,t,n){n(3)(n(50))},function(e,t){e.exports="// $Id: drupal.js,v 1.41.2.3 2008/06/25 09:06:57 goba Exp $\n\nvar Drupal = Drupal || { 'settings': {}, 'behaviors': {}, 'themes': {}, 'locale': {} };\n\n/**\n * Set the variable that indicates if JavaScript behaviors should be applied\n */\nDrupal.jsEnabled = document.getElementsByTagName && document.createElement && document.createTextNode && document.documentElement && document.getElementById;\n\n/**\n * Attach all registered behaviors to a page element.\n *\n * Behaviors are event-triggered actions that attach to page elements, enhancing\n * default non-Javascript UIs. Behaviors are registered in the Drupal.behaviors\n * object as follows:\n * @code\n *    Drupal.behaviors.behaviorName = function () {\n *      ...\n *    };\n * @endcode\n *\n * Drupal.attachBehaviors is added below to the jQuery ready event and so\n * runs on initial page load. Developers implementing AHAH/AJAX in their\n * solutions should also call this function after new page content has been\n * loaded, feeding in an element to be processed, in order to attach all\n * behaviors to the new content.\n *\n * Behaviors should use a class in the form behaviorName-processed to ensure\n * the behavior is attached only once to a given element. (Doing so enables\n * the reprocessing of given elements, which may be needed on occasion despite\n * the ability to limit behavior attachment to a particular element.)\n *\n * @param context\n *   An element to attach behaviors to. If none is given, the document element\n *   is used.\n */\nDrupal.attachBehaviors = function(context) {\n  context = context || document;\n  if (Drupal.jsEnabled) {\n    // Execute all of them.\n    jQuery.each(Drupal.behaviors, function() {\n      this(context);\n    });\n  }\n};\n\n/**\n * Encode special characters in a plain-text string for display as HTML.\n */\nDrupal.checkPlain = function(str) {\n  str = String(str);\n  var replace = { '&': '&amp;', '\"': '&quot;', '<': '&lt;', '>': '&gt;' };\n  for (var character in replace) {\n    var regex = new RegExp(character, 'g');\n    str = str.replace(regex, replace[character]);\n  }\n  return str;\n};\n\n/**\n * Translate strings to the page language or a given language.\n *\n * See the documentation of the server-side t() function for further details.\n *\n * @param str\n *   A string containing the English string to translate.\n * @param args\n *   An object of replacements pairs to make after translation. Incidences\n *   of any key in this array are replaced with the corresponding value.\n *   Based on the first character of the key, the value is escaped and/or themed:\n *    - !variable: inserted as is\n *    - @variable: escape plain text to HTML (Drupal.checkPlain)\n *    - %variable: escape text and theme as a placeholder for user-submitted\n *      content (checkPlain + Drupal.theme('placeholder'))\n * @return\n *   The translated string.\n */\nDrupal.t = function(str, args) {\n  // Fetch the localized version of the string.\n  if (Drupal.locale.strings && Drupal.locale.strings[str]) {\n    str = Drupal.locale.strings[str];\n  }\n\n  if (args) {\n    // Transform arguments before inserting them\n    for (var key in args) {\n      switch (key.charAt(0)) {\n        // Escaped only\n        case '@':\n          args[key] = Drupal.checkPlain(args[key]);\n        break;\n        // Pass-through\n        case '!':\n          break;\n        // Escaped and placeholder\n        case '%':\n        default:\n          args[key] = Drupal.theme('placeholder', args[key]);\n          break;\n      }\n      str = str.replace(key, args[key]);\n    }\n  }\n  return str;\n};\n\nDrupal.date_t = function(strParam, context) {\n\n    var replace = Drupal.date_t_strings();\n    switch (context) {\n        case 'day_name':\n        case 'day_abbr':\n        case 'day_abbr1':\n        case 'day_abbr2':\n            untranslated = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'];\n            break;\n        case 'month_name':\n        case 'month_abbr':\n            untranslated = {'1' : 'January', '2' : 'February', '3' : 'March', '4' : 'April', '5' : 'May', '6' : 'June', '7' : 'July', '8' : 'August', '9' : 'September', '10' : 'October', '11' : 'November', '12' : 'December'};\n            break;\n        case 'ampm':\n            untranslated = ['am', 'pm', 'AM', 'PM'];\n            break;\n        case 'datetime':\n            untranslated = ['Year', 'Month', 'Day', 'Week', 'Hour', 'Minute', 'Second', 'All Day', 'All day'];\n            break;\n        case 'datetime_plural':\n            untranslated = ['Years', 'Months', 'Days', 'Weeks', 'Hours', 'Minutes', 'Seconds'];\n            break;\n        case 'date_order':\n            untranslated = ['Every', 'First', 'Second', 'Third', 'Fourth', 'Fifth'];\n            break;\n        case 'date_order_reverse':\n            untranslated = ['', 'Last', 'Next to last', 'Third from last', 'Fourth from last', 'Fifth from last'];\n            break;\n        case 'date_nav':\n            untranslated = ['Prev', 'Next', 'Today'];\n            break;\n    }\n\n    pos = -1;\n    $.each(untranslated, function(i, untranStr){\n        if(untranStr == strParam){\n            pos = i;\n        }\n    });\n    return (pos > -1) ? replace[context][pos] : strParam;\n}\n\nDrupal.date_t_strings = function() {\n    var replace = [];\n    replace['day_name'] = $.trim(Drupal.t('!day-name Sunday|Monday|Tuesday|Wednesday|Thursday|Friday|Saturday', {'!day-name' : ''})).split('|');\n    replace['day_abbr'] = $.trim(Drupal.t('!day-abbreviation Sun|Mon|Tue|Wed|Thu|Fri|Sat', {'!day-abbreviation' : ''})).split('|');\n    replace['day_abbr1'] = $.trim(Drupal.t('!day-abbreviation S|M|T|W|T|F|S', {'!day-abbreviation' : ''})).split('|');\n    replace['day_abbr2'] = $.trim(Drupal.t('!day-abbreviation SU|MO|TU|WE|TH|FR|SA', {'!day-abbreviation' : ''})).split('|');\n    replace['ampm'] = $.trim(Drupal.t('!ampm-abbreviation am|pm|AM|PM', {'!ampm-abbreviation' : ''})).split('|');\n    replace['datetime'] = $.trim(Drupal.t('!datetime Year|Month|Day|Week|Hour|Minute|Second|All Day|All day', {'!datetime' : ''})).split('|');\n    replace['datetime_plural'] = $.trim(Drupal.t('!datetime_plural Years|Months|Days|Weeks|Hours|Minutes|Seconds', {'!datetime_plural' : ''})).split('|');\n    replace['date_order'] = $.trim(Drupal.t('!date_order Every|First|Second|Third|Fourth|Fifth', {'!date_order' : ''})).split('|');\n    replace['date_order_reverse'] = $.trim(Drupal.t('!date_order |Last|Next to last|Third from last|Fourth from last|Fifth from last', {'!date_order' : ''})).split('|');\n    replace['date_nav'] = $.trim(Drupal.t('!date_nav Prev|Next|Today', {'!date_nav' : ''})).split('|');\n\n    // These start with a pipe so the January value will be in position 1 instead of position 0.\n    replace['month_name'] = $.trim(Drupal.t('!month-name |January|February|March|April|May|June|July|August|September|October|November|December', {'!month-name' : ''})).split('|');\n    replace['month_abbr'] = $.trim(Drupal.t('!month-abbreviation |Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec', {'!month-abbreviation' : ''})).split('|');\n\n    return replace;\n}\n\n/**\n * Format a string containing a count of items.\n *\n * This function ensures that the string is pluralized correctly. Since Drupal.t() is\n * called by this function, make sure not to pass already-localized strings to it.\n *\n * See the documentation of the server-side format_plural() function for further details.\n *\n * @param count\n *   The item count to display.\n * @param singular\n *   The string for the singular case. Please make sure it is clear this is\n *   singular, to ease translation (e.g. use \"1 new comment\" instead of \"1 new\").\n *   Do not use @count in the singular string.\n * @param plural\n *   The string for the plural case. Please make sure it is clear this is plural,\n *   to ease translation. Use @count in place of the item count, as in \"@count\n *   new comments\".\n * @param args\n *   An object of replacements pairs to make after translation. Incidences\n *   of any key in this array are replaced with the corresponding value.\n *   Based on the first character of the key, the value is escaped and/or themed:\n *    - !variable: inserted as is\n *    - @variable: escape plain text to HTML (Drupal.checkPlain)\n *    - %variable: escape text and theme as a placeholder for user-submitted\n *      content (checkPlain + Drupal.theme('placeholder'))\n *   Note that you do not need to include @count in this array.\n *   This replacement is done automatically for the plural case.\n * @return\n *   A translated string.\n */\nDrupal.formatPlural = function(count, singular, plural, args) {\n  var args = args || {};\n  args['@count'] = count;\n  // Determine the index of the plural form.\n  var index = Drupal.locale.pluralFormula ? Drupal.locale.pluralFormula(args['@count']) : ((args['@count'] == 1) ? 0 : 1);\n\n  if (index == 0) {\n    return Drupal.t(singular, args);\n  }\n  else if (index == 1) {\n    return Drupal.t(plural, args);\n  }\n  else {\n    args['@count['+ index +']'] = args['@count'];\n    delete args['@count'];\n    return Drupal.t(plural.replace('@count', '@count['+ index +']'));\n  }\n};\n\n/**\n * Generate the themed representation of a Drupal object.\n *\n * All requests for themed output must go through this function. It examines\n * the request and routes it to the appropriate theme function. If the current\n * theme does not provide an override function, the generic theme function is\n * called.\n *\n * For example, to retrieve the HTML that is output by theme_placeholder(text),\n * call Drupal.theme('placeholder', text).\n *\n * @param func\n *   The name of the theme function to call.\n * @param ...\n *   Additional arguments to pass along to the theme function.\n * @return\n *   Any data the theme function returns. This could be a plain HTML string,\n *   but also a complex object.\n */\nDrupal.theme = function(func) {\n  for (var i = 1, args = []; i < arguments.length; i++) {\n    args.push(arguments[i]);\n  }\n\n  return (Drupal.theme[func] || Drupal.theme.prototype[func]).apply(this, args);\n};\n\n/**\n * Parse a JSON response.\n *\n * The result is either the JSON object, or an object with 'status' 0 and 'data' an error message.\n */\nDrupal.parseJson = function (data) {\n  if ((data.substring(0, 1) != '{') && (data.substring(0, 1) != '[')) {\n    return { status: 0, data: data.length ? data : Drupal.t('Unspecified error') };\n  }\n  return eval('(' + data + ');');\n};\n\n/**\n * Freeze the current body height (as minimum height). Used to prevent\n * unnecessary upwards scrolling when doing DOM manipulations.\n */\nDrupal.freezeHeight = function () {\n  Drupal.unfreezeHeight();\n  var div = document.createElement('div');\n  $(div).css({\n    position: 'absolute',\n    top: '0px',\n    left: '0px',\n    width: '1px',\n    height: $('body').css('height')\n  }).attr('id', 'freeze-height');\n  $('body').append(div);\n};\n\n/**\n * Unfreeze the body height\n */\nDrupal.unfreezeHeight = function () {\n  $('#freeze-height').remove();\n};\n\n/**\n * Wrapper to address the mod_rewrite url encoding bug\n * (equivalent of drupal_urlencode() in PHP).\n */\nDrupal.encodeURIComponent = function (item, uri) {\n  uri = uri || location.href;\n  item = encodeURIComponent(item).replace(/%2F/g, '/');\n  return (uri.indexOf('?q=') != -1) ? item : item.replace(/%26/g, '%2526').replace(/%23/g, '%2523').replace(/\\/\\//g, '/%252F');\n};\n\n/**\n * Get the text selection in a textarea.\n */\nDrupal.getSelection = function (element) {\n  if (typeof(element.selectionStart) != 'number' && document.selection) {\n    // The current selection\n    var range1 = document.selection.createRange();\n    var range2 = range1.duplicate();\n    // Select all text.\n    range2.moveToElementText(element);\n    // Now move 'dummy' end point to end point of original range.\n    range2.setEndPoint('EndToEnd', range1);\n    // Now we can calculate start and end points.\n    var start = range2.text.length - range1.text.length;\n    var end = start + range1.text.length;\n    return { 'start': start, 'end': end };\n  }\n  return { 'start': element.selectionStart, 'end': element.selectionEnd };\n};\n\n/**\n * Build an error message from ahah response.\n */\nDrupal.ahahError = function(xmlhttp, uri) {\n  if (xmlhttp.status == 200) {\n    if (jQuery.trim($(xmlhttp.responseText).text())) {\n      var message = Drupal.t(\"An error occurred. \\n@uri\\n@text\", {'@uri': uri, '@text': xmlhttp.responseText });\n    }\n    else {\n      var message = Drupal.t(\"An error occurred. \\n@uri\\n(no information available).\", {'@uri': uri, '@text': xmlhttp.responseText });\n    }\n  }\n  else {\n    var message = Drupal.t(\"An HTTP error @status occurred. \\n@uri\", {'@uri': uri, '@status': xmlhttp.status });\n  }\n  return message;\n}\n\n// Global Killswitch on the <html> element\nif (Drupal.jsEnabled) {\n  // Global Killswitch on the <html> element\n  $(document.documentElement).addClass('js');\n  // 'js enabled' cookie\n  document.cookie = 'has_js=1; path=/';\n  // Attach all behaviors.\n  $(document).ready(function() {\n    Drupal.attachBehaviors(this);\n  });\n}\n\n/**\n * The default themes.\n */\nDrupal.theme.prototype = {\n\n  /**\n   * Formats text for emphasized display in a placeholder inside a sentence.\n   *\n   * @param str\n   *   The text to format (plain-text).\n   * @return\n   *   The formatted text (html).\n   */\n  placeholder: function(str) {\n    return '<em>' + Drupal.checkPlain(str) + '</em>';\n  }\n};\n"},function(e,t,n){n(3)(n(52))},function(e,t){e.exports="Drupal.behaviors.sCommonCloseableMessage = function(context){\n  $('.messages.closeable-message:not(.sCommonCloseableMessage-processed)', context).addClass('sCommonCloseableMessage-processed').each(function(){\n    var messageWrapper = $(this);\n    var message = $('.closeable-message', messageWrapper);\n    var messageId = message.attr('id').replace('closeable-message-','');\n    var closeBtn = $('.close-btn', message);\n    closeBtn.click(function(){\n      $(document).trigger('s_common_closeable_message_closed', messageId);\n      closeBtn.html('<img src=\"/sites/all/themes/schoology_theme/images/ajax-loader.gif\" alt=\"' + Drupal.t('Loading') + '\" />');\n      $.ajaxSecure({\n        url : '/closeable_message/close',\n        data : {id: messageId},\n        success : function(data){\n          messageWrapper.fadeOut();\n        },\n        dataType: 'json'\n      });\n    });\n  });\n\n  $('.messages-close-single-btn:not(.sCommonCloseableMessage-processed)', context).addClass('sCommonCloseableMessage-processed').each(function(){\n    var messageBtn = $(this);\n    var messageId = messageBtn.attr('id').replace('closeable-message-', '');\n    messageBtn.click(function(){\n      var skip_reload = Boolean($(this).attr('skip_reload'));\n      var remove_messages = Boolean($(this).attr('remove_messages'));\n      messageBtn.addClass('ajax-loading');\n      messageBtn.html('<img src=\"/sites/all/themes/schoology_theme/images/ajax-loader.gif\" alt=\"' + Drupal.t('Loading') + '\" />');\n      $.ajaxSecure({\n        url : '/closeable_message/close',\n        data : {id: messageId},\n        success : function(data){\n          if( skip_reload ) {\n            var parentLiObj = messageBtn.closest('li');\n            parentLiObj.fadeOut();\n            // is this a system notice? remove the outer-most wrapper if there are no notices left\n            if( parentLiObj.siblings('li').length == 0 )\n              messageBtn.closest('#notice').remove();\n            return;\n          }\n\n          if(remove_messages){\n            messageBtn.closest('.messages').fadeOut();\n            return;\n          }\n\n          location.reload();\n        },\n        dataType: 'json'\n      });\n    });\n  });\n}"},function(e,t,n){n(3)(n(54))},function(e,t){e.exports="/**\n * General floating messages that appears on the page for showing the user statuses and errors that may have occurred.\n * They are similar to drupal_set_message messages but are \"floating\" (read: position fixed)\n * so they do not interfere with the document flow\n */\nDrupal.behaviors.sCommonFloatingMessage = function(context){\n  $('body:not(.sCommonFloatingMessage-processed)', context).addClass('sCommonFloatingMessage-processed').each(function(){\n    Drupal.sFloatingMessage.init($(this));\n  });\n}\n\n/**\n * Schoology Floating Message Library\n *\n * Usage:\n *\n * 1. show and hide some status message\n *   Drupal.sFloatingMessage.setContent('some-key', 'hello!', {addClass: 'warning'});\n *   Drupal.sFloatingMessage.clearContent('some-key', {clearClasses: true});\n * 2. alternative method using a reusable handler (methods can be chained when using this approach)\n *   var fMsg = Drupal.sFloatingMessage.get('some-key');\n *   fMsg.setContent('hello!').addClass('warning');\n *   fMsg.clearContent().clearClasses();\n */\nif(typeof Drupal.sFloatingMessage == 'undefined'){\n  Drupal.sFloatingMessage = (function(){\n\n    var defaultMessageOpts = {\n      // whether there is an \"x\" for the user to manually close a message\n      closeable: true,\n      // default delay for messages appearing\n      fadeInDelay: 3000,\n      // how long the fade in animation lasts\n      fadeInDuration: 500,\n      // default delay for messages disappearing\n      fadeOutDelay: 3000,\n      // how long the fade out animation lasts\n      fadeOutDuration: 500\n    };\n\n    /**\n     * FloatingMessage objects represent a single keyed message item\n     *\n     * @param object el\n     * @param object parent\n     * @param object opts  see defaultMessageOpts\n     */\n    function FloatingMessage(el, parent, opts){\n      this._parent = parent;\n\n      this.el = el;\n      this.contentObj = $('<div/>').addClass('s-js-floating-message-content');\n      this.blockObj = $('<div/>').addClass('s-js-floating-message-block').append(this.contentObj);\n      this.el.addClass('s-js-floating-message').append(this.blockObj);\n\n      this.setOpts(opts);\n\n      this.visible = false;\n      this.fadeTimer = null;\n\n      this.hide();\n\n      if(this.opts.closeable){\n        this.blockObj.prepend('<span class=\"s-js-close-btn\">x</span>');\n      }\n    }\n\n    FloatingMessage.prototype.setOpts = function(opts){\n      if(typeof this.opts == 'undefined'){\n        this.opts = {};\n      }\n      $.extend(this.opts, defaultMessageOpts, opts);\n    };\n\n    FloatingMessage.prototype.checkFadeTimer = function(){\n      if(this.fadeTimer){\n        clearTimeout(this.fadeTimer);\n        this.fadeTimer = null;\n      }\n    };\n\n    /**\n     * Add a class or classes to the floating message object\n     *\n     * @param string klass\n     */\n    FloatingMessage.prototype.addClass = function(klass){\n      this.checkFadeTimer();\n      this.el.addClass(klass);\n      return this;\n    };\n\n    /**\n     * Remove a class or classes from the floating message object\n     *\n     * @param string klass\n     */\n    FloatingMessage.prototype.removeClass = function(klass){\n      this.checkFadeTimer();\n      this.el.removeClass(klass);\n      return this;\n    };\n\n    /**\n     * Remove extraneous classes from the floating message object\n     *\n     */\n    FloatingMessage.prototype.clearClasses = function(){\n      var classes = this.el.attr('class');\n      classes = classes.replace(/(s-js-floating-message|hidden)/, '');\n      return this.removeClass(classes);\n    };\n\n    /**\n     * Exclusively set a certain class or classes to the floating message object, unsetting any extraneous classes\n     *\n     * @param string klass\n     */\n    FloatingMessage.prototype.setClass = function(klass){\n      return this.clearClasses().addClass(klass);\n    };\n\n    /**\n     * Set new content to the floating message object\n     *\n     * @param string/object content\n     * @param object opts\n     *   bool show  (default true) also show the message object in addition to setting the message content\n     */\n    FloatingMessage.prototype.setContent = function(content, opts){\n      this.checkFadeTimer();\n\n      opts = $.extend({\n        show: true\n      }, opts);\n\n      this.contentObj.html(content);\n\n      if(opts.show){\n        this.show(opts);\n      }\n\n      return this;\n    };\n\n    /**\n     * Clear all content to the floating message object\n     *\n     * @param object opts\n     *   bool hide  (default true) also hide the message in addition to clearing the contents\n     */\n    FloatingMessage.prototype.clearContent = function(opts){\n      this.checkFadeTimer();\n\n      opts = $.extend({\n        hide: true\n      }, opts);\n\n      this.contentObj.html('');\n\n      if(opts.hide){\n        this.hide(opts);\n      }\n\n      return this;\n    };\n\n    /**\n     * Toggle the visibility of the floating message object\n     *\n     * @param bool show\n     * @param object opts\n     *   bool fade  (default false) whether to use fade animation\n     *   int fadeDelay  (default object fadeIn/fadeOut delay) delay before fade occurs. no effect if fade is false\n     *   int fadeDuration  (default object fadeIn/fadeOut duration) amount of time spent for fade animation\n     */\n    FloatingMessage.prototype.toggle = function(show, opts){\n      this.checkFadeTimer();\n      \n      opts = $.extend({\n        fade: false,\n        fadeDelay: show ? this.opts.fadeInDelay : this.opts.fadeOutDelay,\n        fadeDuration: show ? this.opts.fadeInDuration : this.opts.fadeOutDuration\n      }, opts);\n\n      this.visible = show;\n\n      if(opts.fade){\n        var t = this;\n        var fadeFunc = function(){\n          var fadeFunction = show ? 'fadeIn' : 'fadeOut';\n          t.blockObj[fadeFunction](opts.fadeDuration, function(){\n            t.el.toggleClass('hidden', !show);\n            t._parent.updateUI(t);\n          });\n        };\n        if(opts.fadeDelay){\n          this.fadeTimer = setTimeout(fadeFunc, opts.fadeDelay);\n        }\n        else{\n          fadeFunc();\n        }\n      }\n      else{\n        this.blockObj.toggle(show);\n        this.el.toggleClass('hidden', !show);\n        this._parent.updateUI(this);\n      }\n\n      return this;\n    };\n\n    /**\n     * Show the floating message object\n     *\n     * @param object opts  see toggle() for options\n     */\n    FloatingMessage.prototype.show = function(opts){\n      return this.toggle(true, opts);\n    };\n\n    /**\n     * Hide the floating message object\n     *\n     * @param object opts  see toggle() for options\n     */\n    FloatingMessage.prototype.hide = function(opts){\n      return this.toggle(false, opts);\n    };\n\n    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n    var obj = {};\n\n    var priv = {\n      initialized: false,\n      msgObjs: {}\n    };\n\n    var els = {\n      containerObj: null\n    };\n\n    priv.init = function(context){\n      els.containerObj = $('<div/>').addClass('s-js-floating-message-container');\n      els.containerObj.appendTo(context);\n\n      priv.bindEvents();\n    };\n\n    priv.bindEvents = function(){\n      els.containerObj.on('click', '.s-js-close-btn', function(e){\n        var msgId = $(this).closest('.s-js-floating-message').data('msg-id');\n        obj.hideMessage(msgId, {fade: true, fadeDelay: 0});\n      });\n    };\n\n    priv.getMessageObj = function(key){\n      return typeof priv.msgObjs[key] != 'undefined' ? priv.msgObjs[key] : null;\n    };\n\n    priv.newMessageObj = function(key, opts){\n      var $message = $('<div/>').attr('data-msg-id', key);\n      $message.appendTo(els.containerObj);\n      priv.msgObjs[key] = new FloatingMessage($message, obj, opts);\n      return priv.msgObjs[key];\n    };\n\n    obj.init = function(context){\n      if(priv.initialized){\n        return;\n      }\n\n      priv.init(context);\n\n      priv.initialized = true;\n    };\n\n    obj.updateUI = function(){\n      var numVisible = 0;\n      $.each(priv.msgObjs, function(k, msgObj){\n        if(msgObj.visible){\n          numVisible++;\n        }\n      });\n      els.containerObj.toggleClass('hidden', (numVisible == 0));\n    };\n\n    /**\n     * Create or retrieve a FloatingMessage tied to the provided key\n     *\n     * @param string key\n     * @param object opts\n     */\n    obj.get = function(key, opts){\n      var msgObj = priv.getMessageObj(key);\n      if(!msgObj){\n        msgObj = priv.newMessageObj(key, opts);\n      }\n      return msgObj;\n    };\n\n    obj.setContent = function(key, content, opts){\n      opts = $.extend({}, opts);\n\n      var msgObj = obj.get(key);\n      msgObj.setMessage(content, opts);\n\n      if(typeof opts.addClass != 'undefined'){\n        msgObj.addClass(opts.addClass);\n      }\n    };\n\n    obj.clearContent = function(key, opts){\n      opts = $.extend({}, opts);\n\n      var msgObj = obj.get(key);\n      msgObj.clearContent(opts);\n\n      if(typeof opts.clearClasses != 'undefined'){\n        msgObj.clearClasses();\n      }\n    };\n\n    obj.toggleMessage = function(key, show, opts){\n      opts = $.extend({}, opts);\n\n      var msgObj = obj.get(key);\n      msgObj.toggle(show, opts);\n    };\n\n    obj.showMessage = function(key, opts){\n      obj.toggleMessage(key, true, opts);\n    };\n\n    obj.hideMessage = function(key, opts){\n      obj.toggleMessage(key, false, opts);\n    };\n\n    return obj;\n  })();\n}"},function(e,t,n){n(3)(n(56))},function(e,t){e.exports="Drupal.behaviors.schoologyAngular = function(context){\n\n  //setup CSRF token for $http service POST and PUT operations\n  if(typeof Drupal.settings.s_common != 'undefined' && typeof Drupal.settings.s_common.csrf_token != 'undefined' && typeof Drupal.settings.s_common.csrf_key != 'undefined'){\n    sAngular.app.config(['$httpProvider', function ($httpProvider) {\n      /*\n        We are only concern with PUT, POST and DELETE requests -- but angular doesn't\n        provide a method to set defaults for DELETE only. The alternative here could be\n        adding a delete() method to SHttp angular service and then setting defaults for PUT and\n        POST methods only\n       */\n      $httpProvider.defaults.headers.common = {\n        'X-Csrf-Token' : Drupal.settings.s_common.csrf_token,\n        'X-Csrf-Key' : Drupal.settings.s_common.csrf_key\n      }\n    }]);\n  }\n\n  // auto load all template-placeholders in angular\n  var autoLoaded = false;\n  $('.tpl-placeholder:not(.sSchoology-processed)', context).addClass('sSchoology-processed').each(function(){\n    var templatePlaceholder = $(this),\n        templateId = templatePlaceholder.attr('tpl-id');\n    if(templateId && typeof Drupal.settings.theme_js[templateId] != 'undefined'){\n      var templateOpts = Drupal.settings.theme_js[templateId];\n      var moduleName = templateOpts.module;\n      \n      if(sAngular.injector === false){\n        sAngular.injector = angular.injector(['ng', 'schoology']);\n      }\n      \n      // Boot the module if it hasn't already been\n      sAngular.emptyControllerQueue();\n      sAngular.emptyDirectiveQueue();\n      \n      if(typeof templateOpts.template == 'string'){\n        var templateName = templateOpts.template;\n\n        // fetch the template that was called with theme_js() on the server\n        var args = [templateName];\n        if(templateOpts.args){\n          args = $.merge(args, templateOpts.args);\n        }\n        var templateOutput = Drupal.theme.apply(this, args)\n        sAngular.injector.invoke(['$rootScope', '$compile', function($rootScope, $compile){\n          templatePlaceholder.html(templateOutput);\n          $compile(templatePlaceholder)($rootScope);\n\n          autoLoaded = true;\n        }]);\n      }\n    }\n  });\n  \n  if(autoLoaded){\n    // if child scopes were created while we are appending templates to the page\n    // then they would only have been bound to the rootScope and not any more specific newly-created scopes\n    // to update this we just need to call apply from the rootScope\n    sAngular.injector.invoke(['$rootScope', function($rootScope){\n      $rootScope.$apply();\n    }]);\n  }\n};\n\n/**\n * Interface to the Angular framework.\n * Includes custom functions and services to boostrap portions of our app with Angular.\n * \n * \n * Discussion about why this is set up the way it is:\n * \n * Currently in angular when you boot/create an injector, the code on the client at the time is all that is recognized.  * \n * There are ways to add controllers and directives, but services cannot be added dynamically (when would we need dynamic adding\n * you may ask? Popups is example numero uno).  We have built in ways of dynamically adding controllers and directives (see addController and addDirective\n * function in each module).\n * \n * See this discussion https://github.com/angular/angular.js/pull/1721\n */\n\nvar sAngular = (function(angular){\n  var obj = {};\n  obj.modules = {};\n  obj.eventQueue = {};\n  obj.directiveQueue = [];\n  obj.registeredDirectives = [];\n  obj.controllerQueue = [];\n  obj.registeredControllers = [];\n  obj.compileProvider = null;\n  obj.controllerProvider = null;\n  obj.injector = false;\n  obj.bootedModules = [];\n\n  obj.app = angular.module('schoology', ['ui'], ['$compileProvider', '$controllerProvider', function($compileProvider, $controllerProvider){\n    obj.compileProvider = $compileProvider;\n    obj.controllerProvider = $controllerProvider;\n  }]);\n  \n  // Add a directive for angular to register\n  obj.addDirective = function(name, directive){\n    obj.directiveQueue.push([name, directive]);\n  };\n  \n  // Add a controller for angular to register\n  obj.addController = function(name, controller){\n    obj.controllerQueue.push([name, controller]);\n  };\n  \n  obj.emptyControllerQueue = function(){\n    // Controllers\n    if(obj.controllerQueue.length > 0){\n      $.each(obj.controllerQueue, function(k,v){\n        if($.inArray(v[0], obj.registeredControllers) === -1){\n          obj.controllerProvider.register(v[0], v[1]);\n          obj.registeredControllers.push(v[0]);\n        }\n      })\n      obj.controllerQueue = [];\n    }\n  };\n  \n  obj.emptyDirectiveQueue = function(){\n    // Directives\n    if(obj.directiveQueue.length > 0){\n      $.each(obj.directiveQueue, function(k,v){\n          if($.inArray(v[0], obj.registeredDirectives) === -1){\n            obj.compileProvider.directive(v[0], v[1]);\n            obj.registeredDirectives.push(v[0]);\n          }\n      })\n      obj.directiveQueue = [];\n    }\n  };\n\n  // add custom services\n  (function(){\n    var STATUS_LOADING = 1,\n        STATUS_DONE_SUCCESS = 2,\n        STATUS_DONE_FAIL = 3;\n\n    // Http service with url-based caching of result set.\n    obj.app.service('SHttp', ['$http', function($http){\n      var obj = {};\n      obj.cache = {};\n      obj.statuses = {};\n      obj.queue = {};\n\n      var addToQueue = function(url, status, callback){\n        if(typeof callback != 'function'){\n          return;\n        }\n        if(typeof obj.queue[url] == 'undefined'){\n          obj.queue[url] = {};\n        }\n        if(typeof obj.queue[url][status] == 'undefined'){\n          obj.queue[url][status] = [];\n        }\n        obj.queue[url][status].push(callback);\n      };\n      var runQueue = function(url, status){\n        if(typeof obj.queue[url] != 'undefined' && typeof obj.queue[url][status] != 'undefined'){\n          var queuedFunctions = obj.queue[url][status];\n\n          // clear the queue before running it so we don't risk recursively running the same functions off the queue\n          obj.queue[url] = {};\n          $.each(queuedFunctions, function(k, fn){\n            fn(obj.cache[url]);\n          });\n        }\n      };\n      obj.get = function(url, success, fail){\n        addToQueue(url, 'success', success);\n        addToQueue(url, 'fail', fail);\n\n        // if data is not cached and it's not currently loading, do the HTTP request\n        // if it is currently loading, then some one else is going to run the queue when it's done\n        if(typeof obj.statuses[url] == 'undefined' && typeof obj.cache[url] == 'undefined'){\n          obj.statuses[url] = 'loading';\n          $http.get(url).success(function(response){\n            obj.cache[url] = response.body;\n            obj.statuses[url] = STATUS_DONE_SUCCESS;\n            runQueue(url, 'success');\n          }).error(function(response){\n            obj.cache[url] = false;\n            obj.statuses[url] = STATUS_DONE_FAIL;\n            runQueue(url, 'fail');\n          });\n        }\n        else{\n          switch(obj.statuses[url]){\n            case STATUS_DONE_SUCCESS:\n              runQueue(url, 'success');\n              if(typeof success == 'function'){\n                success(obj.cache[url]);\n              }\n              break;\n\n            case STATUS_DONE_FAIL:\n              runQueue(url, 'fail');\n              if(typeof fail == 'function'){\n                fail(obj.cache[url]);\n              }\n              break;\n          }\n        }\n      };\n      return obj;\n    }]);\n  })();\n\n  /**\n   * Utility function to broadcast data from the rootscope\n   *\n   * depending who is calling the rootScopeBroadcast, we may or may not be inside an apply phase\n   * if rootScopeBroadcast is called from angular, then we should already be in an apply phase\n   * if rootScopeBroadcast is called externally (via jQuery code), then we might not be in an apply phase\n   * this makes sure that changes will reflect after the broadcast is over regardless where this was called from\n   */\n  obj.rootScopeBroadcast = function(){\n    var args = Array.prototype.slice.call(arguments),\n        t = this;\n    obj.injector.invoke(['$rootScope', function($rootScope){\n      if($rootScope.$$phase == '$apply' || $rootScope.$$phase == '$digest'){\n        $rootScope.$broadcast.apply($rootScope, args);\n      }\n      else {\n        $rootScope.$apply(function(){\n          $rootScope.$broadcast.apply($rootScope, args);\n        });\n      }\n    }]);\n    t.trigger.apply(t, args);\n  };\n\n  obj.broadcast = function(){\n    var args = Array.prototype.slice.call(arguments),\n        t = this;\n    obj.injector.invoke(['$rootScope', function($rootScope){\n      $rootScope.$broadcast.apply($rootScope, args);\n    }]);\n    t.trigger.apply(t, args);\n  };\n\n  /**\n   * Obtain the angular $scope object for the given element\n   *\n   * @param object jquery object\n   * @return object angular $scope object\n   */\n  obj.getScope = function(element){\n    var ret = null;\n    if(element.hasClass('ng-scope')){\n      ret = angular.element(element.get(0)).scope();\n    }\n\n    return ret;\n  };\n  // if you use s_common_ajax_output server side, this function will extract the theme_js portion and add to settings\n  obj.extractThemeData = function(data){\n    var ngThemes = data.theme_js\n    // Even though we will be blowing out other theme data, it should have all already been processed in a previous page load\n    if(typeof data.theme_js == 'object'){\n      Drupal.settings.theme_js = data.theme_js;\n    }\n  }\n\n  /**\n   * Execute a controller function in a scope found within the context or the context itself if it is defined as an angular scope\n   *\n   * @param object context\n   * @param object opts\n   */\n  obj.contextExec = function(context, opts){\n    var defaults = {\n      func: 'load'\n    };\n\n    var opts = $.extend(defaults, opts);\n\n    var scopeObj = context.hasClass('ng-scope') ? context : $('.ng-scope', context);\n    if(!scopeObj.length){\n      return false;\n    }\n\n    var $scope = obj.getScope(scopeObj);\n    var func = typeof $scope[opts.func] != 'undefined' ? $scope[opts.func] : null;\n    if(func && typeof func == 'function'){\n      if($scope.$$phase == '$apply' || $scope.$$phase == '$digest'){\n        $scope.$apply(function(){\n          func.call();\n        });\n      }\n      else{\n        func.call();\n      }\n    }\n  };\n\n  /**\n   * Register events on the event queue.\n   * The events fire when triggerEvents run (usually via rootScopeBroadcast)\n   *\n   * @param string eventName\n   * @param function/object  can provide function to be executed when event fires or object for additional options\n   *                         when an object is provided, the callback is specified via the fn key\n   */\n  obj.on = function(eventName, eventOpts){\n    var eventInfo = typeof eventOpts == 'object' ? eventOpts : {fn: eventOpts};\n    if(typeof this.eventQueue[eventName] == 'undefined'){\n      this.eventQueue[eventName] = [];\n    }\n    this.eventQueue[eventName].push(eventInfo);\n  };\n\n   /**\n    * Execute all events in the event queue associated with the provided event name.\n    *\n    * @param string eventName\n    * @param mixed1, mixed2,.. args\n    */\n  obj.trigger = function(eventName){\n    var args = Array.prototype.slice.call(arguments, 1);\n    if(typeof this.eventQueue[eventName] != 'undefined'){\n      $.each(this.eventQueue[eventName], function(i, eventInfo){\n        if(typeof eventInfo.fn == 'function'){\n          eventInfo.fn.apply(eventInfo, args);\n        }\n      });\n    }\n  };\n\n  return obj;\n})(angular);\n\nsAngular.app.directive('sPopup', function(){\n  return {\n    restrict : 'C',\n    transclude : true,\n    replace : true,\n    scope : {\n      popupPath : '@path',\n      extraClass : '@extraClass',\n      updateMethod : '@updateMethod',\n      onUpdate : '@onUpdate',\n      templateAttr : '@templateAttr',\n      clientPopup : '@clientPopup',\n      clientPopupHandler : '@clientPopupHandler',\n      clientPopupSubmit : '@clientPopupSubmit',\n      clientPopupText : '@clientPopupText',\n      clientPopupArg : '@clientPopupArg'\n    },\n    template : '<div ng-transclude class=\"sPopupWidget\"></div>',\n    link : function(scope, element, attrs){\n      element.bind('click', function(){\n        if(scope.clientPopup && scope.clientPopupHandler.length > 0){\n          if(typeof Drupal.theme[scope.clientPopupHandler] == 'function'){\n            var clientPopupSettings = Drupal.theme[scope.clientPopupHandler]();            \n          }\n          else{\n            return;\n          }\n          \n          if(scope.clientPopupText){\n            clientPopupSettings.body = scope.clientPopupText;\n          }\n          \n          clientPopupSettings.confirm.func = function(){\n            var handlerArg = angular.isDefined(scope.clientPopupArg) ? scope.clientPopupArg : null;\n            sAngularPopupsClientSubmit(handlerArg);\n          };\n          clientPopupSettings.extraOptions = {};\n          clientPopupSettings.extraOptions.angularScope = scope;\n          clientPopupSettings.extraOptions.angularElement = element;\n          sCommonConfirmationPopup(clientPopupSettings);\n        }\n        else{\n          var popupsOptions = Popups.options({\n            updateMethod : scope.updateMethod,\n            extraClass : scope.extraClass,\n            href : scope.popupPath,\n            angularScope : scope,\n            angularElement : element\n          });\n          if(scope.onUpdate.length > 0){\n            popupsOptions.doneTest = 'angular/popups/done';\n            popupsOptions.onUpdate = 'sAngularPopupsOnUpdate';\n          }        \n          Popups.clickPopupElement($(this),popupsOptions);          \n        }\n      });\n    }\n  }\n})\n\nsAngular.app.directive('sActionLink', function(){\n  return   {\n    restrict : 'C',\n    link : function(scope, element, attrs){      \n      element.sActionLinks({hidden : false});      \n    }    \n  }\n});\n\nsAngular.app.directive('sInfotip', function(){\n  return {\n    restrict : 'C',\n    scope : {\n      gravity : '=gravity',\n      text : '=text',\n      enabled : '=enabled',\n      disableRelation : '=disableRelation',\n      itemInfo : '=itemInfo', //if need to render information through data binding in the template, pass in the relevant information here\n      selector : '=selector' // if need to attach infotip to a child element, as angular only allows for a single directive on an element, and sometimes we nest elements to apply multiple directives\n    },\n    link : function(scope, element, attrs){\n      /**\n       * Get the property in the attribute\n       * It can be a string that was evaluated based on an expression\n       * Or it is a direct string value\n       *\n       * @param string prop  the property to get\n       */\n      function extractProperty(prop){\n        var ret = null;\n        if(angular.isDefined(scope[prop])){\n          // the property is an expression\n          ret = scope[prop];\n        }\n        else if(angular.isDefined(attrs[prop])){\n          // the property is a string\n          ret = attrs[prop];\n        }\n        return ret;\n      }\n      \n      if (extractProperty('selector')){\n        element = $(extractProperty('selector'), element);\n      }\n\n      // Allow the element to specify if it should be disabled on a certain relation\n      scope.$watch('enabled', function(newVal, oldVal){\n        if(angular.isDefined(scope.disableRelation)){\n          switch(scope.disableRelation){\n            case 'inverse': // When the infotip is enabled, disable the button\n              newVal ? element.addClass('disabled') : element.removeClass('disabled');\n              break;\n            case 'direct':\n              newVal ? element.removeClass('disabled') : element.addClass('disabled');\n              break;\n          }\n        }\n      });\n\n      element.tipsy({\n        html: true,\n        gravity: extractProperty('gravity'),\n        delayIn: 500,\n        title: function(){\n          if(angular.isUndefined(scope.enabled) || scope.enabled){\n            var text = extractProperty('text');\n            if(!text){\n              var content = $(this).find('.infotip-content').html();\n              if(angular.isDefined(content)){\n                text = content;\n              }\n            }\n            else{\n              // escape the text\n              text = $('<div/>').text(text).html();\n            }\n            return text;\n          }          \n          return '';\n        }\n      }); \n    }\n  }\n});\n\nsAngular.app.directive('textAutogrow', function(){\n  return {\n    restrict : 'C',\n    link : function(scope, element, attr){\n      $(element).elastic();\n    }\n  }\n})\n\n/*\n * Directive dreamed up by pythonic and found here http://stackoverflow.com/questions/14777841/angularjs-inputplaceholder-directive-breaking-with-ng-model\n */\nsAngular.app.directive('sPrefill', function(){\n  return {\n    restrict: 'C',\n    require: 'ngModel',\n    link: function(scope, element, attr, ctrl) {      \n      \n      // Add HTML5 placeholder feature so we can leverage the extra intelligence that has\n      element.attr('placeholder', attr.prefillText);\n      \n      var value;\n\n      var placehold = function () {\n          element.val(attr.prefillText);\n          element.addClass('pre-fill');\n      };\n      var unplacehold = function () {\n          element.val('');\n          element.removeClass('pre-fill');\n      };\n\n      scope.$watch(attr.ngModel, function (val) {\n        value = val || '';\n        if(value.length > 0){\n          element.removeClass('pre-fill');\n        }\n      });\n\n      element.bind('focus', function () {\n         if(value == ''){\n           unplacehold();\n         }\n           \n      });\n\n      element.bind('blur', function () {\n         if (element.val() == ''){\n           placehold();\n         }\n           \n      });\n\n      ctrl.$formatters.unshift(function (val) {\n        if (!val) {\n          placehold();\n          value = '';\n          return attr.prefillText;\n        }\n        return val;\n      });\n    }\n  };\n});\n\n/*\n * Callback function for Popups server submission\n */\nfunction sAngularPopupsOnUpdate(data, options, element){\n  var scope = options.angularScope;\n  delete data.path;\n  scope.$emit(scope.onUpdate, options.angularElement, data);\n  return;\n}\n\n/*\n * Callback function for popups client submission\n */\nfunction sAngularPopupsClientSubmit(arg){\n  var popup = Popups.activePopup();\n  var scope = popup.options.angularScope;\n  popup.close();\n  sAngular.rootScopeBroadcast(scope.clientPopupSubmit, {el : popup.options.angularElement, arg : arg});  \n}\n\nsAngular.app.directive('sEnrollmentChooser', ['Enrollment', function(Enrollment){\n    return {\n      restrict : 'C',\n      scope : {\n        realm : '@realm',\n        realmId : '@realmId',\n        defaultId : '@defaultId'\n      },\n      link : function(scope, element, attrs){\n        scope.enrollments = {};\n        //var selectObj = $('select', element);\n        var selectObj = $('.enrollment-chooser-pl', element);\n        Enrollment.getEnrollments(attrs.realm, attrs.realmId, function(enrollments){\n          scope.enrollments = enrollments;\n          var ddData = [];\n          $.each(scope.enrollments, function(i, enr){\n            ddData.push({\n              id : enr.id,\n              text : enr.name,\n              enrObj : enr\n            });\n          });\n          \n          selectObj.select2({\n            formatResult : function(object, container){\n              return scope.formatItem(object);\n            },\n            formatSelection : function(object, container){\n              return scope.formatItem(object);\n            },\n            escapeMarkup: function(m) { \n              return m; \n            },\n            data : ddData\n          }).change(function(e){\n            // Let everybody know enrollment has changed\n            var newVal = e.val;\n            sAngular.rootScopeBroadcast('sEnrollmentChooserChange', newVal);\n          });\n          sAngular.rootScopeBroadcast('sEnrollmentChooserLoadComplete');\n          if(angular.isUndefined(scope.enrollments[parseInt(scope.defaultId)])){\n            return;\n          }\n          selectObj.select2('val', scope.defaultId);\n        });\n        \n        scope.formatItem = function(object){\n          if(angular.isUndefined(object.enrObj)){\n            return;\n          }\n          var enrollmentObj = object.enrObj;\n          var item = '<div class=\"enrollment-dd-item\">';\n          item += enrollmentObj.picture + '<span class=\"enrollment-dd-name\">' + enrollmentObj.name + '</span>';\n          item += '</div>';\n          return item;\n        }\n        \n        \n        // Let everybody else programatically change the value\n        scope.$on('sEnrollmentChooserChangeValue', function(e, newVal){\n          if(angular.isUndefined(scope.enrollments[parseInt(newVal)])){\n            return;\n          }\n          selectObj.select2('val', newVal);\n        });\n        \n        scope.$on('sEnrollmentChooserClose', function(){\n          selectObj.select2('close');\n        });\n        \n        // Any click not in this should close it\n        $(document).click(function(e){\n          var evTarget = $(e.target);\n          if(evTarget.parents('.select2-drop').length > 0 || evTarget.parents('.select2-container').length > 0){\n            return;\n          }\n          selectObj.select2('close');\n        })\n      }\n    }\n}])\n\n\n\n/*\n * Allows you to reorder realm dropdowns\n */\nsAngular.app.directive('reorderRealms', ['$compile', function($compile){\n  return   {\n    restrict : 'C',\n    link : function(scope, element, attrs){  \n      element.click(function(){\n      if(Drupal.settings.s_site_tour){\n        $('#sitetour-close-btn').click();\n      }\n      scope.show_handle = true;\n      var isCourse = attrs.realm == 'course';\n      var reorderClass = attrs.realm + '-reorder';\n      if(isCourse){\n        var dropdownOutput = Drupal.theme.s_course_course_dropdown_list(scope.courses.sections, true);\n        var popupTitle = Drupal.t('Reorder Courses');\n        var realms = scope.courses.sections;\n      }\n      else{\n        var dropdownOutput = Drupal.theme.s_group_group_dropdown_list(scope.groups, true);\n        var popupTitle = Drupal.t('Reorder Groups');\n        var realms = scope.groups;\n      }\n      var compiledOutput = $compile(dropdownOutput)(scope);\n      scope.$apply();\n      var opts = {\n          title: popupTitle,\n          body: '',\n          extraClass: ' dropdown-reorder',\n          confirm: {\n            text: Drupal.t('Save Changes'),\n            func: function(){\n              var realmOrder = $('.' + attrs.realm + '-reorder-weights').val().split(',');\n              if(realmOrder){\n                var realmByNids = Array();\n                var sortedRealms = Array();\n                for(var i in realms){\n                  realmByNids[realms[i].nid] = realms[i];\n                }\n                for(var i in realmOrder){\n                  sortedRealms[i] = realmByNids[realmOrder[i]];\n                }\n                if(isCourse){\n                  scope.$apply(scope.courses.sections = sortedRealms);\n                  var realmData = {realm_ids : realmOrder};\n                }\n                else{\n                  scope.$apply(scope.groups = sortedRealms);\n                  var realmData = {realm_ids : realmOrder, vars: scope.vars};\n                }\n                Popups.activePopup().close();\n                $.ajaxSecure({\n                  url: '/enrollment/reorder/' + attrs.realm,\n                  type: 'post',\n                  dataType: 'json',\n                  data: realmData\n                });\n              }\n            }\n          },\n          cancel: {\n            text: Drupal.t('Cancel')\n          },\n          element: element,\n          extraOptions : {}\n      };\n\n      sCommonConfirmationPopup(opts);\n      compiledOutput.prependTo($('.popups-body-inner-has-buttons'));\n      sPopupsResizeCenter();\n            \n      var tableObj = $('.' + reorderClass);\n      var sort_opts = {\n        handle: '.drag-handle',\n        helper: function(e, ui) {\n          ui.children().each(function() {\n            $(this).width($(this).width());\n          });\n          return ui;\n        },\n        stop: function(e, ui) {\n          tableObj.siblings('.' + attrs.realm + '-reorder-weights').val(tableObj.sortable('toArray').toString());\n        },\n        sort: function (e, ui) {\n          //allow it to scroll the div when dragging down/up when using IE \n          if($.browser.msie){\n            var contElem = $('.popups-body-inner-has-buttons');\n            var contUl = $('.popups-body-inner-has-buttons ul');\n            var speed = 20;\n            var treshold = 70;\n            if($(ui.item).offset().top < treshold && contElem.scrollTop() > 0){\n              contElem.scrollTop(contElem.scrollTop() - speed);\n            }\n            if($(ui.item).offset().top > contElem.height() - treshold && contElem.scrollTop() < contUl.eq(0).height()){\n                contElem.scrollTop(contElem.scrollTop() + speed);\n            }\n          }\n        },\n        \n        axis: 'y',\n        items: 'li.draggable'\n      };\n      tableObj.sortable( sort_opts );\n      tableObj.siblings('.' + attrs.realm + '-reorder-weights').val(tableObj.sortable('toArray').toString());\n              \n     });\n    }    \n  }\n}]);\n\n\n//detect when angular data bindings finish updating so that we can fire the dropdown-loaded event\nsAngular.app.directive('loadWatch', function(){\n  return   {\n    restrict : 'C',\n    scope : {\n      loaded : '=loaded'\n    },\n    link : function(scope, element, attrs){\n        scope.$watch('loaded', function(newVal, oldVal){\n          if(Drupal.settings.s_site_tour && scope.loaded){\n            $(document).trigger('dropdown-loaded');\n            element.parents('.activities-dropdown-wrapper:first').addClass('loaded');\n          }\n        });\n    }\n  }\n});\n\n// dim content and add overlay to disable clicks\nsAngular.app.directive('showActiveLoader', function(){\n  return   {\n    restrict : 'C',\n    link : function(scope, element, attrs){\n      scope.$watch('showActiveLoader', function(newValue, oldValue) {\n        if(newValue && (newValue !== oldValue)) {\n          sToggleActiveLoader(attrs.activeLoaderKey, $(element));\n        }\n        else if(newValue === false) {\n          sToggleActiveLoader(attrs.activeLoaderKey);\n        }\n      });\n    }\n  }\n});\n\n// Focus on an element after it is displayed - thanks http://www.emberex.com/programmatically-setting-focus-angularjs-way/\nsAngular.app.directive('hiddenInput', ['$timeout', '$rootScope', function($timeout) {\n  return {\n    restrict: 'A',\n    scope: {\n      hiddenInputSync: \"=hiddenInputSync\",\n      hiddenInputVal : \"=hiddenInputVal\",\n      hiddenInputUpdate : \"&hiddenInputUpdate\"\n    },\n    link: function(scope, element) {\n      scope.$watch(\"hiddenInputSync\", function(currentValue, previousValue) {\n        if (currentValue == true && !previousValue) {\n          $timeout(function(){\n            element[0].focus();\n          }, 250);\n        }\n      });\n      element.bind('blur', function(event){\n        scope.hiddenInputUpdate();\n      })\n    }\n  }\n}]);";
},function(e,t,n){n(3)(n(58))},function(e,t){e.exports='/**\n * AngularUI - The companion suite for AngularJS\n * @version v0.4.0 - 2013-02-15\n * @link http://angular-ui.github.com\n * @license MIT License, http://www.opensource.org/licenses/MIT\n */\nangular.module("ui.config",[]).value("ui.config",{}),angular.module("ui.filters",["ui.config"]),angular.module("ui.directives",["ui.config"]),angular.module("ui",["ui.filters","ui.directives","ui.config"]),angular.module("ui.directives").directive("uiAnimate",["ui.config","$timeout",function(e,t){var n={};return angular.isString(e.animate)?n["class"]=e.animate:e.animate&&(n=e.animate),{restrict:"A",link:function(e,r,i){var s={};i.uiAnimate&&(s=e.$eval(i.uiAnimate),angular.isString(s)&&(s={"class":s})),s=angular.extend({"class":"ui-animate"},n,s),r.addClass(s["class"]),t(function(){r.removeClass(s["class"])},20,!1)}}}]),angular.module("ui.directives").directive("uiCalendar",["ui.config","$parse",function(e,t){return e.uiCalendar=e.uiCalendar||{},{require:"ngModel",restrict:"A",link:function(t,n,r,i){function a(){t.calendar=n.html("");var i=t.calendar.fullCalendar("getView");i&&(i=i.name);var o,u={defaultView:i,eventSources:s};r.uiCalendar?o=t.$eval(r.uiCalendar):o={},angular.extend(u,e.uiCalendar,o),t.calendar.fullCalendar(u)}var s=t.$eval(r.ngModel),o=0,u=function(){var e=t.$eval(r.equalsTracker);return o=0,angular.forEach(s,function(e,t){angular.isArray(e)&&(o+=e.length)}),angular.isNumber(e)?o+s.length+e:o+s.length};a(),t.$watch(u,function(e,t){a()})}}}]),angular.module("ui.directives").directive("uiCodemirror",["ui.config","$timeout",function(e,t){"use strict";var n=["cursorActivity","viewportChange","gutterClick","focus","blur","scroll","update"];return{restrict:"A",require:"ngModel",link:function(r,i,s,o){var u,a,f,l,c;if(i[0].type!=="textarea")throw new Error("uiCodemirror3 can only be applied to a textarea element");u=e.codemirror||{},a=angular.extend({},u,r.$eval(s.uiCodemirror)),f=function(e){return function(t,n){var i=t.getValue();i!==o.$viewValue&&(o.$setViewValue(i),r.$apply()),typeof e=="function"&&e(t,n)}},l=function(){c=CodeMirror.fromTextArea(i[0],a),c.on("change",f(a.onChange));for(var e=0,u=n.length,l;e<u;++e){l=a["on"+n[e].charAt(0).toUpperCase()+n[e].slice(1)];if(l===void 0)continue;if(typeof l!="function")continue;c.on(n[e],l)}o.$formatters.push(function(e){if(angular.isUndefined(e)||e===null)return"";if(angular.isObject(e)||angular.isArray(e))throw new Error("ui-codemirror cannot use an object or an array as a model");return e}),o.$render=function(){c.setValue(o.$viewValue)},s.uiRefresh&&r.$watch(s.uiRefresh,function(e,n){e!==n&&t(c.refresh)})},t(l)}}}]),angular.module("ui.directives").directive("uiCurrency",["ui.config","currencyFilter",function(e,t){var n={pos:"ui-currency-pos",neg:"ui-currency-neg",zero:"ui-currency-zero"};return e.currency&&angular.extend(n,e.currency),{restrict:"EAC",require:"ngModel",link:function(e,r,i,s){var o,u,a;o=angular.extend({},n,e.$eval(i.uiCurrency)),u=function(e){var n;return n=e*1,r.toggleClass(o.pos,n>0),r.toggleClass(o.neg,n<0),r.toggleClass(o.zero,n===0),e===""?r.text(""):r.text(t(n,o.symbol)),!0},s.$render=function(){a=s.$viewValue,r.val(a),u(a)}}}}]),angular.module("ui.directives").directive("uiDate",["ui.config",function(e){"use strict";var t;return t={},angular.isObject(e.date)&&angular.extend(t,e.date),{require:"?ngModel",link:function(t,n,r,i){var s=function(){return angular.extend({},e.date,t.$eval(r.uiDate))},o=function(){var e=s();if(i){var r=function(){t.$apply(function(){var e=n.datepicker("getDate");n.datepicker("setDate",n.val()),i.$setViewValue(e),n.blur()})};if(e.onSelect){var o=e.onSelect;e.onSelect=function(e,n){r(),t.$apply(function(){o(e,n)})}}else e.onSelect=r;n.bind("change",r),i.$render=function(){var e=i.$viewValue;if(angular.isDefined(e)&&e!==null&&!angular.isDate(e))throw new Error("ng-Model value must be a Date object - currently it is a "+typeof e+" - use ui-date-format to convert it from a string");n.datepicker("setDate",e)}}n.datepicker("destroy"),n.datepicker(e),i&&i.$render()};t.$watch(s,o,!0)}}}]).directive("uiDateFormat",["ui.config",function(e){var t={require:"ngModel",link:function(t,n,r,i){var s=r.uiDateFormat||e.dateFormat;s?(i.$formatters.push(function(e){if(angular.isString(e))return $.datepicker.parseDate(s,e)}),i.$parsers.push(function(e){if(e)return $.datepicker.formatDate(s,e)})):(i.$formatters.push(function(e){if(angular.isString(e))return new Date(e)}),i.$parsers.push(function(e){if(e)return e.toISOString()}))}};return t}]),angular.module("ui.directives").directive("uiEvent",["$parse",function(e){return function(t,n,r){var i=t.$eval(r.uiEvent);angular.forEach(i,function(r,i){var s=e(r);n.bind(i,function(e){var n=Array.prototype.slice.call(arguments);n=n.splice(1),t.$apply(function(){s(t,{$event:e,$params:n})})})})}}]),angular.module("ui.directives").directive("uiIf",[function(){return{transclude:"element",priority:1e3,terminal:!0,restrict:"A",compile:function(e,t,n){return function(e,t,r){var i,s;e.$watch(r.uiIf,function(r){i&&(i.remove(),i=undefined),s&&(s.$destroy(),s=undefined),r&&(s=e.$new(),n(s,function(e){i=e,t.after(e)}))})}}}}]),angular.module("ui.directives").directive("uiJq",["ui.config","$timeout",function(t,n){return{restrict:"A",compile:function(r,i){if(!angular.isFunction(r[i.uiJq]))throw new Error(\'ui-jq: The "\'+i.uiJq+\'" function does not exist\');var s=t.jq&&t.jq[i.uiJq];return function(t,r,i){function u(){n(function(){r[i.uiJq].apply(r,o)},0,!1)}var o=[];i.uiOptions?(o=t.$eval("["+i.uiOptions+"]"),angular.isObject(s)&&angular.isObject(o[0])&&(o[0]=angular.extend({},s,o[0]))):s&&(o=[s]),i.ngModel&&r.is("select,input,textarea")&&r.on("change",function(){r.trigger("input")}),i.uiRefresh&&t.$watch(i.uiRefresh,function(e){u()}),u()}}}}]),angular.module("ui.directives").factory("keypressHelper",["$parse",function(t){var n={8:"backspace",9:"tab",13:"enter",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"insert",46:"delete"},r=function(e){return e.charAt(0).toUpperCase()+e.slice(1)};return function(e,i,s,o){var u,a=[];u=i.$eval(o["ui"+r(e)]),angular.forEach(u,function(e,n){var r,i;i=t(e),angular.forEach(n.split(" "),function(e){r={expression:i,keys:{}},angular.forEach(e.split("-"),function(e){r.keys[e]=!0}),a.push(r)})}),s.bind(e,function(t){var r=t.metaKey||t.altKey,s=t.ctrlKey,o=t.shiftKey,u=t.keyCode;e==="keypress"&&!o&&u>=97&&u<=122&&(u-=32),angular.forEach(a,function(e){var u=e.keys[n[t.keyCode]]||e.keys[t.keyCode.toString()]||!1,a=e.keys.alt||!1,f=e.keys.ctrl||!1,l=e.keys.shift||!1;u&&a==r&&f==s&&l==o&&i.$apply(function(){e.expression(i,{$event:t})})})})}}]),angular.module("ui.directives").directive("uiKeydown",["keypressHelper",function(e){return{link:function(t,n,r){e("keydown",t,n,r)}}}]),angular.module("ui.directives").directive("uiKeypress",["keypressHelper",function(e){return{link:function(t,n,r){e("keypress",t,n,r)}}}]),angular.module("ui.directives").directive("uiKeyup",["keypressHelper",function(e){return{link:function(t,n,r){e("keyup",t,n,r)}}}]),function(){function t(e,t,n,r){angular.forEach(t.split(" "),function(t){var i={type:"map-"+t};google.maps.event.addListener(n,t,function(t){r.triggerHandler(angular.extend({},i,t)),e.$$phase||e.$apply()})})}function n(n,r){e.directive(n,[function(){return{restrict:"A",link:function(e,i,s){e.$watch(s[n],function(n){t(e,r,n,i)})}}}])}var e=angular.module("ui.directives");e.directive("uiMap",["ui.config","$parse",function(e,n){var r="bounds_changed center_changed click dblclick drag dragend dragstart heading_changed idle maptypeid_changed mousemove mouseout mouseover projection_changed resize rightclick tilesloaded tilt_changed zoom_changed",i=e.map||{};return{restrict:"A",link:function(e,s,o){var u=angular.extend({},i,e.$eval(o.uiOptions)),a=new google.maps.Map(s[0],u),f=n(o.uiMap);f.assign(e,a),t(e,r,a,s)}}}]),e.directive("uiMapInfoWindow",["ui.config","$parse","$compile",function(e,n,r){var i="closeclick content_change domready position_changed zindex_changed",s=e.mapInfoWindow||{};return{link:function(e,o,u){var a=angular.extend({},s,e.$eval(u.uiOptions));a.content=o[0];var f=n(u.uiMapInfoWindow),l=f(e);l||(l=new google.maps.InfoWindow(a),f.assign(e,l)),t(e,i,l,o),o.replaceWith("<div></div>");var c=l.open;l.open=function(n,i,s,u,a,f){r(o.contents())(e),c.call(l,n,i,s,u,a,f)}}}}]),n("uiMapMarker","animation_changed click clickable_changed cursor_changed dblclick drag dragend draggable_changed dragstart flat_changed icon_changed mousedown mouseout mouseover mouseup position_changed rightclick shadow_changed shape_changed title_changed visible_changed zindex_changed"),n("uiMapPolyline","click dblclick mousedown mousemove mouseout mouseover mouseup rightclick"),n("uiMapPolygon","click dblclick mousedown mousemove mouseout mouseover mouseup rightclick"),n("uiMapRectangle","bounds_changed click dblclick mousedown mousemove mouseout mouseover mouseup rightclick"),n("uiMapCircle","center_changed click dblclick mousedown mousemove mouseout mouseover mouseup radius_changed rightclick"),n("uiMapGroundOverlay","click dblclick")}(),angular.module("ui.directives").directive("uiMask",[function(){return{require:"ngModel",link:function(e,t,n,r){r.$render=function(){var i=r.$viewValue||"";t.val(i),t.mask(e.$eval(n.uiMask))},r.$parsers.push(function(e){var n=t.isMaskValid()||angular.isUndefined(t.isMaskValid())&&t.val().length>0;return r.$setValidity("mask",n),n?e:undefined}),t.bind("keyup",function(){e.$apply(function(){r.$setViewValue(t.mask())})})}}}]),angular.module("ui.directives").directive("uiReset",["ui.config",function(e){var t=null;return e.reset!==undefined&&(t=e.reset),{require:"ngModel",link:function(e,n,r,i){var s;s=angular.element(\'<a class="ui-reset" />\'),n.wrap(\'<span class="ui-resetwrap" />\').after(s),s.bind("click",function(n){n.preventDefault(),e.$apply(function(){r.uiReset?i.$setViewValue(e.$eval(r.uiReset)):i.$setViewValue(t),i.$render()})})}}}]),angular.module("ui.directives").directive("uiRoute",["$location","$parse",function(e,t){return{restrict:"AC",compile:function(n,r){var i;if(r.uiRoute)i="uiRoute";else if(r.ngHref)i="ngHref";else{if(!r.href)throw new Error("uiRoute missing a route or href property on "+n[0]);i="href"}return function(n,r,s){function a(t){(hash=t.indexOf("#"))>-1&&(t=t.substr(hash+1)),u=function(){o(n,e.path().indexOf(t)>-1)},u()}function f(t){(hash=t.indexOf("#"))>-1&&(t=t.substr(hash+1)),u=function(){var i=new RegExp("^"+t+"$",["i"]);o(n,i.test(e.path()))},u()}var o=t(s.ngModel||s.routeModel||"$uiRoute").assign,u=angular.noop;switch(i){case"uiRoute":s.uiRoute?f(s.uiRoute):s.$observe("uiRoute",f);break;case"ngHref":s.ngHref?a(s.ngHref):s.$observe("ngHref",a);break;case"href":a(s.href)}n.$on("$routeChangeSuccess",function(){u()})}}}}]),angular.module("ui.directives").directive("uiScrollfix",["$window",function(e){"use strict";return{link:function(t,n,r){var i=n.offset().top;r.uiScrollfix?r.uiScrollfix.charAt(0)==="-"?r.uiScrollfix=i-r.uiScrollfix.substr(1):r.uiScrollfix.charAt(0)==="+"&&(r.uiScrollfix=i+parseFloat(r.uiScrollfix.substr(1))):r.uiScrollfix=i,angular.element(e).on("scroll.ui-scrollfix",function(){var t;if(angular.isDefined(e.pageYOffset))t=e.pageYOffset;else{var i=document.compatMode&&document.compatMode!=="BackCompat"?document.documentElement:document.body;t=i.scrollTop}!n.hasClass("ui-scrollfix")&&t>r.uiScrollfix?n.addClass("ui-scrollfix"):n.hasClass("ui-scrollfix")&&t<r.uiScrollfix&&n.removeClass("ui-scrollfix")})}}}]),angular.module("ui.directives").directive("uiSelect2",["ui.config","$timeout",function(e,t){var n={};return e.select2&&angular.extend(n,e.select2),{require:"?ngModel",compile:function(e,r){var i,s,o,u=e.is("select"),a=r.multiple!==undefined;return e.is("select")&&(s=e.find("option[ng-repeat], option[data-ng-repeat]"),s.length&&(o=s.attr("ng-repeat")||s.attr("data-ng-repeat"),i=jQuery.trim(o.split("|")[0]).split(" ").pop())),function(e,r,s,o){var f=angular.extend({},n,e.$eval(s.uiSelect2));u?(delete f.multiple,delete f.initSelection):a&&(f.multiple=!0);if(o){o.$render=function(){u?r.select2("val",o.$modelValue):a?o.$modelValue?angular.isArray(o.$modelValue)?r.select2("data",o.$modelValue):r.select2("val",o.$modelValue):r.select2("data",[]):angular.isObject(o.$modelValue)?r.select2("data",o.$modelValue):r.select2("val",o.$modelValue)},i&&e.$watch(i,function(e,n,i){if(!e)return;t(function(){r.select2("val",o.$viewValue),r.trigger("change")})});if(!u){r.bind("change",function(){e.$apply(function(){o.$setViewValue(r.select2("data"))})});if(f.initSelection){var l=f.initSelection;f.initSelection=function(e,t){l(e,function(e){o.$setViewValue(e),t(e)})}}}}s.$observe("disabled",function(e){r.select2(e&&"disable"||"enable")}),s.ngMultiple&&e.$watch(s.ngMultiple,function(e){r.select2(f)}),r.val(e.$eval(s.ngModel)),t(function(){r.select2(f),!f.initSelection&&!u&&o.$setViewValue(r.select2("data"))})}}}}]),angular.module("ui.directives").directive("uiShow",[function(){return function(e,t,n){e.$watch(n.uiShow,function(e,n){e?t.addClass("ui-show"):t.removeClass("ui-show")})}}]).directive("uiHide",[function(){return function(e,t,n){e.$watch(n.uiHide,function(e,n){e?t.addClass("ui-hide"):t.removeClass("ui-hide")})}}]).directive("uiToggle",[function(){return function(e,t,n){e.$watch(n.uiToggle,function(e,n){e?t.removeClass("ui-hide").addClass("ui-show"):t.removeClass("ui-show").addClass("ui-hide")})}}]),angular.module("ui.directives").directive("uiSortable",["ui.config",function(e){return{require:"?ngModel",link:function(t,n,r,i){var s,o,u,a,f,l,c,h,p;f=angular.extend({},e.sortable,t.$eval(r.uiSortable)),i&&(i.$render=function(){n.sortable("refresh")},u=function(e,t){t.item.sortable={index:t.item.index()}},a=function(e,t){t.item.sortable.resort=i},s=function(e,t){t.item.sortable.relocate=!0,i.$modelValue.splice(t.item.index(),0,t.item.sortable.moved)},o=function(e,t){i.$modelValue.length===1?t.item.sortable.moved=i.$modelValue.splice(0,1)[0]:t.item.sortable.moved=i.$modelValue.splice(t.item.sortable.index,1)[0]},onStop=function(e,n){if(n.item.sortable.resort&&!n.item.sortable.relocate){var r,i;i=n.item.sortable.index,r=n.item.index(),i<r&&r--,n.item.sortable.resort.$modelValue.splice(r,0,n.item.sortable.resort.$modelValue.splice(i,1)[0])}(n.item.sortable.resort||n.item.sortable.relocate)&&t.$apply()},h=f.start,f.start=function(e,t){u(e,t),typeof h=="function"&&h(e,t)},_stop=f.stop,f.stop=function(e,t){onStop(e,t),typeof _stop=="function"&&_stop(e,t)},p=f.update,f.update=function(e,t){a(e,t),typeof p=="function"&&p(e,t)},l=f.receive,f.receive=function(e,t){s(e,t),typeof l=="function"&&l(e,t)},c=f.remove,f.remove=function(e,t){o(e,t),typeof c=="function"&&c(e,t)}),n.sortable(f)}}}]),angular.module("ui.directives").directive("uiTinymce",["ui.config",function(e){return e.tinymce=e.tinymce||{},{require:"ngModel",link:function(t,n,r,i){var s,o={onchange_callback:function(e){e.isDirty()&&(e.save(),i.$setViewValue(n.val()),t.$$phase||t.$apply())},handle_event_callback:function(e){return this.isDirty()&&(this.save(),i.$setViewValue(n.val()),t.$$phase||t.$apply()),!0},setup:function(e){e.onSetContent.add(function(e,r){e.isDirty()&&(e.save(),i.$setViewValue(n.val()),t.$$phase||t.$apply())})}};r.uiTinymce?s=t.$eval(r.uiTinymce):s={},angular.extend(o,e.tinymce,s),setTimeout(function(){n.tinymce(o)})}}}]),angular.module("ui.directives").directive("uiValidate",function(){return{restrict:"A",require:"ngModel",link:function(e,t,n,r){var i,s,o={},u=e.$eval(n.uiValidate);if(!u)return;angular.isString(u)&&(u={validator:u}),angular.forEach(u,function(t,n){i=function(i){return e.$eval(t,{$value:i})?(r.$setValidity(n,!0),i):(r.$setValidity(n,!1),undefined)},o[n]=i,r.$formatters.push(i),r.$parsers.push(i)}),n.uiValidateWatch&&(s=e.$eval(n.uiValidateWatch),angular.isString(s)?e.$watch(s,function(){angular.forEach(o,function(e,t){e(r.$modelValue)})}):angular.forEach(s,function(t,n){e.$watch(t,function(){o[n](r.$modelValue)})}))}}}),angular.module("ui.filters").filter("format",function(){return function(e,t){if(!e)return e;var n=e.toString(),r;return t===undefined?n:!angular.isArray(t)&&!angular.isObject(t)?n.split("$0").join(t):(r=angular.isArray(t)&&"$"||":",angular.forEach(t,function(e,t){n=n.split(r+t).join(e)}),n)}}),angular.module("ui.filters").filter("highlight",function(){return function(e,t,n){return t||angular.isNumber(t)?(e=e.toString(),t=t.toString(),n?e.split(t).join(\'<span class="ui-match">\'+t+"</span>"):e.replace(new RegExp(t,"gi"),\'<span class="ui-match">$&</span>\')):e}}),angular.module("ui.filters").filter("inflector",function(){function e(e){return e.replace(/^([a-z])|\\s+([a-z])/g,function(e){return e.toUpperCase()})}function t(e,t){return e.replace(/[A-Z]/g,function(e){return t+e})}var n={humanize:function(n){return e(t(n," ").split("_").join(" "))},underscore:function(e){return e.substr(0,1).toLowerCase()+t(e.substr(1),"_").toLowerCase().split(" ").join("_")},variable:function(t){return t=t.substr(0,1).toLowerCase()+e(t.split("_").join(" ")).substr(1).split(" ").join(""),t}};return function(e,t,r){return t!==!1&&angular.isString(e)?(t=t||"humanize",n[t](e)):e}}),angular.module("ui.filters").filter("unique",function(){return function(e,t){if(t===!1)return e;if((t||angular.isUndefined(t))&&angular.isArray(e)){var n={},r=[],i=function(e){return angular.isObject(e)&&angular.isString(t)?e[t]:e};angular.forEach(e,function(e){var t,n=!1;for(var s=0;s<r.length;s++)if(angular.equals(i(r[s]),i(e))){n=!0;break}n||r.push(e)}),e=r}return e}});'},function(e,t,n){n(3)(n(60))},function(e,t){e.exports="function sBrowserInfoIsDefined(property){\n  return (property = typeof property) !== 'undefined' && property !== 'unknown';\n}\n\n/*\n * Gotten from piwik.js Tracker Object\n * \n * This function is going to figure out what plugins are enabled for this client\n * and set the results of that in a cookie with json encoded data.  This will be\n * an unobtrusive (no additional requests needed) way to communicate to Piwik \n * the browser plugin data from a visit.  Note that there will be edge scenarios where\n * no browser plugin will be stored in our stats data.  This will happen if somehow the user\n * makes only one request to Schoology in a day.\n */\nfunction sBrowserInfoSetCookie(){\n  \n  var cookieName = 's_stats_browser_info';\n  var existingCookie = document.cookie;\n  \n  // Do not set it if it already exists\n  if(existingCookie.indexOf(cookieName) !== -1){\n    return;\n  }\n  \n  // Plugin, Parameter name, MIME type, detected\n  var pluginMap = {\n    // document types\n    pdf:         ['pdf',   'application/pdf',               '0'],\n    // media players\n    quicktime:   ['qt',    'video/quicktime',               '0'],\n    realplayer:  ['realp', 'audio/x-pn-realaudio-plugin',   '0'],\n    wma:         ['wma',   'application/x-mplayer2',        '0'],\n    // interactive multimedia \n    director:    ['dir',   'application/x-director',        '0'],\n    flash:       ['fla',   'application/x-shockwave-flash', '0'],\n    // RIA\n    java:        ['java',  'application/x-java-vm',         '0'],\n    gears:       ['gears', 'application/x-googlegears',     '0'],\n    silverlight: ['ag',    'application/x-silverlight',     '0']\n  };\n  \n  var i; \n  var mimeType;\n  var navigatorAlias = navigator;\n  var windowAlias = window;\n  var screenAlias = screen;\n\n  // Safari and Opera\n  // IE6: typeof navigator.javaEnabled == 'unknown'\n  if (sBrowserInfoIsDefined(navigatorAlias.javaEnabled) && navigatorAlias.javaEnabled()) {\n    pluginMap.java[2] = '1';\n  }\n\n  // Firefox\n  if (typeof windowAlias.GearsFactory === 'function') {\n    pluginMap.gears[2] = '1';\n  }\n\n  if (navigatorAlias.mimeTypes && navigatorAlias.mimeTypes.length) {\n    for (i in pluginMap) {\n      mimeType = navigatorAlias.mimeTypes[pluginMap[i][1]];\n      if (mimeType && mimeType.enabledPlugin) {\n              pluginMap[i][2] = '1';\n      }\n    }\n  }\n  \n  /*\n   * Finally set the cookie\n   */\n  \n  var expire  = new Date();\n  expire.setTime(expire.getTime() + (24*60*60*1000*7));\n  expire = \"; expires=\" + expire.toGMTString();\n  \n  var info = {};\n  info.pluginInfo = pluginMap;\n  info.res = screenAlias.width + 'x' + screenAlias.height;\n  var addtlCookie = cookieName + \"=\" + escape($.toJSON(info)) + expire + \";path=/\";\n  \n  document.cookie = addtlCookie;\n}\n\n\n"},function(e,t,n){n(3)(n(62))},function(e,t){e.exports="var autoLogoutMessagesSet = false;\r\nvar smartSearch = '';\r\nvar searching = false;\r\nvar AUTOCOMPLETE_ITEM_TYPE_USER = 'u';\r\nvar AUTOCOMPLETE_ITEM_TYPE_GROUP = 'g';\r\nvar AUTOCOMPLETE_ITEM_TYPE_COURSE = 'c';\r\nvar AUTOCOMPLETE_ITEM_TYPE_MATERIAL = 'a';\r\nvar AUTOCOMPLETE_ITEM_FULL_USER_SEARCH = 'gp';\r\nvar AUTOCOMPLETE_ITEM_FULL_COURSE_SEARCH = 'gc';\r\nvar AUTOCOMPLETE_ITEM_FULL_GROUP_SEARCH = 'gg';\r\n\r\nDrupal.behaviors.schoology = function(context){\r\n\r\n\tif(autoLogoutMessagesSet == false){\r\n\t\taddAutoLogoutMessages();\r\n\t\tautoLogoutMessagesSet = true;\r\n\t}\r\n\r\n\t// IE fix for radio onchange\r\n  if ($.browser.msie) {\r\n    $('input[type=radio]:not(.schoology-processed), input[type=checkbox]:not(.schoology-processed)',context).addClass('schoology-processed').each(function(){\r\n    \t$(this).bind('click', function() {\r\n    \t\t// throws an 'unspecified error' but still works - ignore the error\r\n    \t\ttry{\r\n            this.blur();\r\n            this.focus();\r\n    \t\t} catch(e) {\r\n\r\n    \t\t}\r\n    \t});\r\n    });\r\n  }\r\n\r\n\r\n  // courses and groups dropdowns\r\n  $('#nav_left .primary-activities:not(.schoology-processed)', context).addClass('schoology-processed').each(function(){\r\n    var wrapper = $(this);\r\n    var clickable = $('.clickable', wrapper);\r\n    var dropdown = $('.activities-dropdown-wrapper', wrapper);\r\n    var primaryActivitiesListItem;\r\n    var hasTour = false;\r\n\r\n    $(document).bind('s_sitetour_step_onload', function(){\r\n      hasTour = true;\r\n    });\r\n\r\n    var wrapperId = wrapper.attr('id');\r\n    \r\n    clickable.click(function(e){\r\n      e.preventDefault();\r\n    \t//close the open menu if there is one open\r\n    \tvar clickableDropdown = $(this).siblings('.activities-dropdown-wrapper');\r\n    \tprimaryActivitiesListItem = $(this).parent('.primary-activities');\r\n    \tif(clickableDropdown.is(':visible')) {\r\n        clickableDropdown.hide();\r\n        $(this).removeClass('active');\r\n        primaryActivitiesListItem.removeClass('active');\r\n        return;\r\n    \t}\r\n      // hide others \r\n      $('.activities-dropdown-wrapper').hide();\r\n      // also reset active state for apps link (set by site tour)\r\n      $('#nav_left .primary-activities .clickable.active, #primary-library #my-apps a.active, #nav_left .primary-activities.active').removeClass('active');\r\n\r\n      if(typeof ajaxURL != 'undefined' && !clickableDropdown.hasClass('no-ajax')){\r\n        var tmpDropdown = $('<div class=\"activities-dropdown-wrapper\"><img class=\"ajax-loader\" src=\"/sites/all/themes/schoology_theme/images/ajax-loader.gif\" /></div>');\r\n        wrapper.append(tmpDropdown);\r\n        tmpDropdown.show();\r\n        clickable.addClass('active');\r\n        primaryActivitiesListItem.addClass('active');\r\n\r\n        $.ajax({\r\n          url: ajaxURL,\r\n          dataType: 'json',\r\n          success: function(data){\r\n            dropdown = $(data.data);\r\n            tmpDropdown.replaceWith(dropdown);\r\n            dropdown.show();\r\n            Drupal.attachBehaviors(dropdown);\r\n            clickable.addClass('active');\r\n            primaryActivitiesListItem.addClass('active');\r\n            sGroupSetupMore(ajaxURL, dropdown, 1);\r\n            if(hasTour){\r\n              $(document).trigger('dropdown-loaded');\r\n            }\r\n          }\r\n        });\r\n\r\n        return false;\r\n      }\r\n      if(wrapperId == 'primary-courses' || wrapperId == 'primary-groups'){\r\n        sAngular.contextExec(clickableDropdown.children('.s-dropdown'));\r\n      }\r\n      else{\r\n        clickableDropdown.toggle();\r\n        if(hasTour){\r\n          $(document).bind('s_sitetour_default_trigger', function(){\r\n            $(document).trigger('dropdown-loaded');\r\n          });\r\n        }\r\n      }\r\n      \r\n      if(wrapperId == 'primary-library') {\r\n        clickable.addClass('active');\r\n        primaryActivitiesListItem.addClass('active');\r\n      }\r\n      \r\n      var visible = dropdown.is(':visible');\r\n      if(!visible){\r\n        // hide others\r\n        $('.activities-dropdown-wrapper').hide();\r\n        $('#nav_left .primary-activities .clickable.active, #nav_left .primary-activities.active').removeClass('active');\r\n        dropdown.show({\r\n          duration : 1, //use 1 so that dropdown-loaded will fire properly when using back/next button in site tour\r\n          complete : function(){\r\n            if(hasTour && clickableDropdown.hasClass('loaded')){\r\n              $(document).trigger('dropdown-loaded');\r\n            }\r\n          }\r\n        });\r\n        clickable.addClass('active');\r\n        primaryActivitiesListItem.addClass('active');\r\n      }\r\n    });\r\n\r\n    $('body').bind('click', function(e){\r\n      var target = $(e.target);\r\n      var notReorderPopup = !target.hasClass('dropdown-reorder') && target.parents('.dropdown-reorder:first').length == 0;\r\n      if(notReorderPopup && !target.hasClass('activities-dropdown-wrapper') && target.parents('.activities-dropdown-wrapper').length == 0 && !target.hasClass('clickable') && !target.hasClass('dropdown')){\r\n        clickable.removeClass('active');\r\n        primaryActivitiesListItem && primaryActivitiesListItem.removeClass('active');\r\n        dropdown.hide();\r\n      }\r\n    });\r\n  });\r\n\r\n\r\n  // Arrow dropdown menu\r\n  $('.user-menu #primary-settings .unfold:not(.schoology-processed)',context).addClass('schoology-processed').each(function(){\r\n  \tvar linkItem = $(this);\r\n  \tvar settingItem = linkItem.parent();\r\n  \tlinkItem.bind('click', function(e){\r\n          var ul = $('ul', settingItem);\r\n          var showing = ul.is(':visible');\r\n          $('body').click();\r\n    \tif(!showing){\r\n              ul.show();\r\n    \t\tlinkItem.addClass('active');\r\n    \t}\r\n    \telse{\r\n              ul.hide();\r\n    \t\tlinkItem.removeClass('active');\r\n    \t}\r\n    \te.preventDefault();\r\n  \t});\r\n\r\n  \t$('body').bind('click', function(e){\r\n  \t\tvar target = $(e.target);\r\n  \t\tif(target.parents('#'+settingItem.attr('id')).length==0){\r\n  \t\t\t$('ul', settingItem).hide();\r\n  \t\t\tlinkItem.removeClass('active');\r\n  \t\t}\r\n  \t});\r\n  });\r\n\r\n\r\n\t// like buttons\r\n\t$('.like-btn:not(.schoology-processed)', context).addClass('schoology-processed').each(function(){\r\n\t\tvar button = $(this);\r\n\t\tbutton.bind('click', function(){\r\n\t\t\tvar ajaxUrl = button.attr('ajax');\r\n\t\t\t$.ajaxSecure({\r\n\t\t\t  url: ajaxUrl,\r\n\t\t\t  dataType: 'json',\r\n\t\t\t  async: false,\r\n\t\t\t  success: function(data){\r\n\t\t\t\t  var buttonHtml = data.h;\r\n\t\t\t\t  var type = data.t;\r\n\t\t\t\t  if(type == 'n'){\r\n\t\t\t\t\t  sLikeUpdateSentenceN(button, data);\r\n\t\t\t\t  }\r\n\t\t\t\t  else if(type == 'c'){\r\n\t\t\t\t\t  sLikeUpdateSentenceC(button, data);\r\n\t\t\t\t  }\r\n\r\n\t\t\t\t  button.find('.content').html(buttonHtml);\r\n\t\t\t  }\r\n\t\t\t});\r\n\t\t});\r\n\t});\r\n\r\n\t// bind Likes popups using js\r\n\t$('.like-details-btn:not(.schoology-processed)', context).addClass('schoology-processed').each(function(){\r\n\t  var options = Popups.options({extraClass : 'popups-medium likers'});\r\n\t  $(this).click(function(){\r\n\t    return Popups.clickPopupElement(this, options);\r\n\t  });\r\n\t});\r\n\r\n\r\n  // request notifications\r\n  $('.user-menu #primary-requests:not(.schoology-processed)').addClass('schoology-processed').each(function(){\r\n  \tvar liElement = $(this);\r\n  \tvar wrapper = $('.request-wrapper', liElement);\r\n  \tvar unreadReqsElement = $('.unread-reqs', liElement);\r\n\r\n  \tunreadReqsElement.bind('click', function(e){\r\n      e.preventDefault();\r\n    \tif(wrapper.html().length){\r\n    \t\twrapper.toggleClass('hide');\r\n    \t\t$(this).toggleClass('active');\r\n    \t}\r\n    \telse{\r\n    \t\tif(!wrapper.hasClass('loading')){\r\n    \t\t\twrapper.addClass('loading').removeClass('hide');\r\n    \t\t\t$(this).addClass('active');\r\n\t    \t\t$.ajax({\r\n    \t      url: \"/requests/ajax\",\r\n    \t      dataType: \"json\",\r\n    \t      success: function(json){\r\n    \t         html = $(json.html);\r\n    \t         wrapper.removeClass('loading').append(html);\r\n    \t         $('.notifier', unreadReqsElement).remove();\r\n    \t         Drupal.attachBehaviors(html);\r\n    \t      }\r\n\t\t\t    });\r\n    \t\t}\r\n    \t}\r\n  \t});\r\n\r\n  \t$('body').bind('click', function(e){\r\n  \t\tvar target = $(e.target);\r\n  \t\tif(target.parents('#'+liElement.attr('id')).length==0){\r\n  \t\t\twrapper.addClass('hide');\r\n  \t\t\tunreadReqsElement.removeClass('active');\r\n  \t\t}\r\n  \t});\r\n  });\r\n\r\n\r\n  // private messages\r\n  $('.user-menu #private-messages:not(.schoology-processed)').addClass('schoology-processed').each(function(){\r\n\r\n  \tvar liElement = $(this);\r\n  \tvar wrapper = $('.message-wrapper', liElement);\r\n  \tvar unreadMsgsElement = $('.unread-messages', liElement);\r\n\r\n  \tunreadMsgsElement.bind('click', function(e){\r\n      e.preventDefault();\r\n    \tif(wrapper.html().length){\r\n    \t\twrapper.toggleClass('hide');\r\n    \t\t$(this).toggleClass('active');\r\n    \t}\r\n    \telse{\r\n    \t\tif(!wrapper.hasClass('loading')){\r\n    \t\t\twrapper.addClass('loading').removeClass('hide');\r\n    \t\t\t$(this).addClass('active');\r\n\t    \t\t$.ajax({\r\n\t\t    \t      url: \"/messaging/latest/ajax\",\r\n\t\t    \t      dataType: \"json\",\r\n\t\t    \t      success: function(json){\r\n\t\t    \t         html = $(json.output);\r\n\t\t    \t         wrapper.removeClass('loading').append(html);\r\n\t\t    \t         Popups.attach(context, '.new-msg-link', Popups.options({extraClass : 'popups-large new-message-popup', doneTest: '^(?!messages\\/new)'}));\r\n\r\n\t\t    \t         $('.message-wrapper li.read').each(function(){\r\n\t\t    \t         \t$(this).click(function(e){\r\n\t\t    \t         \t\tdocument.location.href = $('.subject-link', this).attr('href');\r\n\t\t    \t         \t});\r\n\t\t    \t         });\r\n\r\n\t\t    \t         Drupal.attachBehaviors(html);\r\n\t\t    \t      }\r\n\t\t\t    });\r\n    \t\t}\r\n    \t}\r\n  \t});\r\n\r\n  \t$('body').bind('click', function(e){\r\n  \t\tvar target = $(e.target);\r\n  \t\tif(target.parents('#'+liElement.attr('id')).length!=0)\r\n        return;\r\n  \t\twrapper.addClass('hide');\r\n  \t\tunreadMsgsElement.removeClass('active');\r\n  \t});\r\n\r\n      // When using the 'new message' popup from this menu, before the popup open,\r\n    \t// ensure that there aren't any other privatemsg-new forms on the page, otherwise\r\n    \t// s_attachment etc will get confused\r\n    $(document).bind('popups_open_path',function(event,element,href){\r\n  \t  if(!$(element).hasClass('new-msg-link'))\r\n  \t    return;\r\n\r\n  \t  var otherForms = $('form#privatemsg-new');\r\n\r\n  \t  if( otherForms.length == 0 )\r\n  \t    return;\r\n\r\n  \t  otherForms.remove();\r\n\r\n  \t  // make sure the page reloads so the removed form is replaced\r\n  \t  $(document).one('popups_close',function(){\r\n  \t    window.location.reload();\r\n  \t  });\r\n   \t});\r\n  });\r\n\r\n  //let links with s-js-ajax-secure class on them be loaded with a CSRF proof $.ajaxSecure\r\n  $('.s-js-ajax-secure:not(.sAjaxSecure-processed)',context).addClass('sAjaxSecure-processed').each(function(){\r\n    var linkObj = $(this);\r\n    linkObj.on('click', function(e){\r\n      var locationHref = '';\r\n      e.preventDefault();\r\n      Popups.removePopup();\r\n      Popups.addLoading();\r\n\r\n      if(linkObj.data('s-js-ajax-secure-href') != undefined) {\r\n        locationHref = linkObj.data('s-js-ajax-secure-href');\r\n      }\r\n\r\n      $.ajaxSecure({\r\n        url : linkObj.attr('href'),\r\n        success : function(){\r\n          window.location.href = locationHref;\r\n        }\r\n      });\r\n    });\r\n  });\r\n\r\n  // Request dropdown menu\r\n  $('.s-js-home-requests .accept-req:not(.schoology-processed), .s-js-home-requests .deny-req:not(.schoology-processed)').addClass('schoology-processed').each(function(){\r\n    $(this).on('click', function(e){\r\n      var linkObj = $(this);\r\n\r\n      if(linkObj.hasClass('disabled')) {\r\n        return false;\r\n      }\r\n      linkObj.addClass('disabled');\r\n\r\n      var on_success = function (data , status , xhr) {\r\n        if(data.drupal_set_message && data.drupal_set_message != '') {\r\n          addMessages([{'value': data.drupal_set_message}], 'status temp');\r\n        }\r\n\r\n        linkObj.parents('li').eq(0).fadeOut('fast', function() {\r\n          var ul_parent = linkObj.parents('ul.s-js-home-requests');\r\n          // no requests left\r\n          if(ul_parent.find('li.list-item:visible').length == 0) {\r\n            $('li.show-all',ul_parent).hide();\r\n            ul_parent.prepend('<li class=\"list-item no-requests\"> '+ Drupal.t('You have no pending requests') + '</li>');\r\n          }\r\n        });\r\n      };\r\n      $.ajaxSecure({url: linkObj.attr('href'), success: on_success});\r\n\r\n      e.preventDefault();\r\n    });\r\n  });\r\n\r\n  // comment notifications\r\n  $('.user-menu #primary-notifications:not(.schoology-processed)').addClass('schoology-processed').each(function(){\r\n    var liElement = $(this);\r\n    var wrapper = $('.notification-wrapper', liElement);\r\n    var unreadNotifsElement = $('.unread-notifications', liElement);\r\n\r\n    unreadNotifsElement.bind('click', function(e){\r\n      e.preventDefault();\r\n      if(wrapper.html().length){\r\n        wrapper.toggleClass('hide');\r\n        $(this).toggleClass('active');\r\n      }\r\n      else{\r\n        if(!wrapper.hasClass('loading')){\r\n          wrapper.addClass('loading').removeClass('hide');\r\n          $(this).addClass('active');\r\n          $.ajax({\r\n            url: \"/notifications/ajax\",\r\n            dataType: \"json\",\r\n            success: function(json) {\r\n              sEdgeMoreAddCSS(json.css);\r\n              sEdgeMoreAddJS(json.js, function(){\r\n                var notif_html = $(json.output);\r\n                wrapper.removeClass('loading').append(notif_html);\r\n                Drupal.attachBehaviors(wrapper);\r\n                $('.notifier', unreadNotifsElement).remove();\r\n              });\r\n            }\r\n          });\r\n        }\r\n      }\r\n    });\r\n\r\n    $('body').bind('click', function(e){\r\n      var target = $(e.target);\r\n      if(target.parents('#'+liElement.attr('id')).length!=0){\r\n        return;\r\n      }\r\n      wrapper.addClass('hide');\r\n      unreadNotifsElement.removeClass('active');\r\n    });\r\n  });\r\n\r\n  // Ajax-load top nav notification menu contents when they are opened\r\n  $('.user-menu #primary-notifications .link-btn:not(.schoology-processed)').addClass('schoology-processed').each(function(){\r\n\t  var el = $(this);\r\n  \tel.bind('click', function(){\r\n  \t\tajaxURL = \"/\"+$(this).attr('ajax');\r\n  \t\t$.ajax({\r\n        url: ajaxURL,\r\n      \tdataType: \"json\",\r\n      \tsuccess: function(json){\r\n  \t\t\t\tel.parents('li').eq(0).fadeOut();\r\n      \t}\r\n  \t  });\r\n\t  });\r\n  });\r\n\r\n  // Add various classes to tabledrag anchors and divs during the drag to highlight active handles,rows,etc.\r\n  $('tr.draggable:not(.schoology-processed)',context).addClass('schoology-processed').each(function(){\r\n    sCommonSetupTableDrag($(this));\r\n\t});\r\n\r\n\t// unfortunately we cannot use context here because for popups the outer-most dom element is .popups-body\r\n\t// Sometimes we have form inside fullscreen popup, with cancel-btn. This cancel button can close whole popup,\r\n\t// which is unwanted behavior. If additional class cancel-btn-form-element will be added to cancel button\r\n\t// inside such form, popup won't be close.\r\n\t$('.popups-body a.cancel-btn:not(.schoology-processed),.popups-body span.cancel-btn:not(.schoology-processed):not(.cancel-btn-form-element)').addClass('schoology-processed').each(function(){\r\n\t\t$(this).click(function(e){\r\n\t\t  e.preventDefault();\r\n\t\t  sPopupsClose();\r\n\t\t});\r\n\t});\r\n\r\n\t$('.feed-header a.update:not(.schoology-processed)', context ).addClass('schoology-processed').each(function(){\r\n\t\t$(this).click(function(){\r\n  \t\t var element = $(this).parent().parent().find(\".feed-hidden\");\r\n  \t\t if(element.is(\":hidden\"))\r\n  \t\t \t\telement.slideDown('fast');\r\n  \t\t\telse\r\n  \t\t\t\telement.slideUp('fast');\r\n  \t\t return false;\r\n\t\t});\r\n\t});\r\n\r\n\t$('#block-feedback-form:not(.schoology-processed)', context ).addClass('schoology-processed').each(function(){\r\n\t  $(\"#block-feedback-form textarea\").elastic();\r\n\t});\r\n\r\n\t$('#nav_left #search .search-toggle:not(.schoology-processed)', context).addClass('schoology-processed').each(function () {\r\n\t\tvar toggle = $(this);\r\n\t\ttoggle.click(function (e) {\r\n\t\t\tvar searchFormId = '#navigation_search';\r\n\t\t\tvar searchForm = $(searchFormId);\r\n\t\t\tif (searchForm.is(':visible')) {\r\n\t\t\t\tsearchForm.hide();\r\n\t\t\t\ttoggle.removeClass('active');\r\n\t\t\t\t$('.ac_results').hide();\r\n\t\t\t} else {\r\n\t\t\t\tsearchForm.show();\r\n\t\t\t\t$('.searcher', searchForm).focus();\r\n\t\t\t\ttoggle.addClass('active');\r\n\t\t\t\tcloseSearchEvent(searchFormId, toggle);\r\n\t\t\t}\r\n\t\t});\r\n\t});\r\n\r\n\tfunction closeSearchEvent(searchFormId, toggle)\r\n\t{\r\n\t\t$(\"#body:not(\" + searchFormId + \")\").off('click').on('click', function (e) {\r\n\t\t\tvar $target = $(e.target);\r\n\t\t\tvar $searchForm = $(searchFormId);\r\n\t\t\tif ($target.parents(searchFormId).length === 0 && '#' + e.target.id !== searchFormId) {\r\n\t\t\t\tif(!$target.hasClass('search-toggle')) {\r\n          $searchForm.hide();\r\n\t\t\t\t\ttoggle.removeClass('active');\r\n\t\t\t\t\t$('.ac_results').hide();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\t$('#nav_left #basic a:not(.schoology-processed)', context ).addClass('schoology-processed').each(function(){\r\n\t\tvar toggle = $(this);\r\n\t\ttoggle.click(function(){\r\n\t\t\tvar basic_menu_dropdown = $('#basic-menu-dropdown');\r\n\t\t\tif(basic_menu_dropdown.is(':visible')){\r\n\t\t\t\tbasic_menu_dropdown.hide();\r\n\t\t\t\ttoggle.removeClass('active');\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\t// close any active dropdown menus\r\n\t\t\t\t$('.active').each(function(index, element){\r\n\t\t\t\t\tvar menu = $(element);\r\n\t\t\t\t\tvar dropdown = $('#' + menu.attr('aria-controls'));\r\n\t\t\t\t\tmenu.removeClass('active');\r\n\t\t\t\t\tdropdown.hide();\r\n\t\t\t\t});\r\n\t\t\t\tbasic_menu_dropdown.show();\r\n\t\t\t\ttoggle.addClass('active');\r\n\t\t\t}\r\n\t\t});\r\n\t\t$('body').bind('click', function(e){\r\n\t\t\tvar target = $(e.target);\r\n\t\t\tvar basic_menu_dropdown = $('#basic-menu-dropdown');\r\n\t\t\t\r\n\t\t\tif(!target.parents('#basic').length){\r\n\t\t\t\tbasic_menu_dropdown.hide();\r\n\t\t\t\ttoggle.removeClass('active');\r\n\t\t\t}\r\n\t\t});\r\n\t});\r\n\t\r\n\t$('#nav_left #search #nav-search a:not(.schoology-processed)', context ).addClass('schoology-processed').each(function(){\r\n\t\t$(this).click(function(){\r\n\t\t\tvar searchBarVal = $(\"#nav_left #search form input\").val();\r\n\t\t\tif(searchBarVal == '' || searchBarVal == 'Search') {\r\n\t\t\t\twindow.href.location = \"/search\";\r\n\t\t\t} else {\r\n\t\t\t  window.location.href = \"/search?s=\"+searchBarVal;\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t});\r\n\t});\r\n\r\n\t$('#nav_left #search input.searcher:not(.schoology-processed)', context ).addClass('schoology-processed').each(function(){\r\n    var inputObj = $(this);\r\n    var KEY = {\r\n      UP: 38,\r\n      DOWN: 40,\r\n      DEL: 46,\r\n      TAB: 9,\r\n      RETURN: 13,\r\n      ESC: 27,\r\n      COMMA: 188,\r\n      PAGEUP: 33,\r\n      PAGEDOWN: 34,\r\n      BACKSPACE: 8\r\n    };\r\n\r\n\t\tinputObj.focus(function(){\r\n\t\t\tif(smartSearch == ''){\r\n\t\t\t\tinputObj.addClass('text-normal');\r\n\t\t\t\tsearching = true;\r\n\t\t\t\t$.getJSON( \"/ajaxsearch/smart\", function(json){\r\n\t\t\t\t\tsmartSearch = json;\r\n\t\t\t\t\tenableSmartSearch(smartSearch);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t}).blur(function(){\r\n\t\t\tif(inputObj.val() == Drupal.t('Search') )\r\n\t\t\t\tinputObj.removeClass('text-normal');\r\n\t\t}).keyup(function(event){\r\n\t\t\tvar text = $(\"input.searcher\").val();\r\n\t\t\t$(\"input.search-query\").val(text);\r\n\t\t\t if(!searching)\r\n\t\t\t\t inputObj.click();\r\n\t\t}).bind(($.browser.opera ? \"keypress\" : \"keydown\") + '.autocomplete', function (event) {\r\n      //Custom keypress behavior on top-nav global search\r\n      switch(event.keyCode) {\r\n        case KEY.TAB:\r\n          //Convert tabs on autocomplete to escapes - this subverts the default tab behavior on autocomplete.js\r\n          event.keyCode = KEY.ESC;\r\n        case KEY.ESC:\r\n          //Hide the search nav\r\n          $('#nav_left #search .search-toggle').trigger('click');\r\n          break;\r\n      }\r\n    });\r\n\t});\r\n\r\n\t//handle language switcher\r\n\t$('#user-language-selector:not(.schoology-processed)', context ).addClass('schoology-processed').each(function(){\r\n\t\tvar wrapper = $(this);\r\n\t\t$('.current-language', wrapper).bind('click', function(){\r\n\t\t\t$('form', wrapper).toggle();\r\n\t\t\t$(this).toggleClass('active');\r\n\t\t});\r\n\t\twrapper.on('keydown', function(event){\r\n\t\t\tvar last = wrapper.find('input:visible').last()[0];\r\n\t\t\tif (event.target === last) {\r\n\t\t\t\t$('form', wrapper).toggle();\r\n\t\t\t\t$(this).toggleClass('active');\r\n\t\t\t}\r\n\t\t});\r\n\t});\r\n\r\n  $('body:not(.schoology-processed)').addClass('schoology-processed').each(function(){\r\n\r\n    /**\r\n     * Handler for the form redirection error.\r\n     */\r\n    if(Drupal.ahah){\r\n      Drupal.ahah.prototype.error = function (response, uri) {\r\n        var error = '<div class=\"messages error\">' + Drupal.ahahError(response, uri) + '</div>';\r\n        $(error).hide();\r\n        if($(\"#smart-box-messages\").length > 0)\r\n          $(\"#smart-box-messages\").after($(error));\r\n        else\r\n          $(\"#sidebar-left\").after($(error));\r\n        $(error).slideDown();\r\n        // Resore the previous action and target to the form.\r\n        $(this.element).parent('form').attr( {action: this.form_action, target: this.form_target} );\r\n        // Remove the progress element.\r\n        if (this.progress.element) {\r\n          $(this.progress.element).remove();\r\n        }\r\n        if (this.progress.object) {\r\n          this.progress.object.stopMonitoring();\r\n        }\r\n        // Undo hide.\r\n        $(this.wrapper).show();\r\n        // Re-enable the element.\r\n        $(this.element).removeClass('progess-disabled').prop('readonly', false);\r\n      };\r\n    }\r\n    \r\n    if($.fn.sHideObjectEmbed){\r\n      $(document).sHideObjectEmbed({\r\n        hide_events: ['popups_open_path'],\r\n        show_events: ['popups_close'],\r\n        object_selector: \"object,iframe:not(.tinymce,.s-hide-object-embed-ignore)\"\r\n      });\r\n    }\r\n\r\n    if( Drupal.settings.s_site_tour ) {\r\n      if( Drupal.settings.s_site_tour.loaded )\r\n        return;\r\n      Drupal.settings.s_site_tour.loaded = true;\r\n\r\n      var siteTourQueue = [],\r\n          siteTourQueueIndex = 0;\r\n\r\n      var runNextTour = function(){\r\n        if(typeof siteTourQueue[siteTourQueueIndex] != 'undefined'){\r\n          $(document).sSiteTour(siteTourQueue[siteTourQueueIndex++]);\r\n        }\r\n      };\r\n\r\n      $.each( Drupal.settings.s_site_tour , function( tour_id , tour ) {\r\n        if(typeof tour == 'object' && typeof tour.autostart == 'undefined' || tour.autostart){\r\n          siteTourQueue.push(tour);\r\n        }\r\n      });\r\n\r\n      if(siteTourQueue.length){\r\n        $(document).bind('s_site_tour_finished', function(tour_id_closed){\r\n          runNextTour();\r\n        });\r\n        runNextTour();\r\n      }\r\n    }\r\n\r\n    //if teacher is an instructor of a k6 course and is unverified diplay the popup prompt that requests the teacher to verify\r\n    var qParams = getQueryParams();\r\n    if(typeof qParams.prompt_verification != 'undefined'){\r\n      var promptBody = '';\r\n      var cancelText;\r\n      var hideConfirmVar;\r\n      var deletionDate = Drupal.settings.s_user.deletion_date;\r\n      var minAge = Drupal.settings.s_user.min_age;\r\n      if(qParams.prompt_verification == 'denied'){\r\n        promptBody += '<div class=\"verification-header\"><span class=\"verify-phrase\"><span class=\"inline-icon medium verification-error\"></span>' + Drupal.t('Unable to Verify Your Account') + '</span></div>';\r\n        promptBody += '<p>' + Drupal.t('Unfortunately we were unable to verify your identity based on the information you provided. Please resubmit a verification request with your updated information.') + '</p>';\r\n      }\r\n      else{\r\n        promptBody += '<div class=\"verification-header\"><span class=\"verify-phrase\"><span class=\"inline-icon medium verify\"></span>' + Drupal.t('Please Verify Your Account') + '</span></div>';\r\n      }\r\n      promptBody += '<p>' + Drupal.t('As part of an ongoing process to ensure the safety of students using our platform, Schoology requires instructors teaching students under the age of !min_age to verify their identities. Your students cannot register for a Schoology account until you have been verified.', {'!min_age' : minAge}) + '</p>';\r\n      cancelText = Drupal.t('Cancel');\r\n      hideConfirmVar = false;\r\n      var verifPromptSettings = {\r\n        extraClass: ' account-verification-popup',\r\n        title : Drupal.t('Verify Your Account'),\r\n        body  : promptBody,\r\n        confirm: {\r\n          text: Drupal.t('Verify'),\r\n          func: function(){\r\n            location.href = 'verify/advanced';\r\n          }\r\n        },\r\n        cancel: {\r\n          text: cancelText,\r\n          func: function(){\r\n            var newUrl = window.location.href;\r\n            var newUrl = newUrl.replace('prompt_verification=','');\r\n            location.href = newUrl;\r\n          }\r\n        },\r\n        hideConfirm: hideConfirmVar\r\n      };\r\n      sCommonConfirmationPopup(verifPromptSettings);\r\n    }\r\n\r\n  });\r\n\r\n\tprocessMessages( context );\r\n\r\n  //move any messages divs that are put directly after #tabs-wrapper to its proper position\r\n  //as the first child of #center-wrapper\r\n  $('#center-inner > div.messages:not(.sSchoologyMessages-processed)', context ).addClass('sSchoologyMessages-processed').each(function(){\r\n   $(\"#main-content-wrapper\").prepend($(this));\r\n  });\r\n\r\n  $('.grade-level-init:not(.sSchoology-processed)', context ).addClass('sSchoology-processed').each(function(){\r\n    sCommonGradeChooserBehavior($(this));\r\n  });\r\n}\r\n\r\n\r\n\r\nfunction sGroupSetupMore(ajaxURL, dropdown, curPage){\r\n  curPage++;\r\n  var moreLink = $('.group-more-link', dropdown);\r\n  moreLink.click(function(){\r\n    moreLink.html('<img class=\"ajax-loader\" src=\"/sites/all/themes/schoology_theme/images/ajax-loader.gif\" />');\r\n    moreLink.addClass('is-loading');\r\n    $.ajax({\r\n      url: ajaxURL + '?page=' + curPage,\r\n      dataType: 'json',\r\n      success: function(data){\r\n        var nextList = $('.my-groups-item-list', data.data).html();\r\n        $('.group-more', dropdown).replaceWith(nextList);\r\n        sGroupSetupMore(ajaxURL, dropdown, curPage);\r\n      }\r\n    });\r\n  });\r\n}\r\n\r\nfunction processMessages( context ){\r\n  $('.messages' , context ).each(function(){\r\n    var message = $(this);\r\n    if((message.is('.status') || message.is('.warning') || message.is('.error')) && $('.messages-close-btn', message).length == 0){\r\n      var closeBtn = $('<div class=\"messages-close-btn\">x</div>');\r\n      closeBtn.click(function(){\r\n        closeBtn.parent().fadeOut();\r\n      });\r\n\r\n      closeBtn.hide();\r\n      message.prepend(closeBtn);\r\n      closeBtn.fadeIn();\r\n    }\r\n  });\r\n\r\n  $('.messages.temp:not(.schoology-processed)', context).addClass('schoology-processed').each(function(){\r\n    var msg = $(this);\r\n    setTimeout(function() {\r\n      msg.fadeOut('', function(){\r\n        // we need to resize the popup here on-fadeout\r\n        if(msg.parents('.popups-body').length > 0) {\r\n          sPopupsResizeCenter();\r\n        }\r\n      });\r\n    }, 10000);\r\n  });\r\n}\r\n\r\nfunction addMessages(messages, extraClass, containerObj){\r\n  if(typeof extraClass == 'undefined'){\r\n    var extraClass = '';\r\n  }\r\n  \r\n  if(typeof containerObj == 'undefined'){\r\n    var containerObj = $('#main-content-wrapper');\r\n  }\r\n\r\n  var wrapperObj = $('.messages-wrapper', containerObj);\r\n  if(!wrapperObj.length){\r\n    wrapperObj = $('<div class=\"messages-wrapper\"></div>').prependTo(containerObj);\r\n  }\r\n\r\n  $.each(messages, function(k, msg){\r\n    wrapperObj.append('<div class=\"messages ' + extraClass + '\">' + msg.value + '</div>');\r\n  });\r\n  processMessages(containerObj);\r\n}\r\n\r\nfunction enableSmartSearch(vals){\r\n\t\t$(\"form#navigation_search\").bind('submit', function(){\r\n\t\t\treturn false;\r\n\t\t});\r\n\r\n\t\tautoCompleteOptions = {\r\n\t\t\tminChars: 1,\r\n\t\t\twidth: 310,\r\n\t\t\tmatchContains: true,\r\n\t\t\tmustMatch: false,\r\n\t\t\tscroll: false,\r\n\t\t\tmultiple: false,\r\n\t\t\tmax: false,\r\n\t\t\tautoFill: false,\r\n\t\t\tformatItem: function(row, i, max) {\r\n        var addBreakClass = '';\r\n        var maxSearchShow = false;\r\n\t\t\t\tvar type = row.t;\r\n\t\t\t\tvar row_title1 = row.n1 ? String( row.n1 ) : \"\";\r\n\t\t\t\tvar row_title3 = row.n3 ? String( row.n3 ) : \"\";\r\n\t\t\t\tvar row_title4 = row.n4 ? String( row.n4 ) : \"\";\r\n\t\t\t\tvar plength = !row.p || !row.p.length ? 0 : row.p.length;\r\n\r\n        if($('.search-break').length) {\r\n          addBreakClass = 'schoology-break';\r\n          maxSearchShow = 5;\r\n        }\r\n\r\n\t\t\t\tif (i > maxSearchShow && type !== AUTOCOMPLETE_ITEM_FULL_COURSE_SEARCH && type !== AUTOCOMPLETE_ITEM_FULL_GROUP_SEARCH && type !== AUTOCOMPLETE_ITEM_FULL_USER_SEARCH) {\r\n          return false;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tswitch( type ) {\r\n\t\t\t\t\t// users\r\n\t\t\t\t\tcase AUTOCOMPLETE_ITEM_TYPE_USER:\r\n\t\t\t\t\t\thtml = '<div class=\"ac-result\"><div class=\"ac-picture\"><img src=\"'+row.p+'\" /></div><div class=\"ac-content\"><div class=\"ac-top\">'+row_title1+ '</div><div class=\"ac-bot\">'+row_title3+'</div></div></div>';\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t// sections\r\n\t\t\t\t\tcase AUTOCOMPLETE_ITEM_TYPE_COURSE:\r\n\t\t\t\t\t\tif(!plength) {\r\n\t\t\t\t\t\t\tvar pic = Drupal.settings.s_common.default_realm_profiles.course;\r\n                          \thtml = '<div class=\"ac-result\"><div class=\"ac-picture\" style=\"background-image: url(' + pic + ')\"/></div><div class=\"ac-content\"><div class=\"ac-top\">'+row_title1+ '</div><div class=\"ac-bot\">'+row_title3+'</div></div></div>';\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse {\r\n\t\t\t\t\t\t\thtml = '<div class=\"ac-result\"><div class=\"ac-picture\"><img src=\"' + row.p + '\" /></div><div class=\"ac-content\"><div class=\"ac-top\">'+row_title1+ '</div><div class=\"ac-bot\">'+row_title3+'</div></div></div>';\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t// groups\r\n\t\t\t\t\tcase AUTOCOMPLETE_ITEM_TYPE_GROUP:\r\n\t\t\t\t\t\tif(!plength) {\r\n\t\t\t\t\t\t\tvar pic = Drupal.settings.s_common.default_realm_profiles.group;\r\n\t\t\t\t\t\t\thtml = '<div class=\"ac-result\"><div class=\"ac-picture\" style=\"background-image: url(' + pic + ')\"/></div><div class=\"ac-content\"><div class=\"ac-top\">'+row_title1+ '</div><div class=\"ac-bot\">'+row_title3+'</div></div></div>';\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse {\r\n\t\t\t\t\t\t\tvar pic = \"/system/files/imagecache/profile_tiny/grouplogos/\" + row.p;\r\n\t\t\t\t\t\t\thtml = '<div class=\"ac-result\"><div class=\"ac-picture\"><img src=\"' + pic + '\" /></div><div class=\"ac-content\"><div class=\"ac-top\">'+row_title1+ '</div><div class=\"ac-bot\">'+row_title3+'</div></div></div>';\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t// assignments\r\n\t\t\t\t\tcase AUTOCOMPLETE_ITEM_TYPE_MATERIAL:\r\n\t\t\t\t\t\tvar picClass = row.ha == 1 ? 'asmt-pic' : ((row.p == 1) ? 'disc-pic' : 'asn-pic');\r\n\t\t\t\t\t\thtml = '<div class=\"ac-result\"><div id=\"' + picClass + '\" class=\"ac-icon\">&nbsp;</div><div class=\"ac-content\"><div class=\"ac-top\">' + row_title1 + '</div><div class=\"ac-bot\">' + row_title4 + ' : ' + row_title3 + '</div></div></div>';\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t// Direct Search Links\r\n\t\t\t\t\tcase AUTOCOMPLETE_ITEM_FULL_USER_SEARCH:\r\n\t\t\t\t\t\t$('#nav_left #search input.searcher').trigger('keypress');\r\n\t\t\t\t\t\thtml = '<div class=\"ac-result schoology ' + addBreakClass + '\"><div class=\"autocomplete-inner\">'\r\n\t\t\t\t\t\t\t+ Drupal.t('%term in ', {'%term': $(\"#nav_left #search input[name='search_box']\").val()})\r\n\t\t\t\t\t\t\t+ '<b>' + Drupal.t('People') + '</b>'\r\n\t\t\t\t\t\t\t+ \"</div></div>\";\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase AUTOCOMPLETE_ITEM_FULL_COURSE_SEARCH:\r\n\t\t\t\t\t\t$('#nav_left #search input.searcher').trigger('keypress');\r\n\t\t\t\t\t\thtml = '<div class=\"ac-result schoology ' + addBreakClass + '\"><div class=\"autocomplete-inner\">'\r\n\t\t\t\t\t\t\t+ Drupal.t('%term in ', {'%term': $(\"#nav_left #search input[name='search_box']\").val()})\r\n\t\t\t\t\t\t\t+ '<b>' + Drupal.t('Courses') + '</b>'\r\n\t\t\t\t\t\t\t+ \"</div></div>\";\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase AUTOCOMPLETE_ITEM_FULL_GROUP_SEARCH:\r\n\t\t\t\t\t\t$('#nav_left #search input.searcher').trigger('keypress');\r\n\t\t\t\t\t\thtml = '<div class=\"ac-result schoology ' + addBreakClass + '\"><div class=\"autocomplete-inner\">'\r\n\t\t\t\t\t\t\t+ Drupal.t('%term in ', {'%term': $(\"#nav_left #search input[name='search_box']\").val()})\r\n\t\t\t\t\t\t\t+ '<b>' + Drupal.t('Groups') + '</b>'\r\n\t\t\t\t\t\t\t+ \"</div></div>\";\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn html;\r\n\t\t\t},\r\n\t\t\tformatMatch: function(row, i, max) {\r\n\t\t\t\tvar type = row.t;\r\n        switch (type) {\r\n          case AUTOCOMPLETE_ITEM_TYPE_USER:\r\n          case AUTOCOMPLETE_ITEM_TYPE_GROUP:\r\n          case AUTOCOMPLETE_ITEM_TYPE_MATERIAL:\r\n            return row.n1;\r\n          case AUTOCOMPLETE_ITEM_TYPE_COURSE:\r\n            var comb = row.n1 + \" : \"+row.n2;\r\n            return comb;\r\n          case AUTOCOMPLETE_ITEM_FULL_USER_SEARCH:\r\n          case AUTOCOMPLETE_ITEM_FULL_COURSE_SEARCH:\r\n          case AUTOCOMPLETE_ITEM_FULL_GROUP_SEARCH:\r\n            return '%';\r\n        }\r\n\t\t\t},\r\n\t\t\tformatResult: function(row, i, max){\r\n\t\t\t\tvar type = row.t;\r\n\t\t\t\tif (type === AUTOCOMPLETE_ITEM_FULL_COURSE_SEARCH || type === AUTOCOMPLETE_ITEM_FULL_GROUP_SEARCH || type === AUTOCOMPLETE_ITEM_FULL_USER_SEARCH) {\r\n          return ' ';\r\n        }\r\n\t\t\t}\r\n\t\t};\r\n\r\n    $(\"#nav_left #search input.searcher\").autocomplete(vals, autoCompleteOptions).result(function (event, data, formatted) {\r\n      autoCompleteResult(data);\r\n    }).blur().focus();\r\n}\r\n\r\nfunction autoCompleteResult(data) {\r\n\tvar type = data.t;\r\n  var destination = '';\r\n\tvar queryStr = $(\"#nav_left #search form input\").val();\r\n\r\n  switch (type) {\r\n    case AUTOCOMPLETE_ITEM_TYPE_USER:\r\n      destination = \"/user/\" + data.i;\r\n      break;\r\n    case AUTOCOMPLETE_ITEM_TYPE_GROUP:\r\n      destination = \"/group/\" + data.i;\r\n      break;\r\n    case AUTOCOMPLETE_ITEM_TYPE_COURSE:\r\n      destination = \"/course/\" + data.i;\r\n      break;\r\n    case AUTOCOMPLETE_ITEM_TYPE_MATERIAL:\r\n      destination = data.p !== 1 ? \"/assignment/\"+data.i : '/course/' + data.c + '/materials/discussion/view/' + data.d;\r\n      break;\r\n    case AUTOCOMPLETE_ITEM_FULL_USER_SEARCH:\r\n      destination = \"/search/user?s=\" + queryStr;\r\n      break;\r\n    case AUTOCOMPLETE_ITEM_FULL_COURSE_SEARCH:\r\n      destination = \"/search/course?s=\" + queryStr;\r\n      break;\r\n    case AUTOCOMPLETE_ITEM_FULL_GROUP_SEARCH:\r\n      destination = \"/search/group?s=\" + queryStr;\r\n      break;\r\n  }\r\n\r\n  window.location.href = destination;\r\n\r\n  return false;\r\n}\r\n\r\nfunction addAutoLogoutMessages(){\r\n\t// don't do anything if not enabled\r\n\tif(Drupal.settings.s_common && Drupal.settings.s_common.autologout_enabled){\r\n\t\tvar timeout = Drupal.settings.s_common.timeout;\r\n\t\tvar refresh_delta = Drupal.settings.s_common.refresh_delta;\r\n\t\t// make sure that timeout is larger than 5 minutes\r\n\t\tif(timeout > 300){\r\n\t\t\t// display a message at 5 minutes warning of logout\r\n\t\t\tsetTimeout('displayAutoLogoutWarning('+timeout+')', 1000*(timeout-300));\r\n\t\t\tsetTimeout('displayAutoLogoutMessage('+timeout+')', 1000*timeout);\r\n\t\t}\r\n\t}\r\n}\r\n\r\nfunction displayAutoLogoutWarning(timeout){\r\n\tvar warning = '<div id=\"autologout-warning\" class=\"messages warning\" style=\"display: none\"><table><tr><td><div class=\"messages-icon\"></div></td><td><div class=\"message-text\">' + Drupal.t('For security reasons, Schoology users are automatically logged out after !time minutes of inactivity.  If you remain inactive over the next 5 minutes, you will have to log back in.', {'!time' : Math.round(timeout/60)}) + '</div></td></tr></table></div>';\r\n\t$(\"#sidebar-left\").after(warning);\r\n\t$(\"#autologout-warning\").slideDown();\r\n}\r\n\r\nvar changesWarningShown = false;\r\nfunction displayChangesWarning(){\r\n\tif(!changesWarningShown){\r\n\t\tvar warning = '<div id=\"changes-warning\" class=\"messages warning\" style=\"display: none\"><div class=\"messages-container\"><table role=\"presentation\"><tr><td><div class=\"messages-icon\"></div></td><td><div class=\"message-text\">' + Drupal.t('The changes you have made will not be saved until you click \"Save changes\" below.') + '</div></td></tr></table></div></div>';\r\n\t\t$(\"#main-content-wrapper\").prepend(warning);\r\n\t\t$(\"#changes-warning\").slideDown();\r\n\t\tchangesWarningShown = true;\r\n\t}\r\n}\r\n\r\nfunction displayAutoLogoutMessage(timeout){\r\n\tvar message = Drupal.t('You have been logged out of Schoology due to inactivity.');\r\n\talert(message);\r\n}\r\n\r\n\r\nDrupal.theme.prototype.popupTemplate = function(popupId) {\r\n  var template;\r\n  template += '<div id=\"'+ popupId + '\" class=\"popups-box\">';\r\n  template += '  <div class=\"popups-title\">';\r\n  template += '    <div class=\"popups-close\"><a href=\"#\">' + Drupal.t('Close') + '</a></div>';\r\n  template += '    <div class=\"title\">%title</div>';\r\n  template += '    <div class=\"clear-block\"></div>';\r\n  template += '  </div>';\r\n  template += '  <div class=\"popups-body\">%body<div class=\"popups-buttons\">%buttons</div></div>';\r\n  template += '  <div class=\"popups-footer\"></div>';\r\n  template += '</div>';\r\n  return template;\r\n};\r\n\r\nfunction microtime(get_as_float) {\r\n  // Returns either a string or a float containing the current time in seconds and microseconds\r\n  //\r\n  // version: 812.316\r\n  // discuss at: http://phpjs.org/functions/microtime\r\n  // +   original by: Paulo Ricardo F. Santos\r\n  // *     example 1: timeStamp = microtime(true);\r\n  // *     results 1: timeStamp > 1000000000 && timeStamp < 2000000000\r\n  var now = new Date().getTime() / 1000;\r\n  var s = parseInt(now);\r\n\r\n  return (get_as_float) ? now : (Math.round((now - s) * 1000) / 1000) + ' ' + s;\r\n}\r\n\r\nfunction logTime(){\r\n  if(!logTime.counter){\r\n    logTime.counter = 1;\r\n  }\r\n  if(!logTime.lastTime){\r\n    logTime.lastTime = microtime(true);\r\n  }\r\n  var time = microtime(true);\r\n  var ret = logTime.counter + \": \" + (time - logTime.lastTime);\r\n  logTime.counter++;\r\n  logTime.lastTime = time;\r\n\r\n  return ret;\r\n}\r\n\r\n/**\r\n* Add additional CSS to the page.\r\n*/\r\nfunction sEdgeMoreAddCSS(css) {\r\n  if(Drupal.settings.aggregated_css)\r\n    var aggregatedCSS = Drupal.settings.aggregated_css;\r\n  else\r\n    var aggregatedCSS = [];\r\n\r\n  for (var type in css) {\r\n    for (var file in css[type]) {\r\n      var link = css[type][file];\r\n      var src = $(link).attr('href');\r\n      var srcOrig = $(link).attr('href_orig');\r\n      var preloadedCSS = jQuery.inArray(srcOrig, aggregatedCSS) != -1;\r\n      // Does the page already contain this stylesheet?\r\n      if (!$('link[href=\"'+ jqSelector(srcOrig) + '\"]').length && !preloadedCSS) {\r\n        $('head').append(link);\r\n      }\r\n    }\r\n  }\r\n};\r\n\r\nfunction sLikeUpdateSentenceN(button, data){\r\n\tvar count = data.c;\r\n\tvar sentence = data.s;\r\n\tvar commentsWrapper = button.siblings('.feed-comments, .blog-like-wrapper');\r\n\tvar likeSentenceWrapper = $('.s-like-sentence', commentsWrapper);\r\n\r\n\tif(!count){\r\n\t\tlikeSentenceWrapper.remove();\r\n\t}\r\n\telse if(count && likeSentenceWrapper.length){\r\n\t\tlikeSentenceWrapper.html(sentence);\r\n\t\tlikeSentenceWrapper.removeClass('popups-processed');\r\n\t\tDrupal.attachBehaviors(likeSentenceWrapper);\r\n\t\t$('.feed-comments-top', commentsWrapper).show();\r\n\t}\r\n\telse{\r\n\t\t$('.feed-comments-top, .blog-like-sentence', commentsWrapper).after(sentence);\r\n\t\t$('.feed-comments-top', commentsWrapper).show();\r\n\t}\r\n}\r\n\r\nfunction sLikeUpdateSentenceC(button, data){\r\n\tvar count = data.c;\r\n\tvar sentence = data.s;\r\n\r\n\tvar likeSentenceWrapper = button.siblings('.s-like-comment');\r\n\r\n\tif(!count){\r\n\t\tlikeSentenceWrapper.remove();\r\n\t}\r\n\telse if(count && likeSentenceWrapper.length){\r\n\t\tlikeSentenceWrapper.replaceWith(sentence);\r\n\t}\r\n\telse{\r\n\t\tbutton.after(sentence);\r\n\t}\r\n\r\n\tDrupal.attachBehaviors(button.parent());\r\n}\r\n/**\r\n * Cross domain synchronous script-loading fix for IE\r\n *\r\n * Uses the XDomainRequest object provided by IE instead of the usual XMLHttpRequest object for synchronous\r\n * and cross-domain requests for data of type \"text\".\r\n *\r\n * XDR does not inherently have synchronous support and we only need to use this synchronously\r\n * so a manual queue was built to suppor that.\r\n * The synchronous nature does not behave the same way as a synchronous XMLHttpRequest since execution after the $.ajax call\r\n * continues immediately. The procedure calling $.ajax using this ajaxTransport should handle this situation by invoking\r\n * a callback within the success callback when the request completes.\r\n *\r\n * see http://stackoverflow.com/questions/10232017/ie9-jquery-ajax-with-cors-returns-access-is-denied\r\n * origin source: https://github.com/jaubourg/ajaxHooks/blob/master/src/xdr.js\r\n */\r\nif(window.XDomainRequest){\r\n  (function(){\r\n    var requestQueue = [],\r\n        queueIndex = 0,\r\n        queueRunning = false;\r\n\r\n    function nextInQueue(){\r\n      if(!queueRunning && typeof requestQueue[queueIndex] != 'undefined'){\r\n        queueRunning = true;\r\n        var req = requestQueue[queueIndex];\r\n        queueIndex++;\r\n        req();\r\n      }\r\n    }\r\n\r\n    jQuery.ajaxTransport('text', function(s, originalOptions, jqXHR){\r\n      if(s.crossDomain && !s.async){\r\n        if(s.timeout){\r\n          s.xdrTimeout = s.timeout;\r\n          delete s.timeout;\r\n        }\r\n        var xdr;\r\n        return {\r\n          send: function(headers, complete){\r\n            function callback(status, statusText, responses, responseHeaders){\r\n              xdr.onload = xdr.onerror = xdr.ontimeout = jQuery.noop;\r\n              xdr = undefined;\r\n              complete.call(this, status, statusText, responses, responseHeaders);\r\n              queueRunning = false;\r\n              nextInQueue();\r\n            }\r\n            xdr = new XDomainRequest();\r\n            xdr.onload = function() {\r\n              callback( 200, \"OK\", { text: xdr.responseText }, \"Content-Type: \" + xdr.contentType );\r\n            };\r\n            xdr.onerror = function() {\r\n              callback( 404, \"Not Found\" );\r\n            };\r\n            xdr.onprogress = jQuery.noop;\r\n            xdr.ontimeout = function() {\r\n              callback( 0, \"timeout\" );\r\n            };\r\n            xdr.timeout = s.xdrTimeout || Number.MAX_VALUE;\r\n\r\n            requestQueue.push(function(){\r\n              xdr.open( s.type, s.url, true );\r\n              xdr.send( ( s.hasContent && s.data ) || null );\r\n            });\r\n\r\n            nextInQueue();\r\n          },\r\n          abort: function() {\r\n            if ( xdr ) {\r\n              xdr.onerror = jQuery.noop;\r\n              xdr.abort();\r\n              queueRunning = false;\r\n              nextInQueue();\r\n            }\r\n          }\r\n        };\r\n      }\r\n    });\r\n  })();\r\n}\r\n\r\n/**\r\n* Add additional Javascript to the page.\r\n*/\r\nvar sEdgeMoreAddedJs = [];\r\nfunction sEdgeMoreAddJS(js, callback) {\r\n  if(typeof callback != 'function'){\r\n    callback = $.noop;\r\n  }\r\n\r\n  if(Drupal.settings.aggregated_js)\r\n    var aggregatedJS = Drupal.settings.aggregated_js;\r\n  else\r\n    var aggregatedJS = [];\r\n\r\n  // Parse the json info about the new context.\r\n  var scripts = [];\r\n  for (var file in js.s_edge) {\r\n    var src = $(js.s_edge[file]).attr('src');\r\n    var srcOrig = $(js.s_edge[file]).attr('src_orig');\r\n    scripts.push([src, srcOrig]);\r\n  }\r\n  for (var file in js.module) {\r\n\t  var src = $(js.module[file]).attr('src');\r\n    var srcOrig = $(js.module[file]).attr('src_orig');\r\n    scripts.push([src, srcOrig]);\r\n  }\r\n  for (var file in js.theme) {\r\n    var src = $(js.theme[file]).attr('src');\r\n    var srcOrig = $(js.theme[file]).attr('src_orig');\r\n    scripts.push([src, srcOrig]);\r\n  }\r\n  //  Add new JS settings to the page, needed for #ahah properties to work.\r\n  if(js.setting)\r\n    jQuery.extend(Drupal.settings, js.setting);\r\n  // Special behavior for popups - we want it to handle new links,\r\n  // but not overwrite any other settings (like 'originalPath')\r\n  if(js.popups_setting && typeof(Drupal.settings.popups) == 'undefined'){\r\n    Drupal.settings.popups = [];\r\n    jQuery.extend(Drupal.settings.popups, js.popups_setting);\r\n  }\r\n  if(js.popups_links){\r\n    if(Drupal.settings.popups && Drupal.settings.popups.links)\r\n      jQuery.extend(Drupal.settings.popups.links, js.popups_links);\r\n    else\r\n      Drupal.settings.popups.links = js.popups_links;\r\n  }\r\n\r\n  var scriptsToLoad = [];\r\n  for (var i in scripts) {\r\n    var script = scripts[i];\r\n    var src = script[0];\r\n    var srcOrig = script[1];\r\n    var preloadedJS = jQuery.inArray(srcOrig, aggregatedJS) != -1;\r\n    if (!$('script[src=\"'+ jqSelector(srcOrig) + '\"]').length && !preloadedJS && jQuery.inArray(srcOrig, sEdgeMoreAddedJs) == -1) {\r\n      scriptsToLoad.push(src);\r\n\r\n      // Mark the js as added to the underlying page.\r\n      sEdgeMoreAddedJs.push(srcOrig);\r\n    }\r\n  }\r\n\r\n\r\n  if(scriptsToLoad.length > 0){\r\n    var scriptsDeferreds = [];\r\n    // get the script from the server\r\n    $.each(scriptsToLoad, function(i, src){\r\n      scriptsDeferreds.push( $.ajax({type: 'GET', url: src, dataType: 'text'}) );\r\n    });\r\n    // execute the scripts then run callback()\r\n    $.when.apply($, scriptsDeferreds).then(function(){\r\n      /*\r\n        if we are here, all requests are complete; but this could\r\n        be a response or an array of responses\r\n       */\r\n      var responses = typeof(arguments[0]) == 'string' ? [arguments] : arguments;\r\n      $.each(responses, function(i, res){\r\n        if(res[1] == 'success') {\r\n          // see Popups.addJS()\r\n          eval.apply(window, [res[0]]);\r\n        }\r\n      });\r\n      callback();\r\n    });\r\n  }\r\n  else{\r\n    // all the scripts are already loaded\r\n    callback();\r\n  }\r\n};\r\n\r\n// Strips out HTML tags and leaves their child text nodes in place. Thanks to http://phpjs.org/functions/strip_tags:535\r\nString.prototype.strip_tags = function(allowed) {\r\n  allowed = (((allowed || \"\") + \"\").toLowerCase().match(/<[a-z][a-z0-9]*>/g) || []).join('');\r\n  var tags = /<\\/?([a-z][a-z0-9]*)\\b[^>]*>/gi;\r\n  var commentsAndPhpTags = /<!--[\\s\\S]*?-->|<\\?(?:php)?[\\s\\S]*?\\?>/gi;\r\n\r\n  return this.replace(commentsAndPhpTags, '').replace(tags, function ($0, $1) {\r\n    return allowed.indexOf('<' + $1.toLowerCase() + '>') > -1 ? $0 : '';\r\n  });\r\n}\r\n\r\n\r\n//pads left\r\nString.prototype.lpad = function(padString, length) {\r\n  var str = this;\r\n    while (str.length < length)\r\n        str = padString + str;\r\n    return str;\r\n}\r\n\r\n//pads right\r\nString.prototype.rpad = function(padString, length) {\r\n  var str = this;\r\n    while (str.length < length)\r\n        str = str + padString;\r\n    return str;\r\n}\r\n\r\n// http://phpjs.org/functions/array_diff:309\r\nfunction array_diff (arr1) {\r\n  var argl = arguments.length,retArr = {},k1 = '',i = 1,k = '',arr = {};\r\n\r\n  arr1keys: for (k1 in arr1) {\r\n    for (i = 1; i < argl; i++) {\r\n      arr = arguments[i];\r\n      for (k in arr) {\r\n        if (arr[k] === arr1[k1]) {\r\n          // If it reaches here, it was found in at least one array, so try next value\r\n          continue arr1keys;\r\n        }\r\n      }\r\n      retArr[k1] = arr1[k1];\r\n    }\r\n  }\r\n\r\n  return retArr;\r\n}\r\n\r\n// http://totaldev.com/content/escaping-characters-get-valid-jquery-id\r\n// escape a string for use in a jquery selector\r\nfunction jqSelector(str){\r\n  return str.replace(/([\\?\\/;&,\\.\\+\\*\\~':\"\\!\\^#$%@\\[\\]\\(\\)=>\\|])/g, '\\\\$1');\r\n}\r\n\r\nfunction getUrlVars() {\r\n  var vars = [], hash;\r\n  var hashes = window.location.href.slice(window.location.href.indexOf('?') + 1).split('&');\r\n\r\n  for(var i = 0; i < hashes.length; i++) {\r\n    hash = hashes[i].split('=');\r\n    vars.push(hash[0]);\r\n    vars[hash[0]] = hash[1];\r\n  }\r\n\r\n  return vars;\r\n}\r\n\r\n// http://stackoverflow.com/questions/441755/regular-expression-to-remove-hostname-and-port-from-url\r\n// http://www.ietf.org/rfc/rfc3986.txt appendix B\r\nfunction s_pathinfo( url ) {\r\n  var matches = url.match(/^(([^:\\/?#]+):)?(\\/\\/([^\\/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?/);\r\n\r\n  var pathinfo = {\r\n   'protocol' : matches[2],\r\n   'host': matches[4],\r\n   'path': matches[5],\r\n   'query': matches[7],\r\n   'fragment': matches[9]\r\n  };\r\n\r\n  return pathinfo;\r\n}\r\n\r\nfunction isLinkOrEmbed(text){\r\n  //embed\r\n  if(text.match(/(\\<(?:object|iframe|embed|script).+(?:(?:\\<\\/(?:object|iframe|embed|script)\\>)|(?:.*\\/>)))/i)){\r\n    return true;\r\n  }\r\n\r\n  if(!text.match(/(https?:\\/\\/)/)){\r\n    text = \"http://\" + text;\r\n  }\r\n  if(text.match(/(https?:\\/\\/)([-a-zA-Z0-9\\[!#\\$&;=\\?_~]*\\.[-a-zA-Z0-9\\[!#\\$&;=\\?_~]*)/i)){\r\n    return true;\r\n  }\r\n  return false;\r\n}\r\n\r\n/*\r\n * Attach an explicit list of Drupal.behaviors to the given context. This is an alternative to\r\n * Drupal.attachBehaviors when you need to save on client-side cycles and know that you only need a few behaviors\r\n */\r\nfunction sAttachBehaviors( behaviors , context ){\r\n  if( typeof context == 'undefined' )\r\n    return;\r\n  $.each( behaviors , function( index , func ){\r\n    if( typeof Drupal.behaviors[func] == 'function' )\r\n      Drupal.behaviors[func]( context );\r\n  });\r\n}\r\n\r\n/*\r\n * Wrapper function for sAttachBehaviors. Attaching a single behavior.\r\n */\r\nfunction sAttachBehavior( behavior , context ){\r\n  if( typeof behavior != 'string' )\r\n    return;\r\n  return sAttachBehaviors([behavior], context);\r\n}\r\n\r\nfunction sPopupsResizeCenter(popupStackIndex){\r\n  if(typeof(Popups) == 'undefined') {\r\n    return;\r\n  }\r\n  var popup = null;\r\n  if(typeof popupStackIndex == 'number' && typeof Popups.popupStack[popupStackIndex] != 'undefined'){\r\n    popup = Popups.popupStack[popupStackIndex];\r\n  }\r\n  else{\r\n    popup = Popups.activePopup();    \r\n  }\r\n  if(popup != null)\r\n    Popups.resizeAndCenter(popup);\r\n}\r\n\r\nfunction sPopupsToggleAjaxOverlay(){\r\n  if(typeof(Popups) == 'undefined') {\r\n    return;\r\n  }\r\n  popup = Popups.activePopup();\r\n  var img = '<img id=\"popup-loading-ajax-gif\" src=\"/sites/all/themes/schoology_theme/images/ajax-loader.gif\" />';\r\n  if(popup != null){\r\n    var popupBody = $('#' + popup.id + ' .popups-body');\r\n    if(popupBody.hasClass('active-loading-popup')){\r\n      popupBody.removeClass('active-loading-popup');\r\n      $('#popup-loading-ajax-gif').remove()\r\n    }\r\n    else{\r\n      popupBody.addClass('active-loading-popup');\r\n      popupBody.prepend(img);\r\n    }\r\n  }\r\n}\r\n\r\nfunction sPopupsClose(){\r\n  if(typeof(Popups) == 'undefined') {\r\n    return;\r\n  }\r\n\r\n  var popup = Popups.activePopup();\r\n  if(popup != null)\r\n    Popups.close();\r\n}\r\n\r\nfunction sPopupsCloseAll(){\r\n  if(typeof(Popups) == 'undefined') {\r\n    return;\r\n  }\r\n\r\n  var i = (Popups.popupStack.length - 1);\r\n  while(i >= 0) {\r\n     Popups.popupStack[i].close();\r\n     i--;\r\n  }\r\n}\r\n\r\n// From http://stackoverflow.com/questions/901115/get-query-string-values-in-javascript\r\nfunction getQueryParams(q){\r\n  var urlParams = {}\r\n  var e,\r\n      a = /\\+/g,  // Regex for replacing addition symbol with a space\r\n      r = /([^&=]+)=?([^&]*)/g,\r\n      d = function (s) {return decodeURIComponent(s.replace(a, \" \"));};\r\n\r\n  if(typeof q == 'undefined'){\r\n      var q = window.location.search.substring(1);\r\n  }\r\n  else{\r\n\t  q = q.split('?');\r\n\t  q = q[1];\r\n    if(!q){\r\n      return {};\r\n    }\r\n  }\r\n  while (e = r.exec(q))\r\n     urlParams[d(e[1])] = d(e[2]);\r\n\r\n  return urlParams;\r\n}\r\n\r\nfunction getQueryParamVal(key){\r\n  urlParams = getQueryParams();\r\n  return urlParams[key];\r\n}\r\n\r\nfunction setLocationPath(index, value){\r\n  var curPath = window.location.pathname;\r\n  curPath = curPath.split('/');\r\n  curPath.shift();\r\n  curPath[index] = value;\r\n  var qParams = window.location.search.substring(1);\r\n  if(typeof qParams != 'undefined'){\r\n    qParams = qParams ? '?' + qParams : qParams;\r\n  }\r\n  else{\r\n    qParams = '';\r\n  }\r\n  var uri = window.location.origin + '/' + curPath.join('/') + qParams;\r\n  location.href = uri;\r\n}\r\n\r\nfunction setQueryParams(key, val, reload, paramOnly, q){\r\n  var curHref = location.href;\r\n  var qParams = getQueryParams(q);\r\n  qParams[key] = val;\r\n  qParams = $.param(qParams);\r\n  qParams = qParams ? '?' + qParams : '';\r\n  if(paramOnly){\r\n    return qParams;\r\n  }\r\n\r\n  var uri = window.location.origin + window.location.pathname + qParams;\r\n  if(reload){\r\n    location.href = uri;\r\n  }\r\n\r\n  return uri;\r\n}\r\n\r\nfunction setQueryParamsQ(q, key, val, unset){\r\n\tif(typeof unset == 'undefined'){\r\n\t\tunset = false;\r\n\t}\r\n  var qParams = getQueryParams(q);\r\n  q = q.split('?');\r\n\tif(unset){\r\n\t\tdelete qParams[key];\r\n\t}\r\n\telse{\r\n  \tqParams[key] = val;\r\n\t}\r\n  qParams = $.param(qParams);\r\n  qParams = qParams ? '?' + qParams : '';\r\n  return q[0] + qParams;\r\n}\r\n\r\n\r\n//setup realm specific notification settings button in realm profiles\r\nfunction sUserSetupRealmNotifButton(triggerButton){\r\n  var cancelHandler = function(){\r\n    //handles cancel button clicking. Revert settings form to its original state and close the dropdown\r\n    if(typeof Drupal.settings.s_user != 'undefined' && typeof Drupal.settings.s_user.profile_notif_defaults != 'undefined'){\r\n      var defaults = Drupal.settings.s_user.profile_notif_defaults;\r\n      $('input.form-checkbox').each(function(){\r\n        var inputName = $(this).attr('name');\r\n        if(defaults.indexOf(inputName) > -1){\r\n          $(this).prop('checked', true);\r\n        }\r\n        else{\r\n          $(this).prop('checked', false);\r\n        }\r\n      });\r\n    }\r\n  };\r\n  sCommonSetupInlinePopup(triggerButton, {\r\n    buttonClass: 'notification-settings',\r\n    cancel: cancelHandler\r\n  });\r\n}\r\n\r\n/**\r\n * Obtain the UI settings associated with the current user.\r\n * May invoke with varying number of arguments to \"drill down\" to a specific setting\r\n * or provide no arguments to obtain all settings\r\n *\r\n * Given the settings:\r\n *   {\"foo\": {\"bar\": \"baz\", \"ham\": \"eggs\"}}\r\n * sUserGetUISettings('foo') will return\r\n *   {\"bar\": \"baz\", \"ham\": \"eggs\"}\r\n * sUserGetUISettings('foo', 'bar') will return\r\n *   \"baz\"\r\n *\r\n * @param string key,...\r\n * @return mixed\r\n */\r\nfunction sUserGetUISettings(){\r\n  var args = Array.prototype.slice.call(arguments);\r\n  var ret = Drupal.settings.s_user_ui_settings;\r\n  if(typeof ret == 'undefined'){\r\n    return null;\r\n  }\r\n\r\n  $.each(args, function(k, v){\r\n    if(ret === null || typeof ret[v] == 'undefined'){\r\n      ret = null;\r\n      return;\r\n    }\r\n    else{\r\n      ret = ret[v];\r\n    }\r\n  });\r\n\r\n  return ret;\r\n}\r\n\r\n/**\r\n * Update the UI settings and sync/save persistently.\r\n * Note that there is a use of a timer and a small delay to prevent overloading the backend with requests.\r\n *\r\n * Call with varying number of arguments similar to sUserGetUISettings except the last argument will be the value of\r\n * the setting.\r\n *\r\n * sUserSetUISettings('foo', 'bar', 'baz') will generate:\r\n *   {\"foo\": {\"bar\": \"baz\"}}\r\n * sUserSetUISettings('foo', 'ham', 'eggs') will then generate:\r\n *   {\"foo\": {\"bar\": \"baz\", \"ham\": \"eggs\"}}\r\n */\r\nfunction sUserSetUISettings(){\r\n  // update local\r\n  var args = Array.prototype.slice.call(arguments);\r\n  var value = args.pop();\r\n  if(typeof Drupal.settings.s_user_ui_settings == 'undefined' || $.isArray(Drupal.settings.s_user_ui_settings)){\r\n    // empty array json_encode issue\r\n    Drupal.settings.s_user_ui_settings = {};\r\n  }\r\n  var cursor = Drupal.settings.s_user_ui_settings;\r\n  $.each(args, function(k, v){\r\n    if(k == args.length - 1){\r\n      cursor[v] = value;\r\n    }\r\n    else{\r\n      if(typeof cursor[v] == 'undefined'){\r\n        cursor[v] = {};\r\n      }\r\n      cursor = cursor[v];\r\n    }\r\n  });\r\n\r\n  // update persistent\r\n  if(typeof window.sUserSettingsTimer != 'undefined'){\r\n    clearTimeout(sUserSettingsTimer);\r\n  }\r\n  var args_copy = Array.prototype.slice.call(arguments);\r\n  window.sUserSettingsTimer = setTimeout(function(){\r\n    sUserSaveUISettings.apply(this, args_copy);\r\n  }, 1000);\r\n\r\n}\r\n\r\n/**\r\n * Persistently save the UI settings associated with the current user.\r\n *\r\n * Note: this does not update the local cache in Drupal.settings.\r\n * should use sUserSetUISettings in most cases to keep data consistent.\r\n */\r\nfunction sUserSaveUISettings(){\r\n  var args = Array.prototype.slice.call(arguments);\r\n  var value = args.pop();\r\n  if(args.length > 0){\r\n    // update persistent\r\n    // note that the keys and value is encoded in order to maintain variable types (so true does not become \"true\")\r\n    $.ajaxSecure({\r\n      url: '/settings/ui',\r\n      type: 'post',\r\n      data: {\r\n        update: $.toJSON({\r\n          keys: args,\r\n          value: value\r\n        })\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\n/**\r\n * Setup fake popups\r\n *\r\n * @param triggerButton - jquery object representing the button that triggers the fake popup\r\n * @param opts\r\n *    buttonClass - a class identifier of the triggerButton\r\n *    cancel - a function to be executed when the cancel button in the popup gets clicked\r\n */\r\nfunction sCommonSetupInlinePopup(triggerButton, opts){\r\n  var defaults = {\r\n    buttonClass: '',\r\n    cancel: function(){}\r\n  };\r\n  opts = $.extend(defaults, opts);\r\n\r\n  var dropDown = $('div.inline-popup-wrapper'),\r\n      ajaxContents = $('.inline-popup-ajax-content', dropDown);\r\n\r\n  var cancelHandler = function(e){\r\n    e.preventDefault();\r\n    $('body').unbind('click.inline-popup');\r\n    dropDown.hide();\r\n    triggerButton.removeClass('active');\r\n    opts.cancel();\r\n  };\r\n\r\n  triggerButton.click(function(e){\r\n    e.preventDefault();\r\n    dropDown.toggle();\r\n    if(dropDown.is(':visible')){\r\n      $('body').bind('click.inline-popup', function(e){\r\n        var bodyTarget = $(e.target);\r\n        if(!bodyTarget.is('.' + opts.buttonClass) && !(bodyTarget.parents('.' + opts.buttonClass).length > 0) && !(bodyTarget.parents('.inline-popup-wrapper:first').length > 0)){\r\n          $('body').unbind('click.inline-popup');\r\n          dropDown.hide();\r\n          triggerButton.removeClass('active');\r\n        }\r\n      });\r\n      triggerButton.addClass('active');\r\n\r\n      // see if there are any ajax-loadable contents that should be lazy-loaded\r\n      ajaxContents.not('.ajax-loaded, .throbber').each(function(){\r\n        var ajaxContent = $(this),\r\n            ajaxUrl = ajaxContent.attr('src'),\r\n            ajaxHeader = {\r\n              'X-Drupal-Render-Mode': 'json/popups',\r\n              'Cache-Control':'no-store, no-cache, must-revalidate, post-check=0, pre-check=0'\r\n            };\r\n        if(ajaxUrl){\r\n          ajaxContent.addClass('throbber');\r\n          $.ajax({\r\n            url: ajaxUrl,\r\n            dataType: 'json',\r\n            headers: ajaxHeader,\r\n            success: function(response){\r\n              ajaxContent.removeClass('throbber').addClass('ajax-loaded');\r\n              if(response.content){\r\n                ajaxContent.append(response.content);\r\n\r\n                var formObj = $('form', ajaxContent);\r\n                if(formObj.length){\r\n                  formObj.ajaxForm({\r\n                    iframe: false,\r\n                    dataType: 'json',\r\n                    success: function(data, status, xhr) {\r\n                      $.each(['status', 'error', 'warning'], function(k, type){\r\n                        if(typeof data['messages_' + type] != 'undefined'){\r\n                          addMessages(data['messages_' + type], type);\r\n                        }\r\n                      });\r\n                      triggerButton.triggerHandler('click');\r\n                    }\r\n                  });\r\n                  $('.cancel-btn', formObj).click(cancelHandler);\r\n                }\r\n              }\r\n            }\r\n          });\r\n        }\r\n        else{\r\n          ajaxContent.addClass('ajax-loaded');\r\n        }\r\n      });\r\n    }\r\n    else{\r\n      $('body').unbind('click.inline-popup');\r\n      triggerButton.removeClass('active');\r\n    }\r\n  });\r\n  $('.cancel-btn', dropDown).click(cancelHandler);\r\n}\r\n\r\n/**\r\n * set up reminders/todo list javascript\r\n */\r\nfunction sCourseSetupTodoList(context){\r\n\r\n\t $('.reminder-link', context).each(function(){\r\n\t\t\tvar link = $(this);\r\n\t\t\tlink.click(function(e){\r\n\t\t\t\t//ajax the reminders LIST if one of the links is clicked\r\n\t\t\t\tvar reminder = link.parents('.reminders-content:first');\r\n\t\t\t\treminder.addClass('active-loading');\r\n\t\t\t\treminder.prepend('<img src=\"/sites/all/themes/schoology_theme/images/ajax-loader.gif\" id=\"reminder-outside-loader\" alt=\"\" />');\r\n\t\t\t    $.ajax({\r\n\t\t\t        url: '/' + link.attr('href'),\r\n\t\t\t        dataType: 'json',\r\n\t\t\t        type: 'GET',\r\n\t\t\t        success: function(response, status){\r\n\t\t\t          reminder.empty();\r\n\t\t\t          reminder.append(response);\r\n\t\t\t          var todoSelect = $('.reminder-selector', reminder);\r\n\t\t\t          if(todoSelect.length > 0){\r\n\t\t\t        \t  //setup javascript for the fake dropdown if it exists\r\n\t\t\t\t          var basePath = '/home/reminders_list';\r\n\t\t\t\t          var selectID = todoSelect.attr('id');\r\n\t\t\t\t          if(selectID != 'home-reminder'){\r\n\t\t\t\t        \t  var splitted = selectID.split('-');\r\n\t\t\t\t        \t  basePath = '/course/' + splitted.pop() + '/reminders_list';\r\n\t\t\t\t          }\r\n\t\t\t\t\t\t  todoSelect.selectmenu({\r\n\t\t\t\t\t\t\tstyle: 'dropdown'\r\n\t\t\t\t\t\t  });\r\n\t\t\t\t\t\t  todoSelect.change(function(){\r\n\t\t\t\t\t\t\tvar remList = $('.reminders-list-items', reminder);\r\n\t\t\t\t\t\t\tremList.empty();\r\n\t\t\t\t\t\t\tremList.append('<img src=\"/sites/all/themes/schoology_theme/images/ajax-loader.gif\" alt=\"\" />');\r\n\t\t\t\t\t\t\tvar type = $(this).val();\r\n\t\t\t\t\t\t\t$.ajax({\r\n\t\t\t\t\t\t\t\turl: basePath + '/' + type,\r\n\t\t\t\t\t\t\t\tdataType: 'json',\r\n\t\t\t\t\t\t\t\ttype: 'GET',\r\n\t\t\t\t\t\t\t\tsuccess: function(response, status){\r\n\t\t\t\t\t\t\t\t\tremList.empty();\r\n\t\t\t\t\t\t\t\t\tremList.append(response);\r\n\t\t\t\t\t\t\t\t\tDrupal.attachBehaviors(remList);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t  });\r\n\t\t\t          }\r\n\t\t\t\t\t  reminder.removeClass('active-loading');\r\n\t\t\t\t\t  Drupal.attachBehaviors(reminder);\r\n\t\t\t       }\r\n\t\t\t    });\r\n\t\t\t    e.preventDefault();\r\n\t\t\t});\r\n\t });\r\n}\r\n\r\n/*\r\n * this function attaches ajax behavior to network links\r\n * the statusresponsmap is an object with key being a network status (e.g. TW_1_TO_2_P) and the value being a markup\r\n */\r\nfunction sCommonAjaxNetworkConnectBehavior(context, statusResponseMap){\r\n $('a.network-action-ajax:not(.sCommon-processed)', context).addClass('sCommon-processed').each(function(){\r\n    $(this).click(function(){\r\n      var link = $(this);\r\n      var actionUrl = $(this).attr('href');\r\n      $.ajaxSecure({\r\n        url : actionUrl,\r\n        dataType: 'json',\r\n        success: function(data, status){\r\n          if(data.drupal_set_message && data.drupal_set_message != '') {\r\n            addMessages([{'value': data.drupal_set_message}], 'status temp');\r\n          }\r\n          \r\n          if(data.result.hasOwnProperty('connect_status')){\r\n            if(statusResponseMap.hasOwnProperty(data.result.connect_status)){\r\n              var html = $(statusResponseMap[data.result.connect_status].button);\r\n            }\r\n            link.replaceWith(html);\r\n            //if there is a cluetip swap out that text\r\n            if(html.siblings('.infotip-content:first').length > 0){\r\n              html.siblings('.infotip-content:first').text(statusResponseMap[data.result.connect_status].cluetip_text);\r\n            }\r\n          }\r\n        },\r\n        error: function(){\r\n          alert(Drupal.t(\"Something went wrong with your request. Please try again later.\"));\r\n        }\r\n      });\r\n      return false;\r\n    })\r\n  });\r\n}\r\n\r\n/**\r\n * Similar to sCommonAjaxNetworkConnectBehavior, this will ajax enrollments.  Right now this type of enrollment is only\r\n * supported in groups\r\n */\r\nfunction sCommonAjaxEnrollmentBehavior(context){\r\n  $('a.enrollment-action-button:not(.sCommon-processed)', context).addClass('sCommon-processed').each(function(){\r\n    $(this).click(function(e){\r\n      e.stopPropagation();\r\n      var link = $(this);\r\n      var enrollUrl = $(this).attr('href');\r\n      var img = $('<img class=\"s-enrollment-loading-ajax-gif\" src=\"/sites/all/themes/schoology_theme/images/ajax-loader.gif\" />');\r\n\r\n      var queryString = '';\r\n      if(link.hasClass('infotip-version')){\r\n        queryString = 'infotip=TRUE';\r\n        //trigger mouse-leave so infotip goes away\r\n        link.parent('span.infotip:first').trigger('mouseleave');\r\n        link.parent('span.infotip:first').replaceWith(img);\r\n      }\r\n      else{\r\n        link.replaceWith(img);\r\n      }\r\n\r\n\r\n      $.ajaxSecure({\r\n        url : enrollUrl,\r\n        dataType : 'json',\r\n        data : queryString,\r\n        success : function(data, status){\r\n          if(data.hasOwnProperty('force_reload')){\r\n            location.reload();\r\n          }\r\n          else if(data.hasOwnProperty('new_button')){\r\n            var newButton = $(data.new_button);\r\n            img.replaceWith(newButton);\r\n            //attach the behavior to the new button\r\n            sCommonAjaxEnrollmentBehavior(newButton.parent(':first'));\r\n            Drupal.attachBehaviors(newButton.parent(':first'));\r\n          }\r\n          else{\r\n            img.replaceWith('<span class=\"link-btn error\">' + Drupal.t('Error') + '</span>');\r\n          }\r\n        },\r\n        error : function(data, status){\r\n          img.replaceWith('<span class=\"link-btn error\">' + Drupal.t('Error') + '</span>');\r\n        }\r\n      });\r\n      return false;\r\n    });\r\n  });\r\n}\r\n\r\nfunction sCommonDefaultConnectStatusResponseMap(){\r\n  return {\r\n    'TW_1_TO_2_P' : {\r\n      'button' : '<span class=\"action-connect-request-pending link-btn\"><span>' + Drupal.t('Pending') + '</span></span>',\r\n      'cluetip_text' : Drupal.t('Pending connection request')\r\n    }\r\n  };\r\n}\r\n\r\nfunction sCommonGradeChooserBehavior(form){\r\n  var endRange = $('.end-range-wrapper', form);\r\n  var endSelect = $('select', endRange);\r\n  var addRange = $('.add-range', form);\r\n  var rangeStart = $('.range-start', form);\r\n  var hasEnd = $('input.has-end', endRange);\r\n\r\n  if(hasEnd.val() == '1'){\r\n    //show the end range fields if we're editing and there is an endrange in place already\r\n    endRange.show();\r\n  }\r\n\r\n  // show the add range button if the starting range value is not zero or higher ed\r\n  rangeStart.change(function() {\r\n    var val = $(this).val();\r\n    // TODO: refactor the following with similar code in s_library_find.js\r\n    var lastOptGroup = $('optgroup[label=\"' + Drupal.t('Higher Education') + '\"]', rangeStart);\r\n    var lastRangeVal = lastOptGroup.length ?\r\n      $('option:last-child', lastOptGroup).attr('value') :\r\n      $('option:last-child', this).attr('value');\r\n\r\n    if(val != 0 && val != lastRangeVal){\r\n      if(!endRange.is(':visible')){\r\n        addRange.show();\r\n      }\r\n    }\r\n    else {\r\n      addRange.hide();\r\n      endRange.hide();\r\n    }\r\n    var resetEndRange = false;\r\n    if(parseInt(val) > parseInt(endSelect.val())){\r\n      resetEndRange = true;\r\n    }\r\n    sCommonResetGradeLevelRange(rangeStart, endRange, resetEndRange);\r\n  });\r\n\r\n  // trigger the change event in case if we just returned from a failed validation so that the add range button will appear if the start range is not zero\r\n  rangeStart.change();\r\n\r\n  // show the end range fields if clicking the add range button\r\n  addRange.click(function(){\r\n    endRange.show();\r\n    endSelect.show().trigger('focus');\r\n    $(this).hide();\r\n    sCommonResetGradeLevelRange(rangeStart, endRange, true);\r\n    hasEnd.val('1');\r\n  });\r\n\r\n  // hide the end range fields if remove range button is clicked\r\n  $('.remove-range', form).click(function(){\r\n    endRange.hide();\r\n    addRange.show().trigger('focus');\r\n    hasEnd.val('0');\r\n  });\r\n\r\n}\r\n\r\n//ensure that the end range field choices will always be greater than the start range choice\r\nfunction sCommonResetGradeLevelRange(startRange, endRange, resetEndRange){\r\n\tvar gradeLevel = parseInt(startRange.val());\r\n\tvar lastRangeVal = $('option:last-child', startRange).attr('value');\r\n\t//iterate through the endrange option fields and hide those that are smaller than the starting range value\r\n\t$('option', endRange).each(function(){\r\n\t\tvar option = $(this);\r\n\t\tvar optionVal = parseInt(option.attr('value'));\r\n\t\tvar optgroup = $('optgroup[label=\"' + Drupal.t('Primary/Secondary') + '\"]', endRange);\r\n\t\tif(optionVal <= gradeLevel || gradeLevel == 0){\r\n\t\t\tif(optionVal != 0){\r\n\t\t\t\toption.hide();\r\n\t\t\t\tif (optionVal == 14 && gradeLevel != 0){ // if grade 12 is hidden, remove the opt group as well\r\n\t\t\t\t\toptgroup.hide();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\toption.show();\r\n\t\t\t}\r\n\t\t}\r\n\t\telse{\r\n\t\t\toption.show();\r\n\t\t\tif (optionVal <= 14 && gradeLevel != 0){ // if we are showing a grade school level then make sure the optgroup is there as well\r\n\t\t\t\toptgroup.show();\r\n\t\t\t}\r\n\t\t}\r\n\t\tif(resetEndRange){\r\n\t\t\t//set end range to the value greater than the start range\r\n\t\t\tvar newVal = parseInt(startRange.val()) + 1;\r\n\t\t\t$('option[value=' + newVal + \"]\", endRange).attr('selected', 'selected');\r\n\t\t}\r\n\t});\r\n}\r\n\r\n/**\r\n * In the future, we plan on having mucho suggestion blocko.\r\n * This function will facilitate this and avoid spamming the code base\r\n * with ajax calls.\r\n */\r\nfunction sCommonGetSuggestionBlock(blockTitle){\r\n  var ajaxUrl = '';\r\n  var eventName = blockTitle + \"BlockReady\";\r\n  switch(blockTitle){\r\n    case 'suggestions':\r\n      ajaxUrl = '/network/suggestions_block';\r\n      break;\r\n    case 'groups':\r\n      ajaxUrl = '/groups/suggestions';\r\n      break;\r\n    case 'apps':\r\n      ajaxUrl = '/apps/suggestions';\r\n      break;\r\n  }\r\n\r\n  if(ajaxUrl.length > 0){\r\n    $.ajax({\r\n      url: ajaxUrl,\r\n      dataType: 'html',\r\n      async: true,\r\n      data : {'ajax' : 1},\r\n      success : function(data){\r\n        $(document).trigger(eventName, [data]);\r\n      },\r\n      error : function(data){\r\n        return '';\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\n\r\nfunction sCommonDeleteCallback(data, options, element){\r\n\r\n if ($('.folder-title').length){\r\n   url = $('.folder-title a').attr('href');\r\n }\r\n else{ \r\n   var basePath = $('.course-title a').attr('href') + '/materials/';\r\n   var bodyObj = $('body');\r\n   \r\n   if(bodyObj.hasClass('s_grade_item_assignment')){\r\n     url = basePath + 'assignments';\r\n   }\r\n   else if(bodyObj.hasClass('s-grade-item-discussion')){\r\n     url = basePath + 'discussion';\r\n   }\r\n   else if(bodyObj.hasClass('s_grade_item_assessment')){\r\n     url = basePath + 'assessments';\r\n   }\r\n }\r\n\r\n window.location.href = url;\r\n return false;\r\n}\r\n\r\nfunction sCommonSetupTableDrag(rowObj){\r\n  var handleObj = $(\".tabledrag-handle\", rowObj );\r\n  var handleIconObj = $('.handle' , handleObj );\r\n\r\n  handleObj.hover(\r\n    function(){\r\n      handleIconObj.addClass('handle-mousedown');\r\n    },\r\n    function(){\r\n      handleIconObj.removeClass('handle-mousedown');\r\n  }).bind(\"mousedown\", function(){\r\n    rowObj.addClass('highlight');\r\n    $('body').one('mouseup',function(){\r\n      rowObj.removeClass('highlight');\r\n      handleIconObj.removeClass('handle-mousedown');\r\n    });\r\n  });\r\n}\r\n\r\n\r\n/**\r\n * Create a confirmation popup.\r\n * Useful for when the user is about to delete something.\r\n * See settings variable for available settings to override.\r\n *\r\n * @param object opts\r\n * @return object      handle to the popup object created\r\n */\r\nfunction sCommonConfirmationPopup(opts){\r\n  if(typeof opts != 'object'){\r\n    return false;\r\n  }\r\n\r\n  var settings = {\r\n    title: '',\r\n    body: '',\r\n    extraClass: '',\r\n    confirm: {\r\n      text: Drupal.t('Confirm')\r\n    },\r\n    cancel: {\r\n      text: Drupal.t('Cancel')\r\n    },\r\n    element: null,\r\n    extraOptions : {},\r\n    hideConfirm: false\r\n  };\r\n  $.extend(true, settings, opts);\r\n\r\n  var popup = new Popups.Popup();\r\n\r\n  popup.element = settings.element;\r\n  popup.extraClass = settings.extraClass;\r\n\r\n  if(!/popups-(tiny|extra-small|small|medium|large|extra-large|300)/.test(popup.extraClass)){\r\n    // if there isn't a size declared in extraClass, give it a default of popups-small\r\n    popup.extraClass += ' popups-small';\r\n  }\r\n\r\n  // buttons are named this way to avoid id clashing in the dom\r\n  var buttons = {\r\n    confirmation_confirm: {\r\n      title: settings.confirm.text,\r\n      func: function(){\r\n        if(typeof settings.confirm.func == 'function'){\r\n          settings.confirm.func.apply(this, []);\r\n        }\r\n      }\r\n    },\r\n    confirmation_cancel: {\r\n      title: settings.cancel.text,\r\n      func: function(){\r\n        sPopupsClose();\r\n        if(typeof settings.cancel.func == 'function'){\r\n          settings.cancel.func.apply(this, []);\r\n        }\r\n      }\r\n    }\r\n  };\r\n  \r\n  if( opts.hideConfirm ) {\r\n    delete buttons.confirmation_confirm;\r\n    popup.extraClass += ' cancel-only';\r\n  }\r\n  \r\n  Popups.open(popup, settings.title, settings.body, buttons, null, settings.extraOptions);\r\n\r\n  if(typeof settings.onClose == 'function'){\r\n    var event_id = 'popups_before_close.' + popup.id;\r\n    $(document).bind(event_id, function(e, popup){\r\n      $(document).unbind(event_id);\r\n      settings.onClose.apply(this, []);\r\n    });\r\n  }\r\n\r\n  return popup;\r\n}\r\n\r\n// Found at http://stackoverflow.com/questions/2646385/add-a-thousands-separator-to-a-total-with-javascript-or-jquery\r\nfunction sAddCommas(nStr) {\r\n    nStr += '';\r\n    var x = nStr.split('.');\r\n    var x1 = x[0];\r\n    var x2 = x.length > 1 ? '.' + x[1] : '';\r\n    var rgx = /(\\d+)(\\d{3})/;\r\n    while (rgx.test(x1)) {\r\n        x1 = x1.replace(rgx, '$1' + ',' + '$2');\r\n    }\r\n    return x1 + x2;\r\n}\r\n\r\n/**\r\n  * Convenience callback function for $.each to get around the fact triggerHandler only operates on the first element\r\n  */\r\nvar sTriggerClick = function(){\r\n $(this).triggerHandler('click');\r\n};\r\n\r\n// http://upshots.org/javascript/jquery-test-if-element-is-in-viewport-visible-on-screen\r\n$.fn.isOnScreen = function(){\r\n    var win = $(window);\r\n    var viewport = {\r\n        top : win.scrollTop(),\r\n        left : win.scrollLeft()\r\n    };\r\n    viewport.right = viewport.left + win.width();\r\n    viewport.bottom = viewport.top + win.height();\r\n     \r\n    var bounds = this.offset();\r\n    bounds.right = bounds.left + this.outerWidth();\r\n    bounds.bottom = bounds.top + this.outerHeight();\r\n     \r\n    return (!(viewport.right < bounds.left || viewport.left > bounds.right || viewport.bottom < bounds.top || viewport.top > bounds.bottom));\r\n};\r\n\r\nfunction parseHashkeys() {\r\n  var hash_keys = {};\r\n  var hash = String(window.location.hash);\r\n  \r\n  if(!hash)\r\n   return hash_keys; \r\n  hash = hash.substring(1).split('&');\r\n  \r\n  $.each( hash , function( index , value ) {\r\n    value = value.split('=');\r\n    if( value.length == 2 )\r\n      hash_keys[ value.shift() ] = value.shift();    \r\n  });\r\n  \r\n  return hash_keys;\r\n}\r\n\r\n/**\r\n * AjaxLoader:\r\n *  dim content and add overlay to disable clicks\r\n *  \r\n *  @param  string  k     toggle key\r\n *  @param  object  obj   object/element\r\n *  @param  object  opts\r\n */\r\nfunction sToggleActiveLoader(k, obj, opts) {\r\n  if( typeof sToggleActiveLoader.ns == 'undefined' ) {\r\n    sToggleActiveLoader.ns = {};\r\n  }\r\n\r\n  var defaults = {\r\n    scrollingElement: false, // whether to account for the content being scrolled within the obj's viewport\r\n\t\twidth: false,\r\n\t\theight: false\r\n  };\r\n  opts = $.extend(defaults, opts);\r\n  \r\n  // loading content\r\n  if( typeof obj != 'undefined' ) {\r\n    var width = opts.width ? opts.width : obj.outerWidth(),\r\n        height = opts.height ? opts.height : obj.outerHeight();\r\n    obj.addClass('active-loader');\r\n    \r\n    if(typeof sToggleActiveLoader.ns[k] == 'undefined'){\r\n      sToggleActiveLoader.ns[k] = {};\r\n\r\n      sToggleActiveLoader.ns[k]['loadingImage'] = $('<img src=\"/sites/all/themes/schoology_theme/images/ajax-loader.gif\" class=\"loading-image\" width=\"30\" height=\"8\" alt=\"' + Drupal.t('Content is loading. Please wait.') + '\" />');\r\n\r\n      sToggleActiveLoader.ns[k]['overlay'] = $('<div class=\"loading-overlay\"> </div>').css({\r\n        'width': width + 'px',\r\n        'height': height + 'px'\r\n      });\r\n    }\r\n    else {\r\n      // overlay exists, update size\r\n      var sizeHasChanged = false;\r\n      sizeHasChanged = (\r\n        width != sToggleActiveLoader.ns[k]['overlay'].width() ||\r\n        height != sToggleActiveLoader.ns[k]['overlay'].height()\r\n      );\r\n      if(sizeHasChanged) {\r\n        sToggleActiveLoader.ns[k]['overlay'].css({\r\n          'width': width + 'px',\r\n          'height': height + 'px'\r\n        });\r\n      }\r\n    }\r\n\r\n    if(opts.scrollingElement){\r\n      var scrollLeft = obj.scrollLeft(),\r\n          scrollTop = obj.scrollTop();\r\n      sToggleActiveLoader.ns[k]['overlay'].css({\r\n        left: scrollLeft,\r\n        top: scrollTop\r\n      });\r\n\r\n      sToggleActiveLoader.ns[k]['loadingImage'].css({\r\n        left: scrollLeft + width/2 - 15,\r\n        top: scrollTop + 15\r\n      });\r\n    }\r\n    \r\n    $( sToggleActiveLoader.ns[k]['overlay'] ).prependTo(obj);\r\n    $( sToggleActiveLoader.ns[k]['loadingImage'] ).prependTo(obj);\r\n  }\r\n  // content loaded; remove class and overlay\r\n  else {\r\n    if(typeof sToggleActiveLoader.ns[k] != 'undefined'){\r\n      $( sToggleActiveLoader.ns[k]['overlay'] ).closest('.active-loader').removeClass('active-loader');\r\n      $( sToggleActiveLoader.ns[k]['overlay'] ).remove();\r\n      $( sToggleActiveLoader.ns[k]['loadingImage'] ).remove();\r\n      delete(sToggleActiveLoader.ns[k]);\r\n    }\r\n  }\r\n}\r\n\r\nfunction sCommonIsEmbed(embedCode){\r\n  var embedDom = $('<div>').append(embedCode);\r\n  return $('object,iframe,embed,img', embedDom).length > 0\r\n}\r\n\r\n// Trigger an event when the given object moves into the viewport because the user scrolled the page down\r\n(function($) {\r\n    \r\n  $.fn.sInfiniteScroll = function(options) {\r\n    var opts = $.extend({}, $.fn.sInfiniteScroll.defaults, options);\r\n    opts.scrollWindow.unbind('scroll.sScrollLoad');\r\n    return this.each(function() {\r\n      $this = $(this);\r\n      \r\n      opts.scrollWindow.bind('scroll.sScrollLoad',function(e){\r\n          if( $this.isOnScreen() ){\r\n            opts.scrollWindow.unbind('scroll.sScrollLoad');\r\n            opts.loadMore($this);\r\n          }\r\n      });\r\n      \r\n    });\r\n  };\r\n  \r\n  $.fn.sInfiniteScroll.defaults = {\r\n    scrollWindow: $(window)\r\n  };\r\n  \r\n})(jQuery);\r\n\r\n/**\r\n * Combine select and input fields; provide input field for user to enter/select new option\r\n * \r\n * General HTML structure; see external_tool or grade_item form:\r\n * <div wrapper> \r\n *  <div> <select /> </div>\r\n *  <div [hidden]> <input /> </div> \r\n *  <span [hidden] /> \r\n * </div>\r\n */\r\nfunction sFormSelectInput(wrapper, opts) {\r\n  var selectObj = $('.s-js-select-field', wrapper),\r\n      inputObj = $('.s-js-input-field', wrapper),\r\n      cancelObj = $('.s-js-cancel-btn', wrapper);\r\n      \r\n  var opts = $.extend({}, {\r\n    selectFieldDefaultVal: 'ungraded',\r\n    selectFieldNewVal: 'new',\r\n    \r\n    // hide select menu, show input field and cancel button\r\n    selectFieldOnChange: function() {\r\n      if(selectObj.val() == opts.selectFieldNewVal) {\r\n        selectObj.hide();\r\n        inputObj.removeClass('hidden').show()\r\n          .closest('.form-item').show();\r\n        cancelObj.removeClass('hidden').show();\r\n      }\r\n      else{\r\n        inputObj.hide();\r\n        cancelObj.hide();\r\n      }\r\n    },\r\n    \r\n    // hide input field / cancel btn and show select menu\r\n    inputFieldOnCancel: function() {\r\n      inputObj.hide();\r\n      cancelObj.hide();\r\n      selectObj.show().val(opts.selectFieldDefaultVal);\r\n    },\r\n    \r\n    // toggle pre-fill        \r\n    inputFieldOnBlur: function() {\r\n      if(inputObj.val() == '') {\r\n        inputObj\r\n          .val( inputObj.attr('pre-fill') )\r\n          .addClass('pre-fill');\r\n      }\r\n    },      \r\n    inputFieldOnFocus: function() {\r\n      if(inputObj.val() == inputObj.attr('pre-fill')) {\r\n        inputObj\r\n          .val('')\r\n          .removeClass('pre-fill');\r\n      }\r\n    }\r\n  }, (opts == undefined ? {} : opts));\r\n  \r\n  selectObj.change(opts.selectFieldOnChange);\r\n  inputObj.blur(opts.inputFieldOnBlur).focus(opts.inputFieldOnFocus);\r\n  cancelObj.click(opts.inputFieldOnCancel);\r\n  \r\n  // if submit fails (ie, validation) show appropriate field\r\n  if(selectObj.val() == opts.selectFieldNewVal) {\r\n    selectObj.trigger('change');\r\n    inputObj.show().removeClass('pre-fill');\r\n    cancelObj.show();\r\n  }\r\n  else{\r\n    inputObj.hide();\r\n    cancelObj.hide();\r\n  }\r\n}\r\n\r\nfunction sCommonCalculateScrollVal(original, amount){\r\n  var direction = amount.charAt(0),\r\n    magnitude = Math.floor(amount.substring(1));\r\n  switch(direction){\r\n    case '+':\r\n      amount = original + magnitude;\r\n      break;\r\n\r\n    case '-':\r\n      amount = Math.max(0, original - magnitude);\r\n      break;\r\n\r\n    default:\r\n      amount = Math.floor(amount);\r\n  }\r\n\r\n  return amount;\r\n}\r\n\r\nfunction sCommonSchoolBuildingChooser(formObj) {\r\n  $('.s-school-building-chooser.s-js-building-chooser-has-header', formObj).each(function(){\r\n    var sSchoolBuildingChooser = $(this);\r\n\r\n    $('#select-building-chooser-btn', sSchoolBuildingChooser).each(function(){\r\n      var activeBtn = $(this);\r\n      activeBtn.click(function(){\r\n        if(activeBtn.hasClass('active')){\r\n          activeBtn.removeClass('active');\r\n          activeBtn.text(Drupal.t('Select All'));\r\n        }\r\n        else{\r\n          activeBtn.addClass('active');\r\n          activeBtn.text(Drupal.t('Unselect All'));\r\n        }\r\n        // update checkboxes and selected count\r\n        $('.building-cb', sSchoolBuildingChooser).attr('checked', activeBtn.hasClass('active')).trigger('sBuildingChooserBoxChange');\r\n      });\r\n    });\r\n\r\n    $('.building-cb', sSchoolBuildingChooser).each(function(){\r\n      $(this).change(function(){\r\n        $(this).trigger('sBuildingChooserBoxChange');\r\n        var activeBtn = $('#select-building-chooser-btn', sSchoolBuildingChooser);\r\n        if($('.building-cb', sSchoolBuildingChooser).length == $('.building-cb:checked', sSchoolBuildingChooser).length) {\r\n          activeBtn.addClass('active');\r\n          activeBtn.text(Drupal.t('Unselect All'));\r\n        }\r\n        else {\r\n          activeBtn.removeClass('active');\r\n          activeBtn.text(Drupal.t('Select All'));\r\n        }\r\n      });\r\n      $(this).bind('sBuildingChooserBoxChange', function(){\r\n        $('#num-building-chooser-selected', sSchoolBuildingChooser).text($('.building-cb:checked', sSchoolBuildingChooser).length);\r\n      })\r\n    });\r\n  });\r\n}\r\n\r\n\r\n/**\r\n * Optionally add required span tag generated by #required => TRUE. Useful for instances where we\r\n * toggle the visibility of \"required\" elements.\r\n */\r\nfunction sCommonFormFieldMakeRequired(form_elem_label) {\r\n  if(!form_elem_label.hasClass('sCommonFormFieldMakeRequired-processed')) {\r\n    form_elem_label.append('<span class=\"form-required\" title=\"This field is required.\">*</span>')\r\n    form_elem_label.addClass('sCommonFormFieldMakeRequired-processed');\r\n  }\r\n}\r\n\r\nfunction sCommonOpenNewWindow(url, options) {\r\n  var defaults = {\r\n    name: '_blank',\r\n    specs: {location: 'no'},\r\n    replace: {},\r\n    done: ''\r\n  };\r\n  options = $.extend(defaults, (options || {}));\r\n  \r\n  options.specs.width = 1140;\r\n  options.specs.height = 720;\r\n  if(screen.width < 1250) {\r\n    options.specs.width = 960;\r\n    options.specs.height = 540;\r\n  }\r\n  options.specs.left = (screen.width / 2) - (options.specs.width / 2);\r\n  options.specs.top = (screen.height / 2) - (options.specs.height / 2);\r\n  \r\n  var specs = [];\r\n  $.each(options.specs, function(key, value) {\r\n    specs.push(key + \"=\" + value);\r\n  });\r\n  specs = specs.join(',');\r\n  \r\n  var newWin = window.open(url, options.name, specs);\r\n  newWin = (!newWin || newWin.closed || typeof newWin.closed == 'undefined') ? false : newWin;\r\n  \r\n  if(typeof(options.done) == 'function') { \r\n    options.done(newWin);\r\n  }\r\n  \r\n  return newWin;\r\n}\r\n\r\n/**\r\n * Allow users to deselect radio button options, which will check \r\n * the given default radio button. The default button could be \r\n * hidden with js/css if necessary.\r\n */\r\nfunction sCommonFormRadioGroup(groupWrapper, defaultBtn) {\r\n  var radioButtons, checkedBtn;\r\n  \r\n  if(groupWrapper.hasClass('sCommonFormRadioGroup-processed')) {\r\n    return;\r\n  }\r\n  \r\n  radioButtons = $('input[type=radio]', groupWrapper);\r\n  \r\n  if((checkedBtn = radioButtons.filter(':checked')).length > 0) {\r\n    checkedBtn.addClass('isChecked');\r\n  }\r\n        \r\n  radioButtons.click(function() {\r\n    var clickedBtn = $(this);\r\n    if(clickedBtn.hasClass('isChecked')) {\r\n      radioButtons.removeClass('isChecked');\r\n      defaultBtn.prop('checked', true).addClass('isChecked');\r\n    }\r\n    else {\r\n      radioButtons.removeClass('isChecked');\r\n      clickedBtn.addClass('isChecked');\r\n    }\r\n  });\r\n  \r\n  groupWrapper.removeClass('hidden');\r\n  groupWrapper.addClass('sCommonFormRadioGroup-processed');\r\n}\r\n\r\n// Make sure the enter key triggers the click event of all non-anchor clickable elements\r\n$(document).on('keypress','.clickable, [role=button], [role=menuitem], [role=tab], .skip', function(e){\r\n  if(e.target.tagName.toUpperCase() !== 'A' && e.keyCode === 13 && e.handled !== true) {\r\n    $(e.target).trigger('click');\r\n    e.handled = true; // make sure the click doesn't fire twice for the same event\r\n  }\r\n});\r\n$(document).on('keydown', '[role=tab]', function (event) {\r\n\tvar currentTab = $(event.currentTarget);\r\n\tvar direction = '';\r\n\tvar leftArrowKey = 37;\r\n\tvar rightArrowKey = 39;\r\n\t\r\n\tif (event.which === leftArrowKey) {\r\n\t\tdirection = 'prev';\r\n\t} else if (event.which === rightArrowKey) {\r\n\t\tdirection = 'next';\r\n\t}\r\n\tif (direction) {\r\n\t\tvar link = currentTab[direction]().find('a')[0];\r\n\t\tif (link) {\r\n\t\t\tlink.click();\r\n\t\t}\r\n\t}\r\n});\r\n// Set the main role on the appropriate item\r\n// the ability to set the main role is called with the s_common_set_role_main($data) method, where $data is the ID of an element in that page\r\nDrupal.behaviors.sAttachMainRole = function(context){\r\n  if(Drupal.settings.sAccessibility && Drupal.settings.sAccessibility.role_main != 'undefined') {\r\n    var role_main_selector = (Drupal.settings.sAccessibility.role_main instanceof Array)\r\n      ? Drupal.settings.sAccessibility.role_main.pop()\r\n      : Drupal.settings.sAccessibility.role_main;\r\n    $('#' + role_main_selector).not('.schoology-processed').addClass('schoology-processed').each(function(){\r\n      $(this).attr('role','main');\r\n    });\r\n  }\r\n}\r\n\r\n// Make the skip link change focus\r\n// concept comes from http://blog.bignerdranch.com/4455-web-accessibility-skip-navigation-links/\r\n$(document).on('click','.skip',function(e){\r\n  e.preventDefault(); // no need to update the url bar, we'll be doing it through JS\r\n  \r\n  var skipTo = \"#\" + this.href.split('#')[1]; // grab the element that the skip link is pointing to\r\n\r\n  // give the element a tabindex of -1 and that is removed when the user tabs along\r\n  $(skipTo).attr('tabindex','-1').on('blur focusout', function(){\r\n    $(this).removeAttr('tabindex');\r\n  }).focus(); // focus the element\r\n});\r\n\r\n/**\r\n * Push messages into DOM\r\n *\r\n * @param string messages HTML of messages see @\r\n */\r\nfunction sCommonPushStatusMessages(messages) {\r\n  if(messages != '') {\r\n    var messageWrapper = $('<div class=\"s-js-pushed-messages-wrapper\">' + messages + '</div>').prependTo('#main-content-wrapper');\r\n    $('.messages', messageWrapper).addClass('temp');\r\n    sAttachBehaviors(['schoology'], $('.s-js-pushed-messages-wrapper'));\r\n  }\r\n}\r\n\r\n/**\r\n * Convenience function to obtain a Drupal.settings value without having to check if every level is defined.\r\n *\r\n * Sample usage:\r\n * var setting = sCommonGetSetting('s_course', 'cafeteria', 'menu', 'burrito');\r\n * This will attempt to return the value of s_course.cafeteria.menu.burrito or NULL if that particular setting does not exist\r\n */\r\nfunction sCommonGetSetting(/* ... */){\r\n  var setting = Drupal.settings,\r\n      arg = Array.prototype.slice.apply(arguments),\r\n      len = arg.length,\r\n      i, k;\r\n\r\n  if(len){\r\n    for(i = 0; i < len && setting; i++){\r\n      k = arg[i];\r\n      if(typeof setting[k] == 'undefined'){\r\n        setting = null;\r\n      }\r\n      else{\r\n        setting = setting[k];\r\n      }\r\n    }\r\n  }\r\n\r\n  return setting;\r\n}\r\n\r\n/**\r\n * Schoology version of $.ajax for performing AJAX POST call that is safe from CSRF attacks\r\n * @param params - similar parameters to be passed into jquery $.ajax\r\n */\r\n$.ajaxSecure = function(params){\r\n  var ret = null;\r\n  if(typeof Drupal.settings.s_common.csrf_token != 'undefined' && typeof Drupal.settings.s_common.csrf_key != 'undefined'){\r\n    var tokenData = {\r\n      'X-Csrf-Token' : Drupal.settings.s_common.csrf_token,\r\n      'X-Csrf-Key'   : Drupal.settings.s_common.csrf_key,\r\n    }\r\n\r\n    var allowedMethod = ['POST', 'PUT', 'DELETE'];\r\n    if(typeof params.type == 'undefined' || allowedMethod.indexOf(params.type) == -1){\r\n      params.type = 'POST';\r\n    }\r\n    if(params.headers){\r\n      $.extend(params.headers, tokenData);\r\n    }\r\n    else{\r\n      params.headers = tokenData;\r\n    }\r\n    ret = $.ajax(params);\r\n  }\r\n  return ret;\r\n}\r\n\r\n\r\n/**\r\n * Object:\r\n * sAccessibility wrapper object for accessible javascript additions\r\n * \r\n * Description:\r\n * right now, this object exists to essentially manage accessible javascript functionality for popups and overlays\r\n *\r\n * Properties:\r\n * focusableElementsString - a string of element types that can receive keyboard focus; used as a jQuery filter\r\n * focusMap - an array to track which elements open popups; used to return focus to those elements when the popup is closed\r\n *\r\n * Methods:\r\n * trapTabKey($obj, e) - prevents the user from exiting the $obj through tabbing\r\n ** accepts: jQuery object, javascript event (keyboard event)\r\n * setInitialFocus($obj) - finds the first focusable element within $obj and sets the focus to that element\r\n ** accepts: jQuery object\r\n * setLastFocus($el) - pushes $el into focusMap\r\n ** accepts: jQuery element\r\n * returnFocus - sets the focus to the last element in focusMap and pops that element off the stack\r\n * revealToAT($el) - sets the aria-hidden attribute of $el to false (revealing it to screen readers)\r\n ** accepts: jQuery element \r\n * hideFromAT($el) - sets the aria-hidden attribute of $el to true (hiding it from screen readers)\r\n ** accepts: jQuery element\r\n */\r\nDrupal.sAccessibility = Drupal.sAccessibility || {\r\n  \r\n  // http://accessibility.oit.ncsu.edu/blog/2013/09/13/the-incredible-accessible-modal-dialog/\r\n  focusableElementsString: \"a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), iframe, object, embed, *[tabindex], *[contenteditable]\",\r\n\r\n  focusMap: [],\r\n\r\n  trapTabKey: function($obj, e) {\r\n    // tab or shift + tab\r\n    if(e.which == 9) {\r\n\r\n      // all children of the popup object\r\n      var $o = $obj.find('*');\r\n\r\n      // only the focusable elements that are visible\r\n      var $focusable = $o.filter(this.focusableElementsString).filter(':visible').not('[tabindex=-1]');\r\n\r\n      // currently focused\r\n      var focusedItem = e.target;\r\n\r\n      // number of focusable items\r\n      var focusableNum = $focusable.length;\r\n\r\n      // currently focused item's index\r\n      var focusedItemIndex = $focusable.index(focusedItem);\r\n\r\n      if(e.shiftKey) { // back tab\r\n        if(focusedItemIndex == 0) { // first item in popup is the one with focus\r\n          $focusable.eq(focusableNum-1).trigger('focus');\r\n          e.preventDefault();\r\n        }\r\n      } else { // forward tab\r\n        if(focusedItemIndex == (focusableNum - 1)) { // last item in popup is the one with focus\r\n          $focusable.eq(0).trigger('focus');\r\n          e.preventDefault();\r\n        }\r\n      }\r\n    }\r\n  },\r\n\r\n  setInitialFocusPopup: function($obj) {\r\n    // get list of all children in the popup\r\n    var $o = $obj.find('*');\r\n\r\n    // set the focus to the first item\r\n    var focusItem = $o.filter(this.focusableElementsString).filter(':visible').first().trigger('focus');\r\n  },\r\n\r\n  setLastFocus: function($el) {\r\n    this.focusMap.push($el);\r\n  },\r\n\r\n  returnFocus: function() {\r\n    var $focusItem = this.focusMap[this.focusMap.length - 1];\r\n    if($focusItem){\r\n      if($focusItem.is(':visible')) {\r\n        setTimeout(function(){ // IE is having trouble returning focus to the element, but seems to work with setTimeout - this seems to be related to how the TinyMCE behaves in IE\r\n          $focusItem.trigger('focus');\r\n        },0);\r\n      } else {\r\n        // the item that launched the popup is no longer visible, so these cases have to be handled individually\r\n        if($focusItem.closest('.action-links').length) { // the item that launced the popup was an action link - return focus to the wrapper's tabbable item\r\n          setTimeout(function(){ // IE is having trouble returning focus to the element, but seems to work with setTimeout - this seems to be related to how the TinyMCE behaves in IE\r\n            $focusItem.closest('.action-links').prev('.action-links-unfold').trigger('focus');\r\n          },0);\r\n        }\r\n      }\r\n      this.focusMap.pop();\r\n    }\r\n  },\r\n\r\n  revealToAT: function($el) {\r\n    $el.attr('aria-hidden', 'false');\r\n  },\r\n\r\n  hideFromAT: function($el) {\r\n    $el.attr('aria-hidden', 'true');\r\n  }\r\n};\r\n\r\nfunction sStatsRecordEvent(event){\r\n  $.ajaxSecure({\r\n    url: '/stats/record_event',\r\n    data: {\r\n      event: event\r\n    }\r\n  });\r\n}\r\n\r\n//see http://pupunzi.open-lab.com/2013/01/16/jquery-1-9-is-out-and-browser-has-been-removed-a-fast-workaround/\r\nif(typeof jQuery.browser.msie == 'undefined'){\r\n  var nAgt = navigator.userAgent;\r\n  var nameOffset,verOffset,ix;\r\n  jQuery.browser.msie = false;\r\n\r\n  // In MSIE < 11, the true version is after \"MSIE\" in userAgent\r\n  if ( (verOffset=nAgt.indexOf(\"MSIE\"))!=-1) {\r\n    jQuery.browser.msie = true;\r\n    jQuery.browser.name = \"Microsoft Internet Explorer\";\r\n    jQuery.browser.fullVersion = nAgt.substring(verOffset+5);\r\n  }\r\n\r\n  // In TRIDENT (IE11) => 11, the true version is after \"rv:\" in userAgent\r\n  else if (nAgt.indexOf(\"Trident\")!=-1 ) {\r\n    jQuery.browser.msie = true;\r\n    jQuery.browser.name = \"Microsoft Internet Explorer\";\r\n    var start = nAgt.indexOf(\"rv:\")+3;\r\n    var end = start+4;\r\n    jQuery.browser.fullVersion = nAgt.substring(start,end);\r\n  }\r\n}\r\n\r\nfunction sIsset(q){\r\n  return q != null && typeof q != 'undefined';\r\n}\r\n\r\nfunction getHashParam(param){\r\n  var hash = window.location.hash;\r\n  if(hash) {\r\n    hash = hash.replace('#', '?');\r\n    var hashParams = getQueryParams(hash);\r\n    return hashParams[param];\r\n  }\r\n  return null;\r\n}\r\n\r\n// getHashParam for when has is like \"#/path/path?param=value\"\r\nfunction sGetHashPathParam(param){\r\n  var hash = window.location.hash;\r\n  if(hash) {\r\n    var idx = hash.indexOf('?');\r\n    var queryString = hash.slice(idx);\r\n    var hashParams = getQueryParams(queryString);\r\n    return hashParams[param];\r\n  }\r\n  return null;\r\n}\r\n\r\n// Converts characters to HTML entities, much like PHP's htmlentities\r\nfunction htmlentities(text){\r\n  return $('<div/>').text(text).html();\r\n}\r\n\r\n//search for the value val in array arr and remove it from array\r\nfunction searchAndRemove(arr, val){\r\n\tvar newArr = [];\r\n\tfor(key in arr){\r\n\t\tif(arr[key] != val){\r\n\t\t\tnewArr.push(val);\r\n\t\t}\r\n\t}\r\n\treturn newArr;\r\n}\r\n\r\n/*\r\n * Create a overlay over a element and set up a tooltip.\r\n * This is necessary when we want to put a tooltip message over\r\n * a disabled input.\r\n * (Disabled inputs do not process mouseover and mouseenter events)\r\n *\r\n * returns the newly created div\r\n */\r\nfunction sTooltipOverlay(el, msg, gravity){\r\n  gravity = gravity || 'n';\r\n  var $el = $(el);\r\n\r\n  //first remove a existing overlay if there is one already\r\n  var existingId = $el.data('overlay-id');\r\n  if(existingId){\r\n    $('#' + existingId).remove();\r\n  }\r\n\r\n  var $overlay = $(sOverlay(el));\r\n  $overlay\r\n    .css({opacity: 0})\r\n    .uniqueId()\r\n    .attr({title:msg})\r\n    .tipsy({gravity:gravity});\r\n\r\n  $el.data('overlay-id', $overlay.attr('id')); //save the id on the element so that we can remove it later\r\n  return $overlay.get(0);\r\n}\r\n\r\nfunction sTooltipOverlayRemove(el) {\r\n  var id = $(el).data('overlay-id');\r\n  if(id) {\r\n    $('#' + id).remove();\r\n  }\r\n  $(el).data('overlay-id','');\r\n}\r\n\r\n/*\r\n * Creates a div element that overlays the specified element\r\n * It will properly position and scroll even inside a relative/absoulute positioned container\r\n */\r\nfunction sOverlay(el) {\r\n  var $el = $(el);\r\n  var $offsetParent = $el.offsetParent();\r\n\r\n  var position = $el.position();\r\n  var scrollTop = $offsetParent.scrollTop();\r\n  var scrollLeft = $offsetParent.scrollLeft();\r\n\r\n  var $overlay = $(\"<div></div>\")\r\n    .css({\r\n      position: 'absolute',\r\n      top: position.top + scrollTop,\r\n      left: position.left + scrollLeft,\r\n      width: $el.outerWidth(),\r\n      height: $el.outerHeight()\r\n    })\r\n    .appendTo($offsetParent);\r\n  return $overlay.get(0);\r\n}\r\n\r\nfunction removeByKey(arr, key){\r\n\tvar newArr = [];\r\n\tfor(arrKey in arr){\r\n\t\tif(arrKey != key){\r\n\t\t\tnewArr.push(arr[arrKey]);\r\n\t\t}\r\n\t}\r\n\treturn newArr;\r\n}\r\n\r\nfunction sGetFirstKey(arr){\r\n\treturn Object.keys(arr)[0];\r\n}\r\n\r\nfunction ajaxWatchdog(msg){\r\n  $.post('/popups_error',\r\n    {\r\n      'error_type': 'error',\r\n      'msg':msg\r\n    });\r\n}\r\n\r\nfunction sCommonGetDefaultDomain(){\r\n\treturn typeof Drupal.settings.s_common.default_domain != 'undefined' ? Drupal.settings.s_common.default_domain : false;\r\n}\r\n";
},function(e,t,n){n(3)(n(64))},function(e,t){e.exports="// $Id: popups.js,v 1.9.8.12 2009/03/21 00:57:15 starbow Exp $\r\n\r\n/**\r\n * Popup Modal Dialog API\r\n *\r\n * Provide an API for building and displaying JavaScript, in-page, popups modal dialogs.\r\n * Modality is provided by a fixed, semi-opaque div, positioned in front of the page contents.\r\n *\r\n */\r\n\r\n/*\r\n * TODO\r\n * * Return key in add node form not working.\r\n * * Tabledrag breaking after ahah reload.\r\n */\r\n\r\n// ***************************************************************************\r\n// DRUPAL Namespace\r\n// ***************************************************************************\r\n\r\n/**\r\n * Attach the popups behavior to the all the requested links on the page.\r\n *\r\n * @param context\r\n *   The jQuery object to apply the behaviors to.\r\n */\r\n\r\nDrupal.behaviors.popups = function(context) {\r\n  Popups.saveSettings();\r\n\r\n  var $body = $('body');\r\n  if(!$body.hasClass('popups-processed')) {\r\n    $body.addClass('popups-processed');\r\n    $(document).bind('keydown', Popups.keyHandle);\r\n    var $popit = $('#popit');\r\n    if ($popit.length) {\r\n      $popit.remove();\r\n      Popups.message($popit.html());\r\n    }\r\n  }\r\n\r\n  // Add the popups-link-in-dialog behavior to links defined in Drupal.settings.popups.links array.\r\n  // Get these from current Drupal.settings, not Popups.originalSettings, as each page has its own hooks.\r\n  if (Drupal.settings.popups && Drupal.settings.popups.links) {\r\n    jQuery.each(Drupal.settings.popups.links, function (link, options) {\r\n      Popups.attach(context, link, Popups.options(options));\r\n    });\r\n  }\r\n\r\n  Popups.attach(context, '.popups', Popups.options({updateMethod: 'none'}));\r\n  Popups.attach(context, '.popups-form', Popups.options({updateMethod: 'ajax'})); // ajax reload.\r\n  Popups.attach(context, '.popups-form-reload', Popups.options({updateMethod: 'reload'})); // whole page reload.\r\n  Popups.attach(context, '.popups-form-noupdate', Popups.options({updateMethod: 'none'}));  // no reload at all.\r\n};\r\n\r\n// ***************************************************************************\r\n// Popups Namespace **********************************************************\r\n// ***************************************************************************\r\n/**\r\n * The Popups namespace contains:\r\n * * An ordered stack of Popup objects,\r\n * * The state of the original page,\r\n * * Functions for managing both of the above.\r\n */\r\nPopups = function(){};\r\n\r\n/**\r\n * Static variables in the Popups namespace.\r\n */\r\nPopups.popupStack = [];\r\nPopups.addedCSS = [];\r\nPopups.addedJS = [];\r\nPopups.originalSettings = null; // The initial popup options of the page.\r\nPopups.originalSettingsStack = []; // Handle preserving settings for popups within popups\r\nPopups.ajaxHeaders = { 'X-Drupal-Render-Mode':'json/popups' , 'Cache-Control':'no-store, no-cache, must-revalidate, post-check=0, pre-check=0' };\r\n\r\n/**\r\n * Each popup object gets it's own set of options.\r\n * These are the defaults.\r\n */\r\nPopups.defaultOptions = {\r\n  doneTest: null, // null, *path*, *regexp*. how do we know when a multiform flow is done?\r\n  updateMethod: 'ajax', // none, ajax, reload, *callback*\r\n  onUpdate: '', // Only used if updateMethod == callback.\r\n  updateSource: 'initial', // initial, final. Only used if updateMethod != none.\r\n  href: null,\r\n  width: null, // Override the width specified in the css.\r\n  targetSelectors: null, // Hash of jQuery selectors that define the content to be swapped out.\r\n  titleSelectors: null, // Array of jQuery selectors to place the new page title.\r\n  reloadOnError: false, // Force the entire page to reload if the popup href is unaccessable.\r\n  noMessage: false, // Don't show drupal_set_message messages.\r\n  forceShowNextActivePopup: false, //in the event of multiple popups in the stack, even if there is no message, force the popup to show the next active popup after closing instead of closing the entire popup stack\r\n  skipDirtyCheck: false, // If true, this popup will not check for edits on the originating page.\r\n  hijackDestination: true, // Use the destination param to force a form submit to return to the originating page.\r\n  extraClass: '',\r\n  ajaxForm: true,\r\n  disableCursorMod: false,\r\n  disableAttachBehaviors: false,\r\n  formOnSubmit: null,\r\n  disableInputFocus: false,\r\n  fullScreen: false,\r\n  hideActive: true,\r\n  disableRedirectLogging: false, // Sometimes when a form is submitted and a destination param triggers a reload, we don't want the server to perform certain logging actions.  Have Poups add a GET param.\r\n  angularScope : null, //Schoology addition so we can link the Angular controller that opened the popup to the popup\r\n  angularElement : null //Schoology addition so we can link the Angular DOM element that launched the popup to events that happen around popups\r\n};\r\n\r\n// ***************************************************************************\r\n// Popups.Popup Object *******************************************************\r\n// ***************************************************************************\r\n/**\r\n * A Popup is a single modal dialog.\r\n * The popup object encapslated all the info about a single popup.\r\n */\r\nPopups.Popup = function() {\r\n  this.id = 'popups-' + Popups.nextCounter();\r\n\r\n  // These properties are needed if the popup contains a form that will be ajax submitted.\r\n  this.parent = null; // The popup that spawned this one. If parent is null, this popup was spawned by the original page.\r\n  this.path = null; // If popup is showing content from a url, this is that path.\r\n  this.element = null; // The DOM element that was clicked to launch this popup.\r\n  this.options = null; // An option array that control how the popup behaves.  See Popups.defaultOptions for explainations.\r\n};\r\nPopups.Popup.prototype.$popup = function() {\r\n  return $('#' + this.id);\r\n};\r\nPopups.Popup.prototype.$popupBody = function() {\r\n  return $('#' + this.id + ' .popups-body');\r\n};\r\nPopups.Popup.prototype.$popupClose = function() {\r\n  return $('#' + this.id + ' .popups-close');\r\n};\r\nPopups.Popup.prototype.$popupTitle = function() {\r\n  return $('#' + this.id + ' .popups-title');\r\n};\r\nPopups.Popup.prototype.$popupButtons = function() {\r\n  return $('#' + this.id + ' .popups-buttons');\r\n};\r\nPopups.Popup.prototype.$popupFooter = function() {\r\n  return $('#' + this.id + ' .popups-footer');\r\n};\r\n\r\n/**\r\n * Create the jQuery wrapped html at the heart of the popup object.\r\n *\r\n * @param title\r\n *   String\r\n * @param body\r\n *   String/HTML\r\n * @param buttons\r\n *   Hash/Object\r\n * @return\r\n *   The $popup.\r\n */\r\nPopups.Popup.prototype.fill = function(title, body, buttons) {\r\n  return $(Drupal.theme('popupDialog', this.id, title, body, buttons));\r\n}\r\n\r\n/**\r\n * Hide the popup by pushing it off to the side.\r\n * Just making it display:none causes flash in FF2.\r\n */\r\nPopups.Popup.prototype.hide = function() {\r\n  this.$popup().css('left', '-9999px');\r\n};\r\n\r\nPopups.Popup.prototype.show = function() {\r\n  Popups.resizeAndCenter(this);\r\n};\r\n\r\nPopups.Popup.prototype.open = function(title, body, buttons, width){\r\n  return Popups.open(this, title, body, buttons, width);\r\n};\r\n\r\nPopups.Popup.prototype.removePopup = function() {\r\n  Popups.removePopup(this);\r\n};\r\n\r\n/**\r\n * Remove everything.\r\n */\r\nPopups.Popup.prototype.close = function() {\r\n  return Popups.close(this);\r\n};\r\n\r\n/**\r\n * Set the focus on the popups to the first visible, enabled form element, or the close link.\r\n */\r\nPopups.Popup.prototype.refocus = function() {\r\n  var $popup = this.$popup(),\r\n      $focus;\r\n\r\n  if(this.disableInputFocus) {\r\n    $focus = $popup.find('.popups-close a');\r\n  } else {\r\n    // Select the first visible enabled input element.\r\n    $focus = $popup.find(':input:visible:enabled:first:not(.popups-no-focus, .s-tinymce-load-editor)'); // remove tinymce from receiving focus because once it's hidden, focus will be lost\r\n    if (!$focus.length) {\r\n      // There is no visible enabled input element, so select the close link.\r\n      $focus = $popup.find('.popups-close a');\r\n    }\r\n  }\r\n  $focus.focus();\r\n};\r\n\r\nPopups.Popup.prototype.trapTabKey = function() {\r\n  var $popup = this.$popup();\r\n\r\n  $popup.bind('keydown', function(e) {\r\n    if(e.which === 9) {\r\n      Drupal.sAccessibility.trapTabKey($popup, e);\r\n    }\r\n  });\r\n}\r\n\r\n/**\r\n * Return a selector that will find target content on the layer that spawned this popup.\r\n * This is needed for the popup to do ajax updates.\r\n */\r\nPopups.Popup.prototype.targetLayerSelector = function() {\r\n  if (this.parent === null) {\r\n    return 'body'; // Select content in the original page.\r\n  }\r\n  else {\r\n    return '#' + this.parent.id; // Select content in the parent popup.\r\n  }\r\n};\r\n\r\n/**\r\n * Determine if we are at an end point of a form flow, or just moving from one popups to another.\r\n *\r\n * @param path\r\n *   The path of the page that the form flow has moved to.\r\n *   This path is relative to the base_path.\r\n *   Ex: node/add/story, not http://localhost/drupal6/node/add/story or drupa6/node/add/story.\r\n * @return bool\r\n */\r\nPopups.Popup.prototype.isDone = function(path) {\r\n  var done;\r\n  if (this.options.doneTest) {\r\n    // Test if we are at the path specified by doneTest.\r\n    done = (path === this.options.doneTest || path.match(this.options.doneTest));\r\n  }\r\n  else {\r\n    if (this.parent) {\r\n       // Test if we are back to the parent popup's path.\r\n      done = (path === this.parent.path);\r\n    }\r\n    else {\r\n       // Test if we are back to the original page's path.\r\n      // normalize single key flags (get rid of equal sign in ?theme_debug=\r\n      path = path.replace(/=(&)|=$/, '$1');\r\n      Popups.originalSettings.popups.originalPath = Popups.originalSettings.popups.originalPath.replace(/=(&)|=$/, '$1');\r\n      done = (path === Popups.originalSettings.popups.originalPath);\r\n      if(!done && Popups.isset(Popups.originalSettings.popups.addlOriginalPath)){\r\n        Popups.originalSettings.popups.addlOriginalPath.replace(/=(&)|=$/, '$1');\r\n        done = (path === Popups.originalSettings.popups.addlOriginalPath);\r\n      }\r\n    }\r\n  };\r\n  return done;\r\n};\r\n\r\n\r\n// ***************************************************************************\r\n// Popups Functions **********************************************************\r\n// ***************************************************************************\r\n\r\n/**\r\n * Test if the param has been set.\r\n * Used to distinguish between a value set to null or false and on not yet unset.\r\n */\r\nPopups.isset = function(v) {\r\n  return (typeof(v) !== 'undefined');\r\n};\r\n\r\n/**\r\n * Get the currently active popup in the page.\r\n * Currently it is the only one visible, but that could change.\r\n */\r\nPopups.activePopup = function() {\r\n  if (Popups.popupStack.length) {\r\n    return Popups.popupStack[Popups.popupStack.length - 1]; // top of stack.\r\n  }\r\n  else {\r\n    return null;\r\n  }\r\n};\r\n\r\n/**\r\n * Manage the page wide popupStack.\r\n */\r\nPopups.push = function(popup) {\r\n  Popups.popupStack.push(popup);\r\n};\r\n// Should I integrate this with popupRemove??\r\nPopups.pop = function(popup) {\r\n  return Popups.popupStack.pop();\r\n};\r\n\r\n/**\r\n * Build an options hash from defaults.\r\n *\r\n * @param overrides\r\n *   Hash of values to override the defaults.\r\n */\r\nPopups.options = function(overrides) {\r\n  var defaults = Popups.defaultOptions;\r\n  return Popups.overrideOptions(defaults, overrides);\r\n}\r\n\r\n/**\r\n * Build an options hash.\r\n * Also maps deprecated options to current options.\r\n *\r\n * @param defaults\r\n *   Hash of default values\r\n * @param overrides\r\n *   Hash of values to override the defaults with.\r\n */\r\nPopups.overrideOptions = function(defaults, overrides) {\r\n  var options = {};\r\n  for(var option in defaults) {\r\n    var value;\r\n    if (Popups.isset(overrides[option])) {\r\n      options[option] = overrides[option];\r\n    }\r\n    else {\r\n      options[option] = defaults[option];\r\n    }\r\n  }\r\n  // Map deprecated options.\r\n  if (overrides['noReload'] || overrides['noUpdate']) {\r\n    options['updateMethod'] = 'none';\r\n  }\r\n  if (overrides['reloadWhenDone']) {\r\n    options['updateMethod'] = 'reload';\r\n  }\r\n  if (overrides['afterSubmit']) {\r\n    options['updateMethod'] = 'callback';\r\n    options['onUpdate'] = overrides['afterSubmit'];\r\n  }\r\n  if (overrides['forceReturn']) {\r\n    options['doneTest'] = overrides['forceReturn'];\r\n  }\r\n  return options;\r\n}\r\n\r\n/**\r\n * Attach the popups behavior to all elements inside the context that match the selector.\r\n *\r\n * @param context\r\n *   Chunk of html to search.\r\n * @param selector\r\n *   jQuery selector for elements to attach popups behavior to.\r\n * @param options\r\n *   Hash of options associated with these links.\r\n */\r\nPopups.attach = function(context, selector, options) {\r\n  $(selector, context).not('.popups-processed').each(function() {\r\n    var $element = $(this);\r\n\r\n    // Mark the element as processed.\r\n    $element.addClass('popups-processed');\r\n\r\n    // Append note to link title.\r\n    var title = '';\r\n    if ($element.attr('title')) {\r\n      title = $element.attr('title') + ' ';\r\n    }\r\n    //title += Drupal.t('[Popup]');\r\n    $element.attr('title', title);\r\n\r\n    // Attach the on-click popup behavior to the element.\r\n    $element.click(function(event){\r\n      return Popups.clickPopupElement(this, options);\r\n    });\r\n  });\r\n};\r\n\r\n/**\r\n * Respond to click by opening a popup.\r\n *\r\n * @param element\r\n *   The element that was clicked.\r\n * @param options\r\n *   Hash of options associated with the element.\r\n */\r\nPopups.clickPopupElement = function(element, options) {\r\n  Popups.saveSettings();\r\n\r\n  // If the element contains a on-popups-options attribute, override default options param.\r\n  if ($(element).attr('on-popups-options')) {\r\n    var overrides = $.parseJSON($(element).attr('on-popups-options'));\r\n    options = Popups.overrideOptions(options, overrides);\r\n  }\r\n\r\n  // The parent of the new popup is the currently active popup.\r\n  var parent = Popups.activePopup();\r\n\r\n  // If the option is distructive, check if the page is already modified, and offer to save.\r\n  var willModifyOriginal = !(options.updateMethod === 'none' || options.skipDirtyCheck);\r\n  if (willModifyOriginal && Popups.activeLayerIsEdited()) {\r\n    // The user will lose modifications, so show dialog offering to save current state.\r\n    Popups.offerToSave(element, options, parent);\r\n  }\r\n  else {\r\n    // Page is clean, or popup is safe, so just open it.\r\n    Popups.openPath(element, options, parent);\r\n  }\r\n  return false;\r\n};\r\n\r\n/**\r\n * Test if the active layer been edited.\r\n * Active layer is either the original page, or the active Popup.\r\n */\r\nPopups.activeLayerIsEdited = function() {\r\n  var layer = Popups.activePopup();\r\n  var $context = Popups.getLayerContext(layer);\r\n  // TODO: better test for edited page, maybe capture change event on :inputs.\r\n  var edited = $context.find('span.tabledrag-changed').length;\r\n  return edited;\r\n}\r\n\r\n/**\r\n * Show dialog offering to save form on parent layer.\r\n *\r\n * @param element\r\n *   The DOM element that was clicked.\r\n * @param options\r\n *   The options associated with that element.\r\n * @param parent\r\n *   The layer that has the unsaved edits.  Null means the underlying page.\r\n */\r\nPopups.offerToSave = function(element, options, parent) {\r\n  var popup = new Popups.Popup();\r\n  var body = Drupal.t(\"There are unsaved changes in the form, which you will lose if you continue.\");\r\n  var buttons = {\r\n   'popup_save': {title: Drupal.t('Save Changes'), func: function(){Popups.saveFormOnLayer(element, options, parent);}},\r\n   'popup_submit': {title: Drupal.t('Continue'), func: function(){popup.removePopup(); Popups.openPath(element, options, parent);}},\r\n   'popup_cancel': {title: Drupal.t('Cancel'), func: function(){popup.close();}}\r\n  };\r\n  popup.open(Drupal.t('Warning: Please Confirm'), body, buttons);\r\n};\r\n\r\n/**\r\n * Generic dialog builder.\r\n * Adds the newly built popup into the DOM.\r\n *\r\n * TODO: capture the focus if it tabs out of the dialog.\r\n *\r\n * @param popup\r\n *   Popups.Popup object to fill with content, place in the DOM, and show on the screen.\r\n * @param String title\r\n *   String: title of new dialog.\r\n * @param body (optional)\r\n *   String: body of new dialog.\r\n * @param buttons (optional)\r\n *   Hash of button parameters.\r\n * @param width (optional)\r\n *   Width of new dialog.\r\n *\r\n * @return popup object\r\n */\r\nPopups.open = function(popup, title, body, buttons, width, options){\r\n  Popups.addOverlay();\r\n  //Schoology addition : if you call this on the client side, the popup does not come with options\r\n  if(popup){\r\n    if(!popup.options){\r\n      if(!options){\r\n        options = {};\r\n      }\r\n      var popupOptions = Popups.options(options);\r\n      popup.options = popupOptions;\r\n    }\r\n  }\r\n  if (Popups.activePopup()) {\r\n    if(popup.options.hideActive){\r\n      Popups.activePopup().hide();\r\n    }\r\n  }\r\n\r\n  if (!popup) {\r\n    // Popup object was not handed in, so create a new one.\r\n    popup = new Popups.Popup();\r\n  }\r\n  Popups.push(popup); // Put this popup at the top of the stack.\r\n\r\n  // Create the jQuery wrapped html for the new popup.\r\n  var $popup = popup.fill(title, body, buttons);\r\n  popup.hide(); // Hide the new popup until it is finished and sized.\r\n\r\n  if (width) {\r\n    $popup.css('width', width);\r\n  }\r\n\r\n  // Schoology addition\r\n  if(popup.extraClass instanceof Array)\r\n    popup.extraClass = popup.extraClass[popup.extraClass.length-1];\r\n  $popup.addClass(popup.extraClass);\r\n\r\n  // Add the new popup to the DOM.\r\n  $('body').append($popup);\r\n\r\n  // Add button function callbacks.\r\n  if (buttons) {\r\n    jQuery.each(buttons, function(id, button){\r\n      $('#' + id).click(button.func);\r\n    });\r\n  }\r\n\r\n  // Add the default click-to-close behavior.\r\n  popup.$popupClose().click(function(){\r\n    return Popups.close(popup);\r\n  });\r\n\r\n  Popups.resizeAndCenter(popup);\r\n\r\n  // Focus on the first input element in the popup window.\r\n  popup.refocus();\r\n\r\n  // TODO - this isn't the place for this - should mirror addLoading calls.\r\n  // Remove the loading image.\r\n  Popups.removeLoading();\r\n\r\n  $(document).trigger('popups_open_done', [popup]);\r\n\r\n  // Not all popups that are created through JS have an element attribute (protip: they should)\r\n  // set the attribute so no JS errors are thrown\r\n  popup.element = popup.element != null ? popup.element : $('body')[0];\r\n\r\n  // Remember the element that opened the popup\r\n  Drupal.sAccessibility.setLastFocus($(popup.element));\r\n\r\n  // Hide the body from assistive technologies\r\n  Drupal.sAccessibility.hideFromAT($('#body'));\r\n\r\n  // Trap tab key to within the popup\r\n  popup.trapTabKey();\r\n\r\n  return popup;\r\n};\r\n\r\n/**\r\n * Adjust the popup's height to fit its content.\r\n * Move it to be centered on the screen.\r\n * This undoes the effects of popup.hide().\r\n *\r\n * @param popup\r\n */\r\nPopups.resizeAndCenter = function(popup) {\r\n  var $popup = popup.$popup();\r\n\r\n  if(popup && popup.fullScreen){\r\n    $popup.css({\r\n      width: '100%',\r\n      height: '100%',\r\n      top: 0,\r\n      left: 0\r\n    });\r\n    $('html').css('overflow', 'hidden');\r\n    return;\r\n  }\r\n  // center on the screen, adding in offsets if the window has been scrolled\r\n  var popupWidth = $popup.width();\r\n  var windowWidth = Popups.windowWidth();\r\n\r\n  // updated to use integer width: a floating point width can cause inconsistencies between browsers on determining the offsets of child elements\r\n  var left = Math.floor((windowWidth / 2) - (popupWidth / 2) + Popups.scrollLeft());\r\n\r\n  // Get popups's height on the page.\r\n  $popup.css('height', 'auto'); // Reset height.\r\n  var popupHeight = $popup.height();\r\n  $popup.height(popupHeight);\r\n  var windowHeight = Popups.windowHeight();\r\n\r\n//  if (popupHeight > (0.9 * windowHeight) ) { // Must fit in 90% of window.\r\n//    popupHeight = 0.9 * windowHeight;\r\n//    $popup.height(popupHeight);\r\n//  }\r\n  var top = ((windowHeight / 2) - (popupHeight / 2))/2 + Popups.scrollTop();\r\n\r\n  $popup.css('top', top).css('left', left); // Position the popups to be visible.\r\n};\r\n\r\n\r\n/**\r\n *  Create and show a simple popup dialog that functions like the browser's alert box.\r\n */\r\nPopups.message = function(title, message) {\r\n  message = message || '';\r\n  var popup = new Popups.Popup();\r\n  var buttons = {\r\n    'popup_ok': {title: Drupal.t('OK'), func: function(){popup.close();}}\r\n  };\r\n  popup.open(title, message, buttons);\r\n  return popup;\r\n};\r\n\r\n/**\r\n * Handle any special keys when popups is active.\r\n */\r\nPopups.keyHandle = function(e) {\r\n  if (!e) {\r\n    e = window.event;\r\n  }\r\n  switch (e.keyCode) {\r\n    case 27: // esc\r\n      Popups.close();\r\n      break;\r\n    case 191: // '?' key, show help.\r\n      if (e.shiftKey && e.ctrlKey) {\r\n        var $help = $('a.popups.more-help');\r\n        if ($help.size()) {\r\n          $help.click();\r\n        }\r\n        else {\r\n          Popups.message(Drupal.t(\"Sorry, there is no additional help for this page\"));\r\n        }\r\n      }\r\n      break;\r\n  }\r\n};\r\n\r\n/*****************************************************************************\r\n * Appearence Functions (overlay, loading graphic, remove popups)     *********\r\n *****************************************************************************/\r\n\r\n/**\r\n * Add full page div between the page and the dialog, to make the popup modal.\r\n */\r\nPopups.addOverlay = function() {\r\n  var $overlay = $('#popups-overlay');\r\n  if (!$overlay.length) { // Overlay does not already exist, so create it.\r\n    $overlay = $(Drupal.theme('popupOverlay'));\r\n    $overlay.css('opacity', '0.4'); // for ie6(?)\r\n    // Doing absolute positioning, so make overlay's size equal the entire body.\r\n    var $doc = $(document);\r\n    $overlay.width($doc.width()).height($doc.height());\r\n    // If the theme is a fixed width theme, IE 6 and 7 will set the overlay to\r\n    // be left aligned with the container div.\r\n    if ($.browser.msie && ($.browser.version == '6.0' || $.browser.version == '7.0')) {\r\n      $overlay.css('left', 0);\r\n    }\r\n\r\n    $('body').prepend($overlay);\r\n  }\r\n};\r\n\r\n/**\r\n * Remove overlay if popupStack is empty.\r\n */\r\nPopups.removeOverlay = function() {\r\n  if (!Popups.popupStack.length) {\r\n    $('#popups-overlay').remove();\r\n  }\r\n};\r\n\r\n/**\r\n * Add a \"Loading\" message while we are waiting for the ajax response.\r\n */\r\nPopups.addLoading = function() {\r\n  var $loading = $('#popups-loading');\r\n  if (!$loading.length) { // Loading image does not already exist, so create it.\r\n    $loading = $(Drupal.theme('popupLoading'));\r\n    $('body').prepend($loading); // Loading div is initially display:none.\r\n    var width = $loading.width();\r\n    var height = $loading.height();\r\n    var left = (Popups.windowWidth() / 2) - (width / 2) + Popups.scrollLeft();\r\n    var top = ((Popups.windowHeight() / 2) - (height / 2))/2 + Popups.scrollTop();\r\n\r\n    $loading.css({'top': top, 'left': left, 'display': 'block'}); // Center it and make it visible.\r\n  }\r\n};\r\n\r\nPopups.removeLoading = function() {\r\n  $('#popups-loading').remove();\r\n};\r\n\r\n// Should I fold this function into Popups.pop?\r\nPopups.removePopup = function(popup) {\r\n  if (!Popups.isset(popup)) {\r\n    popup = Popups.activePopup();\r\n  }\r\n  if (popup) {\r\n    $(document).trigger('popups_before_remove', [popup]);\r\n    popup.$popup().detach();\r\n    Popups.popupStack.splice(jQuery.inArray(popup,Popups.popupStack), 1); // Remove popup from stack.  Probably should rework into .pop()\r\n  }\r\n};\r\n\r\n/**\r\n * Remove everything.\r\n */\r\nPopups.close = function(popup) {\r\n  if (!Popups.isset(popup)) {\r\n    popup = Popups.activePopup();\r\n  }\r\n\r\n\r\n  $(document).trigger('popups_before_close', [popup]);\r\n  var nextActivePopup = false;\r\n\r\n  Popups.removePopup(popup);  // Should this be a pop??\r\n  Popups.removeLoading();\r\n  if (Popups.activePopup()) {\r\n    nextActivePopup = Popups.activePopup();\r\n    nextActivePopup.show();\r\n    nextActivePopup.refocus();\r\n    Drupal.settings = Popups.originalSettingsStack[nextActivePopup.id];\r\n  }\r\n  else {\r\n    Popups.removeOverlay();\r\n    Popups.restorePage();\r\n\r\n    if(popup && popup.fullScreen){\r\n      $('html').css('overflow', 'auto');\r\n    }\r\n  }\r\n\r\n  $(document).trigger('popups_close', [popup,nextActivePopup]);\r\n\r\n  // if there aren't any other opened popups, reveal the main content to screen readers\r\n  if(Popups.activePopup() == null) {\r\n    Drupal.sAccessibility.revealToAT($('#body'));\r\n  }\r\n\r\n  // Return focus to the element that opened the popup\r\n  Drupal.sAccessibility.returnFocus();\r\n\r\n  return false;\r\n};\r\n\r\n/**\r\n * Save the page's original Drupal.settings.\r\n */\r\nPopups.saveSettings = function() {\r\n  if (!Popups.originalSettings) {\r\n    Popups.originalSettings = Drupal.settings;\r\n  }\r\n\r\n  // handle restoring settings for popups within popups\r\n  var popup = Popups.activePopup();\r\n  if(popup && typeof Popups.originalSettingsStack[popup.id] == 'undefined'){\r\n    Popups.originalSettingsStack[popup.id] = Drupal.settings;\r\n  }\r\n};\r\n\r\n/**\r\n * Restore the page's original Drupal.settings.\r\n */\r\nPopups.restoreSettings = function() {\r\n  Drupal.settings = Popups.originalSettings;\r\n};\r\n\r\n/**\r\n * Remove as much of the effects of jit loading as possible.\r\n */\r\nPopups.restorePage = function() {\r\n  Popups.restoreSettings();\r\n  // Remove the CSS files that were jit loaded for popup.\r\n  for (var i in Popups.addedCSS) {\r\n    var link = Popups.addedCSS[i];\r\n    $('style[popups_src=\"'+ jqSelector($(link).attr('href')) + '\"]').remove();\r\n  }\r\n  Popups.addedCSS = [];\r\n};\r\n\r\n\r\n/****************************************************************************\r\n * Utility Functions   ******************************************************\r\n ****************************************************************************/\r\n\r\n/**\r\n * Get the position of the left side of the browser window.\r\n */\r\nPopups.scrollLeft = function() {\r\n  return Math.max(document.documentElement.scrollLeft, document.body.scrollLeft);\r\n};\r\n\r\n/**\r\n * Get the position of the top of the browser window.\r\n */\r\nPopups.scrollTop = function() {\r\n  return Math.max(document.documentElement.scrollTop, document.body.scrollTop);\r\n};\r\n\r\n/**\r\n * Get the height of the browser window.\r\n * Fixes jQuery & Opera bug - http://drupal.org/node/366093\r\n */\r\nPopups.windowHeight = function() {\r\n  if ($.browser.opera && $.browser.version > \"9.5\" && $.fn.jquery <= \"1.2.6\") {\r\n    return document.documentElement.clientHeight;\r\n  }\r\n  return $(window).height();\r\n};\r\n\r\n/**\r\n * Get the height of the browser window.\r\n * Fixes jQuery & Opera bug - http://drupal.org/node/366093\r\n */\r\nPopups.windowWidth = function() {\r\n  if ($.browser.opera && $.browser.version > \"9.5\" && $.fn.jquery <= \"1.2.6\") {\r\n    return document.documentElement.clientWidth;\r\n  }\r\n  return $(window).width();\r\n};\r\n\r\nPopups.nextCounter = function() {\r\n  if (this.counter === undefined) {\r\n    this.counter = 0;\r\n  }\r\n  else {\r\n    this.counter++;\r\n  }\r\n  return this.counter;\r\n};\r\n\r\n/****************************************************************************\r\n * Ajax Functions   ******************************************************\r\n ****************************************************************************/\r\n\r\n/**\r\n * Add additional CSS to the page.\r\n */\r\nPopups.addCSS = function(css) {\r\n  Popups.addedCSS = [];\r\n\r\n  if(Drupal.settings.aggregated_css)\r\n    var aggregatedCSS = Drupal.settings.aggregated_css;\r\n  else\r\n    var aggregatedCSS = [];\r\n\r\n  for (var type in css) {\r\n    for (var file in css[type]) {\r\n      var link = css[type][file];\r\n      // Does the page already contain this stylesheet?\r\n      var src = $(link).attr('href');\r\n      var srcOrig = $(link).attr('href_orig');\r\n      var head = $('head');\r\n      var preloadedCSS = jQuery.inArray(srcOrig, aggregatedCSS) != -1;\r\n      if (!$('link[href=\"'+ jqSelector(srcOrig) + '\"]').length && !preloadedCSS) {\r\n        // Get the css from the server and add it.\r\n        $.ajax({\r\n          type: 'GET',\r\n          url: src,\r\n          async : false,\r\n          success: function(css) {\r\n            head.append('<style popups_src=\"' + src + '\">' + css + '</style>');\r\n          }\r\n        });\r\n        Popups.addedCSS.push(link); // Keep a list, so we can remove them later.\r\n      }\r\n    }\r\n  }\r\n};\r\n\r\n/**\r\n * Add additional Javascript to the page.\r\n *\r\n * SGY-6382 - Fixed issue with browser running eval in the local scope\r\n * so defining global variables will not be actually defined in the global scope\r\n */\r\nPopups.addJS = function(js) {\r\n  // Parse the json info about the new context.\r\n  var scripts = [];\r\n  var inlines = [];\r\n  for (var type in js) {\r\n    if (type != 'setting') {\r\n      for (var file in js[type]) {\r\n        if (type == 'inline') {\r\n          inlines.push($(js[type][file]).html());\r\n        }\r\n        else {\r\n          var script = $(js[type][file]).attr('src');\r\n          var src_orig = $(js[type][file]).attr('src_orig');\r\n          scripts.push([script, src_orig]);\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  // Add new JS settings to the page, needed for #ahah properties to work.\r\n\r\n  var aggregatedCSS = Drupal.settings.aggregated_css;\r\n\r\n  var aggregatedJS = []\r\n  if(Drupal.settings.aggregated_js){\r\n    jQuery.each(Drupal.settings.aggregated_js, function(k,v){\r\n      // remove the cache-managing query string\r\n      aggregatedJS.push(v.split('?')[0]);\r\n    });\r\n  }\r\n\r\n  Drupal.settings = js.setting;\r\n  Drupal.settings.aggregated_js = aggregatedJS;\r\n  Drupal.settings.aggregated_css = aggregatedCSS;\r\n\r\n  for (var i in scripts) {\r\n    var script = scripts[i];\r\n    var src = script[0];\r\n    var srcOrig = script[1];\r\n    // remove the cache-managing query string\r\n    var checkSrc = srcOrig.split('?')[0];\r\n    var preloadedJS = jQuery.inArray(checkSrc, aggregatedJS) != -1;\r\n    if (!$('script[src=\"'+ jqSelector(srcOrig) + '\"]').length && !preloadedJS && !Popups.addedJS[srcOrig]) {\r\n      // Get the script from the server and execute it.\r\n      $.ajax({\r\n        type: 'GET',\r\n        url: src,\r\n        async : false,\r\n        success: function(script) {\r\n          eval.apply(window, [script]);\r\n        }\r\n      });\r\n      // Mark the js as added to the underlying page.\r\n      Popups.addedJS[srcOrig] = true;\r\n    }\r\n  }\r\n\r\n  return inlines;\r\n};\r\n\r\n/**\r\n * Determines if the passed `content` matches an inline script\r\n * @param {String} content\r\n * @return {Boolean}\r\n */\r\nPopups._inlineScriptExists = function(content) {\r\n  return !!($('script:not([src])')\r\n    .filter(function (i, script) {\r\n      return script.innerHTML === content;\r\n    })\r\n    .length);\r\n};\r\n\r\n/**\r\n * Execute the jit loaded inline scripts.\r\n * Q: Do we want to re-excute the ones already in the page?\r\n *\r\n * @param inlines\r\n *   Array of inline scripts.\r\n */\r\nPopups.addInlineJS = function(inlines) {\r\n  // Load the inlines into the page.\r\n  for (var n in inlines) {\r\n    // If the script is not already in the page, execute it.\r\n    if (!Popups._inlineScriptExists(inlines[n])) {\r\n      eval(inlines[n]);\r\n    }\r\n  }\r\n};\r\n\r\nPopups.beforeSend = function(xhr) {\r\n  // After JQuery 1.5, it's more reliable to use the headers property of the ajax options\r\n  // to set additional headers. This function is left in but disabled for clarity.\r\n  //xhr.setRequestHeader(\"X-Drupal-Render-Mode\", 'json/popups');\r\n  //xhr.setRequestHeader(\"Cache-Control\", 'no-store, no-cache, must-revalidate, post-check=0, pre-check=0');\r\n};\r\n\r\n/**\r\n * Do before the form in the popups is submitted.\r\n */\r\nPopups.beforeSubmit = function(formData, $form, options) {\r\n  $(document).trigger('popups_before_submit', [formData,$form,options] );\r\n  Popups.removePopup(); // Remove just the dialog, but not the overlay.\r\n  Popups.addLoading();\r\n};\r\n\r\nPopups.beforeSerialize = function($form , options ) {\r\n  $(document).trigger('popups_before_serialize', [$form] );\r\n\r\n  // Set a flag in the POST data idenfitying this request as having been generated from a popup\r\n  // Note: This is a workaround for an IE bug that prevents custom headers from being set properly when you are sending a POST request\r\n  $form.append('<input type=\"hidden\" name=\"form_origin_popups\" id=\"form_origin_popups\" value=\"1\" />');\r\n};\r\n\r\n\r\n\r\n/****************************************************************************\r\n * Page & Form in popups functions                                         ***\r\n ****************************************************************************/\r\n\r\n/**\r\n * Use Ajax to open a link in a popups window.\r\n *\r\n * @param element\r\n *   Element that was clicked to open the popups.\r\n * @param options\r\n *   Hash of options controlling how the popups interacts with the underlying page.\r\n * @param parent\r\n *   If path is being opened from inside another popup, that popup is the parent.\r\n */\r\nPopups.openPath = function(element, options, parent) {\r\n  Popups.saveSettings();\r\n\r\n  // Let the user know something is happening.\r\n  if(!options.disableCursorMod)\r\n    $('body').css(\"cursor\", \"wait\");\r\n\r\n  // TODO - get nonmodal working.\r\n  if (!options.nonModal) {\r\n    Popups.addOverlay();\r\n  }\r\n  Popups.addLoading();\r\n\r\n  var href = options.href ? options.href : element.href;\r\n  $(document).trigger('popups_open_path', [element, href]); // Broadcast Popup Open Path event.\r\n\r\n  var params = {};\r\n  // Force the popups to return back to the orignal page when forms are done, unless hijackDestination option is set to FALSE.\r\n  if (options.hijackDestination) {\r\n    var returnPath;\r\n    if (parent) {\r\n      returnPath = parent.path;\r\n    }\r\n    else { // No parent, so bring flow back to original page.\r\n      returnPath = Popups.originalSettings.popups.originalPath;\r\n    }\r\n    href = href.replace(/destination=[^;&]*[;&]?/, ''); // Strip out any existing destination param.\r\n\r\n    params.destination = returnPath; // Set the destination to return to the parent's path.\r\n\r\n    // Sometimes when there is a reload we do not want some of our server side logging happening.  Tack on a query parameter if this option is set\r\n    if(options.disableRedirectLogging && params.destination.indexOf('pdrl=1') == -1){\r\n      params.destination = params.destination + ($.inArray('?', params.destination) == -1 ? '?' : '&') + 'pdrl=1';\r\n      // Change the parent path so donetest works\r\n      if(parent){\r\n        parent.path = params.destination;\r\n      }\r\n      else{\r\n        Popups.originalSettings.popups.originalPath = params.destination;\r\n      }\r\n    }\r\n  }\r\n\r\n  var ajaxOptions = {\r\n    url: href,\r\n    dataType: 'text',\r\n    data: params,\r\n    headers: Popups.ajaxHeaders,\r\n    beforeSend: Popups.beforeSend,\r\n    success: function( data , status , xhr ) {\r\n      var json = $.parseJSON( data );\r\n      // Add additional CSS to the page.\r\n      Popups.addCSS(json.css);\r\n      var inlines = Popups.addJS(json.js);\r\n      var path = json.path + (json.path_query ? '?' + json.path_query : '');\r\n      // normalize single key flags (get rid of equal sign in ?theme_debug=\r\n      path = path.replace(/=(&)|=$/, '$1');\r\n      var popup = Popups.openPathContent(path, json.title, json.messages + json.content, element, options, parent);\r\n      Popups.addInlineJS(inlines);\r\n      // Broadcast an event that the path was opened.\r\n      $(document).trigger('popups_open_path_done', [element, href, popup]);\r\n    },\r\n    complete: function() {\r\n      $('body').css(\"cursor\", \"auto\"); // Return the cursor to normal state.\r\n    }\r\n  };\r\n\r\n  var ajaxOptions;\r\n  if (options.reloadOnError) {\r\n    ajaxOptions.error = function() {\r\n      location.reload(); // Reload on error. Is this working?\r\n    };\r\n  }\r\n  else {\r\n    ajaxOptions.error = function(jqXHR, textStatus, errorThrown) {\r\n      Popups.errorMessage(jqXHR, textStatus, errorThrown, this.url);\r\n    };\r\n  }\r\n  $.ajax(ajaxOptions);\r\n\r\n  return false;\r\n};\r\n\r\n/**\r\n * Open path's content in an ajax popups.\r\n *\r\n * @param title\r\n *   String title of the popups.\r\n * @param content\r\n *   HTML to show in the popups.\r\n * @param element\r\n *   A DOM object containing the element that was clicked to initiate the popup.\r\n * @param options\r\n *   Hash of options controlling how the popups interacts with the underlying page.\r\n * @param parent\r\n *   Spawning popup, or null if spawned from original page.\r\n */\r\nPopups.openPathContent = function(path, title, content, element, options, parent) {\r\n  var popup = new Popups.Popup();\r\n  // Schoology modification: allow a 'class' attribute for popups settings\r\n  popup.extraClass = options.extraClass;\r\n  popup.fullScreen = options.fullScreen;\r\n  popup.disableInputFocus = options.disableInputFocus;\r\n\r\n  // Set properties on new popup.\r\n  popup.parent = parent;\r\n  popup.path = path;\r\n  popup.options = options;\r\n  popup.element = element;\r\n\r\n  Popups.open(popup, title, content, null, options.width);\r\n\r\n  // Add behaviors to content in popups.\r\n  delete Drupal.behaviors.tableHeader; // Work-around for bug in tableheader.js (http://drupal.org/node/234377)\r\n  delete Drupal.behaviors.teaser; // Work-around for bug in teaser.js (sigh).\r\n  if(!options.disableAttachBehaviors)\r\n    Drupal.attachBehaviors(popup.$popupBody());\r\n  // Adding collapse moves focus.\r\n  popup.refocus();\r\n\r\n  // If the popups contains a form, capture submits.\r\n  var $form = $('form', popup.$popupBody());\r\n\r\n  if ($form.length && options.ajaxForm) {\r\n    $form.ajaxForm({\r\n      iframe: false,\r\n      dataType: 'text',\r\n      beforeSubmit: Popups.beforeSubmit,\r\n      beforeSerialize: Popups.beforeSerialize,\r\n      headers: Popups.ajaxHeaders,\r\n      beforeSend: Popups.beforeSend,\r\n      success: function( data, status, xhr ) {\r\n        var json = $.parseJSON( data );\r\n        Popups.formSuccess(popup, json);\r\n      },\r\n      error: function(jqXHR, textStatus, errorThrown) {\r\n        Popups.errorMessage(jqXHR, textStatus, errorThrown, this.url, this.data);\r\n      }\r\n    });\r\n  }\r\n  else if( typeof options.formOnSubmit == 'function')\r\n  {\r\n    $form.submit(function(){\r\n        var cf = options.formOnSubmit();\r\n        return cf;\r\n      });\r\n  }\r\n\r\n  return popup;\r\n};\r\n\r\n/**\r\n * The form in the popups was successfully submitted\r\n * Update the originating page.\r\n * Show any messages in a popups.\r\n *\r\n * @param popup\r\n *   The popup object that contained the form that was just submitted.\r\n * @param data\r\n *   JSON object from server with status of form submission.\r\n */\r\nPopups.formSuccess = function(popup, data) {\r\n  // Determine if we are at an end point, or just moving from one popups to another.\r\n  var done = popup.isDone(data.path + (data.path_query ? '?' + data.path_query : ''));\r\n\r\n  if (!done) { // Not done yet, so show new page in new popups.\r\n    Popups.addCSS(data.css);\r\n    var inlines = Popups.addJS(data.js);\r\n    Popups.removeLoading();\r\n    var updatedPopup = Popups.openPathContent(data.path, data.title, data.messages + data.content, popup.element, popup.options, popup.parent);\r\n    $(document).trigger('popups_form_success_notdone', [updatedPopup,data]);\r\n    Popups.addInlineJS(inlines);\r\n  }\r\n  else { // We are done with popup flow.\r\n    // Execute the onUpdate callback if available.\r\n    if (popup.options.updateMethod === 'callback' && popup.options.onUpdate) {\r\n      if(typeof popup.options.onUpdate == 'function'){\r\n        var result = popup.options.onUpdate.call(this, data, popup.options, popup.element);\r\n      }\r\n      else{\r\n        var result = eval(popup.options.onUpdate +'(data, popup.options, popup.element)');\r\n      }\r\n      if (result === false) { // Give onUpdate callback a chance to skip normal processing.\r\n        return;\r\n      }\r\n    }\r\n\r\n    if (popup.options.updateMethod === 'reload') { // Force a complete, non-ajax reload of the page.\r\n      if (popup.options.updateSource === 'final') {\r\n        location.href = Drupal.settings.basePath + data.path + (data.path_query ? '?' + data.path_query : ''); // TODO: Need to test this.\r\n      }\r\n      else { // Reload originating page.\r\n        location.reload();\r\n      }\r\n    }\r\n    else { // Normal, targeted ajax, reload behavior.\r\n      // Show messages in dialog and embed the results in the original page.\r\n      var showMessage = data.messages && data.messages.length && !popup.options.noMessage;\r\n      if (showMessage) {\r\n        // Insert the message into the page above the content.\r\n        // Might not be the standard spot, but it is the easiest to find.\r\n        var $next;\r\n        var attachContext;\r\n        if (popup.targetLayerSelector() === 'body') {\r\n          $next = $('body').find(Popups.originalSettings.popups.defaultTargetSelector);\r\n          $next.parents('#main-content-wrapper').find('div.popup-messages-wrapper, div.messages').remove(); // Remove the existing messages.\r\n          $next.before('<div class=\"popup-messages-wrapper\">' + data.messages + '</div>'); // Insert new messages.\r\n          attachContext = $('div.popup-messages-wrapper');\r\n        }\r\n        else {\r\n          $next = $(popup.targetLayerSelector()).find('.popups-body');\r\n          $next.parents('#main-content-wrapper').find('div.messages').remove(); // Remove the existing messages.\r\n          $next.prepend(data.messages); // Insert new messages.\r\n          attachContext = $next;\r\n        }\r\n\r\n        Drupal.attachBehaviors(attachContext);\r\n      }\r\n\r\n      // Update the content area (defined by 'targetSelectors').\r\n      if (popup.options.updateMethod !== 'none') {\r\n        Popups.testContentSelector(); // Kick up warning message if selector is bad.\r\n\r\n        Popups.restoreSettings(); // Need to restore original Drupal.settings.popups.links before running attachBehaviors.  This probably has CSS side effects!\r\n        if (popup.options.targetSelectors) { // Pick and choose what returned content goes where.\r\n          jQuery.each(popup.options.targetSelectors, function(t_new, t_old) {\r\n            if(!isNaN(t_new)) {\r\n              t_new = t_old; // handle case where targetSelectors is an array, not a hash.\r\n            }\r\n            var new_content = $(t_new, data.content);\r\n            if(new_content.length == 0 && Popups.isset(data.content_top))\r\n              new_content = $(t_new, data.content_top);\r\n            if(new_content.length == 0 && Popups.isset(data.content_right))\r\n                new_content = $(t_new, data.content_right);\r\n            if(new_content.length == 0 && Popups.isset(data.content_left))\r\n                new_content = $(t_new, data.content_left);\r\n            if(new_content.length == 0 && Popups.isset(data.content_left_top))\r\n                new_content = $(t_new, data.content_left_top);\r\n            if(new_content.length == 0 && Popups.isset(data.content_top_upper))\r\n            \tnew_content = $(t_new, data.content_top_upper);\r\n            var $c = $(popup.targetLayerSelector()).find(t_old).html(new_content.html()); // Inject the new content into the original page.\r\n\r\n            Drupal.attachBehaviors($c);\r\n          });\r\n        }\r\n        else { // Put the entire new content into default content area.\r\n          var $c = $(popup.targetLayerSelector()).find(Popups.originalSettings.popups.defaultTargetSelector).html(data.content);\r\n          Drupal.attachBehaviors($c);\r\n        }\r\n      }\r\n\r\n      // Update the title of the page.\r\n      if (popup.options.titleSelectors) {\r\n        jQuery.each(popup.options.titleSelectors, function() {\r\n          $(''+this).html(data.title);\r\n        });\r\n      }\r\n\r\n      // Done with changes to the original page, remove effects.\r\n      Popups.removeLoading();\r\n      if (!popup.options.forceShowNextActivePopup && !showMessage) {\r\n        // If there is not a messages popups, close current layer.\r\n        Popups.close();\r\n      }\r\n      //   since the popup was removed in the beforeSubmit, just show the next active popup\r\n      else if (Popups.activePopup()) {\r\n        nextActivePopup = Popups.activePopup();\r\n        nextActivePopup.show();\r\n        nextActivePopup.refocus();\r\n        Drupal.settings = Popups.originalSettingsStack[nextActivePopup.id];\r\n      }\r\n      else {\r\n        Popups.removeOverlay();\r\n        Popups.restorePage();\r\n\r\n        if(popup && popup.fullScreen){\r\n          $('html').css('overflow', 'auto');\r\n        }\r\n      }\r\n    }\r\n\r\n    // Broadcast an event that popup form was done and successful.\r\n    $(document).trigger('popups_form_success', [popup,data]);\r\n\r\n  }  // End of updating spawning layer.\r\n};\r\n\r\n\r\n/**\r\n * Get a jQuery object for the content of a layer.\r\n * @param layer\r\n *   Either a popup, or null to signify the original page.\r\n */\r\nPopups.getLayerContext = function(layer) {\r\n  var $context;\r\n  if (!layer) {\r\n    $context = $('body').find(Popups.originalSettings.popups.defaultTargetSelector);\r\n  }\r\n  else {\r\n    $context = layer.$popupBody();\r\n  }\r\n  return $context;\r\n}\r\n\r\n/**\r\n * Submit the page and reload the results, before popping up the real dialog.\r\n *\r\n * @param element\r\n *   Element that was clicked to open a new popup.\r\n * @param options\r\n *   Hash of options controlling how the popups interacts with the underlying page.\r\n * @param layer\r\n *   Popup with form to save, or null if form is on original page.\r\n */\r\nPopups.saveFormOnLayer = function(element, options, layer) {\r\n  var $context = Popups.getLayerContext(layer);\r\n  var $form = $context.find('form');\r\n  var ajaxOptions = {\r\n    iframe: false,\r\n    dataType: 'text',\r\n    beforeSubmit: Popups.beforeSubmit,\r\n    beforeSerialize: Popups.beforeSerialize,\r\n    headers: Popups.ajaxHeaders,\r\n    beforeSend: Popups.beforeSend,\r\n    success: function(data, status, xhr) {\r\n      var response = $.parseJSON( data );\r\n      // Sync up the current page contents with the submit.\r\n      var $c = $context.html(response.content); // Inject the new content into the page.\r\n      Drupal.attachBehaviors($c);\r\n      // The form has been saved, the page reloaded, now safe to show the triggering link in a popup.\r\n      Popups.openPath(element, options, layer);\r\n    }\r\n  };\r\n  $form.ajaxSubmit(ajaxOptions); // Submit the form.\r\n};\r\n\r\n/**\r\n * Warn the user if ajax updates will not work\r\n *   due to mismatch between the theme and the theme's popup setting.\r\n */\r\nPopups.testContentSelector = function() {\r\n  var target = Popups.originalSettings.popups.defaultTargetSelector;\r\n  var hits = $(target).length;\r\n  if (hits !== 1) { // 1 is the corrent answer.\r\n    var msg = Drupal.t('The popup content area for this theme is misconfigured.') + '\\n';\r\n    if (hits === 0) {\r\n      msg += Drupal.t('There is no element that matches ') + '\"' + target + '\"\\n';\r\n    }\r\n    else if (hits > 1) {\r\n      msg += Drupal.t('There are multiple elements that match: ') + '\"' + target + '\"\\n';\r\n    }\r\n    msg += Drupal.t('Go to admin/build/themes/settings, select your theme, and edit the \"Content Selector\" field');\r\n    alert(msg);\r\n  }\r\n};\r\n\r\nPopups.errorMessage = function(jqXHR, textStatus, errorThrown, url, data) {\r\n  var supportUrl = 'https://support.schoology.com/hc/en-us/requests/new',\r\n      supportLinkText = Drupal.t('New Support Request'),\r\n      supportLink = '<a href=\"' + supportUrl + '\">' + supportLinkText + '</a>';\r\n\r\n  Popups.message(\r\n    Drupal.t('Unexpected Error'),\r\n    '<p>' + Drupal.t('Please try again in a few minutes') + '</p>' +\r\n    '<p class=\"description\">' + Drupal.t('If after trying a few times you continue to see this message, please contact the Support Team') + '</p>' +\r\n    '<p>' + supportLink + '</p>'\r\n  );\r\n\r\n  // log the error\r\n  $.post('/popups_error', {\r\n    'popups_error': textStatus,\r\n    'popups_url': url,\r\n    'popups_data': data,\r\n    'popups_status': jqXHR.status,\r\n    'popups_response': jqXHR.status < 300 ? jqXHR.responseText: '',\r\n    'error_type' : 'popups'\r\n  });\r\n}\r\n\r\n// ****************************************************************************\r\n// * Theme Functions   ********************************************************\r\n// ****************************************************************************\r\n\r\nDrupal.theme.prototype.popupLoading = function() {\r\n  var loading = '<div id=\"popups-loading\">';\r\n  loading += '<img src=\"'+ Drupal.settings.basePath + Popups.originalSettings.popups.modulePath + '/ajax-loader.gif\" />';\r\n  loading += '</div>';\r\n  return loading;\r\n};\r\n\r\nDrupal.theme.prototype.popupOverlay = function() {\r\n  return '<div id=\"popups-overlay\"></div>';\r\n};\r\n\r\nDrupal.theme.prototype.popupButton = function(title, id) {\r\n  return '<input type=\"button\" value=\"'+ title +'\" id=\"'+ id +'\" />';\r\n};\r\n\r\nDrupal.theme.prototype.popupDialog = function(popupId, title, body, buttons) {\r\n  var template = Drupal.theme('popupTemplate', popupId);\r\n  var popups = template.replace('%title', title).replace('%body', body);\r\n\r\n  var themedButtons = '';\r\n  if (buttons) {\r\n    jQuery.each(buttons, function (id, button) {\r\n      themedButtons += Drupal.theme('popupButton', button.title, id);\r\n    });\r\n  }\r\n  popups = popups.replace('%buttons', themedButtons);\r\n  return popups;\r\n};\r\n\r\nDrupal.theme.prototype.popupTemplate = function(popupId) {\r\n  var template = '';\r\n  template += '<div id=\"'+ popupId + '\" class=\"popups-box\">';\r\n  template += '  <div class=\"popups-title\">';\r\n  template += '    <div class=\"popups-close\"><a href=\"#\">' + Drupal.t('Close') + '</a></div>';\r\n  template += '    <div class=\"title\">%title</div>';\r\n  template += '    <div class=\"clear-block\"></div>';\r\n  template += '  </div>';\r\n  template += '  <div class=\"popups-body\">%body</div>';\r\n  template += '  <div class=\"popups-buttons\">%buttons</div>';\r\n  template += '  <div class=\"popups-footer\"></div>';\r\n  template += '</div>';\r\n  return template;\r\n};\r\n";
},function(e,t,n){n(3)(n(66))},function(e,t){e.exports="Drupal.theme.prototype.popupTemplate = function(popupId) { \n  var template = '';\n  template += '<div id=\"'+ popupId + '\" class=\"popups-box\" role=\"dialog\">';\n  template += '  <div class=\"popups-title\">';\n  template += '    <div class=\"popups-close\"><a href=\"javascript://\"><span class=\"visually-hidden\">' + Drupal.t('Close') + '</span></a></div>';\n  template += '    <div class=\"title\">%title</div>';\n  template += '    <div class=\"clear-block\"></div>';\n  template += '  </div>';\n  template += '  <div class=\"popups-body\" tabindex=\"0\">%body</div>';\n  template += '  <div class=\"popups-buttons tabindex=\"0\">%buttons</div>';\n  template += '  <div class=\"popups-footer\"></div>';\n  template += '</div>';\n  return template;\n};\n"},function(e,t,n){n(3)(n(68))},function(e,t){e.exports="/**\n * Course angular service provides an interface to s_course endpoints.\n */\nsAngular.app.service('Course', ['SHttp', function(SHttp){\n  var obj = {};\n  /**\n   * Gets active courses (can be passed optional query params).\n   * @param {Object|Function} callbackOrOptions\n   * @param {Function} [callbackOrOptions.callback] - The callback if @param is an object.\n   * @param {Object} [callbackOrOptions.options] - The query params if @param is an object.\n   * @example\n   *   callbackOrOptions  = {\n   *     callback: function(){...},\n   *     options: {\n   *       no_upcoming: 1,\n   *       ...\n   *     }\n   *   }\n   * @example\n   *   callbackOrOptions = function(){...}\n   */\n  obj.getActiveCourses = function(callbackOrOptions){\n    var callback, query = '', validOptions = {};\n\n    if (typeof callbackOrOptions === 'function') {\n      callback = callbackOrOptions;\n    } else if (callbackOrOptions instanceof Object) {\n      callback = callbackOrOptions.callback;\n\n      // Validate `options` before creating the actual query.\n      // As PE-17755, validParams === {'no_upcoming' => 0 or 1 (false or true)}\n      var keys = Object.keys(callbackOrOptions.options);\n      var values = [];\n\n      // Build Object.values(callbackOrOptions.options); IE11 does not support Object.values();\n      for (var i = 0; i < keys.length; i++) {\n        values.push(callbackOrOptions.options[keys[i]]);\n      }\n\n      for (var i = 0; i <= keys.length; i++) {\n        if (keys[i] === 'no_upcoming') {\n          validOptions[keys[i]] = values[i];\n        }\n      }\n    }\n\n    // Check if validOptions is empty, then set query.\n    query = Object.keys(validOptions).length > 0 ? '?' + jQuery.param(validOptions) : '';\n\n    SHttp.get('/iapi/course/active' + query, function(response){\n      callback(response.courses, response.permissions);\n    });\n  };\n\n  return obj;\n}]);\n\n/**\n * Course angular service provides an interface to s_course endpoints.\n */\nsAngular.app.service('GradingGroup', ['SHttp', function(SHttp){\n  return {     \n    getList : function(courseNid, callback){\n      SHttp.get('/iapi/course/grading_groups/' + courseNid, function(response){\n        callback(response.gradingGroups);\n      });\n    }\n  }\n\n}]);\n\n/**\n * Competency angular service\n */\nsAngular.app.service('Competency', ['$http', function($http){\n  var obj = {};\n\n  obj.fetchData = function(courseNid, csmSectionNid, includeHeaders, page, callback){\n    var conf = {\n      params : {\n        page : page\n      }\n    };\n    if(includeHeaders){\n      conf.params.include_headers = 1;\n      conf.params.page = page;\n    }\n    if(csmSectionNid){\n      conf.params.csm_section_nid = csmSectionNid;\n    }\n    $http.get('/iapi2/course/' + courseNid + '/alignment_outcomes', conf).success(function(data, status, headers){\n      callback(data);\n    });\n  };\n\n  obj.fetchTagData = function(courseNid, csmSectionNid, tag, includeHeaders, page, callback){\n    var conf = {\n      params : {\n        page : page\n      }\n    };\n    if(includeHeaders){\n      conf.params.include_headers = 1;\n      conf.params.page = page;\n    }\n    if(csmSectionNid){\n      conf.params.csm_section_nid = csmSectionNid;\n    }\n    $http.get('/iapi2/course/' + courseNid + '/alignment_outcomes/objective/' + tag, conf).success(function(data, status, headers){\n      callback(data);\n    });\n  }\n\n  return obj;\n}]);\n"},function(e,t,n){n(3)(n(70))},function(e,t){e.exports="sAngular.app.service('gradingRubrics', ['$rootScope', '$http', function($rootScope, $http){\n  var gradingRubrics = {};\n  gradingRubrics.opened = false;\n  gradingRubrics.rubrics = {};\n  gradingRubrics.singleRubrics = {};\n  gradingRubrics.singleResourceRubrics = {};\n  gradingRubrics.activeItemNid = null;\n  gradingRubrics.loadedGrades = {};\n  // Rubric editing in these realms are for rubric templates\n  var template_realms = ['user', 'group', 'building', 'school'];\n\n\t// Resource rubrics are not compatible with the angular templates, and will need some refactoring to get template fields at the root level\n\tgradingRubrics.refactorResourceRubric = function(rubric){\n\t\trubric.body.rows = rubric.body.template_fields.rubric_rows;\n\t\trubric.body.total_points = rubric.body.template_fields.total_points;\n\t\tdelete rubric.body.template_fields;\n\t}\n  \n  gradingRubrics.createRubric = function(realm, realm_id, rubric){\n    // POST rubric for creation\n    // Clear out title if this is not a reusable rubric\n    if(rubric.is_reusable == false){\n      rubric.title = '';\n    }\n    if ($.inArray(realm, template_realms) != -1){\n      // get folder id\n      var folder_id = sGetHashPathParam('f');\n      var queryParams = folder_id ? '?f=' + folder_id : '';\n      $http.post('/iapi/library/rubric/' + realm_id + queryParams, rubric).success(function (savedRubric, status, headers) {\n        if (status == 200) {\n\t        gradingRubrics.refactorResourceRubric(savedRubric);\n          $rootScope.$broadcast('gradingRubricSaveSuccess', savedRubric, true);\n        }\n      });\n    } else {\n      $http.post('/iapi/grades/all_rubrics/' + realm + '/' + realm_id, rubric).success(function(savedRubric, status, headers){\n        if(status == 200){\n          gradingRubrics.updateRubricCache(savedRubric.body);\n          $rootScope.$broadcast('gradingRubricSaveSuccess', savedRubric.body, true);\n        }\n      });\n    }\n  }\n  // Due to the cacheing scheme there might be multiple grading rubric caches ( case where a user is on assignment page and loads\n  // 8 different assignments, each with a custom rubric attached)\n  gradingRubrics.updateRubricCache = function(rubric){\n    $.each(gradingRubrics.rubrics, function(cacheKey, cache){\n      if(angular.isUndefined(gradingRubrics.rubrics[cacheKey][rubric.id])){\n        return;\n      }\n      gradingRubrics.rubrics[cacheKey][rubric.id] = rubric;\n    });\n  }\n  gradingRubrics.deleteRubricFromCache = function(rubric){\n    $.each(gradingRubrics.rubrics, function(cacheKey, cache){\n      if(angular.isUndefined(gradingRubrics.rubrics[cacheKey][rubric.id])){\n        return;\n      }\n      delete gradingRubrics.rubrics[cacheKey][rubric.id];\n    })\n  }\n  \n  // this function expects editRubrics to be an array - allowing us to do bulk saving against server\n  gradingRubrics.saveRubrics = function(realm, realm_id, editRubrics){\n    if ($.inArray(realm, template_realms) != -1){\n      $.each(editRubrics, function(idx, obj) {\n        $http.put('/iapi/library/rubric/' + obj.nid, obj).success(function (savedRubric, status, headers) {\n\t        gradingRubrics.refactorResourceRubric(savedRubric);\n          $rootScope.$broadcast('gradingRubricSaveSuccess', editRubrics, false);\n\t        gradingRubrics.singleResourceRubrics = {};\n        });\n      });\n    } else {\n      var reqBody = {rubrics : editRubrics};\n      $http.put('/iapi/grades/all_rubrics/' + realm + '/' + realm_id, reqBody).success(function (savedRubrics, status, headers) {\n        // On success make sure to save\n        $.each(editRubrics, function (i, rubric) {\n          gradingRubrics.updateRubricCache(rubric);\n        });\n        $rootScope.$broadcast('gradingRubricSaveSuccess', editRubrics, false);\n      });\n    }\n  }\n  \n  // when editing rubrics you probably want to do a bulk fetch of all rubrics\n  gradingRubrics.getRubricsByCourse = function(courseNid, itemNid, callback){    \n    var key = courseNid + (itemNid == false ? '' : ('-' + itemNid));\n    if(!angular.isDefined(gradingRubrics.rubrics[key])){\n      var conf = {params : {}};\n      if(itemNid){\n        conf.params = {item_nid : itemNid};\n      }\n      $http.get('/iapi/grades/all_rubrics/course/' + courseNid, conf).success(function(rubrics, status, headers){\n        gradingRubrics.rubrics[key] = rubrics.body;\n        callback(gradingRubrics.getRubricsDataCopy('rubrics', key));\n      });      \n    }\n    else{\n      callback(gradingRubrics.getRubricsDataCopy('rubrics', key));\n    }\n  }\n\n  // Never let the angular controllers get a reference of what is cached in the service. Controllers add additional properties\n  // onto objects like $$hashKey when there is an ng-repeat. Removing that can break things.\n  gradingRubrics.getRubricsDataCopy = function(propName, key){\n    return angular.copy(gradingRubrics[propName][key]);\n  }\n\n\t\n\t\n  // When grading rubrics, you just need to get the one relevant one\n  gradingRubrics.getRubricById = function(rubricId, callback){\n    if(!angular.isDefined(gradingRubrics.singleRubrics[rubricId])){\n      $http.get('/iapi/grades/rubric/' + rubricId).success(function(rubric, status, headers){\n        gradingRubrics.singleRubrics[rubricId] = rubric.body;\n        callback(gradingRubrics.getRubricsDataCopy('singleRubrics', rubricId));\n      });\n    }\n    else{\n      callback(gradingRubrics.getRubricsDataCopy('singleRubrics', rubricId));\n    }\n  }\n\t\n  gradingRubrics.getResourceRubricById = function(realmId, resourceRubricId, callback){\n    if(!angular.isDefined(gradingRubrics.singleResourceRubrics[resourceRubricId])){\n      $http.get('/iapi/library/rubric/' + resourceRubricId).success(function(rubric, status, headers){\n\t      gradingRubrics.refactorResourceRubric(rubric);\n        gradingRubrics.singleResourceRubrics[resourceRubricId] = rubric.body;\n        callback(gradingRubrics.getRubricsDataCopy('singleResourceRubrics', resourceRubricId));\n      });\n    }\n    else{\n      callback(gradingRubrics.getRubricsDataCopy('singleResourceRubrics', resourceRubricId));\n    }\n  }\n  \n  gradingRubrics.makeGradeInfoKey = function (rubricId, enrollmentId, itemId, submissionId){\n    // default value for submissionId = 'none'\n    if(angular.isUndefined(submissionId) || submissionId == null){\n      submissionId = 'none';\n    }\n    return rubricId + '-' + enrollmentId + '-' + itemId + submissionId;\n  }\n  \n  gradingRubrics.loadRubricGradeInfo = function(rubricId, enrollmentId, itemId, isComponent, submissionId, callback){\n    // default value for submissionId = 'none'\n    if(angular.isUndefined(submissionId) || submissionId == null){\n      submissionId = 'none';\n    }\n    var key = gradingRubrics.makeGradeInfoKey(rubricId, enrollmentId, itemId, submissionId);\n    if(!angular.isDefined(gradingRubrics.loadedGrades[key])){\n      if (isComponent){\n        $http.get('/iapi/grades/assessment_component_submission_rubric_grade_info/' + rubricId + '/' + itemId + '/' + enrollmentId + '/' + submissionId).success(function(data, status, headers){\n          gradingRubrics.loadedGrades[key] = data.body;\n          callback(gradingRubrics.getRubricsDataCopy('loadedGrades', key));\n        })\n      } else {\n        $http.get('/iapi/grades/rubric_grade_info/' + rubricId + '/' + itemId + '/' + enrollmentId).success(function (data, status, headers) {\n          gradingRubrics.loadedGrades[key] = data.body;\n          callback(gradingRubrics.getRubricsDataCopy('loadedGrades', key));\n        })\n      }\n    }\n    else{\n      callback(gradingRubrics.getRubricsDataCopy('loadedGrades', key));\n    }\n  }\n  \n  gradingRubrics.saveRubricGradeInfo = function(rubricId, enrollmentId, itemId, gradeInfo, overrideGrade, isComponent, submissionId, callback, comment, gradingCategoryId){\n    var reqBody = {gradeInfo : gradeInfo, overrideGrade : overrideGrade, comment: comment};\n\n    if (typeof gradingCategoryId !== 'undefined' && !isNaN(gradingCategoryId)) {\n      reqBody.gradingCategoryId = gradingCategoryId;\n    }\n    if (!isComponent) {\n      $http.put('/iapi/grades/rubric_grade_info/' + rubricId + '/' + itemId + '/' + enrollmentId, reqBody).success(function (data, status, headers) {\n        // update this data in the cache so we have it!\n        var key = gradingRubrics.makeGradeInfoKey(rubricId, enrollmentId, itemId, submissionId);\n        gradingRubrics.loadedGrades[key] = reqBody;\n\n        var request = {\n          rubricId: rubricId,\n          enrollmentId: enrollmentId,\n          itemId: itemId,\n          gradeInfo: gradeInfo,\n          overrideGrade: overrideGrade\n        };\n        var response = angular.isDefined(data.body) && data.body ? data.body : {};\n        callback(request, response);\n      });\n    } else {\n      $http.put('/iapi/grades/assessment_component_submission_rubric_grade_info/' + rubricId + '/' + itemId + '/' + enrollmentId + '/' + submissionId, reqBody).success(function (data, status, headers) {\n        // update this data in the cache so we have it!\n        var key = gradingRubrics.makeGradeInfoKey(rubricId, enrollmentId, itemId, submissionId);\n        gradingRubrics.loadedGrades[key] = reqBody;\n\n        var request = {\n          rubricId: rubricId,\n          enrollmentId: enrollmentId,\n          itemId: itemId,\n          gradeInfo: gradeInfo,\n          overrideGrade: overrideGrade\n        };\n        var response = angular.isDefined(data.body) && data.body ? data.body : {};\n        callback(request, response);\n      });\n    }\n  }\n  \n  $rootScope.$on('gradingRubricDelete', function(e, data){\n    var rubricId = data.arg;\n    var delPath = '/iapi/grades/rubric/' + rubricId;\n    $http({\n      method : 'DELETE',\n      url : delPath\n    }).success(function(){\n      $rootScope.$broadcast('gradingRubricDeleteSuccess', rubricId);\n    })\n  })\n  return gradingRubrics;\n}]);\n\nsAngular.app.service('sGrader', ['$rootScope', '$http', function($rootScope, $http){\n  var sGrader = {},\n      data = {\n        loaded: false\n      };\n\n  // constants\n  sGrader.S_GRADING_SCALE_TYPE_NUMERIC = 0;\n  sGrader.S_GRADING_SCALE_TYPE_RUBRIC = 2;\n\n  var gradingPeriodLookup = {},\n      gradingCategoryLookup = {},\n      enrollmentIdLookup = {};\n\n  function resetData(){\n    data = {\n      loaded: false,\n      uids: [],\n      user_data: {},\n      grade_item_nids: [],\n      grade_item_data: {},\n      grading_period: {\n        id: null,\n        title: null\n      },\n      grading_periods: [],\n      grading_category: {\n        id: null,\n        title: null\n      },\n      grading_categories: [],\n      grading_groups: [],\n      grade_item_order: null,\n      graded_with_new : []\n    };\n  }\n\n  function setData(k, v){\n    data[k] = v;\n  }\n\n  function indexData(){\n    $.each(data.grading_periods, function(idx, gp){\n      gradingPeriodLookup[gp.id] = idx;\n    });\n    $.each(data.grading_categories, function(idx, gc){\n      gradingCategoryLookup[gc.id] = idx;\n    });\n  }\n\n  function indexUserData(userData){\n    $.each(userData, function(uid, user){\n      enrollmentIdLookup[user.enrollment_id] = uid;\n    });\n  }\n\n  /**\n   * Determine if something has changed and will require a reload of data\n   */\n  function datasetChanged(opts){\n    var changed = false,\n        gradingPeriodChanged = angular.isDefined(data.grading_period) && opts.grading_period_id != data.grading_period.id,\n        gradingCategoryChanged = angular.isDefined(data.grading_category) && opts.grading_category_id != data.grading_category.id,\n        gradingGroupChanged = angular.isDefined(data.grading_group_id) && opts.grading_group_id != data.grading_group_id,\n        gradeItemOrderChanged = angular.isDefined(data.grade_item_order) && opts.grade_item_order != data.grade_item_order;\n    if(gradingPeriodChanged || gradingCategoryChanged || gradingGroupChanged || gradeItemOrderChanged || angular.isDefined(opts.reset)){\n      changed = true;\n    }\n\n    return changed;\n  }\n\n  sGrader.getGradingPeriod = function(id){\n    var ret = null;\n\n    if(angular.isDefined(gradingPeriodLookup[id])){\n      ret = data.grading_periods[gradingPeriodLookup[id]];\n    }\n\n    return ret;\n  };\n\n  sGrader.getGradingCategory = function(id){\n    var ret = null;\n\n    if(angular.isDefined(gradingCategoryLookup[id])){\n      ret = data.grading_categories[gradingCategoryLookup[id]];\n    }\n\n    return ret;\n  };\n\n  sGrader.getGradedWithNew = function(){\n    return data.graded_with_new;\n  }\n\n  sGrader.getUser = function(uid){\n    var ret = null;\n    if(angular.isDefined(data.user_data[uid])){\n      ret = data.user_data[uid];\n    }\n\n    return ret;\n  };\n\n  sGrader.getUidByEnrollmentId = function(enrollmentId){\n    return angular.isDefined(enrollmentIdLookup[enrollmentId]) ? enrollmentIdLookup[enrollmentId] : null;\n  };\n\n  sGrader.getUserByEnrollmentId = function(enrollmentId){\n    var ret = sGrader.getUser(sGrader.getUidByEnrollmentId(enrollmentId));\n  };\n\n  sGrader.getGradeItem = function(gradeItemNid){\n    var ret = null;\n    if(data && gradeItemNid && data.grade_item_data[gradeItemNid]){\n      ret = data.grade_item_data[gradeItemNid];\n    }\n\n    return ret;\n  };\n\n  sGrader.addGradeItemNid = function(gradeItemNid){\n    data.grade_item_nids.push(gradeItemNid);\n  };\n\n  sGrader.processGradeItem = function(gradeItem){\n    if(/gp-\\d/.test(gradeItem.id)){\n      gradeItem.item_type = gradeItem.type = 'grading_period';\n    }\n    else if(/category-\\d/.test(gradeItem.id)){\n      gradeItem.item_type = gradeItem.type = 'category';\n    }\n    else{\n      gradeItem.type = 'grade_item';\n      if(angular.isDefined(gradeItem.status)){\n        gradeItem.status_text = gradeItem.status == 2 ? Drupal.t('Unpublished') : Drupal.t('Published');\n      }\n      if(!gradeItem.grading_category_id && !gradeItem.is_final){\n        gradeItem.disabled = 'no_category';\n      }\n      if(angular.isDefined(gradeItem.has_assessment) && gradeItem.has_assessment){\n        // if this is an assessment, check the total component points\n        if(angular.isUndefined(gradeItem.component_points) || !gradeItem.component_points){\n          gradeItem.disabled = 'no_component_points';\n        }\n      }\n\n      if(typeof gradeItem.has_assessment != 'undefined' && gradeItem.has_assessment){\n        gradeItem.item_type = 'assessment';\n      }\n      else if(typeof gradeItem.is_discussion != 'undefined' && gradeItem.is_discussion){\n        gradeItem.item_type = 'discussion';\n      }\n      else if (typeof gradeItem.external_tool_link_nid != 'undefined' && typeof gradeItem.external_tool_attachment_id != 'undefined') {\n        gradeItem.item_type = 'external_tool';\n      }\n      else if (typeof gradeItem.has_ltq != 'undefined' && gradeItem.has_ltq){\n        gradeItem.item_type = 'learnosity_test_quiz';\n      }\n      else{\n        gradeItem.item_type = 'assignment';\n      }\n    }\n\n    gradeItem.loaded = true;\n\n    return gradeItem;\n  };\n\n  sGrader.getHeaderData = function(course_nid, opts, callback){\n    var doneFunc = function(){\n      if(typeof callback == 'function'){\n        callback.call(null, data);\n      }\n    };\n\n    opts = $.extend({\n      grading_period_id: null,\n      grading_category_id: null,\n      grading_group_id: null,\n      grade_item_order: null,\n      csm_section_nid: null\n    }, opts);\n    if(!data.loaded || datasetChanged(opts)){\n      resetData();\n      var url = '/iapi/grades/grader_header_data/' + course_nid,\n          param = {};\n      if(opts.grading_period_id){\n        url += '/' + opts.grading_period_id;\n      }\n      $.each(['grading_category_id', 'grading_group_id', 'grade_item_order', 'csm_section_nid'], function(i, key){\n        if(opts[key]){\n          param[key] = opts[key];\n        }\n      });\n      if(!$.isEmptyObject(param)){\n        url += '?' + $.param(param);\n      }\n      $http.get(url).success(function(response){\n        if(angular.isUndefined(response) || angular.isUndefined(response.body)){\n          return;\n        }\n        var body = response.body;\n\n        // data.loaded acts as a semaphore for simultaneous requests to the same grading period\n        if(!data.loaded){\n          data.loaded = true;\n          $.each(body, function(k, value){\n            setData(k, value);\n          });\n\n          indexData();\n          \n          if(data.grading_categories.length){\n            if(opts.grading_category_id){\n              data.grading_category = sGrader.getGradingCategory(opts.grading_category_id);\n            }\n            else{\n              data.grading_category = data.grading_categories[0];\n            }\n          }\n\n          data.users = {};\n          if(data.user_data){\n            $.each(data.uids, function(k, uid){\n              if(angular.isDefined(data.user_data[uid])){\n                data.user_data[uid].uid = uid;\n                data.user_data[uid].loaded = true;\n                if(angular.isUndefined(data.user_data[uid].comments)){\n                  data.user_data[uid].comments = {};\n                }\n                if(/sample_\\d+/.test(uid)){\n                  data.user_data[uid].disabled = 'sample';\n                }\n                data.users[uid] = data.user_data[uid];\n              }\n              else{\n                return false;\n              }\n            });\n            indexUserData(data.users);\n          }\n          \n          data.grade_items = {};\n          if(data.grade_item_data){\n            $.each(data.grade_item_nids, function(k, grade_item_nid){\n              if(angular.isDefined(data.grade_item_data[grade_item_nid])){\n                data.grade_items[grade_item_nid] = sGrader.processGradeItem(data.grade_item_data[grade_item_nid]);\n              }\n              else{\n                return false;\n              }\n            });\n          }\n          sAngular.rootScopeBroadcast('sGraderHeaderDataChanged', data);\n        }\n\n        doneFunc();\n      });\n    }\n    else{\n      // everything has already been loaded\n      doneFunc();\n    }\n  };\n\n  sGrader.getGrades = function(course_nid, grading_period_id, query, callback){\n    var param = $.extend({\n      uids: null,\n      grade_item_nids: null\n    }, query);\n\n    var csm_section_nid = getHashParam('csm_section_nid');\n    if (csm_section_nid) {\n      param.csm_section_nid = csm_section_nid\n    }\n\n    if(angular.isDefined(query.uids)){\n      var uids = [],\n          sample_users = [];\n\n      $.each(query.uids, function(k, uid){\n        if(!sGrader.getUser(uid)){\n          // 1 uses less characters than true when translated into query string\n          param.with_user_data = 1;\n        }\n        if(/sample_\\d+/.test(uid)){\n          sample_users.push(uid);\n        }\n        else{\n          uids.push(uid);\n        }\n      });\n\n      if(uids.length){\n        param.uids = uids.join(',');\n      }\n      if(sample_users.length){\n        param.sample_users = sample_users.join(',');\n      }\n    }\n    if(angular.isDefined(query.grade_item_nids)){\n      param.grade_item_nids = query.grade_item_nids.join(',');\n      $.each(query.grade_item_nids, function(k, gradeItemNid){\n        if(!sGrader.getGradeItem(gradeItemNid)){\n          param.with_grade_item_data = 1;\n          return false;\n        }\n      });\n    }\n\n    var url = '/iapi/grades/grader_grade_data/' + course_nid + '/' + grading_period_id;\n    url += '?' + $.param(param);\n    \n    // using the plain $http since we don't want cache here\n    $http.get(url).success(function(response){\n      var cbParam = {};\n      if(angular.isDefined(response) && angular.isDefined(response.body)){\n        var body = response.body;\n        if(angular.isDefined(query.uids) && angular.isDefined(query.grade_item_nids)){\n          if(angular.isDefined(body.user_data)){\n            cbParam.users = {};\n            $.each(query.uids, function(k, uid){\n              if(angular.isDefined(body.user_data[uid])){\n                // if the response has the user data for this user, populate our cache with it\n                data.user_data[uid] = body.user_data[uid];\n                data.user_data[uid].uid = uid;\n                data.user_data[uid].loaded = true;\n                if(angular.isUndefined(data.user_data[uid].comments)){\n                  data.user_data[uid].comments = {};\n                }\n                indexUserData(data.user_data);\n              }\n              if(/sample_\\d+/.test(uid)){\n                data.user_data[uid].disabled = 'sample';\n              }\n              cbParam.users[uid] = data.user_data[uid];\n            });\n          }\n\n          if(angular.isDefined(body.grade_item_data)){\n            cbParam.grade_items = {};\n            $.each(query.grade_item_nids, function(k, nid){\n              if(angular.isDefined(body.grade_item_data[nid])){\n                // if the response has the grade item data for this nid, populate our cache with it\n                data.grade_item_data[nid] = body.grade_item_data[nid];\n              }\n              cbParam.grade_items[nid] = sGrader.processGradeItem(data.grade_item_data[nid]);\n            });\n          }\n\n          cbParam.grades = body.grades;\n        }\n      }\n      else{\n        sAngular.rootScopeBroadcast('sGradesGraderError', {\n          code: 'invalid_response'\n        });\n      }\n\n      if(typeof callback == 'function'){\n        callback.call(null, cbParam);\n      }\n    });\n  };\n\n  sGrader.getGradeItemNids = function(){\n    return data.grade_item_nids;\n  };\n\n  sGrader.getNumGradeItemNids = function(){\n    return _.unique(data.grade_item_nids).length;\n  };\n\n  sGrader.getUids = function(){\n    return data.uids;\n  };\n\n  sGrader.getNumUids = function(){\n    return data.uids.length;\n  };\n\n  return sGrader;\n}]);\n"},function(e,t,n){n(3)(n(72))},function(e,t){e.exports="sAngular.app.service('Enrollment', ['$http', function($http){\n    var enrollment = {};\n    enrollment.enrollments = {};\n    enrollment.getEnrollments = function(realm, realm_id, callback){\n      var key = realm + '-' + realm_id;\n      if(angular.isUndefined(enrollment.enrollments[key])){\n        $http.get('/iapi/enrollment/member_enrollments/' + realm + '/' + realm_id).success(function(data,status,headers){\n          enrollment.enrollments[key] = data.body;\n          callback(enrollment.enrollments[key]);\n        })\n      }\n      else{\n        callback(enrollment.enrollments[key]);\n      }\n    }\n    return enrollment;\n}]);"},function(e,t,n){n(3)(n(74))},function(e,t){e.exports="sAngular.app.service('Calendar', ['SHttp', '$http', function(SHttp, $http){\n  var obj = {};\n\n  obj.getRealmSettings = function(callback){\n    var url = '/iapi/event/calendar_realm_settings';\n    SHttp.get(url, function(response){\n      callback(response.settings);\n    });\n  };\n  \n  obj.saveRealmSettings = function(data, callback){\n    var url = '/iapi/event/calendar_realm_settings';\n    $http.post(url, data).success(function(response){\n      callback(response);\n    });\n  };\n\n  return obj;\n}]);"},function(e,t,n){n(3)(n(76))},function(e,t){e.exports="sAngular.app.service('sParent', ['$rootScope', 'SHttp', function($rootScope, SHttp){\n  var sParent = {},\n    currentChild,\n    children;\n\n  function getInfo(callback){\n    SHttp.get('/iapi/parent/info', function(body){\n      if(angular.isUndefined(children)){\n        children = body.children;\n        $.each(children, function(i, child){\n          child.enrollments = {};\n          child.totalRecentCounts = function(){\n            var total = 0;\n\n            $.each(this.recent_counts, function(k, v){\n              total += v;\n            });\n\n            return total;\n          };\n          child.recent_grades = {};\n        });\n      }\n      if(angular.isUndefined(currentChild)){\n        if(body.session.view_child){\n          currentChild = children[body.session.view_child];\n        }\n        else{\n          currentChild = null;\n        }\n      }\n      if(typeof callback == 'function'){\n        callback(body);\n      }\n    });\n  }\n\n  sParent.getCurrentChild = function(callback){\n    if(angular.isUndefined(currentChild)){\n      getInfo(function(){\n        callback(currentChild);\n      });\n    }\n    else{\n      callback(currentChild);\n    }\n  };\n\n  sParent.getChildren = function(callback){\n    if(angular.isUndefined(children)){\n      getInfo(function(){\n        callback(children);\n      });\n    }\n    else{\n      callback(children);\n    }\n  };\n\n  sParent.getChild = function(child_uid, callback){\n    sParent.getChildren(function(){\n      var child = angular.isDefined(children[child_uid]) ? children[child_uid] : null;\n      callback(child);\n    });\n  };\n\n  sParent.updateCurrentChild = function(child_uid, callback){\n    currentChild = angular.isDefined(children[child_uid]) ? children[child_uid] : null;\n    if(typeof callback == 'function'){\n      callback(currentChild);\n    }\n  };\n\n  sParent.getEnrollmentsForChild = function(child_uid, enrollment_type, callback){\n    sParent.getChildren(function(){\n      var enrollments = [];\n      if(angular.isDefined(children[child_uid])){\n        var child = children[child_uid];\n        if(angular.isDefined(child.enrollments[enrollment_type])){\n          enrollments = child.enrollments[enrollment_type];\n          if(typeof callback == 'function'){\n            callback(enrollments);\n          }\n        }\n        else{\n          child.enrollments[enrollment_type] = [];\n          // the enrollments for the child was not previously fetched, hit the server for it\n          SHttp.get('/iapi/parent/enrollments/' + child_uid + '/' + enrollment_type, function(data){\n            child.enrollments[enrollment_type] = data.enrollments;\n            if(typeof callback == 'function'){\n              callback(child.enrollments[enrollment_type]);\n            }\n          });\n        }\n      }\n      else{\n        if(typeof callback == 'function'){\n          callback(enrollments);\n        }\n      }\n    });\n  };\n\n\tsParent.getOverdueSubmissions = function(child_uid, callback){\n\t\tSHttp.get('/iapi/parent/overdue_submissions/' + child_uid, function(data){\n\t\t\tif(typeof callback == 'function'){\n\t\t\t\tcallback(data.html);\n\t\t\t}\n\t\t});\n\t};\n\n  sParent.getRecentFeedCountsForChild = function(child_uid, callback){\n    sParent.getChild(child_uid, function(child){\n      if(typeof callback == 'function'){\n        callback(child.recent_counts);\n      }\n    });\n  };\n\n  sParent.getRecentGrades = function(child_uid, category, opts){\n    var defaults = {\n      page: 0,\n      callback: null\n    };\n    opts = $.extend({}. defaults, opts);\n    sParent.getChild(child_uid, function(child){\n      var fetchNextPage = false,\n          child_data = null;\n      if(angular.isDefined(child.recent_grades[category])){\n        child_data = child.recent_grades[category];\n        if(child_data.has_more && child_data.last_page < opts.page){\n          fetchNextPage = true;\n        }\n        else{\n          if(typeof opts.callback == 'function'){\n            opts.callback(child.recent_grades[category]);\n          }\n        }\n      }\n      else{\n        child_data = child.recent_grades[category] = {\n          has_more: false,\n          last_page: 0,\n          data: []\n        };\n        fetchNextPage = true;\n      }\n\n      if(fetchNextPage){\n        var param = {\n          page: opts.page\n        };\n        child_data.has_more = false;\n        if(angular.isDefined(child_data.last_checked)){\n          param.last_checked = child_data.last_checked;\n        }\n        SHttp.get('/iapi/parent/recent/' + child.uid + '/' + category + '?' + $.param(param), function(data){\n          $.merge(child_data.data, data.results);\n          child_data.has_more = data.has_more;\n          child_data.last_page = param.page;\n          child_data.last_checked = data.last_checked;\n          if(typeof opts.callback == 'function'){\n            opts.callback(child.recent_grades[category]);\n          }\n        });\n      }\n    });\n  };\n\n  sParent.getRecentAttendance = function(child_uid, category, callback){\n    sParent.getChild(child_uid, function(child){\n      if(angular.isDefined(child.recent_attendance)){\n        if(typeof callback == 'function'){\n          callback(child.recent_attendance);\n        }\n      }\n      else{\n        SHttp.get('/iapi/parent/recent/' + child.uid + '/' + category, function(data){\n          child.recent_attendance = data;\n          if(typeof callback == 'function'){\n            callback(child.recent_attendance);\n          }\n        });\n      }\n    });\n  };\n\n  return sParent;\n}]);";
},function(e,t,n){n(3)(n(78))},function(e,t){e.exports="sAngular.app.service('sPagesIndex', ['SHttp', '$http', function(SHttp, $http){\n  var obj = {};\n\n  obj.get = function(options){\n    var url = '/iapi/page/index/' + options.realm + '/' + options.realmId + '?offset=' + options.offset;\n    SHttp.get(url, function(response){\n      options.callback(response);\n    });\n  };\n\n  obj.saveReorder = function(options){\n    var url = '/iapi/page/reorder/' + options.realm + '/' + options.realmId;\n    $http.post(url, options.data).success(function(response){\n      options.callback(response);\n    });\n  };\n\n  return obj;\n}]);"},function(e,t,n){n(3)(n(80))},function(e,t){e.exports="Drupal.behaviors.sCommonInfotip = function(context){\n  $('span.infotip:not(.sCommonInfotip-processed)', context).addClass('sCommonInfotip-processed').each(function(){\n    var infotipObj = $(this);\n    var triggerMode = infotipObj.hasClass('manual') ? 'manual' : 'hover';\n\n    infotipObj.tipsy({\n      html: true,\n      gravity: infotipObj.attr('tipsygravity'),\n      trigger: triggerMode,\n      delayIn: 500,\n      title: function(){\n        return $('.infotip-content', $(this)).html();\n      }\n    });\n  });\n\n  $('.s_cluetip_highlight:not(.sCommonInfotip-processed)', context).add('sCommonInfotip-processed').each(function(){\n    var object = $(this);\n    if(object.attr('cluetip')){\n      object.tipsy({\n        html: false,\n        delayIn: 500,\n        title: function(){\n          return Base64.decode(object.attr('cluetip'));\n        }\n      });\n    }\n  });\n}\n"},function(e,t,n){n(3)(n(82))},function(e,t){e.exports="/**\n * Bind a click handler to all links on the site that will check if they are external links\n * This will be delegated at the body level and should only execute once\n *\n * @param DOMElement context\n */\nfunction extlinkAttach(context) {\n  var $context = context == document ? $(document.body) : $(context);\n  if($context.closest('.sExtlink-processed').length){\n    // since the event is delegated, this will only need to be done once at the highest level\n    return;\n  }\n\n  $context.addClass('sExtlink-processed');\n\n  // Strip the host name down, removing subdomains or www.\n  //pattern matching here is strange, e.g. it will behave differently for example if on www.abcd.ucd.edu and www.abcd.ucdavis.edu\n  var host = window.location.host.replace(/^(([^\\/]+?\\.)*)([^\\.]{4,})((\\.[a-z]{1,4})*)$/, '$3$4'),\n      subdomain = window.location.host.replace(/^(([^\\/]+?\\.)*)([^\\.]{4,})((\\.[a-z]{1,4})*)$/, '$1'),\n      extInclude = false,\n      extExclude = false,\n      subdomains, internalLink;\n\n  // Determine what subdomains are considered internal.\n  if (Drupal.settings.extlink.extSubdomains) {\n    subdomains = \"([^/]*\\.)?\";\n  }\n  else if (subdomain == 'www.' || subdomain == '') {\n    subdomains = \"(www\\.)?\";\n  }\n  else {\n    subdomains = subdomain.replace(\".\", \"\\.\");\n  }\n\n  // Build regular expressions that define an internal link.\n  internalLink = new RegExp(\"^https?://\" + subdomains + host + '/', \"i\");\n\n  // Extra internal link matching.\n  if (Drupal.settings.extlink.extInclude) {\n    extInclude = new RegExp(Drupal.settings.extlink.extInclude.replace(/\\\\/, '\\\\'));\n  }\n\n  // Extra external link matching.\n  if (Drupal.settings.extlink.extExclude) {\n    extExclude = new RegExp(Drupal.settings.extlink.extExclude.replace(/\\\\/, '\\\\'));\n  }\n\n  /**\n   * Determine if a url is an external URL\n   * Also utilizes a whitelist and blacklist to override default behavior\n   *\n   * @param string url\n   * @return bool\n   */\n  function urlIsExternal(url){\n    var url = url.toLowerCase();\n\n    // don't bother with links that are not using the http(s) protocol\n    if(url.indexOf('http') !== 0){\n      return false;\n    }\n\n    // if it's an internal link and it's not blacklisted (extInclude means consider it external)\n    if(url.match(internalLink) && !(extInclude && url.match(extInclude))){\n      return false;\n    }\n\n    // if the url is whitelisted (a bit backwards since normally blacklist should override whitelist)\n    if(extExclude && url.match(extExclude)){\n      return false;\n    }\n\n    return true;\n  }\n\n  // when clicking on links which are NOT internal and are using the http protocol\n  // open it in a new tab so the user does not navigate out\n  $context.on('click', 'a', function(e){\n    var $link = $(this),\n        url = this.href; // this will resolve the full url with domain even if the href is just the URI portion\n    if($link.hasClass('s-extlink-direct')){\n      // override behavior with this class\n      return;\n    }\n\n    if(urlIsExternal(url)){\n      e.preventDefault();\n      window.open('/link?path='+encodeURIComponent($link.attr('href')));\n    }\n  });\n}\n\nDrupal.behaviors.extlink = function(context){\n  if( Drupal.settings.extlinkExtras && Drupal.settings.extlinkExtras.disabled )\n    return;\n\n  /*\n    we have to disable this functionality for respondus since external links will not open\n    properly in high security mode. The respondus browser will open external links by default in\n    a new window; further navigation in the new/external window will be blocked.\n   */\n  if(typeof sAppLdbGetSecurityLevel == \"undefined\") {\n    extlinkAttach(context);\n  }\n  else if(typeof sAppLdbGetSecurityLevel != \"undefined\" && sAppLdbGetSecurityLevel() != 'restricted') {\n    extlinkAttach(context);\n  }\n\n  var mailtoClass = sCommonGetSetting('extlink', 'mailtoClass');\n  if(mailtoClass) {\n    $('a:not(.sExtlink-processed)', context).addClass('sExtlink-processed').each(function(){\n      var $link = $(this),\n          href = $link.attr('href') || '';\n      // Apply the \"mailto\" class to all mailto links not containing images.\n      if(href.indexOf('mailto:') === 0 && $link.find('img:first').length === 0){\n        $link.addClass(mailtoClass);\n        if($link.css('display') == 'inline'){\n          $link.after('<span class=' + mailtoClass + '></span>'); \n        }\n      }\n    });\n  }\n}"},function(e,t,n){n(3)(n(84))},function(e,t){e.exports="$(document).ready(function() {\n\n  try {\n    if (browserIsInHighContrastMode()) {\n      $('body').addClass('high-contrast');\n      addClassesToElementsTagged('high-contrast');\n\n      if (shouldBeDark(getHeaderColor())) {\n        assignDarkIcons();\n      }\n    }\n  }\n  catch (ex) {\n    // If an exception occurs while we try to determine the header\n    // color or change the icons, there's nothing more we can do.\n  }\n\n  // Helpers -------------------------------------------------------------------\n  \n  /**\n   * Get the computed styles for the specified DOM element.\n   *\n   * element - The DOM element to inspect.\n   *\n   * Returns an object with the same format as the `element.style` property.\n   * Throws an Error if it can't get the computed style.\n   */\n  function getElementComputedStyle(element) {\n    var style = document.defaultView\n      ? document.defaultView.getComputedStyle(element, null)\n      : element.currentStyle;\n\n    if (!style) {\n      throw new Error(\"Unable to get computed style for element\");\n    }\n\n    return style;\n  }\n\n  /**\n   * Provide a safe scope to run some tests with a test element on the\n   * current page. Ensures that the test element is removed from the\n   * page when the tests complete.\n   *\n   * elementType - The String type of element to create (e.g., 'div').\n   * blockFn     - The Function to perform a test on the element.\n   *               It is passed one parameter, the test element.\n   *               It may optionally return a value; if it does, that\n   *               becomes this function's return value.\n   *\n   * Returns whatever value is returned by blockFn.\n   */\n  function withTestElement(elementType, blockFn) {\n    var element = document.createElement(elementType);\n    document.body.appendChild(element);\n    try {\n      return blockFn(element);\n    }\n    finally {\n      document.body.removeChild(element);\n    }\n  }\n\n  /**\n   * Determines, heuristically, whether or not the user's web browser is\n   * in a high contrast mode, or is overwriting our specified colors in\n   * any way.\n   *\n   * Returns true if it looks like high contrast mode is on, and false if it\n   * doesn't or if we can't determine it conclusively.\n   */\n  function browserIsInHighContrastMode() {\n    var specifiedColor = 'rgb(31,41,59)';\n\n    var actualColor = withTestElement('div', function(element) {\n      element.style.color = specifiedColor;\n      var style = getElementComputedStyle(element);\n      return style.color.replace(/ /g, '');\n    });\n\n    var colorsMatch = (actualColor === specifiedColor);\n    return !colorsMatch;\n  }\n\n  /**\n   * Given an object representing a color in RGB format, decide whether\n   * the text and images on it should be dark or light to be most visible.\n   *\n   * color - The Object representing the color, with three integer\n   *         properties: red, green, and blue.\n   *\n   * Returns a boolean that is true if the text and images on top of the color\n   * should be dark.\n   */\n  function shouldBeDark(color) {\n    var red = color.red,\n      green = color.green,\n      blue = color.blue;\n\n    // This algorithm converts the color into the YIQ color space,\n    // which takes into account how humans perceieve different colors.\n    // this algorithm is defined here:\n    // https://24ways.org/2010/calculating-color-contrast/\n    var yiq = ((red * 299) + (green * 587) + (blue * 114)) / 1000;\n    return yiq >= 128;\n  }\n  /**\n   * Get the background color of the navigation bar on the page.\n   *\n   * Returns a color object representing the color in RGB.\n   */\n  function getHeaderColor() {\n    var headerBar = document.getElementById('header');\n    var styles = getElementComputedStyle(headerBar);\n    return parseRgbString(styles.backgroundColor);\n  }\n\n  /**\n   * Parse a CSS RGB color string, like `rgb(42, 42, 42)`, into its\n   * red, green, and blue color values.\n   *\n   * rgbCssString - The String representing the RGB value.\n   *\n   * Returns the parsed values in a single object if parsing succeeded.\n   * Throws an Error if it is unable to parse the string.\n   */\n  function parseRgbString(rgbCssString) {\n    var regex = /rgb\\(([0-9]{1,3}), ?([0-9]{1,3}), ?([0-9]{1,3})\\)/i;\n    var matches = regex.exec(rgbCssString);\n    if (matches !== null && matches.length === 4) {\n      var values = matches.slice(1);\n      var numbers = values.map(function(str) {\n        return parseInt(str);\n      });\n      var allWithinRange = numbers.every(function(num) {\n        return num >= 0 && num <= 255;\n      });\n      if (allWithinRange) {\n        return {\n          red: numbers[0],\n          green: numbers[1],\n          blue: numbers[2]\n        };\n      }\n    }\n\n    // We couldn't successfully parse the string.\n    throw new Error(\"Unable to parse RGB string: \" + rgbCssString);\n  }\n\n  /**\n   * Iterate over tagged elements, and add relevant class\n   *\n   * Returns undefined\n   */\n  function addClassesToElementsTagged(dataAttributeName) {\n    $(\"[data-\" + dataAttributeName + \"]\").each(function() {\n      var element = $(this);\n      element.addClass(element.data(dataAttributeName));\n    });\n  }\n\n  /**\n   * Apply dark-notification-icon to elements that have data-high-contrast-light\n   *\n   * Returns undefined\n   */\n  function assignDarkIcons() {\n    $('#home img').attr('src', '/sites/all/themes/schoology_theme/images/SGY_Logo_Dark.png');\n    addClassesToElementsTagged('high-contrast-light');\n  }\n\n});"},function(e,t){},,function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){}]);